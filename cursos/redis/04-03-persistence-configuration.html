<!DOCTYPE html>
<html lang="ca">
<head>
    <title> Configuració de la Persistència </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, nofollow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/mod/redis/04-03-persistence-configuration" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/redis/04-03-persistence-configuration" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/redis/04-03-persistence-configuration" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.ea63f62b9e.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "ca";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "redis";
  		var TEMA_NAME = "4-3";
  		var TYPE = "mod";
  		var PATH = "mod/redis/04-03-persistence-configuration";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/mod/redis/04-03-persistence-configuration" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/redis/04-03-persistence-configuration" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Tot el coneixement al teu abast</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objectiu" rel="nofollow">El Projecte</a> | 
<a href="/sobre-nosaltres" rel="nofollow">Sobre nosaltres</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donacions</a> | 
<a href="/llicencia" rel="nofollow">Llicència</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/els-meus-cursos" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Els meus cursos</b></i>
</a>
<a href="/cursos-finalitzats" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalitzats             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="redis">
		<a  href="#" class="text-secondary d-none" data-read-mod="redis" data-read-unit="4-3" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar com a llegit
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="redis" data-unread-unit="4-3" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar com a no llegit
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contingut del curs
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-02-append-only-files-aof' title="Fitxers Només de Afegeix (AOF)" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-02-append-only-files-aof' title="Fitxers Només de Afegeix (AOF)" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Configuració de la Persistència</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='04-04-backup-and-restore' title="Còpia de Seguretat i Restauració" class="py-2 px-3 btn btn-primary"
				data-read-mod="redis" data-read-unit="4-3">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='04-04-backup-and-restore' title="Còpia de Seguretat i Restauració" class="py-2 px-3 btn btn-primary" 
				data-read-mod="redis" data-read-unit="4-3">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com configurar la persistència en Redis per assegurar-nos que les dades es mantinguin segures i disponibles fins i tot després d'un reinici del servidor. Redis ofereix dues maneres principals de persistència: Instantànies (RDB) i Fitxers Només de Afegeix (AOF). També veurem com combinar aquestes dues opcions per obtenir el millor de cada una.</p>
</div><h1><ol>
<li>Instantànies (RDB)</li>
</ol></h1>
<div class='content'></div><h2>Què és RDB?</h2>
<div class='content'><p>RDB (Redis Database Backup) és un mètode de persistència que crea instantànies de la base de dades en intervals de temps específics. Aquestes instantànies es guarden en un fitxer binari que es pot utilitzar per restaurar l'estat de la base de dades.</p>
</div><h2>Configuració de RDB</h2>
<div class='content'><p>La configuració de RDB es fa principalment al fitxer <code>redis.conf</code>. Aquí tens les opcions més importants:</p>
<ul>
<li>
<p><strong>save</strong>: Defineix quan Redis ha de crear una instantània. Per exemple:</p>
<pre><code class="language-plaintext">save 900 1  # Cada 900 segons (15 minuts) si hi ha hagut almenys 1 escriptura
save 300 10 # Cada 300 segons (5 minuts) si hi ha hagut almenys 10 escriptures
save 60 10000 # Cada 60 segons (1 minut) si hi ha hagut almenys 10000 escriptures
</code></pre>
</li>
<li>
<p><strong>dbfilename</strong>: Nom del fitxer on es guardarà la instantània.</p>
<pre><code class="language-plaintext">dbfilename dump.rdb
</code></pre>
</li>
<li>
<p><strong>dir</strong>: Directori on es guardarà el fitxer de la instantània.</p>
<pre><code class="language-plaintext">dir /var/lib/redis
</code></pre>
</li>
</ul>
</div><h2>Exemple de Configuració RDB</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2F2ZSA5MDAgMQpzYXZlIDMwMCAxMApzYXZlIDYwIDEwMDAwCmRiZmlsZW5hbWUgZHVtcC5yZGIKZGlyIC92YXIvbGliL3JlZGlz"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>save 900 1
save 300 10
save 60 10000
dbfilename dump.rdb
dir /var/lib/redis</pre></div><div class='content'></div><h1><ol start="2">
<li>Fitxers Només de Afegeix (AOF)</li>
</ol></h1>
<div class='content'></div><h2>Què és AOF?</h2>
<div class='content'><p>AOF (Append Only File) és un mètode de persistència que registra cada operació d'escriptura que es fa a la base de dades. Aquestes operacions es guarden en un fitxer de registre que es pot reproduir per restaurar l'estat de la base de dades.</p>
</div><h2>Configuració de AOF</h2>
<div class='content'><p>La configuració de AOF també es fa al fitxer <code>redis.conf</code>. Aquí tens les opcions més importants:</p>
<ul>
<li>
<p><strong>appendonly</strong>: Habilita o deshabilita AOF.</p>
<pre><code class="language-plaintext">appendonly yes
</code></pre>
</li>
<li>
<p><strong>appendfilename</strong>: Nom del fitxer on es guardarà el registre AOF.</p>
<pre><code class="language-plaintext">appendfilename &quot;appendonly.aof&quot;
</code></pre>
</li>
<li>
<p><strong>appendfsync</strong>: Defineix quan Redis ha de sincronitzar el fitxer AOF amb el disc. Les opcions són:</p>
<ul>
<li><code>always</code>: Sincronitza després de cada escriptura (més segur però més lent).</li>
<li><code>everysec</code>: Sincronitza cada segon (compromís entre seguretat i rendiment).</li>
<li><code>no</code>: Deixa que el sistema operatiu decideixi quan sincronitzar (més ràpid però menys segur).</li>
</ul>
<pre><code class="language-plaintext">appendfsync everysec
</code></pre>
</li>
</ul>
</div><h2>Exemple de Configuració AOF</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwZW5kb25seSB5ZXMKYXBwZW5kZmlsZW5hbWUgImFwcGVuZG9ubHkuYW9mIgphcHBlbmRmc3luYyBldmVyeXNlYw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>appendonly yes
appendfilename &quot;appendonly.aof&quot;
appendfsync everysec</pre></div><div class='content'></div><h1><ol start="3">
<li>Combinació de RDB i AOF</li>
</ol></h1>
<div class='content'></div><h2>Per què combinar RDB i AOF?</h2>
<div class='content'><p>Combinar RDB i AOF permet obtenir el millor de cada mètode: la rapidesa de les instantànies RDB i la seguretat de les escriptures AOF.</p>
</div><h2>Configuració Recomanada</h2>
<div class='content'><p>Per combinar RDB i AOF, simplement habilita ambdós mètodes al fitxer <code>redis.conf</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb25maWd1cmFjacOzIFJEQgpzYXZlIDkwMCAxCnNhdmUgMzAwIDEwCnNhdmUgNjAgMTAwMDAKZGJmaWxlbmFtZSBkdW1wLnJkYgpkaXIgL3Zhci9saWIvcmVkaXMKCiMgQ29uZmlndXJhY2nDsyBBT0YKYXBwZW5kb25seSB5ZXMKYXBwZW5kZmlsZW5hbWUgImFwcGVuZG9ubHkuYW9mIgphcHBlbmRmc3luYyBldmVyeXNlYw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Configuraci&oacute; RDB
save 900 1
save 300 10
save 60 10000
dbfilename dump.rdb
dir /var/lib/redis

# Configuraci&oacute; AOF
appendonly yes
appendfilename &quot;appendonly.aof&quot;
appendfsync everysec</pre></div><div class='content'></div><h1><ol start="4">
<li>Exercicis Pràctics</li>
</ol></h1>
<div class='content'></div><h2>Exercici 1: Configurar RDB</h2>
<div class='content'><ol>
<li>Obre el fitxer <code>redis.conf</code>.</li>
<li>Configura Redis per crear una instantània cada 5 minuts si hi ha hagut almenys 5 escriptures.</li>
<li>Guarda i reinicia el servidor Redis.</li>
</ol>
</div><h2>Solució Exercici 1</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2F2ZSAzMDAgNQpkYmZpbGVuYW1lIGR1bXAucmRiCmRpciAvdmFyL2xpYi9yZWRpcw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>save 300 5
dbfilename dump.rdb
dir /var/lib/redis</pre></div><div class='content'></div><h2>Exercici 2: Configurar AOF</h2>
<div class='content'><ol>
<li>Obre el fitxer <code>redis.conf</code>.</li>
<li>Habilita AOF i configura'l per sincronitzar cada segon.</li>
<li>Guarda i reinicia el servidor Redis.</li>
</ol>
</div><h2>Solució Exercici 2</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwZW5kb25seSB5ZXMKYXBwZW5kZmlsZW5hbWUgImFwcGVuZG9ubHkuYW9mIgphcHBlbmRmc3luYyBldmVyeXNlYw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>appendonly yes
appendfilename &quot;appendonly.aof&quot;
appendfsync everysec</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>En aquesta secció, hem après com configurar la persistència en Redis utilitzant RDB i AOF. Hem vist com cada mètode té els seus avantatges i desavantatges, i com podem combinar-los per obtenir una solució robusta i eficient. A la següent secció, explorarem com fer còpies de seguretat i restaurar les dades en Redis.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-02-append-only-files-aof' title="Fitxers Només de Afegeix (AOF)" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-02-append-only-files-aof' title="Fitxers Només de Afegeix (AOF)" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='04-04-backup-and-restore' title="Còpia de Seguretat i Restauració" class="py-2 px-3 btn btn-primary"
				data-read-mod="redis" data-read-unit="4-3">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='04-04-backup-and-restore' title="Còpia de Seguretat i Restauració" class="py-2 px-3 btn btn-primary" 
				data-read-mod="redis" data-read-unit="4-3">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curs de Redis</h1>
<h2>Mòdul 1: Introducció a Redis</h2>
<ul>
<li><a href="01-01-what-is-redis">Què és Redis?</a></li>
<li><a href="01-02-installing-redis">Instal·lant Redis</a></li>
<li><a href="01-03-basic-redis-data-types">Tipus de Dades Bàsiques de Redis</a></li>
<li><a href="01-04-redis-cli-basics">Conceptes Bàsics de Redis CLI</a></li>
</ul>
<h2>Mòdul 2: Estructures de Dades de Redis</h2>
<ul>
<li><a href="02-01-strings">Cadenes</a></li>
<li><a href="02-02-lists">Llistes</a></li>
<li><a href="02-03-sets">Conjunts</a></li>
<li><a href="02-04-hashes">Hashs</a></li>
<li><a href="02-05-sorted-sets">Conjunts Ordenats</a></li>
</ul>
<h2>Mòdul 3: Comandes i Operacions de Redis</h2>
<ul>
<li><a href="03-01-basic-commands">Comandes Bàsiques</a></li>
<li><a href="03-02-advanced-commands">Comandes Avançades</a></li>
<li><a href="03-03-transactions">Transaccions</a></li>
<li><a href="03-04-pipelining">Pipelining</a></li>
</ul>
<h2>Mòdul 4: Persistència de Redis</h2>
<ul>
<li><a href="04-01-snapshots-rdb">Instantànies (RDB)</a></li>
<li><a href="04-02-append-only-files-aof">Fitxers Només de Afegeix (AOF)</a></li>
<li><a href="04-03-persistence-configuration">Configuració de la Persistència</a></li>
<li><a href="04-04-backup-and-restore">Còpia de Seguretat i Restauració</a></li>
</ul>
<h2>Mòdul 5: Seguretat de Redis</h2>
<ul>
<li><a href="05-01-authentication">Autenticació</a></li>
<li><a href="05-02-encryption">Encriptació</a></li>
<li><a href="05-03-access-control-lists-acls">Llistes de Control d'Accés (ACLs)</a></li>
<li><a href="05-04-security-best-practices">Millors Pràctiques de Seguretat</a></li>
</ul>
<h2>Mòdul 6: Optimització del Rendiment de Redis</h2>
<ul>
<li><a href="06-01-memory-optimization">Optimització de Memòria</a></li>
<li><a href="06-02-latency-and-throughput">Latència i Rendiment</a></li>
<li><a href="06-03-performance-tuning">Ajust del Rendiment</a></li>
<li><a href="06-04-monitoring-and-metrics">Monitorització i Mètriques</a></li>
</ul>
<h2>Mòdul 7: Clúster i Alta Disponibilitat de Redis</h2>
<ul>
<li><a href="07-01-replication">Replicació</a></li>
<li><a href="07-02-sentinel">Sentinel</a></li>
<li><a href="07-03-cluster-mode">Mode Clúster</a></li>
<li><a href="07-04-scaling-redis">Escalant Redis</a></li>
</ul>
<h2>Mòdul 8: Mòduls i Extensions de Redis</h2>
<ul>
<li><a href="08-01-introduction-to-redis-modules">Introducció als Mòduls de Redis</a></li>
<li><a href="08-02-popular-redis-modules">Mòduls Populars de Redis</a></li>
<li><a href="08-03-creating-custom-modules">Creant Mòduls Personalitzats</a></li>
<li><a href="08-04-using-redis-with-other-technologies">Utilitzant Redis amb Altres Tecnologies</a></li>
</ul>
<h2>Mòdul 9: Usos Avançats de Redis</h2>
<ul>
<li><a href="09-01-caching">Caché</a></li>
<li><a href="09-02-session-storage">Emmagatzematge de Sessions</a></li>
<li><a href="09-03-message-queues">Cues de Missatges</a></li>
<li><a href="09-04-real-time-analytics">Anàlisi en Temps Real</a></li>
</ul>
<h2>Mòdul 10: Redis en Producció</h2>
<ul>
<li><a href="10-01-deployment-strategies">Estratègies de Desplegament</a></li>
<li><a href="10-02-monitoring-and-maintenance">Monitorització i Manteniment</a></li>
<li><a href="10-03-troubleshooting">Resolució de Problemes</a></li>
<li><a href="10-04-case-studies">Estudis de Cas</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objectiu" rel="nofollow">El Projecte</a> | 
<a href="/sobre-nosaltres" rel="nofollow">Sobre nosaltres</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donacions</a> | 
<a href="/llicencia" rel="nofollow">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuari no autentificat</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
