<!DOCTYPE html>
<html lang="ca">
<head>
    <title> Fitxers Només de Afegeix (AOF) </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, nofollow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/redis/04-02-append-only-files-aof" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/redis/04-02-append-only-files-aof" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/redis/04-02-append-only-files-aof" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.188a386f47.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "ca";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "redis";
  		var TEMA_NAME = "4-2";
  		var TYPE = "mod";
  		var PATH = "mod/redis/04-02-append-only-files-aof";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo_header.png" alt="Logo Campus Empresa"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/courses/redis/04-02-append-only-files-aof" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/cursos/redis/04-02-append-only-files-aof" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Tot el coneixement al teu abast</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objectiu" rel="nofollow">El Projecte</a> | 
<a href="/sobre-nosaltres" rel="nofollow">Sobre nosaltres</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donacions</a> | 
<a href="/llicencia" rel="nofollow">Llicència</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/els-meus-cursos" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Els meus cursos</b></i>
</a>
<a href="/cursos-finalitzats" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalitzats             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="redis">
		<a  href="#" class="text-secondary d-none" data-read-mod="redis" data-read-unit="4-2" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar com a llegit
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="redis" data-unread-unit="4-2" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar com a no llegit
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contingut del curs
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-01-snapshots-rdb' title="Instantànies (RDB)" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-01-snapshots-rdb' title="Instantànies (RDB)" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Fitxers Només de Afegeix (AOF)</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='04-03-persistence-configuration' title="Configuració de la Persistència" class="py-2 px-3 btn btn-primary"
				data-read-mod="redis" data-read-unit="4-2">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='04-03-persistence-configuration' title="Configuració de la Persistència" class="py-2 px-3 btn btn-primary" 
				data-read-mod="redis" data-read-unit="4-2">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Els Fitxers Només de Afegeix (AOF) són una de les dues maneres principals que Redis utilitza per persistir les dades a disc. AOF proporciona una manera més segura i flexible de garantir que les dades no es perdin en cas de fallada del sistema.</p>
</div><h2>Què és AOF?</h2>
<div class='content'><p>AOF és un mètode de persistència que registra cada operació d'escriptura que es realitza en la base de dades. Aquestes operacions s'emmagatzemen en un fitxer de registre que es pot reproduir per reconstruir l'estat de la base de dades en cas de reinici.</p>
</div><h3>Avantatges de l'AOF</h3>
<div class='content'><ul>
<li><strong>Durabilitat</strong>: AOF pot ser configurat per sincronitzar les dades amb el disc després de cada operació, minimitzant la pèrdua de dades.</li>
<li><strong>Reproducció</strong>: El fitxer AOF pot ser reproduït per reconstruir l'estat de la base de dades.</li>
<li><strong>Compactació</strong>: Redis pot reescriure el fitxer AOF per compactar-lo i reduir la seva mida.</li>
</ul>
</div><h3>Desavantatges de l'AOF</h3>
<div class='content'><ul>
<li><strong>Rendiment</strong>: Pot ser més lent que RDB (instantànies) perquè cada operació d'escriptura ha de ser registrada.</li>
<li><strong>Mida del fitxer</strong>: El fitxer AOF pot créixer ràpidament, especialment en bases de dades amb moltes operacions d'escriptura.</li>
</ul>
</div><h2>Configuració de l'AOF</h2>
<div class='content'><p>Per activar l'AOF, cal modificar el fitxer de configuració de Redis (<code>redis.conf</code>). Aquí tens els passos bàsics:</p>
<ol>
<li>
<p><strong>Activar l'AOF</strong>:</p>
<pre><code class="language-plaintext">appendonly yes
</code></pre>
</li>
<li>
<p><strong>Configurar la freqüència de sincronització</strong>:</p>
<pre><code class="language-plaintext"># Sincronitza cada segon (compromís entre rendiment i durabilitat)
appendfsync everysec

# Sincronitza després de cada operació d'escriptura (màxima durabilitat, menor rendiment)
appendfsync always

# No sincronitza automàticament (delega la sincronització al sistema operatiu)
appendfsync no
</code></pre>
</li>
<li>
<p><strong>Reescriptura automàtica de l'AOF</strong>:</p>
<pre><code class="language-plaintext">auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb
</code></pre>
</li>
</ol>
</div><h2>Exemple Pràctic</h2>
<div class='content'></div><h3>Activar l'AOF</h3>
<div class='content'><ol>
<li>Obre el fitxer de configuració de Redis (<code>redis.conf</code>).</li>
<li>Cerca la línia <code>appendonly no</code> i canvia-la a <code>appendonly yes</code>.</li>
<li>Configura la freqüència de sincronització segons les teves necessitats. Per exemple:
<pre><code class="language-plaintext">appendfsync everysec
</code></pre>
</li>
</ol>
</div><h3>Reescriptura de l'AOF</h3>
<div class='content'><p>Redis pot reescriure l'AOF per compactar-lo i millorar el rendiment. Això es fa automàticament quan el fitxer AOF creix més del doble de la mida de l'última reescriptura i és més gran que 64MB (configurable).</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXV0by1hb2YtcmV3cml0ZS1wZXJjZW50YWdlIDEwMAphdXRvLWFvZi1yZXdyaXRlLW1pbi1zaXplIDY0bWI="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb</pre></div><div class='content'></div><h3>Comandes Relacionades amb l'AOF</h3>
<div class='content'><ul>
<li>
<p><strong>BGREWRITEAOF</strong>: Inicia una reescriptura de l'AOF en segon pla.</p>
<pre><code class="language-plaintext">BGRWRITEAOF
</code></pre>
</li>
<li>
<p><strong>AOFSYNC</strong>: Sincronitza manualment l'AOF amb el disc.</p>
<pre><code class="language-plaintext">AOFSYNC
</code></pre>
</li>
</ul>
</div><h2>Exercici Pràctic</h2>
<div class='content'></div><h3>Exercici 1: Activar i Configurar l'AOF</h3>
<div class='content'><ol>
<li>Activa l'AOF en el fitxer de configuració de Redis (<code>redis.conf</code>).</li>
<li>Configura la sincronització perquè es realitzi cada segon.</li>
<li>Reinicia el servidor Redis per aplicar els canvis.</li>
</ol>
</div><h3>Solució</h3>
<div class='content'><ol>
<li>
<p>Obre <code>redis.conf</code> i modifica les següents línies:</p>
<pre><code class="language-plaintext">appendonly yes
appendfsync everysec
</code></pre>
</li>
<li>
<p>Reinicia el servidor Redis:</p>
<pre><code class="language-bash">redis-server /path/to/redis.conf
</code></pre>
</li>
</ol>
</div><h3>Exercici 2: Reescriptura Manual de l'AOF</h3>
<div class='content'><ol>
<li>Inicia una reescriptura de l'AOF en segon pla utilitzant la comanda <code>BGREWRITEAOF</code>.</li>
<li>Verifica que la reescriptura s'ha completat correctament.</li>
</ol>
</div><h3>Solució</h3>
<div class='content'><ol>
<li>
<p>Executa la comanda <code>BGREWRITEAOF</code> en la CLI de Redis:</p>
<pre><code class="language-plaintext">BGREWRITEAOF
</code></pre>
</li>
<li>
<p>Verifica l'estat de la reescriptura:</p>
<pre><code class="language-plaintext">INFO persistence
</code></pre>
</li>
</ol>
</div><h2>Conclusió</h2>
<div class='content'><p>Els Fitxers Només de Afegeix (AOF) són una eina poderosa per garantir la durabilitat de les dades en Redis. Tot i que poden tenir un impacte en el rendiment, ofereixen una major seguretat en termes de pèrdua de dades. La configuració adequada de l'AOF permet trobar un equilibri entre rendiment i durabilitat, adaptant-se a les necessitats específiques de cada aplicació.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-01-snapshots-rdb' title="Instantànies (RDB)" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-01-snapshots-rdb' title="Instantànies (RDB)" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='04-03-persistence-configuration' title="Configuració de la Persistència" class="py-2 px-3 btn btn-primary"
				data-read-mod="redis" data-read-unit="4-2">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='04-03-persistence-configuration' title="Configuració de la Persistència" class="py-2 px-3 btn btn-primary" 
				data-read-mod="redis" data-read-unit="4-2">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curs de Redis</h1>
<h2>Mòdul 1: Introducció a Redis</h2>
<ul>
<li><a href="01-01-what-is-redis">Què és Redis?</a></li>
<li><a href="01-02-installing-redis">Instal·lant Redis</a></li>
<li><a href="01-03-basic-redis-data-types">Tipus de Dades Bàsiques de Redis</a></li>
<li><a href="01-04-redis-cli-basics">Conceptes Bàsics de Redis CLI</a></li>
</ul>
<h2>Mòdul 2: Estructures de Dades de Redis</h2>
<ul>
<li><a href="02-01-strings">Cadenes</a></li>
<li><a href="02-02-lists">Llistes</a></li>
<li><a href="02-03-sets">Conjunts</a></li>
<li><a href="02-04-hashes">Hashs</a></li>
<li><a href="02-05-sorted-sets">Conjunts Ordenats</a></li>
</ul>
<h2>Mòdul 3: Comandes i Operacions de Redis</h2>
<ul>
<li><a href="03-01-basic-commands">Comandes Bàsiques</a></li>
<li><a href="03-02-advanced-commands">Comandes Avançades</a></li>
<li><a href="03-03-transactions">Transaccions</a></li>
<li><a href="03-04-pipelining">Pipelining</a></li>
</ul>
<h2>Mòdul 4: Persistència de Redis</h2>
<ul>
<li><a href="04-01-snapshots-rdb">Instantànies (RDB)</a></li>
<li><a href="04-02-append-only-files-aof">Fitxers Només de Afegeix (AOF)</a></li>
<li><a href="04-03-persistence-configuration">Configuració de la Persistència</a></li>
<li><a href="04-04-backup-and-restore">Còpia de Seguretat i Restauració</a></li>
</ul>
<h2>Mòdul 5: Seguretat de Redis</h2>
<ul>
<li><a href="05-01-authentication">Autenticació</a></li>
<li><a href="05-02-encryption">Encriptació</a></li>
<li><a href="05-03-access-control-lists-acls">Llistes de Control d'Accés (ACLs)</a></li>
<li><a href="05-04-security-best-practices">Millors Pràctiques de Seguretat</a></li>
</ul>
<h2>Mòdul 6: Optimització del Rendiment de Redis</h2>
<ul>
<li><a href="06-01-memory-optimization">Optimització de Memòria</a></li>
<li><a href="06-02-latency-and-throughput">Latència i Rendiment</a></li>
<li><a href="06-03-performance-tuning">Ajust del Rendiment</a></li>
<li><a href="06-04-monitoring-and-metrics">Monitorització i Mètriques</a></li>
</ul>
<h2>Mòdul 7: Clúster i Alta Disponibilitat de Redis</h2>
<ul>
<li><a href="07-01-replication">Replicació</a></li>
<li><a href="07-02-sentinel">Sentinel</a></li>
<li><a href="07-03-cluster-mode">Mode Clúster</a></li>
<li><a href="07-04-scaling-redis">Escalant Redis</a></li>
</ul>
<h2>Mòdul 8: Mòduls i Extensions de Redis</h2>
<ul>
<li><a href="08-01-introduction-to-redis-modules">Introducció als Mòduls de Redis</a></li>
<li><a href="08-02-popular-redis-modules">Mòduls Populars de Redis</a></li>
<li><a href="08-03-creating-custom-modules">Creant Mòduls Personalitzats</a></li>
<li><a href="08-04-using-redis-with-other-technologies">Utilitzant Redis amb Altres Tecnologies</a></li>
</ul>
<h2>Mòdul 9: Usos Avançats de Redis</h2>
<ul>
<li><a href="09-01-caching">Caché</a></li>
<li><a href="09-02-session-storage">Emmagatzematge de Sessions</a></li>
<li><a href="09-03-message-queues">Cues de Missatges</a></li>
<li><a href="09-04-real-time-analytics">Anàlisi en Temps Real</a></li>
</ul>
<h2>Mòdul 10: Redis en Producció</h2>
<ul>
<li><a href="10-01-deployment-strategies">Estratègies de Desplegament</a></li>
<li><a href="10-02-monitoring-and-maintenance">Monitorització i Manteniment</a></li>
<li><a href="10-03-troubleshooting">Resolució de Problemes</a></li>
<li><a href="10-04-case-studies">Estudis de Cas</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objectiu" rel="nofollow">El Projecte</a> | 
<a href="/sobre-nosaltres" rel="nofollow">Sobre nosaltres</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donacions</a> | 
<a href="/llicencia" rel="nofollow">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuari no autentificat</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
