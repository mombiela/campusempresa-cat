<!DOCTYPE html>
<html lang="ca">
<head>
    <title> Mocking i Stubbing </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, nofollow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/groovy/06-02-mocking-stubbing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/groovy/06-02-mocking-stubbing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/groovy/06-02-mocking-stubbing" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.188a386f47.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "ca";
  		var CATEGORY = "languages";
  		var MOD_NAME = "groovy";
  		var TEMA_NAME = "6-2";
  		var TYPE = "mod";
  		var PATH = "mod/groovy/06-02-mocking-stubbing";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo_header.png" alt="Logo Campus Empresa"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/courses/groovy/06-02-mocking-stubbing" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/cursos/groovy/06-02-mocking-stubbing" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Tot el coneixement al teu abast</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objectiu" rel="nofollow">El Projecte</a> | 
<a href="/sobre-nosaltres" rel="nofollow">Sobre nosaltres</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donacions</a> | 
<a href="/llicencia" rel="nofollow">Llicència</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/els-meus-cursos" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Els meus cursos</b></i>
</a>
<a href="/cursos-finalitzats" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalitzats             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="groovy">
		<a  href="#" class="text-secondary d-none" data-read-mod="groovy" data-read-unit="6-2" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar com a llegit
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="groovy" data-unread-unit="6-2" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar com a no llegit
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contingut del curs
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='06-01-unit-testing' title="Proves Unitàries amb Groovy" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='06-01-unit-testing' title="Proves Unitàries amb Groovy" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Mocking i Stubbing</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='06-03-debugging' title="Depuració de Codi Groovy" class="py-2 px-3 btn btn-primary"
				data-read-mod="groovy" data-read-unit="6-2">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='06-03-debugging' title="Depuració de Codi Groovy" class="py-2 px-3 btn btn-primary" 
				data-read-mod="groovy" data-read-unit="6-2">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem sobre les tècniques de mocking i stubbing en Groovy, que són essencials per a la realització de proves unitàries eficients i efectives. Aquestes tècniques ens permeten simular el comportament de components dependents per tal de provar el nostre codi de manera aïllada.</p>
</div><h2>Què és Mocking?</h2>
<div class='content'><p>Mocking és una tècnica utilitzada en les proves unitàries per crear objectes simulats que imiten el comportament dels objectes reals. Aquests objectes simulats, anomenats mocks, ens permeten definir el comportament esperat i verificar les interaccions amb altres components.</p>
</div><h3>Avantatges del Mocking</h3>
<div class='content'><ul>
<li><strong>Aïllament</strong>: Permet provar una unitat de codi sense dependre d'altres components.</li>
<li><strong>Control</strong>: Ens permet definir el comportament dels mocks per a diferents escenaris.</li>
<li><strong>Verificació</strong>: Podem verificar que les interaccions amb els mocks es realitzen correctament.</li>
</ul>
</div><h2>Què és Stubbing?</h2>
<div class='content'><p>Stubbing és una tècnica similar al mocking, però se centra en proporcionar respostes predefinides a les crides de mètodes. Els stubs són objectes simulats que retornen valors específics quan es criden els seus mètodes.</p>
</div><h3>Avantatges del Stubbing</h3>
<div class='content'><ul>
<li><strong>Simplicitat</strong>: Permet definir respostes senzilles per a les crides de mètodes.</li>
<li><strong>Determinisme</strong>: Ens assegura que les proves són deterministes, ja que les respostes són predefinides.</li>
</ul>
</div><h2>Eines de Mocking i Stubbing en Groovy</h2>
<div class='content'><p>Groovy ofereix diverses eines per a mocking i stubbing, sent les més populars:</p>
<ul>
<li><strong>Mockito</strong>: Una llibreria de mocking per a Java que també es pot utilitzar en Groovy.</li>
<li><strong>Spock</strong>: Un framework de proves per a Groovy que inclou suport integrat per a mocking i stubbing.</li>
</ul>
</div><h3>Exemple amb Mockito</h3>
<div class='content'><p>A continuació, veurem un exemple de com utilitzar Mockito per crear mocks i stubs en Groovy.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW1wb3J0ZW0gbGVzIGNsYXNzZXMgbmVjZXNzw6ByaWVzCmltcG9ydCBzdGF0aWMgb3JnLm1vY2tpdG8uTW9ja2l0by4qCmltcG9ydCBvcmcuanVuaXQuVGVzdAoKY2xhc3MgVXNlclNlcnZpY2VUZXN0IHsKCiAgICBAVGVzdAogICAgdm9pZCB0ZXN0R2V0VXNlcigpIHsKICAgICAgICAvLyBDcmVlbSB1biBtb2NrIGRlIGxhIGNsYXNzZSBVc2VyUmVwb3NpdG9yeQogICAgICAgIFVzZXJSZXBvc2l0b3J5IG1vY2tSZXBvc2l0b3J5ID0gbW9jayhVc2VyUmVwb3NpdG9yeS5jbGFzcykKCiAgICAgICAgLy8gRGVmaW5pbSBlbCBjb21wb3J0YW1lbnQgZGVsIG1vY2sgKHN0dWJiaW5nKQogICAgICAgIHdoZW4obW9ja1JlcG9zaXRvcnkuZmluZFVzZXJCeUlkKDEpKS50aGVuUmV0dXJuKG5ldyBVc2VyKGlkOiAxLCBuYW1lOiAiSm9obiBEb2UiKSkKCiAgICAgICAgLy8gQ3JlZW0gdW5hIGluc3TDoG5jaWEgZGUgbGEgY2xhc3NlIHF1ZSB2b2xlbSBwcm92YXIKICAgICAgICBVc2VyU2VydmljZSB1c2VyU2VydmljZSA9IG5ldyBVc2VyU2VydmljZSh1c2VyUmVwb3NpdG9yeTogbW9ja1JlcG9zaXRvcnkpCgogICAgICAgIC8vIENyaWRlbSBlbCBtw6h0b2RlIHF1ZSB2b2xlbSBwcm92YXIKICAgICAgICBVc2VyIHVzZXIgPSB1c2VyU2VydmljZS5nZXRVc2VyKDEpCgogICAgICAgIC8vIFZlcmlmaXF1ZW0gZWwgcmVzdWx0YXQKICAgICAgICBhc3NlcnQgdXNlci5uYW1lID09ICJKb2huIERvZSIKCiAgICAgICAgLy8gVmVyaWZpcXVlbSBxdWUgZWwgbcOodG9kZSBmaW5kVXNlckJ5SWQgZXMgdmEgY3JpZGFyIHVuYSB2ZWdhZGEgYW1iIGVsIHBhcsOgbWV0cmUgMQogICAgICAgIHZlcmlmeShtb2NrUmVwb3NpdG9yeSwgdGltZXMoMSkpLmZpbmRVc2VyQnlJZCgxKQogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Importem les classes necess&agrave;ries
import static org.mockito.Mockito.*
import org.junit.Test

class UserServiceTest {

    @Test
    void testGetUser() {
        // Creem un mock de la classe UserRepository
        UserRepository mockRepository = mock(UserRepository.class)

        // Definim el comportament del mock (stubbing)
        when(mockRepository.findUserById(1)).thenReturn(new User(id: 1, name: &quot;John Doe&quot;))

        // Creem una inst&agrave;ncia de la classe que volem provar
        UserService userService = new UserService(userRepository: mockRepository)

        // Cridem el m&egrave;tode que volem provar
        User user = userService.getUser(1)

        // Verifiquem el resultat
        assert user.name == &quot;John Doe&quot;

        // Verifiquem que el m&egrave;tode findUserById es va cridar una vegada amb el par&agrave;metre 1
        verify(mockRepository, times(1)).findUserById(1)
    }
}</pre></div><div class='content'></div><h3>Exemple amb Spock</h3>
<div class='content'><p>A continuació, veurem un exemple de com utilitzar Spock per crear mocks i stubs en Groovy.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHNwb2NrLmxhbmcuU3BlY2lmaWNhdGlvbgoKY2xhc3MgVXNlclNlcnZpY2VTcGVjIGV4dGVuZHMgU3BlY2lmaWNhdGlvbiB7CgogICAgZGVmICJ0ZXN0IGdldFVzZXIiKCkgewogICAgICAgIGdpdmVuOgogICAgICAgIC8vIENyZWVtIHVuIG1vY2sgZGUgbGEgY2xhc3NlIFVzZXJSZXBvc2l0b3J5CiAgICAgICAgVXNlclJlcG9zaXRvcnkgbW9ja1JlcG9zaXRvcnkgPSBNb2NrKFVzZXJSZXBvc2l0b3J5KQoKICAgICAgICAvLyBEZWZpbmltIGVsIGNvbXBvcnRhbWVudCBkZWwgbW9jayAoc3R1YmJpbmcpCiAgICAgICAgbW9ja1JlcG9zaXRvcnkuZmluZFVzZXJCeUlkKDEpID4+IG5ldyBVc2VyKGlkOiAxLCBuYW1lOiAiSm9obiBEb2UiKQoKICAgICAgICAvLyBDcmVlbSB1bmEgaW5zdMOgbmNpYSBkZSBsYSBjbGFzc2UgcXVlIHZvbGVtIHByb3ZhcgogICAgICAgIFVzZXJTZXJ2aWNlIHVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKHVzZXJSZXBvc2l0b3J5OiBtb2NrUmVwb3NpdG9yeSkKCiAgICAgICAgd2hlbjoKICAgICAgICAvLyBDcmlkZW0gZWwgbcOodG9kZSBxdWUgdm9sZW0gcHJvdmFyCiAgICAgICAgVXNlciB1c2VyID0gdXNlclNlcnZpY2UuZ2V0VXNlcigxKQoKICAgICAgICB0aGVuOgogICAgICAgIC8vIFZlcmlmaXF1ZW0gZWwgcmVzdWx0YXQKICAgICAgICB1c2VyLm5hbWUgPT0gIkpvaG4gRG9lIgoKICAgICAgICAvLyBWZXJpZmlxdWVtIHF1ZSBlbCBtw6h0b2RlIGZpbmRVc2VyQnlJZCBlcyB2YSBjcmlkYXIgdW5hIHZlZ2FkYSBhbWIgZWwgcGFyw6BtZXRyZSAxCiAgICAgICAgMSAqIG1vY2tSZXBvc2l0b3J5LmZpbmRVc2VyQnlJZCgxKQogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import spock.lang.Specification

class UserServiceSpec extends Specification {

    def &quot;test getUser&quot;() {
        given:
        // Creem un mock de la classe UserRepository
        UserRepository mockRepository = Mock(UserRepository)

        // Definim el comportament del mock (stubbing)
        mockRepository.findUserById(1) &gt;&gt; new User(id: 1, name: &quot;John Doe&quot;)

        // Creem una inst&agrave;ncia de la classe que volem provar
        UserService userService = new UserService(userRepository: mockRepository)

        when:
        // Cridem el m&egrave;tode que volem provar
        User user = userService.getUser(1)

        then:
        // Verifiquem el resultat
        user.name == &quot;John Doe&quot;

        // Verifiquem que el m&egrave;tode findUserById es va cridar una vegada amb el par&agrave;metre 1
        1 * mockRepository.findUserById(1)
    }
}</pre></div><div class='content'></div><h2>Exercicis Pràctics</h2>
<div class='content'></div><h3>Exercici 1: Mocking amb Mockito</h3>
<div class='content'><ol>
<li>Crea una classe <code>OrderService</code> amb un mètode <code>placeOrder</code> que depengui d'una classe <code>PaymentService</code>.</li>
<li>Utilitza Mockito per crear un mock de <code>PaymentService</code> i defineix el comportament del mètode <code>processPayment</code>.</li>
<li>Prova el mètode <code>placeOrder</code> de <code>OrderService</code> utilitzant el mock de <code>PaymentService</code>.</li>
</ol>
</div><h3>Solució</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgUGF5bWVudFNlcnZpY2UgewogICAgYm9vbGVhbiBwcm9jZXNzUGF5bWVudChkb3VibGUgYW1vdW50KSB7CiAgICAgICAgLy8gSW1wbGVtZW50YWNpw7MgcmVhbAogICAgfQp9CgpjbGFzcyBPcmRlclNlcnZpY2UgewogICAgUGF5bWVudFNlcnZpY2UgcGF5bWVudFNlcnZpY2UKCiAgICBib29sZWFuIHBsYWNlT3JkZXIoZG91YmxlIGFtb3VudCkgewogICAgICAgIHJldHVybiBwYXltZW50U2VydmljZS5wcm9jZXNzUGF5bWVudChhbW91bnQpCiAgICB9Cn0KCmltcG9ydCBzdGF0aWMgb3JnLm1vY2tpdG8uTW9ja2l0by4qCmltcG9ydCBvcmcuanVuaXQuVGVzdAoKY2xhc3MgT3JkZXJTZXJ2aWNlVGVzdCB7CgogICAgQFRlc3QKICAgIHZvaWQgdGVzdFBsYWNlT3JkZXIoKSB7CiAgICAgICAgLy8gQ3JlZW0gdW4gbW9jayBkZSBsYSBjbGFzc2UgUGF5bWVudFNlcnZpY2UKICAgICAgICBQYXltZW50U2VydmljZSBtb2NrUGF5bWVudFNlcnZpY2UgPSBtb2NrKFBheW1lbnRTZXJ2aWNlLmNsYXNzKQoKICAgICAgICAvLyBEZWZpbmltIGVsIGNvbXBvcnRhbWVudCBkZWwgbW9jayAoc3R1YmJpbmcpCiAgICAgICAgd2hlbihtb2NrUGF5bWVudFNlcnZpY2UucHJvY2Vzc1BheW1lbnQoMTAwLjApKS50aGVuUmV0dXJuKHRydWUpCgogICAgICAgIC8vIENyZWVtIHVuYSBpbnN0w6BuY2lhIGRlIGxhIGNsYXNzZSBxdWUgdm9sZW0gcHJvdmFyCiAgICAgICAgT3JkZXJTZXJ2aWNlIG9yZGVyU2VydmljZSA9IG5ldyBPcmRlclNlcnZpY2UocGF5bWVudFNlcnZpY2U6IG1vY2tQYXltZW50U2VydmljZSkKCiAgICAgICAgLy8gQ3JpZGVtIGVsIG3DqHRvZGUgcXVlIHZvbGVtIHByb3ZhcgogICAgICAgIGJvb2xlYW4gcmVzdWx0ID0gb3JkZXJTZXJ2aWNlLnBsYWNlT3JkZXIoMTAwLjApCgogICAgICAgIC8vIFZlcmlmaXF1ZW0gZWwgcmVzdWx0YXQKICAgICAgICBhc3NlcnQgcmVzdWx0ID09IHRydWUKCiAgICAgICAgLy8gVmVyaWZpcXVlbSBxdWUgZWwgbcOodG9kZSBwcm9jZXNzUGF5bWVudCBlcyB2YSBjcmlkYXIgdW5hIHZlZ2FkYSBhbWIgZWwgcGFyw6BtZXRyZSAxMDAuMAogICAgICAgIHZlcmlmeShtb2NrUGF5bWVudFNlcnZpY2UsIHRpbWVzKDEpKS5wcm9jZXNzUGF5bWVudCgxMDAuMCkKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class PaymentService {
    boolean processPayment(double amount) {
        // Implementaci&oacute; real
    }
}

class OrderService {
    PaymentService paymentService

    boolean placeOrder(double amount) {
        return paymentService.processPayment(amount)
    }
}

import static org.mockito.Mockito.*
import org.junit.Test

class OrderServiceTest {

    @Test
    void testPlaceOrder() {
        // Creem un mock de la classe PaymentService
        PaymentService mockPaymentService = mock(PaymentService.class)

        // Definim el comportament del mock (stubbing)
        when(mockPaymentService.processPayment(100.0)).thenReturn(true)

        // Creem una inst&agrave;ncia de la classe que volem provar
        OrderService orderService = new OrderService(paymentService: mockPaymentService)

        // Cridem el m&egrave;tode que volem provar
        boolean result = orderService.placeOrder(100.0)

        // Verifiquem el resultat
        assert result == true

        // Verifiquem que el m&egrave;tode processPayment es va cridar una vegada amb el par&agrave;metre 100.0
        verify(mockPaymentService, times(1)).processPayment(100.0)
    }
}</pre></div><div class='content'></div><h3>Exercici 2: Mocking amb Spock</h3>
<div class='content'><ol>
<li>Crea una classe <code>InventoryService</code> amb un mètode <code>checkStock</code> que depengui d'una classe <code>Warehouse</code>.</li>
<li>Utilitza Spock per crear un mock de <code>Warehouse</code> i defineix el comportament del mètode <code>getStock</code>.</li>
<li>Prova el mètode <code>checkStock</code> de <code>InventoryService</code> utilitzant el mock de <code>Warehouse</code>.</li>
</ol>
</div><h3>Solució</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgV2FyZWhvdXNlIHsKICAgIGludCBnZXRTdG9jayhTdHJpbmcgaXRlbSkgewogICAgICAgIC8vIEltcGxlbWVudGFjacOzIHJlYWwKICAgIH0KfQoKY2xhc3MgSW52ZW50b3J5U2VydmljZSB7CiAgICBXYXJlaG91c2Ugd2FyZWhvdXNlCgogICAgYm9vbGVhbiBjaGVja1N0b2NrKFN0cmluZyBpdGVtLCBpbnQgcmVxdWlyZWRRdWFudGl0eSkgewogICAgICAgIHJldHVybiB3YXJlaG91c2UuZ2V0U3RvY2soaXRlbSkgPj0gcmVxdWlyZWRRdWFudGl0eQogICAgfQp9CgppbXBvcnQgc3BvY2subGFuZy5TcGVjaWZpY2F0aW9uCgpjbGFzcyBJbnZlbnRvcnlTZXJ2aWNlU3BlYyBleHRlbmRzIFNwZWNpZmljYXRpb24gewoKICAgIGRlZiAidGVzdCBjaGVja1N0b2NrIigpIHsKICAgICAgICBnaXZlbjoKICAgICAgICAvLyBDcmVlbSB1biBtb2NrIGRlIGxhIGNsYXNzZSBXYXJlaG91c2UKICAgICAgICBXYXJlaG91c2UgbW9ja1dhcmVob3VzZSA9IE1vY2soV2FyZWhvdXNlKQoKICAgICAgICAvLyBEZWZpbmltIGVsIGNvbXBvcnRhbWVudCBkZWwgbW9jayAoc3R1YmJpbmcpCiAgICAgICAgbW9ja1dhcmVob3VzZS5nZXRTdG9jaygiaXRlbTEiKSA+PiAxMAoKICAgICAgICAvLyBDcmVlbSB1bmEgaW5zdMOgbmNpYSBkZSBsYSBjbGFzc2UgcXVlIHZvbGVtIHByb3ZhcgogICAgICAgIEludmVudG9yeVNlcnZpY2UgaW52ZW50b3J5U2VydmljZSA9IG5ldyBJbnZlbnRvcnlTZXJ2aWNlKHdhcmVob3VzZTogbW9ja1dhcmVob3VzZSkKCiAgICAgICAgd2hlbjoKICAgICAgICAvLyBDcmlkZW0gZWwgbcOodG9kZSBxdWUgdm9sZW0gcHJvdmFyCiAgICAgICAgYm9vbGVhbiByZXN1bHQgPSBpbnZlbnRvcnlTZXJ2aWNlLmNoZWNrU3RvY2soIml0ZW0xIiwgNSkKCiAgICAgICAgdGhlbjoKICAgICAgICAvLyBWZXJpZmlxdWVtIGVsIHJlc3VsdGF0CiAgICAgICAgcmVzdWx0ID09IHRydWUKCiAgICAgICAgLy8gVmVyaWZpcXVlbSBxdWUgZWwgbcOodG9kZSBnZXRTdG9jayBlcyB2YSBjcmlkYXIgdW5hIHZlZ2FkYSBhbWIgZWwgcGFyw6BtZXRyZSAiaXRlbTEiCiAgICAgICAgMSAqIG1vY2tXYXJlaG91c2UuZ2V0U3RvY2soIml0ZW0xIikKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Warehouse {
    int getStock(String item) {
        // Implementaci&oacute; real
    }
}

class InventoryService {
    Warehouse warehouse

    boolean checkStock(String item, int requiredQuantity) {
        return warehouse.getStock(item) &gt;= requiredQuantity
    }
}

import spock.lang.Specification

class InventoryServiceSpec extends Specification {

    def &quot;test checkStock&quot;() {
        given:
        // Creem un mock de la classe Warehouse
        Warehouse mockWarehouse = Mock(Warehouse)

        // Definim el comportament del mock (stubbing)
        mockWarehouse.getStock(&quot;item1&quot;) &gt;&gt; 10

        // Creem una inst&agrave;ncia de la classe que volem provar
        InventoryService inventoryService = new InventoryService(warehouse: mockWarehouse)

        when:
        // Cridem el m&egrave;tode que volem provar
        boolean result = inventoryService.checkStock(&quot;item1&quot;, 5)

        then:
        // Verifiquem el resultat
        result == true

        // Verifiquem que el m&egrave;tode getStock es va cridar una vegada amb el par&agrave;metre &quot;item1&quot;
        1 * mockWarehouse.getStock(&quot;item1&quot;)
    }
}</pre></div><div class='content'></div><h2>Conclusió</h2>
<div class='content'><p>En aquest tema, hem après sobre les tècniques de mocking i stubbing en Groovy, així com les eines disponibles per implementar-les. Hem vist exemples pràctics utilitzant Mockito i Spock, i hem realitzat exercicis per reforçar els conceptes apresos. Aquestes tècniques són essencials per a la realització de proves unitàries efectives, ja que ens permeten aïllar el codi que volem provar i controlar el comportament dels components dependents.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='06-01-unit-testing' title="Proves Unitàries amb Groovy" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='06-01-unit-testing' title="Proves Unitàries amb Groovy" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='06-03-debugging' title="Depuració de Codi Groovy" class="py-2 px-3 btn btn-primary"
				data-read-mod="groovy" data-read-unit="6-2">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='06-03-debugging' title="Depuració de Codi Groovy" class="py-2 px-3 btn btn-primary" 
				data-read-mod="groovy" data-read-unit="6-2">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curs de Programació Groovy</h1>
<h2>Mòdul 1: Introducció a Groovy</h2>
<ul>
<li><a href="01-01-what-is-groovy">Què és Groovy?</a></li>
<li><a href="01-02-setting-up-environment">Configuració de l'Entorn</a></li>
<li><a href="01-03-groovy-basics">Conceptes Bàsics de Groovy</a></li>
<li><a href="01-04-first-groovy-script">Primer Script en Groovy</a></li>
</ul>
<h2>Mòdul 2: Sintaxi i Característiques del Llenguatge Groovy</h2>
<ul>
<li><a href="02-01-variables-data-types">Variables i Tipus de Dades</a></li>
<li><a href="02-02-operators">Operadors</a></li>
<li><a href="02-03-control-structures">Estructures de Control</a></li>
<li><a href="02-04-collections">Collections</a></li>
<li><a href="02-05-closures">Closures</a></li>
</ul>
<h2>Mòdul 3: Programació Orientada a Objectes en Groovy</h2>
<ul>
<li><a href="03-01-classes-objects">Classes i Objectes</a></li>
<li><a href="03-02-inheritance">Herència</a></li>
<li><a href="03-03-interfaces-traits">Interfícies i Traits</a></li>
<li><a href="03-04-polymorphism">Polimorfisme</a></li>
<li><a href="03-05-encapsulation">Encapsulació</a></li>
</ul>
<h2>Mòdul 4: Característiques Avançades de Groovy</h2>
<ul>
<li><a href="04-01-metaprogramming">Metaprogramació</a></li>
<li><a href="04-02-ast-transformations">Transformacions AST</a></li>
<li><a href="04-03-dsls-in-groovy">DSLs en Groovy</a></li>
<li><a href="04-04-groovy-java-integration">Integració Groovy i Java</a></li>
</ul>
<h2>Mòdul 5: Groovy en la Pràctica</h2>
<ul>
<li><a href="05-01-file-io">Entrada/Sortida de Fitxers</a></li>
<li><a href="05-02-xml-json">Treballant amb XML i JSON</a></li>
<li><a href="05-03-database-access">Accés a Bases de Dades</a></li>
<li><a href="05-04-web-development">Desenvolupament Web amb Groovy</a></li>
</ul>
<h2>Mòdul 6: Proves i Depuració</h2>
<ul>
<li><a href="06-01-unit-testing">Proves Unitàries amb Groovy</a></li>
<li><a href="06-02-mocking-stubbing">Mocking i Stubbing</a></li>
<li><a href="06-03-debugging">Depuració de Codi Groovy</a></li>
</ul>
<h2>Mòdul 7: Ecosistema i Eines de Groovy</h2>
<ul>
<li><a href="07-01-gradle-build-tool">Eina de Construcció Gradle</a></li>
<li><a href="07-02-spock-testing-framework">Framework de Proves Spock</a></li>
<li><a href="07-03-grails-framework">Framework Grails</a></li>
<li><a href="07-04-other-groovy-libraries">Altres Llibreries i Eines de Groovy</a></li>
</ul>
<h2>Mòdul 8: Millors Pràctiques i Temes Avançats</h2>
<ul>
<li><a href="08-01-code-style-conventions">Estil de Codi i Convencions</a></li>
<li><a href="08-02-performance-optimization">Optimització del Rendiment</a></li>
<li><a href="08-03-security-considerations">Consideracions de Seguretat</a></li>
<li><a href="08-04-concurrency">Concurrència en Groovy</a></li>
</ul>
<h2>Mòdul 9: Projecte Final</h2>
<ul>
<li><a href="09-01-project-overview">Visió General del Projecte</a></li>
<li><a href="09-02-project-setup">Configuració del Projecte</a></li>
<li><a href="09-03-implementation">Implementació</a></li>
<li><a href="09-04-testing-deployment">Proves i Desplegament</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objectiu" rel="nofollow">El Projecte</a> | 
<a href="/sobre-nosaltres" rel="nofollow">Sobre nosaltres</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donacions</a> | 
<a href="/llicencia" rel="nofollow">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuari no autentificat</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
