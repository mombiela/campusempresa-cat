<!DOCTYPE html>
<html lang="ca">
<head>
    <title> Optimització del Rendiment </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/lua/04-04-performance-optimization" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/lua/04-04-performance-optimization" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/lua/04-04-performance-optimization" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "ca";
  		var CATEGORY = "languages";
  		var MOD_NAME = "lua";
  		var TEMA_NAME = "4-4";
  		var TYPE = "mod";
  		var PATH = "mod/lua/04-04-performance-optimization";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo_header.png" alt="Logo Campus Empresa"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/courses/lua/04-04-performance-optimization" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/cursos/lua/04-04-performance-optimization" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Tot el coneixement al teu abast</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objectiu" rel="nofollow">El Projecte</a> | 
<a href="/sobre-nosaltres" rel="nofollow">Sobre nosaltres</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donacions</a> | 
<a href="/llicencia" rel="nofollow">Llicència</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/els-meus-cursos" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Els meus cursos</b></i>
</a>
<a href="/cursos-finalitzats" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalitzats             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="lua">
		<a  href="#" class="text-secondary d-none" data-read-mod="lua" data-read-unit="4-4" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar com a llegit
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="lua" data-unread-unit="4-4" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar com a no llegit
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contingut del curs
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-03-debugging-techniques' title="Tècniques de Depuració" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-03-debugging-techniques' title="Tècniques de Depuració" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Optimització del Rendiment</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='04-05-lua-c-api' title="Ús de l'API C de Lua" class="py-2 px-3 btn btn-primary"
				data-read-mod="lua" data-read-unit="4-4">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='04-05-lua-c-api' title="Ús de l'API C de Lua" class="py-2 px-3 btn btn-primary" 
				data-read-mod="lua" data-read-unit="4-4">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com optimitzar el rendiment dels nostres scripts en Lua. La optimització del rendiment és crucial per assegurar que les nostres aplicacions funcionin de manera eficient, especialment quan es tracta de projectes grans o de temps real, com els jocs.</p>
</div><h2>Continguts</h2>
<div class='content'><ol>
<li><a href="#introducció-a-la-optimització-del-rendiment">Introducció a la Optimització del Rendiment</a></li>
<li><a href="#perfils-de-rendiment">Perfils de Rendiment</a></li>
<li><a href="#optimització-de-codi">Optimització de Codi</a></li>
<li><a href="#gestió-de-memòria">Gestió de Memòria</a></li>
<li><a href="#consells-i-trucs">Consells i Trucs</a></li>
<li><a href="#exercicis-pràctics">Exercicis Pràctics</a></li>
</ol>
</div><h2>Introducció a la Optimització del Rendiment</h2>
<div class='content'><p>La optimització del rendiment implica identificar i millorar les parts del codi que consumeixen més recursos, ja sigui temps de CPU o memòria. És important seguir un enfocament sistemàtic per evitar optimitzacions prematures que podrien complicar el codi sense beneficis significatius.</p>
</div><h2>Perfils de Rendiment</h2>
<div class='content'></div><h3>Què és un Perfil de Rendiment?</h3>
<div class='content'><p>Un perfil de rendiment és una anàlisi detallada de com el codi utilitza els recursos del sistema. Això inclou el temps de CPU, l'ús de memòria i altres mètriques de rendiment.</p>
</div><h3>Eines de Perfilat</h3>
<div class='content'><ul>
<li><strong>LuaProfiler</strong>: Una eina popular per perfilar scripts Lua.</li>
<li><strong>luatrace</strong>: Una altra eina que proporciona traçats detallats del rendiment.</li>
</ul>
</div><h3>Exemple d'Ús de LuaProfiler</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgcHJvZmlsZXIgPSByZXF1aXJlKCJwcm9maWxlciIpCnByb2ZpbGVyLnN0YXJ0KCkKCi0tIEVsIHRldSBjb2RpIGFxdcOtCmZvciBpID0gMSwgMTAwMDAwMCBkbwogICAgbG9jYWwgeCA9IGkgKiAyCmVuZAoKcHJvZmlsZXIuc3RvcCgpCnByb2ZpbGVyLnJlcG9ydCgicHJvZmlsZS50eHQiKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local profiler = require(&quot;profiler&quot;)
profiler.start()

-- El teu codi aqu&iacute;
for i = 1, 1000000 do
    local x = i * 2
end

profiler.stop()
profiler.report(&quot;profile.txt&quot;)</pre></div><div class='content'><p>Aquest codi utilitza LuaProfiler per generar un informe de rendiment que es guarda en el fitxer <code>profile.txt</code>.</p>
</div><h2>Optimització de Codi</h2>
<div class='content'></div><h3>Evitar Operacions Innecessàries</h3>
<div class='content'><ul>
<li><strong>Evita bucles innecessaris</strong>: Redueix el nombre de bucles o iteracions.</li>
<li><strong>Utilitza variables locals</strong>: Les variables locals són més ràpides que les globals.</li>
</ul>
</div><h3>Exemple</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gQ29kaSBubyBvcHRpbWl0emF0CmZvciBpID0gMSwgMTAwMDAwMCBkbwogICAgZ2xvYmFsVmFyID0gaSAqIDIKZW5kCgotLSBDb2RpIG9wdGltaXR6YXQKbG9jYWwgbG9jYWxWYXIKZm9yIGkgPSAxLCAxMDAwMDAwIGRvCiAgICBsb2NhbFZhciA9IGkgKiAyCmVuZA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Codi no optimitzat
for i = 1, 1000000 do
    globalVar = i * 2
end

-- Codi optimitzat
local localVar
for i = 1, 1000000 do
    localVar = i * 2
end</pre></div><div class='content'></div><h3>Utilitzar Estructures de Dades Adequades</h3>
<div class='content'><ul>
<li><strong>Taules</strong>: Utilitza taules de manera eficient per emmagatzemar i accedir a dades.</li>
</ul>
</div><h3>Exemple</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gQ29kaSBubyBvcHRpbWl0emF0CmxvY2FsIGRhdGEgPSB7fQpmb3IgaSA9IDEsIDEwMDAwMDAgZG8KICAgIGRhdGFbImtleSIgLi4gaV0gPSBpCmVuZAoKLS0gQ29kaSBvcHRpbWl0emF0CmxvY2FsIGRhdGEgPSB7fQpmb3IgaSA9IDEsIDEwMDAwMDAgZG8KICAgIGRhdGFbaV0gPSBpCmVuZA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Codi no optimitzat
local data = {}
for i = 1, 1000000 do
    data[&quot;key&quot; .. i] = i
end

-- Codi optimitzat
local data = {}
for i = 1, 1000000 do
    data[i] = i
end</pre></div><div class='content'></div><h2>Gestió de Memòria</h2>
<div class='content'></div><h3>Recollida d'Escombraries</h3>
<div class='content'><p>Lua utilitza un col·lector d'escombraries automàtic per gestionar la memòria. No obstant això, és important entendre com funciona per evitar problemes de rendiment.</p>
<ul>
<li><strong>Evita la creació excessiva d'objectes</strong>: Redueix la freqüència de la recollida d'escombraries.</li>
<li><strong>Utilitza <code>collectgarbage</code></strong>: Controla manualment la recollida d'escombraries si és necessari.</li>
</ul>
</div><h3>Exemple</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gRm9yw6dhIGxhIHJlY29sbGlkYSBkJ2VzY29tYnJhcmllcwpjb2xsZWN0Z2FyYmFnZSgiY29sbGVjdCIp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- For&ccedil;a la recollida d'escombraries
collectgarbage(&quot;collect&quot;)</pre></div><div class='content'></div><h2>Consells i Trucs</h2>
<div class='content'><ul>
<li><strong>Precompila el codi</strong>: Utilitza <code>luac</code> per precompilar scripts Lua.</li>
<li><strong>Evita l'ús excessiu de funcions anònimes</strong>: Les funcions anònimes poden ser menys eficients.</li>
<li><strong>Utilitza taules amb claus numèriques</strong>: Les taules amb claus numèriques són més ràpides que les taules amb claus de cadena.</li>
</ul>
</div><h2>Exercicis Pràctics</h2>
<div class='content'></div><h3>Exercici 1: Optimització de Bucles</h3>
<div class='content'><p>Optimitza el següent codi per millorar el seu rendiment:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgc3VtID0gMApmb3IgaSA9IDEsIDEwMDAwMDAgZG8KICAgIGZvciBqID0gMSwgMTAwMCBkbwogICAgICAgIHN1bSA9IHN1bSArIChpICogaikKICAgIGVuZAplbmQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local sum = 0
for i = 1, 1000000 do
    for j = 1, 1000 do
        sum = sum + (i * j)
    end
end</pre></div><div class='content'><h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgc3VtID0gMApmb3IgaSA9IDEsIDEwMDAwMDAgZG8KICAgIGxvY2FsIGlfbXVsID0gaSAqIDEwMDAKICAgIHN1bSA9IHN1bSArIChpX211bCAqICgxMDAwICsgMSkgLyAyKQplbmQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local sum = 0
for i = 1, 1000000 do
    local i_mul = i * 1000
    sum = sum + (i_mul * (1000 + 1) / 2)
end</pre></div><div class='content'></div><h3>Exercici 2: Gestió de Memòria</h3>
<div class='content'><p>Escriu un codi que creï i elimini objectes de manera eficient per evitar problemes de memòria.</p>
<h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgb2JqZWN0cyA9IHt9CmZvciBpID0gMSwgMTAwMDAwMCBkbwogICAgb2JqZWN0c1tpXSA9IHt2YWx1ZSA9IGl9CmVuZAoKLS0gQWxsaWJlcmEgbWVtw7JyaWEKZm9yIGkgPSAxLCAxMDAwMDAwIGRvCiAgICBvYmplY3RzW2ldID0gbmlsCmVuZAoKY29sbGVjdGdhcmJhZ2UoImNvbGxlY3QiKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local objects = {}
for i = 1, 1000000 do
    objects[i] = {value = i}
end

-- Allibera mem&ograve;ria
for i = 1, 1000000 do
    objects[i] = nil
end

collectgarbage(&quot;collect&quot;)</pre></div><div class='content'></div><h2>Conclusió</h2>
<div class='content'><p>En aquesta secció, hem après diverses tècniques per optimitzar el rendiment dels nostres scripts en Lua. Hem cobert des de l'ús d'eines de perfilat fins a la gestió de memòria i l'optimització de codi. Amb aquestes tècniques, podreu escriure codi més eficient i millorar el rendiment de les vostres aplicacions Lua.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-03-debugging-techniques' title="Tècniques de Depuració" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-03-debugging-techniques' title="Tècniques de Depuració" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='04-05-lua-c-api' title="Ús de l'API C de Lua" class="py-2 px-3 btn btn-primary"
				data-read-mod="lua" data-read-unit="4-4">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='04-05-lua-c-api' title="Ús de l'API C de Lua" class="py-2 px-3 btn btn-primary" 
				data-read-mod="lua" data-read-unit="4-4">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curs de Programació en Lua</h1>
<h2>Mòdul 1: Introducció a Lua</h2>
<ul>
<li><a href="01-01-what-is-lua">Què és Lua?</a></li>
<li><a href="01-02-setting-up-lua">Configuració de l'Entorn Lua</a></li>
<li><a href="01-03-first-lua-script">El Teu Primer Script en Lua</a></li>
<li><a href="01-04-basic-syntax">Sintaxi i Estructura Bàsiques</a></li>
</ul>
<h2>Mòdul 2: Conceptes Bàsics</h2>
<ul>
<li><a href="02-01-variables-data-types">Variables i Tipus de Dades</a></li>
<li><a href="02-02-operators">Operadors</a></li>
<li><a href="02-03-control-structures">Estructures de Control</a></li>
<li><a href="02-04-loops">Bucles</a></li>
<li><a href="02-05-functions">Funcions</a></li>
</ul>
<h2>Mòdul 3: Conceptes Intermedis</h2>
<ul>
<li><a href="03-01-tables">Taules</a></li>
<li><a href="03-02-metatables-metamethods">Metataules i Metamètodes</a></li>
<li><a href="03-03-modules-packages">Mòduls i Paquets</a></li>
<li><a href="03-04-error-handling">Gestió d'Errors</a></li>
<li><a href="03-05-file-io">Entrada/Sortida de Fitxers</a></li>
</ul>
<h2>Mòdul 4: Conceptes Avançats</h2>
<ul>
<li><a href="04-01-coroutines">Coroutines</a></li>
<li><a href="04-02-oop-lua">Programació Orientada a Objectes en Lua</a></li>
<li><a href="04-03-debugging-techniques">Tècniques de Depuració</a></li>
<li><a href="04-04-performance-optimization">Optimització del Rendiment</a></li>
<li><a href="04-05-lua-c-api">Ús de l'API C de Lua</a></li>
</ul>
<h2>Mòdul 5: Aplicacions Pràctiques</h2>
<ul>
<li><a href="05-01-building-simple-game">Construcció d'un Joc Simple</a></li>
<li><a href="05-02-scripting-game-engines">Scripting en Motors de Joc</a></li>
<li><a href="05-03-automating-tasks">Automatització de Tasques amb Lua</a></li>
<li><a href="05-04-integrating-lua">Integració de Lua amb Altres Llenguatges</a></li>
</ul>
<h2>Mòdul 6: Projecte Final</h2>
<ul>
<li><a href="06-01-project-overview">Visió General del Projecte</a></li>
<li><a href="06-02-planning-design">Planificació i Disseny</a></li>
<li><a href="06-03-implementation">Implementació</a></li>
<li><a href="06-04-testing-debugging">Proves i Depuració</a></li>
<li><a href="06-05-project-presentation">Presentació del Projecte</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objectiu" rel="nofollow">El Projecte</a> | 
<a href="/sobre-nosaltres" rel="nofollow">Sobre nosaltres</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donacions</a> | 
<a href="/llicencia" rel="nofollow">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuari no autentificat</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
