<!DOCTYPE html>
<html lang="ca">
<head>
    <title> Fitxers d'estat </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, nofollow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/terraform/03-02-state-files" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/terraform/03-02-state-files" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/terraform/03-02-state-files" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.188a386f47.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "ca";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "terraform";
  		var TEMA_NAME = "3-2";
  		var TYPE = "mod";
  		var PATH = "mod/terraform/03-02-state-files";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo_header.png" alt="Logo Campus Empresa"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/courses/terraform/03-02-state-files" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/cursos/terraform/03-02-state-files" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Tot el coneixement al teu abast</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objectiu" rel="nofollow">El Projecte</a> | 
<a href="/sobre-nosaltres" rel="nofollow">Sobre nosaltres</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donacions</a> | 
<a href="/llicencia" rel="nofollow">Llicència</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/els-meus-cursos" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Els meus cursos</b></i>
</a>
<a href="/cursos-finalitzats" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalitzats             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="terraform">
		<a  href="#" class="text-secondary d-none" data-read-mod="terraform" data-read-unit="3-2" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar com a llegit
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="terraform" data-unread-unit="3-2" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar com a no llegit
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contingut del curs
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='03-01-understanding-state' title="Comprendre l'estat" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='03-01-understanding-state' title="Comprendre l'estat" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Fitxers d'estat</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='03-03-remote-state' title="Estat remot" class="py-2 px-3 btn btn-primary"
				data-read-mod="terraform" data-read-unit="3-2">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='03-03-remote-state' title="Estat remot" class="py-2 px-3 btn btn-primary" 
				data-read-mod="terraform" data-read-unit="3-2">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Els fitxers d'estat són una part fonamental de Terraform. Aquests fitxers emmagatzemen informació sobre la infraestructura gestionada per Terraform, permetent que Terraform conegui l'estat actual dels recursos. En aquesta secció, explorarem en profunditat els fitxers d'estat, la seva importància, com es gestionen i les millors pràctiques per treballar amb ells.</p>
</div><h2>Què és un fitxer d'estat?</h2>
<div class='content'><p>Un fitxer d'estat és un fitxer que conté un registre de tots els recursos que Terraform ha creat i està gestionant. Aquest fitxer permet a Terraform saber quins recursos existeixen, quins canvis s'han fet i quins canvis cal aplicar.</p>
</div><h3>Importància dels fitxers d'estat</h3>
<div class='content'><ul>
<li><strong>Seguiment de recursos</strong>: Els fitxers d'estat permeten a Terraform mantenir un registre dels recursos que ha creat, modificat o eliminat.</li>
<li><strong>Optimització de canvis</strong>: Amb l'estat actual dels recursos, Terraform pot calcular de manera eficient els canvis necessaris per portar la infraestructura a l'estat desitjat.</li>
<li><strong>Col·laboració</strong>: Els fitxers d'estat permeten que múltiples usuaris treballin en la mateixa infraestructura de manera coordinada.</li>
</ul>
</div><h2>Estructura d'un fitxer d'estat</h2>
<div class='content'><p>Els fitxers d'estat estan en format JSON i contenen diverses seccions clau:</p>
<ul>
<li><strong>Version</strong>: La versió del fitxer d'estat.</li>
<li><strong>Terraform_version</strong>: La versió de Terraform utilitzada per crear o modificar l'estat.</li>
<li><strong>Resources</strong>: Una llista de tots els recursos gestionats per Terraform, incloent-hi els seus atributs i metadades.</li>
</ul>
</div><h3>Exemple d'un fitxer d'estat</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJ2ZXJzaW9uIjogNCwKICAidGVycmFmb3JtX3ZlcnNpb24iOiAiMS4wLjAiLAogICJyZXNvdXJjZXMiOiBbCiAgICB7CiAgICAgICJtb2R1bGUiOiAibW9kdWxlLnZwYyIsCiAgICAgICJtb2RlIjogIm1hbmFnZWQiLAogICAgICAidHlwZSI6ICJhd3NfdnBjIiwKICAgICAgIm5hbWUiOiAibWFpbiIsCiAgICAgICJwcm92aWRlciI6ICJwcm92aWRlcltcInJlZ2lzdHJ5LnRlcnJhZm9ybS5pby9oYXNoaWNvcnAvYXdzXCJdIiwKICAgICAgImluc3RhbmNlcyI6IFsKICAgICAgICB7CiAgICAgICAgICAic2NoZW1hX3ZlcnNpb24iOiAwLAogICAgICAgICAgImF0dHJpYnV0ZXMiOiB7CiAgICAgICAgICAgICJpZCI6ICJ2cGMtMTIzNDU2NzgiLAogICAgICAgICAgICAiY2lkcl9ibG9jayI6ICIxMC4wLjAuMC8xNiIsCiAgICAgICAgICAgICJ0YWdzIjogewogICAgICAgICAgICAgICJOYW1lIjogIm1haW4tdnBjIgogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICBdCiAgICB9CiAgXQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;version&quot;: 4,
  &quot;terraform_version&quot;: &quot;1.0.0&quot;,
  &quot;resources&quot;: [
    {
      &quot;module&quot;: &quot;module.vpc&quot;,
      &quot;mode&quot;: &quot;managed&quot;,
      &quot;type&quot;: &quot;aws_vpc&quot;,
      &quot;name&quot;: &quot;main&quot;,
      &quot;provider&quot;: &quot;provider[\&quot;registry.terraform.io/hashicorp/aws\&quot;]&quot;,
      &quot;instances&quot;: [
        {
          &quot;schema_version&quot;: 0,
          &quot;attributes&quot;: {
            &quot;id&quot;: &quot;vpc-12345678&quot;,
            &quot;cidr_block&quot;: &quot;10.0.0.0/16&quot;,
            &quot;tags&quot;: {
              &quot;Name&quot;: &quot;main-vpc&quot;
            }
          }
        }
      ]
    }
  ]
}</pre></div><div class='content'></div><h2>Gestió dels fitxers d'estat</h2>
<div class='content'></div><h3>Ubicació del fitxer d'estat</h3>
<div class='content'><p>Per defecte, Terraform emmagatzema el fitxer d'estat en el directori de treball actual amb el nom <code>terraform.tfstate</code>. També es crea un fitxer de còpia de seguretat anomenat <code>terraform.tfstate.backup</code>.</p>
</div><h3>Comandes relacionades amb l'estat</h3>
<div class='content'><ul>
<li><strong><code>terraform init</code></strong>: Inicialitza una configuració de treball de Terraform.</li>
<li><strong><code>terraform plan</code></strong>: Compara l'estat actual amb la configuració desitjada i genera un pla d'execució.</li>
<li><strong><code>terraform apply</code></strong>: Aplica els canvis necessaris per portar la infraestructura a l'estat desitjat.</li>
<li><strong><code>terraform refresh</code></strong>: Actualitza l'estat actual amb la informació més recent dels proveïdors de recursos.</li>
<li><strong><code>terraform state</code></strong>: Proporciona diverses subcomandes per gestionar l'estat, com ara <code>list</code>, <code>show</code>, <code>mv</code>, <code>rm</code>, etc.</li>
</ul>
</div><h3>Millors pràctiques per gestionar els fitxers d'estat</h3>
<div class='content'><ul>
<li><strong>Control de versions</strong>: No incloure els fitxers d'estat en el control de versions. Utilitzar un emmagatzematge remot per compartir l'estat entre equips.</li>
<li><strong>Seguretat</strong>: Protegir els fitxers d'estat, ja que poden contenir informació sensible.</li>
<li><strong>Còpies de seguretat</strong>: Mantenir còpies de seguretat regulars dels fitxers d'estat per evitar pèrdues de dades.</li>
</ul>
</div><h2>Exercici pràctic</h2>
<div class='content'></div><h3>Objectiu</h3>
<div class='content'><p>Crear una configuració simple de Terraform que defineixi un recurs i observar com es crea i actualitza el fitxer d'estat.</p>
</div><h3>Passos</h3>
<div class='content'><ol>
<li>
<p><strong>Crear un fitxer de configuració de Terraform</strong>:</p>
<pre><code class="language-hcl">provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}

resource &quot;aws_s3_bucket&quot; &quot;example&quot; {
  bucket = &quot;my-unique-bucket-name&quot;
  acl    = &quot;private&quot;
}
</code></pre>
</li>
<li>
<p><strong>Inicialitzar la configuració</strong>:</p>
<pre><code class="language-bash">terraform init
</code></pre>
</li>
<li>
<p><strong>Aplicar la configuració</strong>:</p>
<pre><code class="language-bash">terraform apply
</code></pre>
</li>
<li>
<p><strong>Observar el fitxer d'estat</strong>:</p>
<p>Després d'executar <code>terraform apply</code>, obrir el fitxer <code>terraform.tfstate</code> i revisar el contingut per veure com s'ha registrat el recurs S3.</p>
</li>
</ol>
</div><h3>Solució</h3>
<div class='content'><p>Després d'executar els passos anteriors, el fitxer <code>terraform.tfstate</code> hauria de contenir informació sobre el bucket S3 creat, similar a l'exemple de fitxer d'estat proporcionat anteriorment.</p>
</div><h2>Conclusió</h2>
<div class='content'><p>Els fitxers d'estat són essencials per al funcionament de Terraform, ja que permeten mantenir un registre dels recursos gestionats i optimitzar els canvis necessaris. És important gestionar aquests fitxers amb cura, seguint les millors pràctiques per garantir la seguretat i la col·laboració eficient entre equips.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='03-01-understanding-state' title="Comprendre l'estat" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='03-01-understanding-state' title="Comprendre l'estat" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='03-03-remote-state' title="Estat remot" class="py-2 px-3 btn btn-primary"
				data-read-mod="terraform" data-read-unit="3-2">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='03-03-remote-state' title="Estat remot" class="py-2 px-3 btn btn-primary" 
				data-read-mod="terraform" data-read-unit="3-2">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curs de Terraform</h1>
<h2>Mòdul 1: Introducció a Terraform</h2>
<ul>
<li><a href="01-01-what-is-terraform">Què és Terraform?</a></li>
<li><a href="01-02-installing-terraform">Instal·lant Terraform</a></li>
<li><a href="01-03-terraform-basics">Conceptes bàsics de Terraform</a></li>
<li><a href="01-04-first-terraform-configuration">Primera configuració de Terraform</a></li>
</ul>
<h2>Mòdul 2: Llenguatge de configuració de Terraform</h2>
<ul>
<li><a href="02-01-hcl-syntax">Sintaxi HCL</a></li>
<li><a href="02-02-variables-and-outputs">Variables i sortides</a></li>
<li><a href="02-03-resource-and-data-blocks">Blocs de recursos i dades</a></li>
<li><a href="02-04-providers">Proveïdors</a></li>
</ul>
<h2>Mòdul 3: Gestió de l'estat</h2>
<ul>
<li><a href="03-01-understanding-state">Comprendre l'estat</a></li>
<li><a href="03-02-state-files">Fitxers d'estat</a></li>
<li><a href="03-03-remote-state">Estat remot</a></li>
<li><a href="03-04-state-locking">Bloqueig de l'estat</a></li>
</ul>
<h2>Mòdul 4: Mòduls de Terraform</h2>
<ul>
<li><a href="04-01-introduction-to-modules">Introducció als mòduls</a></li>
<li><a href="04-02-creating-modules">Creació de mòduls</a></li>
<li><a href="04-03-using-modules">Ús de mòduls</a></li>
<li><a href="04-04-module-registry">Registre de mòduls</a></li>
</ul>
<h2>Mòdul 5: Proveïment de recursos</h2>
<ul>
<li><a href="05-01-provisioning-basics">Conceptes bàsics de proveïment</a></li>
<li><a href="05-02-provisioning-aws-resources">Proveïment de recursos AWS</a></li>
<li><a href="05-03-provisioning-azure-resources">Proveïment de recursos Azure</a></li>
<li><a href="05-04-provisioning-gcp-resources">Proveïment de recursos GCP</a></li>
</ul>
<h2>Mòdul 6: Funcionalitats avançades de Terraform</h2>
<ul>
<li><a href="06-01-terraform-workspaces">Espais de treball de Terraform</a></li>
<li><a href="06-02-terraform-functions">Funcions de Terraform</a></li>
<li><a href="06-03-dynamic-blocks">Blocs dinàmics</a></li>
<li><a href="06-04-terraform-import">Importació de Terraform</a></li>
</ul>
<h2>Mòdul 7: Millors pràctiques de Terraform</h2>
<ul>
<li><a href="07-01-code-organization">Organització del codi</a></li>
<li><a href="07-02-version-control">Control de versions</a></li>
<li><a href="07-03-testing-terraform-code">Proves del codi de Terraform</a></li>
<li><a href="07-04-security-best-practices">Millors pràctiques de seguretat</a></li>
</ul>
<h2>Mòdul 8: Terraform en CI/CD</h2>
<ul>
<li><a href="08-01-integrating-terraform-with-cicd">Integració de Terraform amb CI/CD</a></li>
<li><a href="08-02-automating-terraform-with-jenkins">Automatització de Terraform amb Jenkins</a></li>
<li><a href="08-03-using-terraform-with-github-actions">Ús de Terraform amb GitHub Actions</a></li>
<li><a href="08-04-terraform-cloud-and-enterprise">Terraform Cloud i Enterprise</a></li>
</ul>
<h2>Mòdul 9: Resolució de problemes i depuració</h2>
<ul>
<li><a href="09-01-common-errors">Errors comuns</a></li>
<li><a href="09-02-debugging-terraform">Depuració de Terraform</a></li>
<li><a href="09-03-state-management-issues">Problemes de gestió de l'estat</a></li>
<li><a href="09-04-community-and-support">Comunitat i suport</a></li>
</ul>
<h2>Mòdul 10: Projectes del món real</h2>
<ul>
<li><a href="10-01-project-aws-infrastructure">Projecte 1: Infraestructura AWS</a></li>
<li><a href="10-02-project-multi-cloud-deployment">Projecte 2: Desplegament multi-núvol</a></li>
<li><a href="10-03-project-kubernetes-with-terraform">Projecte 3: Kubernetes amb Terraform</a></li>
<li><a href="10-04-project-serverless-applications">Projecte 4: Aplicacions sense servidor</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objectiu" rel="nofollow">El Projecte</a> | 
<a href="/sobre-nosaltres" rel="nofollow">Sobre nosaltres</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donacions</a> | 
<a href="/llicencia" rel="nofollow">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuari no autentificat</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
