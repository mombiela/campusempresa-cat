<!DOCTYPE html>
<html lang="ca">
<head>
    <title> Utilitzant APIs </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/cl-lenguaje-control-as400/06-03-using-apis" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/cl-llenguatge-control-as400/06-03-using-apis" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/cl-control-language-as400/06-03-using-apis" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "ca";
  		var CATEGORY = "languages";
  		var MOD_NAME = "cl";
  		var TEMA_NAME = "6-3";
  		var TYPE = "mod";
  		var PATH = "mod/cl/06-03-using-apis";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo_header.png" alt="Logo Campus Empresa"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/courses/cl-control-language-as400/06-03-using-apis" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/cursos/cl-lenguaje-control-as400/06-03-using-apis" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Tot el coneixement al teu abast</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objectiu" rel="nofollow">El Projecte</a> | 
<a href="/sobre-nosaltres" rel="nofollow">Sobre nosaltres</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donacions</a> | 
<a href="/llicencia" rel="nofollow">Llicència</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/els-meus-cursos" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Els meus cursos</b></i>
</a>
<a href="/cursos-finalitzats" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalitzats             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="cl">
		<a  href="#" class="text-secondary d-none" data-read-mod="cl" data-read-unit="6-3" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar com a llegit
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="cl" data-unread-unit="6-3" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar com a no llegit
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contingut del curs
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='06-02-interfacing-databases' title="Interfície amb Bases de Dades" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='06-02-interfacing-databases' title="Interfície amb Bases de Dades" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Utilitzant APIs</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='06-04-network-communication' title="Comunicació de Xarxa" class="py-2 px-3 btn btn-primary"
				data-read-mod="cl" data-read-unit="6-3">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='06-04-network-communication' title="Comunicació de Xarxa" class="py-2 px-3 btn btn-primary" 
				data-read-mod="cl" data-read-unit="6-3">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com utilitzar APIs (Application Programming Interfaces) en el context del Llenguatge de Control (CL). Les APIs permeten que els programes es comuniquin entre ells, facilitant la integració de funcionalitats externes en els nostres scripts de CL.</p>
</div><h2>Què és una API?</h2>
<div class='content'><p>Una API és un conjunt de regles i protocols que permeten que diferents programes es comuniquin entre ells. Les APIs defineixen les maneres en què les peticions i respostes es realitzen entre sistemes, permetent l'accés a funcionalitats o dades d'un altre programa o servei.</p>
</div><h3>Tipus d'APIs</h3>
<div class='content'><ol>
<li><strong>APIs de Sistema</strong>: Permeten la interacció amb el sistema operatiu.</li>
<li><strong>APIs de Llibreries</strong>: Proporcionen funcionalitats específiques a través de llibreries de programari.</li>
<li><strong>APIs Web</strong>: Permeten la comunicació amb serveis web a través de protocols com HTTP/HTTPS.</li>
</ol>
</div><h2>Configuració del Teu Entorn per Utilitzar APIs</h2>
<div class='content'><p>Abans de començar a utilitzar APIs en els teus scripts de CL, assegura't que el teu entorn estigui correctament configurat:</p>
<ol>
<li><strong>Accés a la Xarxa</strong>: Assegura't que el teu sistema tingui accés a la xarxa si estàs treballant amb APIs web.</li>
<li><strong>Llibreries Necessàries</strong>: Instal·la qualsevol llibreria o paquet necessari per a la interacció amb l'API.</li>
</ol>
</div><h2>Exemple Pràctic: Cridant una API Web</h2>
<div class='content'><p>A continuació, veurem un exemple pràctic de com cridar una API web des d'un script de CL. Utilitzarem una API pública que retorna informació sobre el temps.</p>
</div><h3>Pas 1: Definir la URL de l'API</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RENMIFZBUigmVVJMKSBUWVBFKCpDSEFSKSBMRU4oMjU2KQpDSEdWQVIgVkFSKCZVUkwpIFZBTFVFKCdodHRwOi8vYXBpLndlYXRoZXJhcGkuY29tL3YxL2N1cnJlbnQuanNvbj9rZXk9WU9VUl9BUElfS0VZJnE9TG9uZG9uJyk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DCL VAR(&amp;URL) TYPE(*CHAR) LEN(256)
CHGVAR VAR(&amp;URL) VALUE('http://api.weatherapi.com/v1/current.json?key=YOUR_API_KEY&amp;q=London')</pre></div><div class='content'></div><h3>Pas 2: Fer la Petició HTTP</h3>
<div class='content'><p>Utilitzarem una comanda de CL per fer una petició HTTP GET a l'API.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RENMIFZBUigmUkVTUE9OU0UpIFRZUEUoKkNIQVIpIExFTigxMDI0KQpDQUxMIFBHTShRU1lTL1FIVFRQU1ZSKSBQQVJNKCdHRVQnICZVUkwgJlJFU1BPTlNFKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DCL VAR(&amp;RESPONSE) TYPE(*CHAR) LEN(1024)
CALL PGM(QSYS/QHTTPSVR) PARM('GET' &amp;URL &amp;RESPONSE)</pre></div><div class='content'></div><h3>Pas 3: Processar la Resposta</h3>
<div class='content'><p>La resposta de l'API serà en format JSON. Podem utilitzar una llibreria de JSON per processar la resposta.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RENMIFZBUigmVEVNUCkgVFlQRSgqQ0hBUikgTEVOKDEwKQpDQUxMIFBHTShRU1lTL1FKU09OKSBQQVJNKCZSRVNQT05TRSAnY3VycmVudC50ZW1wX2MnICZURU1QKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DCL VAR(&amp;TEMP) TYPE(*CHAR) LEN(10)
CALL PGM(QSYS/QJSON) PARM(&amp;RESPONSE 'current.temp_c' &amp;TEMP)</pre></div><div class='content'></div><h3>Pas 4: Mostrar el Resultat</h3>
<div class='content'><p>Finalment, mostrarem la temperatura actual a la consola.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U05EUEdNTVNHIE1TRygnTGEgdGVtcGVyYXR1cmEgYWN0dWFsIGEgTG9uZHJlcyDDqXM6ICcgKkNBVCAmVEVNUCAqQ0FUICcgwrBDJyk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SNDPGMMSG MSG('La temperatura actual a Londres &eacute;s: ' *CAT &amp;TEMP *CAT ' &deg;C')</pre></div><div class='content'></div><h2>Exercici Pràctic</h2>
<div class='content'></div><h3>Exercici 1: Cridar una API de Conversió de Moneda</h3>
<div class='content'><ol>
<li><strong>Objectiu</strong>: Escriu un script de CL que cridi una API de conversió de moneda i mostri el tipus de canvi entre dues monedes.</li>
<li><strong>API Recomanada</strong>: <a href="https://www.exchangerate-api.com/">ExchangeRate-API</a></li>
<li><strong>Passos</strong>:
<ul>
<li>Defineix la URL de l'API amb les monedes que vols convertir.</li>
<li>Fes la petició HTTP GET.</li>
<li>Processa la resposta JSON per obtenir el tipus de canvi.</li>
<li>Mostra el tipus de canvi a la consola.</li>
</ul>
</li>
</ol>
</div><h3>Solució</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RENMIFZBUigmVVJMKSBUWVBFKCpDSEFSKSBMRU4oMjU2KQpDSEdWQVIgVkFSKCZVUkwpIFZBTFVFKCdodHRwczovL3Y2LmV4Y2hhbmdlcmF0ZS1hcGkuY29tL3Y2L1lPVVJfQVBJX0tFWS9sYXRlc3QvVVNEJykKCkRDTCBWQVIoJlJFU1BPTlNFKSBUWVBFKCpDSEFSKSBMRU4oMTAyNCkKQ0FMTCBQR00oUVNZUy9RSFRUUFNWUikgUEFSTSgnR0VUJyAmVVJMICZSRVNQT05TRSkKCkRDTCBWQVIoJlJBVEUpIFRZUEUoKkNIQVIpIExFTigxMCkKQ0FMTCBQR00oUVNZUy9RSlNPTikgUEFSTSgmUkVTUE9OU0UgJ2NvbnZlcnNpb25fcmF0ZXMuRVVSJyAmUkFURSkKClNORFBHTU1TRyBNU0coJ0VsIHRpcHVzIGRlIGNhbnZpIFVTRCBhIEVVUiDDqXM6ICcgKkNBVCAmUkFURSk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DCL VAR(&amp;URL) TYPE(*CHAR) LEN(256)
CHGVAR VAR(&amp;URL) VALUE('https://v6.exchangerate-api.com/v6/YOUR_API_KEY/latest/USD')

DCL VAR(&amp;RESPONSE) TYPE(*CHAR) LEN(1024)
CALL PGM(QSYS/QHTTPSVR) PARM('GET' &amp;URL &amp;RESPONSE)

DCL VAR(&amp;RATE) TYPE(*CHAR) LEN(10)
CALL PGM(QSYS/QJSON) PARM(&amp;RESPONSE 'conversion_rates.EUR' &amp;RATE)

SNDPGMMSG MSG('El tipus de canvi USD a EUR &eacute;s: ' *CAT &amp;RATE)</pre></div><div class='content'></div><h2>Errors Comuns i Consells</h2>
<div class='content'><ol>
<li><strong>Error de Xarxa</strong>: Assegura't que el teu sistema tingui accés a Internet.</li>
<li><strong>Clau d'API Invàlida</strong>: Verifica que estàs utilitzant una clau d'API vàlida.</li>
<li><strong>Format de Resposta</strong>: Assegura't que la resposta de l'API estigui en el format esperat (JSON, XML, etc.).</li>
</ol>
</div><h2>Conclusió</h2>
<div class='content'><p>En aquest tema, hem après com utilitzar APIs en els nostres scripts de CL. Hem vist com fer una petició HTTP, processar la resposta i mostrar els resultats. Les APIs són una eina poderosa que ens permeten ampliar les funcionalitats dels nostres scripts de CL, integrant serveis externs de manera eficient.</p>
<p>En el següent tema, explorarem la comunicació de xarxa en més detall, aprenent com establir connexions i intercanviar dades entre sistemes.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='06-02-interfacing-databases' title="Interfície amb Bases de Dades" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='06-02-interfacing-databases' title="Interfície amb Bases de Dades" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='06-04-network-communication' title="Comunicació de Xarxa" class="py-2 px-3 btn btn-primary"
				data-read-mod="cl" data-read-unit="6-3">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='06-04-network-communication' title="Comunicació de Xarxa" class="py-2 px-3 btn btn-primary" 
				data-read-mod="cl" data-read-unit="6-3">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curs de CL (Llenguatge de Control)</h1>
<h2>Mòdul 1: Introducció al CL</h2>
<ul>
<li><a href="01-01-what-is-cl">Què és el Llenguatge de Control?</a></li>
<li><a href="01-02-setting-up-environment">Configuració del Teu Entorn</a></li>
<li><a href="01-03-basic-syntax-structure">Sintaxi i Estructura Bàsiques</a></li>
<li><a href="01-04-writing-first-cl-program">Escrivint el Teu Primer Programa CL</a></li>
</ul>
<h2>Mòdul 2: Comandes Bàsiques de CL</h2>
<ul>
<li><a href="02-01-introduction-cl-commands">Introducció a les Comandes de CL</a></li>
<li><a href="02-02-file-management-commands">Comandes de Gestió de Fitxers</a></li>
<li><a href="02-03-job-management-commands">Comandes de Gestió de Treballs</a></li>
<li><a href="02-04-system-management-commands">Comandes de Gestió del Sistema</a></li>
</ul>
<h2>Mòdul 3: Variables i Expressions</h2>
<ul>
<li><a href="03-01-understanding-variables">Comprenent les Variables</a></li>
<li><a href="03-02-defining-using-variables">Definint i Utilitzant Variables</a></li>
<li><a href="03-03-expressions-operators">Expressions i Operadors</a></li>
<li><a href="03-04-string-manipulation">Manipulació de Cadenes</a></li>
</ul>
<h2>Mòdul 4: Estructures de Control</h2>
<ul>
<li><a href="04-01-conditional-statements">Sentències Condicionals</a></li>
<li><a href="04-02-looping-constructs">Construccions de Bucle</a></li>
<li><a href="04-03-error-handling">Gestió d'Errors</a></li>
<li><a href="04-04-subroutines-procedures">Subrutines i Procediments</a></li>
</ul>
<h2>Mòdul 5: Comandes Avançades de CL</h2>
<ul>
<li><a href="05-01-advanced-file-operations">Operacions Avançades de Fitxers</a></li>
<li><a href="05-02-advanced-job-scheduling">Programació Avançada de Treballs</a></li>
<li><a href="05-03-system-configuration-commands">Comandes de Configuració del Sistema</a></li>
<li><a href="05-04-security-permissions">Seguretat i Permisos</a></li>
</ul>
<h2>Mòdul 6: Interfície amb Altres Sistemes</h2>
<ul>
<li><a href="06-01-calling-external-programs">Cridant Programes Externs</a></li>
<li><a href="06-02-interfacing-databases">Interfície amb Bases de Dades</a></li>
<li><a href="06-03-using-apis">Utilitzant APIs</a></li>
<li><a href="06-04-network-communication">Comunicació de Xarxa</a></li>
</ul>
<h2>Mòdul 7: Depuració i Optimització</h2>
<ul>
<li><a href="07-01-debugging-techniques">Tècniques de Depuració</a></li>
<li><a href="07-02-performance-optimization">Optimització del Rendiment</a></li>
<li><a href="07-03-logging-monitoring">Registre i Monitoratge</a></li>
<li><a href="07-04-best-practices">Millors Pràctiques</a></li>
</ul>
<h2>Mòdul 8: Aplicacions del Món Real</h2>
<ul>
<li><a href="08-01-automating-system-tasks">Automatització de Tasques del Sistema</a></li>
<li><a href="08-02-batch-processing">Processament per Lots</a></li>
<li><a href="08-03-data-integration">Integració de Dades</a></li>
<li><a href="08-04-case-studies">Estudis de Cas</a></li>
</ul>
<h2>Mòdul 9: Projecte Final</h2>
<ul>
<li><a href="09-01-project-overview">Visió General del Projecte</a></li>
<li><a href="09-02-project-requirements">Requisits del Projecte</a></li>
<li><a href="09-03-implementation-guide">Guia d'Implementació</a></li>
<li><a href="09-04-submission-review">Presentació i Revisió</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objectiu" rel="nofollow">El Projecte</a> | 
<a href="/sobre-nosaltres" rel="nofollow">Sobre nosaltres</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donacions</a> | 
<a href="/llicencia" rel="nofollow">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuari no autentificat</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
