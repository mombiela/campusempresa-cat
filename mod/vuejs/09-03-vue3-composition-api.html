<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API de composició de Vue 3</title>

    <link rel="alternate" href="https://campusempresa.com/mod/vuejs/09-03-vue3-composition-api" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/vuejs/09-03-vue3-composition-api" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/vuejs/09-03-vue3-composition-api" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/vuejs/09-03-vue3-composition-api" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/vuejs/09-03-vue3-composition-api" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-02-ssr-nuxtjs' title="Renderització del costat del servidor (SSR) amb Nuxt.js">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">API de composició de Vue 3</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-04-performance-optimization' title="Optimització del rendiment">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La API de composició és una de les característiques més destacades introduïdes en Vue 3. Aquesta API proporciona una manera més flexible i escalable de gestionar la lògica de components, especialment en aplicacions grans i complexes. En aquest mòdul, explorarem els conceptes clau de la API de composició, veurem exemples pràctics i realitzarem exercicis per consolidar els coneixements.</p>
</div><h1>Continguts</h1>
<div class='content'><ol>
<li>Introducció a la API de composició</li>
<li>Setup Function</li>
<li>Refs i Reactive</li>
<li>Computed i Watch</li>
<li>Mètodes de cicle de vida</li>
<li>Composables</li>
<li>Exercicis pràctics</li>
</ol>
</div><h1>1. Introducció a la API de composició</h1>
<div class='content'><p>La API de composició permet organitzar la lògica del component en funcions reutilitzables. Això facilita la separació de preocupacions i la reutilització de codi.</p>
</div><h2>Avantatges de la API de composició:</h2>
<div class='content'><ul>
<li><strong>Reutilització de codi:</strong> Permet crear funcions reutilitzables que encapsulen la lògica del component.</li>
<li><strong>Millor organització:</strong> Facilita la separació de la lògica en funcions més petites i manejables.</li>
<li><strong>Tipat:</strong> Millor suport per a TypeScript.</li>
</ul>
</div><h1>2. Setup Function</h1>
<div class='content'><p>La <code>setup</code> function és el punt d'entrada de la API de composició. Es crida abans que el component sigui creat i és on es defineixen les variables reactives, mètodes i altres elements.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PHNjcmlwdCBzZXR1cD4KaW1wb3J0IHsgcmVmIH0gZnJvbSAndnVlJzsKCmNvbnN0IGNvdW50ID0gcmVmKDApOwoKZnVuY3Rpb24gaW5jcmVtZW50KCkgewogIGNvdW50LnZhbHVlKys7Cn0KPC9zY3JpcHQ+Cgo8dGVtcGxhdGU+CiAgPGRpdj4KICAgIDxwPnt7IGNvdW50IH19PC9wPgogICAgPGJ1dHRvbiBAY2xpY2s9ImluY3JlbWVudCI+SW5jcmVtZW50PC9idXR0b24+CiAgPC9kaXY+CjwvdGVtcGxhdGU+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;script setup&gt;
import { ref } from 'vue';

const count = ref(0);

function increment() {
  count.value++;
}
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;{{ count }}&lt;/p&gt;
    &lt;button @click=&quot;increment&quot;&gt;Increment&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;</pre></div><div class='content'></div><h2>Explicació:</h2>
<div class='content'><ul>
<li><code>ref</code> crea una referència reactiva.</li>
<li><code>count.value</code> accedeix al valor de la referència.</li>
<li>La funció <code>increment</code> incrementa el valor de <code>count</code>.</li>
</ul>
</div><h1>3. Refs i Reactive</h1>
<div class='content'></div><h2>Refs</h2>
<div class='content'><p>Les <code>refs</code> són objectes reactius que contenen un valor únic.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgcmVmIH0gZnJvbSAndnVlJzsKCmNvbnN0IGNvdW50ID0gcmVmKDApOwpjb25zb2xlLmxvZyhjb3VudC52YWx1ZSk7IC8vIDAKY291bnQudmFsdWUrKzsKY29uc29sZS5sb2coY291bnQudmFsdWUpOyAvLyAx"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ref } from 'vue';

const count = ref(0);
console.log(count.value); // 0
count.value++;
console.log(count.value); // 1</pre></div><div class='content'></div><h2>Reactive</h2>
<div class='content'><p><code>reactive</code> crea un objecte reactiu que pot contenir múltiples propietats.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgcmVhY3RpdmUgfSBmcm9tICd2dWUnOwoKY29uc3Qgc3RhdGUgPSByZWFjdGl2ZSh7CiAgY291bnQ6IDAsCiAgbWVzc2FnZTogJ0hlbGxvJwp9KTsKCmNvbnNvbGUubG9nKHN0YXRlLmNvdW50KTsgLy8gMApzdGF0ZS5jb3VudCsrOwpjb25zb2xlLmxvZyhzdGF0ZS5jb3VudCk7IC8vIDE="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { reactive } from 'vue';

const state = reactive({
  count: 0,
  message: 'Hello'
});

console.log(state.count); // 0
state.count++;
console.log(state.count); // 1</pre></div><div class='content'></div><h1>4. Computed i Watch</h1>
<div class='content'></div><h2>Computed</h2>
<div class='content'><p>Les propietats computades són valors derivats que es recalculen automàticament quan les seves dependències canvien.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgcmVmLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7Cgpjb25zdCBjb3VudCA9IHJlZigwKTsKY29uc3QgZG91YmxlQ291bnQgPSBjb21wdXRlZCgoKSA9PiBjb3VudC52YWx1ZSAqIDIpOwoKY29uc29sZS5sb2coZG91YmxlQ291bnQudmFsdWUpOyAvLyAwCmNvdW50LnZhbHVlKys7CmNvbnNvbGUubG9nKGRvdWJsZUNvdW50LnZhbHVlKTsgLy8gMg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ref, computed } from 'vue';

const count = ref(0);
const doubleCount = computed(() =&gt; count.value * 2);

console.log(doubleCount.value); // 0
count.value++;
console.log(doubleCount.value); // 2</pre></div><div class='content'></div><h2>Watch</h2>
<div class='content'><p>Els observadors (<code>watch</code>) permeten reaccionar a canvis en valors reactius.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgcmVmLCB3YXRjaCB9IGZyb20gJ3Z1ZSc7Cgpjb25zdCBjb3VudCA9IHJlZigwKTsKCndhdGNoKGNvdW50LCAobmV3VmFsdWUsIG9sZFZhbHVlKSA9PiB7CiAgY29uc29sZS5sb2coYENvdW50IGNoYW5nZWQgZnJvbSAke29sZFZhbHVlfSB0byAke25ld1ZhbHVlfWApOwp9KTsKCmNvdW50LnZhbHVlKys7IC8vIENvdW50IGNoYW5nZWQgZnJvbSAwIHRvIDE="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ref, watch } from 'vue';

const count = ref(0);

watch(count, (newValue, oldValue) =&gt; {
  console.log(`Count changed from ${oldValue} to ${newValue}`);
});

count.value++; // Count changed from 0 to 1</pre></div><div class='content'></div><h1>5. Mètodes de cicle de vida</h1>
<div class='content'><p>Els mètodes de cicle de vida es poden utilitzar dins de la <code>setup</code> function.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgb25Nb3VudGVkLCBvblVubW91bnRlZCB9IGZyb20gJ3Z1ZSc7Cgpvbk1vdW50ZWQoKCkgPT4gewogIGNvbnNvbGUubG9nKCdDb21wb25lbnQgbW91bnRlZCcpOwp9KTsKCm9uVW5tb3VudGVkKCgpID0+IHsKICBjb25zb2xlLmxvZygnQ29tcG9uZW50IHVubW91bnRlZCcpOwp9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { onMounted, onUnmounted } from 'vue';

onMounted(() =&gt; {
  console.log('Component mounted');
});

onUnmounted(() =&gt; {
  console.log('Component unmounted');
});</pre></div><div class='content'></div><h1>6. Composables</h1>
<div class='content'><p>Els composables són funcions que encapsulen la lògica reutilitzable utilitzant la API de composició.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gdXNlQ291bnRlci5qcwppbXBvcnQgeyByZWYgfSBmcm9tICd2dWUnOwoKZXhwb3J0IGZ1bmN0aW9uIHVzZUNvdW50ZXIoKSB7CiAgY29uc3QgY291bnQgPSByZWYoMCk7CiAgY29uc3QgaW5jcmVtZW50ID0gKCkgPT4gY291bnQudmFsdWUrKzsKICByZXR1cm4geyBjb3VudCwgaW5jcmVtZW50IH07Cn0KCi8vIENvbXBvbmVudC52dWUKPHNjcmlwdCBzZXR1cD4KaW1wb3J0IHsgdXNlQ291bnRlciB9IGZyb20gJy4vdXNlQ291bnRlcic7Cgpjb25zdCB7IGNvdW50LCBpbmNyZW1lbnQgfSA9IHVzZUNvdW50ZXIoKTsKPC9zY3JpcHQ+Cgo8dGVtcGxhdGU+CiAgPGRpdj4KICAgIDxwPnt7IGNvdW50IH19PC9wPgogICAgPGJ1dHRvbiBAY2xpY2s9ImluY3JlbWVudCI+SW5jcmVtZW50PC9idXR0b24+CiAgPC9kaXY+CjwvdGVtcGxhdGU+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// useCounter.js
import { ref } from 'vue';

export function useCounter() {
  const count = ref(0);
  const increment = () =&gt; count.value++;
  return { count, increment };
}

// Component.vue
&lt;script setup&gt;
import { useCounter } from './useCounter';

const { count, increment } = useCounter();
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;{{ count }}&lt;/p&gt;
    &lt;button @click=&quot;increment&quot;&gt;Increment&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;</pre></div><div class='content'></div><h1>7. Exercicis pràctics</h1>
<div class='content'></div><h2>Exercici 1: Crear un comptador amb la API de composició</h2>
<div class='content'><ol>
<li>Crea un component que utilitzi <code>ref</code> per crear un comptador.</li>
<li>Afegeix un botó per incrementar el comptador.</li>
<li>Mostra el valor del comptador en el template.</li>
</ol>
</div><h2>Solució:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PHNjcmlwdCBzZXR1cD4KaW1wb3J0IHsgcmVmIH0gZnJvbSAndnVlJzsKCmNvbnN0IGNvdW50ID0gcmVmKDApOwpjb25zdCBpbmNyZW1lbnQgPSAoKSA9PiBjb3VudC52YWx1ZSsrOwo8L3NjcmlwdD4KCjx0ZW1wbGF0ZT4KICA8ZGl2PgogICAgPHA+e3sgY291bnQgfX08L3A+CiAgICA8YnV0dG9uIEBjbGljaz0iaW5jcmVtZW50Ij5JbmNyZW1lbnQ8L2J1dHRvbj4KICA8L2Rpdj4KPC90ZW1wbGF0ZT4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;script setup&gt;
import { ref } from 'vue';

const count = ref(0);
const increment = () =&gt; count.value++;
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;{{ count }}&lt;/p&gt;
    &lt;button @click=&quot;increment&quot;&gt;Increment&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;</pre></div><div class='content'></div><h2>Exercici 2: Crear una propietat computada</h2>
<div class='content'><ol>
<li>Crea una propietat computada que dobli el valor del comptador.</li>
<li>Mostra el valor de la propietat computada en el template.</li>
</ol>
</div><h2>Solució:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PHNjcmlwdCBzZXR1cD4KaW1wb3J0IHsgcmVmLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7Cgpjb25zdCBjb3VudCA9IHJlZigwKTsKY29uc3QgZG91YmxlQ291bnQgPSBjb21wdXRlZCgoKSA9PiBjb3VudC52YWx1ZSAqIDIpOwpjb25zdCBpbmNyZW1lbnQgPSAoKSA9PiBjb3VudC52YWx1ZSsrOwo8L3NjcmlwdD4KCjx0ZW1wbGF0ZT4KICA8ZGl2PgogICAgPHA+Q291bnQ6IHt7IGNvdW50IH19PC9wPgogICAgPHA+RG91YmxlIENvdW50OiB7eyBkb3VibGVDb3VudCB9fTwvcD4KICAgIDxidXR0b24gQGNsaWNrPSJpbmNyZW1lbnQiPkluY3JlbWVudDwvYnV0dG9uPgogIDwvZGl2Pgo8L3RlbXBsYXRlPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;script setup&gt;
import { ref, computed } from 'vue';

const count = ref(0);
const doubleCount = computed(() =&gt; count.value * 2);
const increment = () =&gt; count.value++;
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;p&gt;Count: {{ count }}&lt;/p&gt;
    &lt;p&gt;Double Count: {{ doubleCount }}&lt;/p&gt;
    &lt;button @click=&quot;increment&quot;&gt;Increment&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>La API de composició de Vue 3 proporciona una manera poderosa i flexible de gestionar la lògica dels components. Amb <code>setup</code>, <code>ref</code>, <code>reactive</code>, <code>computed</code>, <code>watch</code> i els mètodes de cicle de vida, podem crear components més organitzats i reutilitzables. Els composables ens permeten encapsular la lògica reutilitzable de manera eficient. Practicar aquests conceptes és clau per dominar la API de composició i aprofitar al màxim les seves capacitats.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-02-ssr-nuxtjs' title="Renderització del costat del servidor (SSR) amb Nuxt.js">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-04-performance-optimization' title="Optimització del rendiment">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
