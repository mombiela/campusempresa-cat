<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Instrucció Select</title>

    <link rel="alternate" href="https://campusempresa.com/mod/go/05-03-select-statement" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/go/05-03-select-statement" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/go/05-03-select-statement" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<a href="https://enterprisecampus.net/mod/go/05-03-select-statement" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/go/05-03-select-statement" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</span>
			<span class="d-none d-md-inline"><br><cite>Tot el coneixement al teu abast</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
					 				<a href="/"><i class="bi bi-house-fill"></i> HOME</a>
											</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-02-channels' title="Canals">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Instrucció Select</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-04-mutexes-and-synchronization' title="Mutexes i Sincronització">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>L'instrucció <code>select</code> en Go és una característica poderosa que permet esperar múltiples operacions de canal. És similar a una instrucció <code>switch</code>, però per a canals. Amb <code>select</code>, pots esperar que un o més canals estiguin llestos per enviar o rebre dades, i executar el codi corresponent quan això succeeixi.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Canals</strong>: Els canals són utilitzats per comunicar-se entre goroutines. Pots enviar i rebre valors a través dels canals.</li>
<li><strong>Goroutines</strong>: Les goroutines són funcions o mètodes que s'executen de manera concurrent amb altres goroutines.</li>
<li><strong>Instrucció Select</strong>: Permet esperar múltiples operacions de canal i executar el codi corresponent quan una d'aquestes operacions està llesta.</li>
</ul>
</div><h1>Sintaxi de l'Instrucció Select</h1>
<div class='content'><p>La sintaxi bàsica de l'instrucció <code>select</code> és la següent:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VsZWN0IHsKY2FzZSA8LWNhbmFsMToKICAgIC8vIGNvZGkgYSBleGVjdXRhciBxdWFuIGNhbmFsMSBlc3TDoCBsbGVzdCBwZXIgcmVicmUKY2FzZSB2YWxvciA6PSA8LWNhbmFsMjoKICAgIC8vIGNvZGkgYSBleGVjdXRhciBxdWFuIGNhbmFsMiBlc3TDoCBsbGVzdCBwZXIgZW52aWFyCmNhc2UgY2FuYWwzIDwtIHZhbG9yOgogICAgLy8gY29kaSBhIGV4ZWN1dGFyIHF1YW4gY2FuYWwzIGVzdMOgIGxsZXN0IHBlciByZWJyZSB1biB2YWxvcgpkZWZhdWx0OgogICAgLy8gY29kaSBhIGV4ZWN1dGFyIHNpIGNhcCBkZWxzIGNhbmFscyBlc3TDoCBsbGVzdAp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>select {
case &lt;-canal1:
    // codi a executar quan canal1 est&agrave; llest per rebre
case valor := &lt;-canal2:
    // codi a executar quan canal2 est&agrave; llest per enviar
case canal3 &lt;- valor:
    // codi a executar quan canal3 est&agrave; llest per rebre un valor
default:
    // codi a executar si cap dels canals est&agrave; llest
}</pre></div><div class='content'></div><h1>Exemple Pràctic</h1>
<div class='content'><p>Vegem un exemple pràctic per entendre millor com funciona l'instrucció <code>select</code>.</p>
</div><h2>Exemple: Temporitzador i Canal de Missatges</h2>
<div class='content'><p>En aquest exemple, crearem un temporitzador i un canal de missatges. Utilitzarem l'instrucció <code>select</code> per esperar que un dels dos canals estigui llest.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImZtdCIKICAgICJ0aW1lIgopCgpmdW5jIG1haW4oKSB7CiAgICBtZXNzYWdlcyA6PSBtYWtlKGNoYW4gc3RyaW5nKQogICAgdGltZXIgOj0gdGltZS5BZnRlcigyICogdGltZS5TZWNvbmQpCgogICAgZ28gZnVuYygpIHsKICAgICAgICB0aW1lLlNsZWVwKDEgKiB0aW1lLlNlY29uZCkKICAgICAgICBtZXNzYWdlcyA8LSAiSG9sYSwgbcOzbiEiCiAgICB9KCkKCiAgICBzZWxlY3QgewogICAgY2FzZSBtc2cgOj0gPC1tZXNzYWdlczoKICAgICAgICBmbXQuUHJpbnRsbigiTWlzc2F0Z2UgcmVidXQ6IiwgbXNnKQogICAgY2FzZSA8LXRpbWVyOgogICAgICAgIGZtdC5QcmludGxuKCJUZW1wcyBlc2dvdGF0ISIpCiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;fmt&quot;
    &quot;time&quot;
)

func main() {
    messages := make(chan string)
    timer := time.After(2 * time.Second)

    go func() {
        time.Sleep(1 * time.Second)
        messages &lt;- &quot;Hola, m&oacute;n!&quot;
    }()

    select {
    case msg := &lt;-messages:
        fmt.Println(&quot;Missatge rebut:&quot;, msg)
    case &lt;-timer:
        fmt.Println(&quot;Temps esgotat!&quot;)
    }
}</pre></div><div class='content'></div><h2>Explicació del Codi</h2>
<div class='content'><ol>
<li>
<p><strong>Creació de Canals</strong>:</p>
<pre><code class="language-go">messages := make(chan string)
timer := time.After(2 * time.Second)
</code></pre>
<ul>
<li><code>messages</code>: Un canal de tipus <code>string</code> per enviar missatges.</li>
<li><code>timer</code>: Un canal que rebrà un valor després de 2 segons.</li>
</ul>
</li>
<li>
<p><strong>Goroutine</strong>:</p>
<pre><code class="language-go">go func() {
    time.Sleep(1 * time.Second)
    messages &lt;- &quot;Hola, món!&quot;
}()
</code></pre>
<ul>
<li>Aquesta goroutine espera 1 segon i després envia el missatge &quot;Hola, món!&quot; al canal <code>messages</code>.</li>
</ul>
</li>
<li>
<p><strong>Instrucció Select</strong>:</p>
<pre><code class="language-go">select {
case msg := &lt;-messages:
    fmt.Println(&quot;Missatge rebut:&quot;, msg)
case &lt;-timer:
    fmt.Println(&quot;Temps esgotat!&quot;)
}
</code></pre>
<ul>
<li>Si el canal <code>messages</code> està llest per enviar un missatge, es llegeix el missatge i es mostra.</li>
<li>Si el temporitzador expira abans que arribi el missatge, es mostra &quot;Temps esgotat!&quot;.</li>
</ul>
</li>
</ol>
</div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Canal de Comptador</h2>
<div class='content'><p>Crea un programa que utilitzi un canal per comptar fins a 5. Utilitza una goroutine per enviar els números al canal i una instrucció <code>select</code> per rebre'ls i imprimir-los.</p>
<h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImZtdCIKICAgICJ0aW1lIgopCgpmdW5jIG1haW4oKSB7CiAgICBjb3VudGVyIDo9IG1ha2UoY2hhbiBpbnQpCgogICAgZ28gZnVuYygpIHsKICAgICAgICBmb3IgaSA6PSAxOyBpIDw9IDU7IGkrKyB7CiAgICAgICAgICAgIGNvdW50ZXIgPC0gaQogICAgICAgICAgICB0aW1lLlNsZWVwKDUwMCAqIHRpbWUuTWlsbGlzZWNvbmQpCiAgICAgICAgfQogICAgICAgIGNsb3NlKGNvdW50ZXIpCiAgICB9KCkKCiAgICBmb3IgewogICAgICAgIHNlbGVjdCB7CiAgICAgICAgY2FzZSBudW0sIG9rIDo9IDwtY291bnRlcjoKICAgICAgICAgICAgaWYgIW9rIHsKICAgICAgICAgICAgICAgIGZtdC5QcmludGxuKCJDb21wdGFkb3IgdGFuY2F0IikKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIGZtdC5QcmludGxuKCJOw7ptZXJvIHJlYnV0OiIsIG51bSkKICAgICAgICB9CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;fmt&quot;
    &quot;time&quot;
)

func main() {
    counter := make(chan int)

    go func() {
        for i := 1; i &lt;= 5; i++ {
            counter &lt;- i
            time.Sleep(500 * time.Millisecond)
        }
        close(counter)
    }()

    for {
        select {
        case num, ok := &lt;-counter:
            if !ok {
                fmt.Println(&quot;Comptador tancat&quot;)
                return
            }
            fmt.Println(&quot;N&uacute;mero rebut:&quot;, num)
        }
    }
}</pre></div><div class='content'></div><h2>Exercici 2: Canal de Temps i Missatges</h2>
<div class='content'><p>Crea un programa que utilitzi dos canals: un per enviar missatges i un altre per enviar el temps actual cada segon. Utilitza una instrucció <code>select</code> per imprimir el missatge o el temps, segons quin canal estigui llest primer.</p>
<h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImZtdCIKICAgICJ0aW1lIgopCgpmdW5jIG1haW4oKSB7CiAgICBtZXNzYWdlcyA6PSBtYWtlKGNoYW4gc3RyaW5nKQogICAgdGlja2VyIDo9IHRpbWUuTmV3VGlja2VyKDEgKiB0aW1lLlNlY29uZCkKCiAgICBnbyBmdW5jKCkgewogICAgICAgIGZvciB7CiAgICAgICAgICAgIHRpbWUuU2xlZXAoMyAqIHRpbWUuU2Vjb25kKQogICAgICAgICAgICBtZXNzYWdlcyA8LSAiTWlzc2F0Z2UgcGVyacOyZGljIgogICAgICAgIH0KICAgIH0oKQoKICAgIGZvciB7CiAgICAgICAgc2VsZWN0IHsKICAgICAgICBjYXNlIG1zZyA6PSA8LW1lc3NhZ2VzOgogICAgICAgICAgICBmbXQuUHJpbnRsbigiTWlzc2F0Z2UgcmVidXQ6IiwgbXNnKQogICAgICAgIGNhc2UgdCA6PSA8LXRpY2tlci5DOgogICAgICAgICAgICBmbXQuUHJpbnRsbigiSG9yYSBhY3R1YWw6IiwgdCkKICAgICAgICB9CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;fmt&quot;
    &quot;time&quot;
)

func main() {
    messages := make(chan string)
    ticker := time.NewTicker(1 * time.Second)

    go func() {
        for {
            time.Sleep(3 * time.Second)
            messages &lt;- &quot;Missatge peri&ograve;dic&quot;
        }
    }()

    for {
        select {
        case msg := &lt;-messages:
            fmt.Println(&quot;Missatge rebut:&quot;, msg)
        case t := &lt;-ticker.C:
            fmt.Println(&quot;Hora actual:&quot;, t)
        }
    }
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>L'instrucció <code>select</code> és una eina essencial per gestionar la concurrència en Go. Permet esperar múltiples operacions de canal i executar el codi corresponent quan una d'aquestes operacions està llesta. Amb la pràctica, podràs utilitzar <code>select</code> per crear programes més eficients i responsius.</p>
<p>En el següent tema, explorarem els mutexes i la sincronització per gestionar l'accés concurrent a recursos compartits.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-02-channels' title="Canals">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-04-mutexes-and-synchronization' title="Mutexes i Sincronització">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
				<!-- 
	<h1>Publicitat</h1>
	<p>Aquest espai està destinat a publicitat.</p>
	<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
	<p>Gràcies per col·laborar!</p>
	 -->
			









		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
