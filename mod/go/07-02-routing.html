<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enrutament</title>

    <link rel="alternate" href="https://campusempresa.com/mod/go/07-02-routing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/go/07-02-routing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/go/07-02-routing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/go/07-02-routing" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/go/07-02-routing" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Contingut del curs</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competències tècniques</a>
				<a href="/all/conocimientos">Coneixements</a>
				<a href="/all/soft_skills">Competències socials</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-01-building-a-simple-web-server' title="Construcció d'un Servidor Web Simple">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Enrutament</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-03-middleware' title="Middleware">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com gestionar les rutes en una aplicació web escrita en Go. L'enrutament és una part fonamental de qualsevol aplicació web, ja que permet definir com es gestionen les diferents sol·licituds HTTP que arriben al servidor.</p>
</div><h1><p>Objectius</p>
</h1>
<div class='content'><ul>
<li>Entendre què és l'enrutament i per què és important.</li>
<li>Aprendre a definir rutes bàsiques en Go.</li>
<li>Utilitzar un paquet de tercers per a l'enrutament avançat.</li>
<li>Gestionar paràmetres en les rutes.</li>
<li>Implementar middleware per a les rutes.</li>
</ul>
</div><h1><p>Què és l'Enrutament?</p>
</h1>
<div class='content'><p>L'enrutament és el procés de mapejar les sol·licituds HTTP a funcions específiques que gestionen aquestes sol·licituds. En una aplicació web, les rutes defineixen com es gestionen les sol·licituds per a diferents URL.</p>
</div><h1><p>Definint Rutes Bàsiques</p>
</h1>
<div class='content'><p>Comencem amb un exemple senzill d'enrutament utilitzant el paquet <code>net/http</code> de la biblioteca estàndard de Go.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImZtdCIKICAgICJuZXQvaHR0cCIKKQoKZnVuYyBob21lSGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkgewogICAgZm10LkZwcmludGYodywgIkJlbnZpbmd1dCBhIGxhIHDDoGdpbmEgcHJpbmNpcGFsISIpCn0KCmZ1bmMgYWJvdXRIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7CiAgICBmbXQuRnByaW50Zih3LCAiQXF1ZXN0YSDDqXMgbGEgcMOgZ2luYSBzb2JyZSBub3NhbHRyZXMuIikKfQoKZnVuYyBtYWluKCkgewogICAgaHR0cC5IYW5kbGVGdW5jKCIvIiwgaG9tZUhhbmRsZXIpCiAgICBodHRwLkhhbmRsZUZ1bmMoIi9hYm91dCIsIGFib3V0SGFuZGxlcikKICAgIGh0dHAuTGlzdGVuQW5kU2VydmUoIjo4MDgwIiwgbmlsKQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;fmt&quot;
    &quot;net/http&quot;
)

func homeHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, &quot;Benvingut a la p&agrave;gina principal!&quot;)
}

func aboutHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, &quot;Aquesta &eacute;s la p&agrave;gina sobre nosaltres.&quot;)
}

func main() {
    http.HandleFunc(&quot;/&quot;, homeHandler)
    http.HandleFunc(&quot;/about&quot;, aboutHandler)
    http.ListenAndServe(&quot;:8080&quot;, nil)
}</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Importació de Paquets</strong>: Importem els paquets necessaris (<code>fmt</code> i <code>net/http</code>).</li>
<li><strong>Definició de Funcions de Gestió</strong>: Definim dues funcions (<code>homeHandler</code> i <code>aboutHandler</code>) que gestionen les sol·licituds per a les rutes <code>/</code> i <code>/about</code>, respectivament.</li>
<li><strong>Mapeig de Rutes</strong>: Utilitzem <code>http.HandleFunc</code> per mapar les rutes a les funcions de gestió.</li>
<li><strong>Inici del Servidor</strong>: Utilitzem <code>http.ListenAndServe</code> per iniciar el servidor a <code>localhost</code> en el port <code>8080</code>.</li>
</ol>
</div><h1><p>Utilitzant un Paquet de Tercers: <code>gorilla/mux</code></p>
</h1>
<div class='content'><p>Per a una gestió d'enrutament més avançada, podem utilitzar el paquet <code>gorilla/mux</code>.</p>
</div><h2><p>Instal·lació</p>
</h2>
<div class='content'><p>Per instal·lar <code>gorilla/mux</code>, executa:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z28gZ2V0IC11IGdpdGh1Yi5jb20vZ29yaWxsYS9tdXg="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>go get -u github.com/gorilla/mux</pre></div><div class='content'></div><h2><p>Exemple amb <code>gorilla/mux</code></p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImZtdCIKICAgICJuZXQvaHR0cCIKICAgICJnaXRodWIuY29tL2dvcmlsbGEvbXV4IgopCgpmdW5jIGhvbWVIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7CiAgICBmbXQuRnByaW50Zih3LCAiQmVudmluZ3V0IGEgbGEgcMOgZ2luYSBwcmluY2lwYWwhIikKfQoKZnVuYyBhYm91dEhhbmRsZXIodyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHsKICAgIGZtdC5GcHJpbnRmKHcsICJBcXVlc3RhIMOpcyBsYSBww6BnaW5hIHNvYnJlIG5vc2FsdHJlcy4iKQp9CgpmdW5jIG1haW4oKSB7CiAgICByIDo9IG11eC5OZXdSb3V0ZXIoKQogICAgci5IYW5kbGVGdW5jKCIvIiwgaG9tZUhhbmRsZXIpCiAgICByLkhhbmRsZUZ1bmMoIi9hYm91dCIsIGFib3V0SGFuZGxlcikKICAgIGh0dHAuTGlzdGVuQW5kU2VydmUoIjo4MDgwIiwgcikKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;fmt&quot;
    &quot;net/http&quot;
    &quot;github.com/gorilla/mux&quot;
)

func homeHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, &quot;Benvingut a la p&agrave;gina principal!&quot;)
}

func aboutHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, &quot;Aquesta &eacute;s la p&agrave;gina sobre nosaltres.&quot;)
}

func main() {
    r := mux.NewRouter()
    r.HandleFunc(&quot;/&quot;, homeHandler)
    r.HandleFunc(&quot;/about&quot;, aboutHandler)
    http.ListenAndServe(&quot;:8080&quot;, r)
}</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Importació de Paquets</strong>: A més dels paquets <code>fmt</code> i <code>net/http</code>, importem <code>github.com/gorilla/mux</code>.</li>
<li><strong>Creació del Router</strong>: Utilitzem <code>mux.NewRouter</code> per crear un nou router.</li>
<li><strong>Mapeig de Rutes</strong>: Utilitzem <code>r.HandleFunc</code> per mapar les rutes a les funcions de gestió.</li>
<li><strong>Inici del Servidor</strong>: Utilitzem <code>http.ListenAndServe</code> per iniciar el servidor, passant el router com a segon argument.</li>
</ol>
</div><h1><p>Gestionant Paràmetres en les Rutes</p>
</h1>
<div class='content'><p>Amb <code>gorilla/mux</code>, podem gestionar paràmetres en les rutes de manera senzilla.</p>
</div><h2><p>Exemple amb Paràmetres</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImZtdCIKICAgICJuZXQvaHR0cCIKICAgICJnaXRodWIuY29tL2dvcmlsbGEvbXV4IgopCgpmdW5jIGFydGljbGVIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7CiAgICB2YXJzIDo9IG11eC5WYXJzKHIpCiAgICBhcnRpY2xlSUQgOj0gdmFyc1siaWQiXQogICAgZm10LkZwcmludGYodywgIkVzdMOgcyB2ZWllbnQgbCdhcnRpY2xlIGFtYiBJRDogJXMiLCBhcnRpY2xlSUQpCn0KCmZ1bmMgbWFpbigpIHsKICAgIHIgOj0gbXV4Lk5ld1JvdXRlcigpCiAgICByLkhhbmRsZUZ1bmMoIi9hcnRpY2xlL3tpZH0iLCBhcnRpY2xlSGFuZGxlcikKICAgIGh0dHAuTGlzdGVuQW5kU2VydmUoIjo4MDgwIiwgcikKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;fmt&quot;
    &quot;net/http&quot;
    &quot;github.com/gorilla/mux&quot;
)

func articleHandler(w http.ResponseWriter, r *http.Request) {
    vars := mux.Vars(r)
    articleID := vars[&quot;id&quot;]
    fmt.Fprintf(w, &quot;Est&agrave;s veient l'article amb ID: %s&quot;, articleID)
}

func main() {
    r := mux.NewRouter()
    r.HandleFunc(&quot;/article/{id}&quot;, articleHandler)
    http.ListenAndServe(&quot;:8080&quot;, r)
}</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Funció de Gestió amb Paràmetres</strong>: La funció <code>articleHandler</code> utilitza <code>mux.Vars</code> per obtenir els paràmetres de la ruta.</li>
<li><strong>Definició de la Ruta amb Paràmetres</strong>: Utilitzem <code>{id}</code> per definir un paràmetre en la ruta <code>/article/{id}</code>.</li>
</ol>
</div><h1><p>Implementant Middleware</p>
</h1>
<div class='content'><p>El middleware és una funció que s'executa abans que la funció de gestió de la ruta. Pot ser utilitzat per a tasques com l'autenticació, el registre, etc.</p>
</div><h2><p>Exemple de Middleware</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImZtdCIKICAgICJuZXQvaHR0cCIKICAgICJnaXRodWIuY29tL2dvcmlsbGEvbXV4IgopCgpmdW5jIGxvZ2dpbmdNaWRkbGV3YXJlKG5leHQgaHR0cC5IYW5kbGVyKSBodHRwLkhhbmRsZXIgewogICAgcmV0dXJuIGh0dHAuSGFuZGxlckZ1bmMoZnVuYyh3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkgewogICAgICAgIGZtdC5QcmludGxuKCJTb2zCt2xpY2l0dWQgcmVidWRhOiIsIHIuTWV0aG9kLCByLlVSTCkKICAgICAgICBuZXh0LlNlcnZlSFRUUCh3LCByKQogICAgfSkKfQoKZnVuYyBob21lSGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkgewogICAgZm10LkZwcmludGYodywgIkJlbnZpbmd1dCBhIGxhIHDDoGdpbmEgcHJpbmNpcGFsISIpCn0KCmZ1bmMgbWFpbigpIHsKICAgIHIgOj0gbXV4Lk5ld1JvdXRlcigpCiAgICByLlVzZShsb2dnaW5nTWlkZGxld2FyZSkKICAgIHIuSGFuZGxlRnVuYygiLyIsIGhvbWVIYW5kbGVyKQogICAgaHR0cC5MaXN0ZW5BbmRTZXJ2ZSgiOjgwODAiLCByKQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;fmt&quot;
    &quot;net/http&quot;
    &quot;github.com/gorilla/mux&quot;
)

func loggingMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        fmt.Println(&quot;Sol&middot;licitud rebuda:&quot;, r.Method, r.URL)
        next.ServeHTTP(w, r)
    })
}

func homeHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, &quot;Benvingut a la p&agrave;gina principal!&quot;)
}

func main() {
    r := mux.NewRouter()
    r.Use(loggingMiddleware)
    r.HandleFunc(&quot;/&quot;, homeHandler)
    http.ListenAndServe(&quot;:8080&quot;, r)
}</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Funció de Middleware</strong>: La funció <code>loggingMiddleware</code> registra la sol·licitud i després crida <code>next.ServeHTTP</code> per passar la sol·licitud a la següent funció de gestió.</li>
<li><strong>Aplicació del Middleware</strong>: Utilitzem <code>r.Use</code> per aplicar el middleware al router.</li>
</ol>
</div><h1><p>Exercicis Pràctics</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Exercici 1</strong>: Crea una aplicació web que tingui les següents rutes:</p>
<ul>
<li><code>/</code>: Mostra un missatge de benvinguda.</li>
<li><code>/contact</code>: Mostra informació de contacte.</li>
<li><code>/product/{id}</code>: Mostra informació sobre un producte específic basat en l'ID.</li>
</ul>
</li>
<li>
<p><strong>Exercici 2</strong>: Implementa un middleware que registri el temps que triga a processar cada sol·licitud.</p>
</li>
</ol>
</div><h2><p>Solucions</p>
</h2>
<div class='content'><p><strong>Solució Exercici 1</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImZtdCIKICAgICJuZXQvaHR0cCIKICAgICJnaXRodWIuY29tL2dvcmlsbGEvbXV4IgopCgpmdW5jIGhvbWVIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7CiAgICBmbXQuRnByaW50Zih3LCAiQmVudmluZ3V0IGEgbGEgcMOgZ2luYSBwcmluY2lwYWwhIikKfQoKZnVuYyBjb250YWN0SGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkgewogICAgZm10LkZwcmludGYodywgIkNvbnRhY3RhJ25zIGE6IGNvbnRhY3RAZXhhbXBsZS5jb20iKQp9CgpmdW5jIHByb2R1Y3RIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7CiAgICB2YXJzIDo9IG11eC5WYXJzKHIpCiAgICBwcm9kdWN0SUQgOj0gdmFyc1siaWQiXQogICAgZm10LkZwcmludGYodywgIkVzdMOgcyB2ZWllbnQgZWwgcHJvZHVjdGUgYW1iIElEOiAlcyIsIHByb2R1Y3RJRCkKfQoKZnVuYyBtYWluKCkgewogICAgciA6PSBtdXguTmV3Um91dGVyKCkKICAgIHIuSGFuZGxlRnVuYygiLyIsIGhvbWVIYW5kbGVyKQogICAgci5IYW5kbGVGdW5jKCIvY29udGFjdCIsIGNvbnRhY3RIYW5kbGVyKQogICAgci5IYW5kbGVGdW5jKCIvcHJvZHVjdC97aWR9IiwgcHJvZHVjdEhhbmRsZXIpCiAgICBodHRwLkxpc3RlbkFuZFNlcnZlKCI6ODA4MCIsIHIpCn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;fmt&quot;
    &quot;net/http&quot;
    &quot;github.com/gorilla/mux&quot;
)

func homeHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, &quot;Benvingut a la p&agrave;gina principal!&quot;)
}

func contactHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, &quot;Contacta'ns a: contact@example.com&quot;)
}

func productHandler(w http.ResponseWriter, r *http.Request) {
    vars := mux.Vars(r)
    productID := vars[&quot;id&quot;]
    fmt.Fprintf(w, &quot;Est&agrave;s veient el producte amb ID: %s&quot;, productID)
}

func main() {
    r := mux.NewRouter()
    r.HandleFunc(&quot;/&quot;, homeHandler)
    r.HandleFunc(&quot;/contact&quot;, contactHandler)
    r.HandleFunc(&quot;/product/{id}&quot;, productHandler)
    http.ListenAndServe(&quot;:8080&quot;, r)
}</pre></div><div class='content'><p><strong>Solució Exercici 2</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImZtdCIKICAgICJuZXQvaHR0cCIKICAgICJ0aW1lIgogICAgImdpdGh1Yi5jb20vZ29yaWxsYS9tdXgiCikKCmZ1bmMgdGltaW5nTWlkZGxld2FyZShuZXh0IGh0dHAuSGFuZGxlcikgaHR0cC5IYW5kbGVyIHsKICAgIHJldHVybiBodHRwLkhhbmRsZXJGdW5jKGZ1bmModyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHsKICAgICAgICBzdGFydCA6PSB0aW1lLk5vdygpCiAgICAgICAgbmV4dC5TZXJ2ZUhUVFAodywgcikKICAgICAgICBkdXJhdGlvbiA6PSB0aW1lLlNpbmNlKHN0YXJ0KQogICAgICAgIGZtdC5QcmludGxuKCJUZW1wcyBkZSBwcm9jZXNzYW1lbnQ6IiwgZHVyYXRpb24pCiAgICB9KQp9CgpmdW5jIGhvbWVIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7CiAgICBmbXQuRnByaW50Zih3LCAiQmVudmluZ3V0IGEgbGEgcMOgZ2luYSBwcmluY2lwYWwhIikKfQoKZnVuYyBtYWluKCkgewogICAgciA6PSBtdXguTmV3Um91dGVyKCkKICAgIHIuVXNlKHRpbWluZ01pZGRsZXdhcmUpCiAgICByLkhhbmRsZUZ1bmMoIi8iLCBob21lSGFuZGxlcikKICAgIGh0dHAuTGlzdGVuQW5kU2VydmUoIjo4MDgwIiwgcikKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;fmt&quot;
    &quot;net/http&quot;
    &quot;time&quot;
    &quot;github.com/gorilla/mux&quot;
)

func timingMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        start := time.Now()
        next.ServeHTTP(w, r)
        duration := time.Since(start)
        fmt.Println(&quot;Temps de processament:&quot;, duration)
    })
}

func homeHandler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintf(w, &quot;Benvingut a la p&agrave;gina principal!&quot;)
}

func main() {
    r := mux.NewRouter()
    r.Use(timingMiddleware)
    r.HandleFunc(&quot;/&quot;, homeHandler)
    http.ListenAndServe(&quot;:8080&quot;, r)
}</pre></div><div class='content'></div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>En aquesta secció, hem après els conceptes bàsics de l'enrutament en Go, com definir rutes bàsiques, utilitzar un paquet de tercers per a l'enrutament avançat, gestionar paràmetres en les rutes i implementar middleware. Amb aquests coneixements, estàs preparat per gestionar les rutes de la teva aplicació web de manera eficient i organitzada.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-01-building-a-simple-web-server' title="Construcció d'un Servidor Web Simple">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-03-middleware' title="Middleware">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
