<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treballar amb Fragments</title>

    <link rel="alternate" href="https://campusempresa.com/mod/androidstudio/03-02-working-with-fragments" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/androidstudio/03-02-working-with-fragments" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/androidstudio/03-02-working-with-fragments" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/androidstudio/03-02-working-with-fragments" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/androidstudio/03-02-working-with-fragments" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
<br>
			<cite>Construint la societat d'avui i del demà</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Contingut del curs</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competències tècniques</a>
				<a href="/all/conocimientos">Coneixements</a>
				<a href="/all/soft_skills">Competències socials</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-01-introduction-to-intents' title="Introducció als Intents">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Treballar amb Fragments</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-03-handling-user-input' title="Gestió de l'Entrada de l'Usuari">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Els fragments són components modulars que permeten dividir la interfície d'usuari d'una aplicació en parts més petites i reutilitzables. Són especialment útils per a aplicacions que necessiten adaptar-se a diferents mides de pantalla, com ara telèfons i tauletes. En aquest tema, aprendrem què són els fragments, com crear-los, com gestionar-los i com comunicar-los entre ells.</p>
</div><h1><p>Què és un Fragment?</p>
</h1>
<div class='content'><p>Un fragment és una part de la interfície d'usuari d'una activitat que es pot reutilitzar en diverses activitats. Els fragments tenen el seu propi cicle de vida, que està estretament lligat al cicle de vida de l'activitat que els conté.</p>
</div><h2><p>Característiques dels Fragments:</p>
</h2>
<div class='content'><ul>
<li><strong>Modularitat</strong>: Permeten dividir la interfície d'usuari en components més petits.</li>
<li><strong>Reutilitzabilitat</strong>: Es poden reutilitzar en diferents activitats.</li>
<li><strong>Gestió del cicle de vida</strong>: Tenen el seu propi cicle de vida, però estan lligats al cicle de vida de l'activitat.</li>
</ul>
</div><h1><p>Creació d'un Fragment</p>
</h1>
<div class='content'></div><h2><p>Pas 1: Crear una Classe de Fragment</p>
</h2>
<div class='content'><p>Primer, crearem una classe que hereti de <code>Fragment</code>. Aquesta classe definirà el comportament del nostre fragment.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWQub3MuQnVuZGxlOwppbXBvcnQgYW5kcm9pZHguZnJhZ21lbnQuYXBwLkZyYWdtZW50OwppbXBvcnQgYW5kcm9pZC52aWV3LkxheW91dEluZmxhdGVyOwppbXBvcnQgYW5kcm9pZC52aWV3LlZpZXc7CmltcG9ydCBhbmRyb2lkLnZpZXcuVmlld0dyb3VwOwoKcHVibGljIGNsYXNzIEV4YW1wbGVGcmFnbWVudCBleHRlbmRzIEZyYWdtZW50IHsKCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBWaWV3IG9uQ3JlYXRlVmlldyhMYXlvdXRJbmZsYXRlciBpbmZsYXRlciwgVmlld0dyb3VwIGNvbnRhaW5lciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCdW5kbGUgc2F2ZWRJbnN0YW5jZVN0YXRlKSB7CiAgICAgICAgLy8gSW5mbGF0ZSB0aGUgbGF5b3V0IGZvciB0aGlzIGZyYWdtZW50CiAgICAgICAgcmV0dXJuIGluZmxhdGVyLmluZmxhdGUoUi5sYXlvdXQuZnJhZ21lbnRfZXhhbXBsZSwgY29udGFpbmVyLCBmYWxzZSk7CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import android.os.Bundle;
import androidx.fragment.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class ExampleFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.fragment_example, container, false);
    }
}</pre></div><div class='content'></div><h2><p>Pas 2: Crear un Layout per al Fragment</p>
</h2>
<div class='content'><p>Després, crearem un fitxer XML per definir la interfície d'usuari del fragment.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSByZXMvbGF5b3V0L2ZyYWdtZW50X2V4YW1wbGUueG1sIC0tPgo8TGluZWFyTGF5b3V0IHhtbG5zOmFuZHJvaWQ9Imh0dHA6Ly9zY2hlbWFzLmFuZHJvaWQuY29tL2Fway9yZXMvYW5kcm9pZCIKICAgIGFuZHJvaWQ6bGF5b3V0X3dpZHRoPSJtYXRjaF9wYXJlbnQiCiAgICBhbmRyb2lkOmxheW91dF9oZWlnaHQ9Im1hdGNoX3BhcmVudCIKICAgIGFuZHJvaWQ6b3JpZW50YXRpb249InZlcnRpY2FsIj4KCiAgICA8VGV4dFZpZXcKICAgICAgICBhbmRyb2lkOmxheW91dF93aWR0aD0id3JhcF9jb250ZW50IgogICAgICAgIGFuZHJvaWQ6bGF5b3V0X2hlaWdodD0id3JhcF9jb250ZW50IgogICAgICAgIGFuZHJvaWQ6dGV4dD0iSGVsbG8sIHRoaXMgaXMgYSBmcmFnbWVudCEiIC8+Cgo8L0xpbmVhckxheW91dD4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- res/layout/fragment_example.xml --&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:orientation=&quot;vertical&quot;&gt;

    &lt;TextView
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;Hello, this is a fragment!&quot; /&gt;

&lt;/LinearLayout&gt;</pre></div><div class='content'></div><h2><p>Pas 3: Afegir el Fragment a una Activitat</p>
</h2>
<div class='content'><p>Podem afegir el fragment a una activitat mitjançant el fitxer XML de l'activitat o programàticament.</p>
<h4>Mitjançant XML</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSByZXMvbGF5b3V0L2FjdGl2aXR5X21haW4ueG1sIC0tPgo8RnJhbWVMYXlvdXQgeG1sbnM6YW5kcm9pZD0iaHR0cDovL3NjaGVtYXMuYW5kcm9pZC5jb20vYXBrL3Jlcy9hbmRyb2lkIgogICAgYW5kcm9pZDppZD0iQCtpZC9mcmFnbWVudF9jb250YWluZXIiCiAgICBhbmRyb2lkOmxheW91dF93aWR0aD0ibWF0Y2hfcGFyZW50IgogICAgYW5kcm9pZDpsYXlvdXRfaGVpZ2h0PSJtYXRjaF9wYXJlbnQiIC8+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- res/layout/activity_main.xml --&gt;
&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:id=&quot;@+id/fragment_container&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot; /&gt;</pre></div><div class='content'><h4>Programàticament</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWQub3MuQnVuZGxlOwppbXBvcnQgYW5kcm9pZHguYXBwY29tcGF0LmFwcC5BcHBDb21wYXRBY3Rpdml0eTsKCnB1YmxpYyBjbGFzcyBNYWluQWN0aXZpdHkgZXh0ZW5kcyBBcHBDb21wYXRBY3Rpdml0eSB7CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBvbkNyZWF0ZShCdW5kbGUgc2F2ZWRJbnN0YW5jZVN0YXRlKSB7CiAgICAgICAgc3VwZXIub25DcmVhdGUoc2F2ZWRJbnN0YW5jZVN0YXRlKTsKICAgICAgICBzZXRDb250ZW50VmlldyhSLmxheW91dC5hY3Rpdml0eV9tYWluKTsKCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZyYWdtZW50IGNvbnRhaW5lciBpcyBwcmVzZW50CiAgICAgICAgaWYgKGZpbmRWaWV3QnlJZChSLmlkLmZyYWdtZW50X2NvbnRhaW5lcikgIT0gbnVsbCkgewogICAgICAgICAgICAvLyBJZiB3ZSdyZSBiZWluZyByZXN0b3JlZCBmcm9tIGEgcHJldmlvdXMgc3RhdGUsIHRoZW4gd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZwogICAgICAgICAgICBpZiAoc2F2ZWRJbnN0YW5jZVN0YXRlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IEZyYWdtZW50IHRvIGJlIHBsYWNlZCBpbiB0aGUgYWN0aXZpdHkgbGF5b3V0CiAgICAgICAgICAgIEV4YW1wbGVGcmFnbWVudCBmaXJzdEZyYWdtZW50ID0gbmV3IEV4YW1wbGVGcmFnbWVudCgpOwoKICAgICAgICAgICAgLy8gQWRkIHRoZSBmcmFnbWVudCB0byB0aGUgJ2ZyYWdtZW50X2NvbnRhaW5lcicgRnJhbWVMYXlvdXQKICAgICAgICAgICAgZ2V0U3VwcG9ydEZyYWdtZW50TWFuYWdlcigpLmJlZ2luVHJhbnNhY3Rpb24oKQogICAgICAgICAgICAgICAgICAgIC5hZGQoUi5pZC5mcmFnbWVudF9jb250YWluZXIsIGZpcnN0RnJhZ21lbnQpLmNvbW1pdCgpOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import android.os.Bundle;
import androidx.appcompat.app.AppCompatActivity;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Check if the fragment container is present
        if (findViewById(R.id.fragment_container) != null) {
            // If we're being restored from a previous state, then we don't need to do anything
            if (savedInstanceState != null) {
                return;
            }

            // Create a new Fragment to be placed in the activity layout
            ExampleFragment firstFragment = new ExampleFragment();

            // Add the fragment to the 'fragment_container' FrameLayout
            getSupportFragmentManager().beginTransaction()
                    .add(R.id.fragment_container, firstFragment).commit();
        }
    }
}</pre></div><div class='content'></div><h1><p>Comunicació entre Fragments</p>
</h1>
<div class='content'><p>Els fragments poden comunicar-se entre ells a través de l'activitat que els conté. Una manera comuna de fer-ho és utilitzar una interfície.</p>
</div><h2><p>Pas 1: Definir una Interfície</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGludGVyZmFjZSBPbkZyYWdtZW50SW50ZXJhY3Rpb25MaXN0ZW5lciB7CiAgICB2b2lkIG9uRnJhZ21lbnRJbnRlcmFjdGlvbihTdHJpbmcgZGF0YSk7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public interface OnFragmentInteractionListener {
    void onFragmentInteraction(String data);
}</pre></div><div class='content'></div><h2><p>Pas 2: Implementar la Interfície a l'Activitat</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIE1haW5BY3Rpdml0eSBleHRlbmRzIEFwcENvbXBhdEFjdGl2aXR5IGltcGxlbWVudHMgT25GcmFnbWVudEludGVyYWN0aW9uTGlzdGVuZXIgewoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgb25GcmFnbWVudEludGVyYWN0aW9uKFN0cmluZyBkYXRhKSB7CiAgICAgICAgLy8gSGFuZGxlIHRoZSBpbnRlcmFjdGlvbgogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class MainActivity extends AppCompatActivity implements OnFragmentInteractionListener {

    @Override
    public void onFragmentInteraction(String data) {
        // Handle the interaction
    }
}</pre></div><div class='content'></div><h2><p>Pas 3: Utilitzar la Interfície al Fragment</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIEV4YW1wbGVGcmFnbWVudCBleHRlbmRzIEZyYWdtZW50IHsKCiAgICBwcml2YXRlIE9uRnJhZ21lbnRJbnRlcmFjdGlvbkxpc3RlbmVyIG1MaXN0ZW5lcjsKCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIG9uQXR0YWNoKENvbnRleHQgY29udGV4dCkgewogICAgICAgIHN1cGVyLm9uQXR0YWNoKGNvbnRleHQpOwogICAgICAgIGlmIChjb250ZXh0IGluc3RhbmNlb2YgT25GcmFnbWVudEludGVyYWN0aW9uTGlzdGVuZXIpIHsKICAgICAgICAgICAgbUxpc3RlbmVyID0gKE9uRnJhZ21lbnRJbnRlcmFjdGlvbkxpc3RlbmVyKSBjb250ZXh0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXhjZXB0aW9uKGNvbnRleHQudG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgICsgIiBtdXN0IGltcGxlbWVudCBPbkZyYWdtZW50SW50ZXJhY3Rpb25MaXN0ZW5lciIpOwogICAgICAgIH0KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIG9uRGV0YWNoKCkgewogICAgICAgIHN1cGVyLm9uRGV0YWNoKCk7CiAgICAgICAgbUxpc3RlbmVyID0gbnVsbDsKICAgIH0KCiAgICAvLyBDYWxsIHRoaXMgbWV0aG9kIHRvIHNlbmQgZGF0YSB0byB0aGUgYWN0aXZpdHkKICAgIHB1YmxpYyB2b2lkIHNlbmREYXRhVG9BY3Rpdml0eShTdHJpbmcgZGF0YSkgewogICAgICAgIGlmIChtTGlzdGVuZXIgIT0gbnVsbCkgewogICAgICAgICAgICBtTGlzdGVuZXIub25GcmFnbWVudEludGVyYWN0aW9uKGRhdGEpOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class ExampleFragment extends Fragment {

    private OnFragmentInteractionListener mListener;

    @Override
    public void onAttach(Context context) {
        super.onAttach(context);
        if (context instanceof OnFragmentInteractionListener) {
            mListener = (OnFragmentInteractionListener) context;
        } else {
            throw new RuntimeException(context.toString()
                    + &quot; must implement OnFragmentInteractionListener&quot;);
        }
    }

    @Override
    public void onDetach() {
        super.onDetach();
        mListener = null;
    }

    // Call this method to send data to the activity
    public void sendDataToActivity(String data) {
        if (mListener != null) {
            mListener.onFragmentInteraction(data);
        }
    }
}</pre></div><div class='content'></div><h1><p>Exercici Pràctic</p>
</h1>
<div class='content'></div><h2><p>Objectiu</p>
</h2>
<div class='content'><p>Crear una aplicació que tingui dos fragments. El primer fragment contindrà un botó que, quan es premi, enviarà un missatge al segon fragment per mostrar-lo en un <code>TextView</code>.</p>
</div><h2><p>Passos</p>
</h2>
<div class='content'><ol>
<li><strong>Crear dos fragments</strong>: <code>FirstFragment</code> i <code>SecondFragment</code>.</li>
<li><strong>Definir una interfície</strong> per a la comunicació entre fragments.</li>
<li><strong>Implementar la interfície a l'activitat</strong>.</li>
<li><strong>Enviar dades des del primer fragment</strong> al segon fragment.</li>
</ol>
</div><h2><p>Solució</p>
</h2>
<div class='content'><h4>FirstFragment.java</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIEZpcnN0RnJhZ21lbnQgZXh0ZW5kcyBGcmFnbWVudCB7CgogICAgcHJpdmF0ZSBPbkZyYWdtZW50SW50ZXJhY3Rpb25MaXN0ZW5lciBtTGlzdGVuZXI7CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgVmlldyBvbkNyZWF0ZVZpZXcoTGF5b3V0SW5mbGF0ZXIgaW5mbGF0ZXIsIFZpZXdHcm91cCBjb250YWluZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQnVuZGxlIHNhdmVkSW5zdGFuY2VTdGF0ZSkgewogICAgICAgIFZpZXcgdmlldyA9IGluZmxhdGVyLmluZmxhdGUoUi5sYXlvdXQuZnJhZ21lbnRfZmlyc3QsIGNvbnRhaW5lciwgZmFsc2UpOwoKICAgICAgICBCdXR0b24gYnV0dG9uID0gdmlldy5maW5kVmlld0J5SWQoUi5pZC5idXR0b25fc2VuZCk7CiAgICAgICAgYnV0dG9uLnNldE9uQ2xpY2tMaXN0ZW5lcihuZXcgVmlldy5PbkNsaWNrTGlzdGVuZXIoKSB7CiAgICAgICAgICAgIEBPdmVycmlkZQogICAgICAgICAgICBwdWJsaWMgdm9pZCBvbkNsaWNrKFZpZXcgdikgewogICAgICAgICAgICAgICAgaWYgKG1MaXN0ZW5lciAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgbUxpc3RlbmVyLm9uRnJhZ21lbnRJbnRlcmFjdGlvbigiSGVsbG8gZnJvbSBGaXJzdEZyYWdtZW50ISIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiB2aWV3OwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgb25BdHRhY2goQ29udGV4dCBjb250ZXh0KSB7CiAgICAgICAgc3VwZXIub25BdHRhY2goY29udGV4dCk7CiAgICAgICAgaWYgKGNvbnRleHQgaW5zdGFuY2VvZiBPbkZyYWdtZW50SW50ZXJhY3Rpb25MaXN0ZW5lcikgewogICAgICAgICAgICBtTGlzdGVuZXIgPSAoT25GcmFnbWVudEludGVyYWN0aW9uTGlzdGVuZXIpIGNvbnRleHQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFeGNlcHRpb24oY29udGV4dC50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgKyAiIG11c3QgaW1wbGVtZW50IE9uRnJhZ21lbnRJbnRlcmFjdGlvbkxpc3RlbmVyIik7CiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgb25EZXRhY2goKSB7CiAgICAgICAgc3VwZXIub25EZXRhY2goKTsKICAgICAgICBtTGlzdGVuZXIgPSBudWxsOwogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class FirstFragment extends Fragment {

    private OnFragmentInteractionListener mListener;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_first, container, false);

        Button button = view.findViewById(R.id.button_send);
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (mListener != null) {
                    mListener.onFragmentInteraction(&quot;Hello from FirstFragment!&quot;);
                }
            }
        });

        return view;
    }

    @Override
    public void onAttach(Context context) {
        super.onAttach(context);
        if (context instanceof OnFragmentInteractionListener) {
            mListener = (OnFragmentInteractionListener) context;
        } else {
            throw new RuntimeException(context.toString()
                    + &quot; must implement OnFragmentInteractionListener&quot;);
        }
    }

    @Override
    public void onDetach() {
        super.onDetach();
        mListener = null;
    }
}</pre></div><div class='content'><h4>SecondFragment.java</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIFNlY29uZEZyYWdtZW50IGV4dGVuZHMgRnJhZ21lbnQgewoKICAgIHByaXZhdGUgVGV4dFZpZXcgdGV4dFZpZXc7CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgVmlldyBvbkNyZWF0ZVZpZXcoTGF5b3V0SW5mbGF0ZXIgaW5mbGF0ZXIsIFZpZXdHcm91cCBjb250YWluZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQnVuZGxlIHNhdmVkSW5zdGFuY2VTdGF0ZSkgewogICAgICAgIFZpZXcgdmlldyA9IGluZmxhdGVyLmluZmxhdGUoUi5sYXlvdXQuZnJhZ21lbnRfc2Vjb25kLCBjb250YWluZXIsIGZhbHNlKTsKICAgICAgICB0ZXh0VmlldyA9IHZpZXcuZmluZFZpZXdCeUlkKFIuaWQudGV4dF92aWV3KTsKICAgICAgICByZXR1cm4gdmlldzsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCB1cGRhdGVUZXh0VmlldyhTdHJpbmcgbWVzc2FnZSkgewogICAgICAgIGlmICh0ZXh0VmlldyAhPSBudWxsKSB7CiAgICAgICAgICAgIHRleHRWaWV3LnNldFRleHQobWVzc2FnZSk7CiAgICAgICAgfQogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class SecondFragment extends Fragment {

    private TextView textView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_second, container, false);
        textView = view.findViewById(R.id.text_view);
        return view;
    }

    public void updateTextView(String message) {
        if (textView != null) {
            textView.setText(message);
        }
    }
}</pre></div><div class='content'><h4>MainActivity.java</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIE1haW5BY3Rpdml0eSBleHRlbmRzIEFwcENvbXBhdEFjdGl2aXR5IGltcGxlbWVudHMgT25GcmFnbWVudEludGVyYWN0aW9uTGlzdGVuZXIgewoKICAgIHByaXZhdGUgU2Vjb25kRnJhZ21lbnQgc2Vjb25kRnJhZ21lbnQ7CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBvbkNyZWF0ZShCdW5kbGUgc2F2ZWRJbnN0YW5jZVN0YXRlKSB7CiAgICAgICAgc3VwZXIub25DcmVhdGUoc2F2ZWRJbnN0YW5jZVN0YXRlKTsKICAgICAgICBzZXRDb250ZW50VmlldyhSLmxheW91dC5hY3Rpdml0eV9tYWluKTsKCiAgICAgICAgaWYgKGZpbmRWaWV3QnlJZChSLmlkLmZyYWdtZW50X2NvbnRhaW5lcikgIT0gbnVsbCkgewogICAgICAgICAgICBpZiAoc2F2ZWRJbnN0YW5jZVN0YXRlICE9IG51bGwpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgRmlyc3RGcmFnbWVudCBmaXJzdEZyYWdtZW50ID0gbmV3IEZpcnN0RnJhZ21lbnQoKTsKICAgICAgICAgICAgc2Vjb25kRnJhZ21lbnQgPSBuZXcgU2Vjb25kRnJhZ21lbnQoKTsKCiAgICAgICAgICAgIGdldFN1cHBvcnRGcmFnbWVudE1hbmFnZXIoKS5iZWdpblRyYW5zYWN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAuYWRkKFIuaWQuZnJhZ21lbnRfY29udGFpbmVyLCBmaXJzdEZyYWdtZW50KQogICAgICAgICAgICAgICAgICAgIC5hZGQoUi5pZC5mcmFnbWVudF9jb250YWluZXIsIHNlY29uZEZyYWdtZW50KQogICAgICAgICAgICAgICAgICAgIC5jb21taXQoKTsKICAgICAgICB9CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBvbkZyYWdtZW50SW50ZXJhY3Rpb24oU3RyaW5nIGRhdGEpIHsKICAgICAgICBpZiAoc2Vjb25kRnJhZ21lbnQgIT0gbnVsbCkgewogICAgICAgICAgICBzZWNvbmRGcmFnbWVudC51cGRhdGVUZXh0VmlldyhkYXRhKTsKICAgICAgICB9CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class MainActivity extends AppCompatActivity implements OnFragmentInteractionListener {

    private SecondFragment secondFragment;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if (findViewById(R.id.fragment_container) != null) {
            if (savedInstanceState != null) {
                return;
            }

            FirstFragment firstFragment = new FirstFragment();
            secondFragment = new SecondFragment();

            getSupportFragmentManager().beginTransaction()
                    .add(R.id.fragment_container, firstFragment)
                    .add(R.id.fragment_container, secondFragment)
                    .commit();
        }
    }

    @Override
    public void onFragmentInteraction(String data) {
        if (secondFragment != null) {
            secondFragment.updateTextView(data);
        }
    }
}</pre></div><div class='content'><h4>fragment_first.xml</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PExpbmVhckxheW91dCB4bWxuczphbmRyb2lkPSJodHRwOi8vc2NoZW1hcy5hbmRyb2lkLmNvbS9hcGsvcmVzL2FuZHJvaWQiCiAgICBhbmRyb2lkOmxheW91dF93aWR0aD0ibWF0Y2hfcGFyZW50IgogICAgYW5kcm9pZDpsYXlvdXRfaGVpZ2h0PSJtYXRjaF9wYXJlbnQiCiAgICBhbmRyb2lkOm9yaWVudGF0aW9uPSJ2ZXJ0aWNhbCI+CgogICAgPEJ1dHRvbgogICAgICAgIGFuZHJvaWQ6aWQ9IkAraWQvYnV0dG9uX3NlbmQiCiAgICAgICAgYW5kcm9pZDpsYXlvdXRfd2lkdGg9IndyYXBfY29udGVudCIKICAgICAgICBhbmRyb2lkOmxheW91dF9oZWlnaHQ9IndyYXBfY29udGVudCIKICAgICAgICBhbmRyb2lkOnRleHQ9IlNlbmQgTWVzc2FnZSIgLz4KPC9MaW5lYXJMYXlvdXQ+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:orientation=&quot;vertical&quot;&gt;

    &lt;Button
        android:id=&quot;@+id/button_send&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;Send Message&quot; /&gt;
&lt;/LinearLayout&gt;</pre></div><div class='content'><h4>fragment_second.xml</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PExpbmVhckxheW91dCB4bWxuczphbmRyb2lkPSJodHRwOi8vc2NoZW1hcy5hbmRyb2lkLmNvbS9hcGsvcmVzL2FuZHJvaWQiCiAgICBhbmRyb2lkOmxheW91dF93aWR0aD0ibWF0Y2hfcGFyZW50IgogICAgYW5kcm9pZDpsYXlvdXRfaGVpZ2h0PSJtYXRjaF9wYXJlbnQiCiAgICBhbmRyb2lkOm9yaWVudGF0aW9uPSJ2ZXJ0aWNhbCI+CgogICAgPFRleHRWaWV3CiAgICAgICAgYW5kcm9pZDppZD0iQCtpZC90ZXh0X3ZpZXciCiAgICAgICAgYW5kcm9pZDpsYXlvdXRfd2lkdGg9IndyYXBfY29udGVudCIKICAgICAgICBhbmRyb2lkOmxheW91dF9oZWlnaHQ9IndyYXBfY29udGVudCIKICAgICAgICBhbmRyb2lkOnRleHQ9IldhaXRpbmcgZm9yIG1lc3NhZ2UuLi4iIC8+CjwvTGluZWFyTGF5b3V0Pg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:orientation=&quot;vertical&quot;&gt;

    &lt;TextView
        android:id=&quot;@+id/text_view&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;Waiting for message...&quot; /&gt;
&lt;/LinearLayout&gt;</pre></div><div class='content'></div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>En aquest tema, hem après què són els fragments, com crear-los, com afegir-los a una activitat i com comunicar-los entre ells. Els fragments són una eina poderosa per crear aplicacions modulars i adaptables a diferents mides de pantalla. Amb la pràctica, podràs utilitzar fragments per millorar la flexibilitat i la reutilització del codi en les teves aplicacions Android.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-01-introduction-to-intents' title="Introducció als Intents">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-03-handling-user-input' title="Gestió de l'Entrada de l'Usuari">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
