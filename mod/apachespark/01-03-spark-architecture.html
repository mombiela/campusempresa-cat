<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arquitectura de Spark</title>

    <link rel="alternate" href="https://campusempresa.com/mod/apachespark/01-03-spark-architecture" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/apachespark/01-03-spark-architecture" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/apachespark/01-03-spark-architecture" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/apachespark/01-03-spark-architecture" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/apachespark/01-03-spark-architecture" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='01-02-setting-up-spark-environment' title="Configuració de l'entorn Spark">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Arquitectura de Spark</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='01-04-spark-shell' title="Shell de Spark">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1><p>Introducció</p>
</h1>
<div class='content'><p>Apache Spark és una plataforma de computació distribuïda que permet processar grans volums de dades de manera ràpida i eficient. La seva arquitectura està dissenyada per ser escalable, tolerant a fallades i fàcil d'utilitzar. En aquesta secció, explorarem els components clau de l'arquitectura de Spark i com interactuen entre ells.</p>
</div><h1><p>Components Clau de l'Arquitectura de Spark</p>
</h1>
<div class='content'></div><h2><ol>
<li>Driver Program</li>
</ol>
</h2>
<div class='content'><p>El Driver Program és el punt d'entrada de qualsevol aplicació Spark. És responsable de:</p>
<ul>
<li>Crear el context Spark (SparkContext).</li>
<li>Definir les transformacions i accions sobre els RDDs (Resilient Distributed Datasets).</li>
<li>Gestionar la distribució de tasques als executors.</li>
</ul>
</div><h2><ol start="2">
<li>SparkContext</li>
</ol>
</h2>
<div class='content'><p>El SparkContext és l'objecte principal que permet la connexió amb el clúster Spark. Proporciona les següents funcionalitats:</p>
<ul>
<li>Configuració de l'aplicació.</li>
<li>Creació de RDDs.</li>
<li>Coordinació de tasques entre el driver i els executors.</li>
</ul>
</div><h2><ol start="3">
<li>Cluster Manager</li>
</ol>
</h2>
<div class='content'><p>El Cluster Manager és responsable de gestionar els recursos del clúster. Spark pot utilitzar diferents tipus de gestors de clúster, com ara:</p>
<ul>
<li><strong>Standalone</strong>: Un gestor de clúster simple integrat en Spark.</li>
<li><strong>Apache Mesos</strong>: Un gestor de clúster de codi obert per a entorns de computació distribuïda.</li>
<li><strong>Hadoop YARN</strong>: El gestor de recursos de Hadoop.</li>
<li><strong>Kubernetes</strong>: Un sistema de gestió de contenidors.</li>
</ul>
</div><h2><ol start="4">
<li>Executors</li>
</ol>
</h2>
<div class='content'><p>Els executors són els processos que realitzen les tasques assignades pel driver. Cada executor:</p>
<ul>
<li>Executa les tasques en paral·lel.</li>
<li>Emmagatzema dades en memòria o en disc.</li>
<li>Retorna els resultats al driver.</li>
</ul>
</div><h2><ol start="5">
<li>DAG (Directed Acyclic Graph)</li>
</ol>
</h2>
<div class='content'><p>El DAG és una representació gràfica de les operacions que es realitzaran sobre els RDDs. Spark genera un DAG per cada aplicació, que defineix l'ordre d'execució de les tasques.</p>
</div><h1><p>Flux de Treball en Spark</p>
</h1>
<div class='content'><ol>
<li><strong>Creació del SparkContext</strong>: El driver crea un SparkContext, que connecta amb el cluster manager.</li>
<li><strong>Definició de Transformacions i Accions</strong>: El driver defineix les transformacions (operacions que creen nous RDDs) i les accions (operacions que retornen un valor o emmagatzemen dades).</li>
<li><strong>Generació del DAG</strong>: Spark genera un DAG que representa les operacions a realitzar.</li>
<li><strong>Planificació de Tasques</strong>: El DAG es divideix en etapes, i cada etapa es divideix en tasques que s'assignen als executors.</li>
<li><strong>Execució de Tasques</strong>: Els executors executen les tasques i retornen els resultats al driver.</li>
</ol>
</div><h1><p>Exemple Pràctic</p>
</h1>
<div class='content'><p>A continuació, es mostra un exemple pràctic de com funciona l'arquitectura de Spark amb un codi senzill:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBweXNwYXJrIGltcG9ydCBTcGFya0NvbnRleHQsIFNwYXJrQ29uZgoKIyBDb25maWd1cmFjacOzIGRlbCBTcGFya0NvbnRleHQKY29uZiA9IFNwYXJrQ29uZigpLnNldEFwcE5hbWUoIkV4ZW1wbGVBcnF1aXRlY3R1cmFTcGFyayIpCnNjID0gU3BhcmtDb250ZXh0KGNvbmY9Y29uZikKCiMgQ3JlYWNpw7MgZCd1biBSREQKZGF0YSA9IFsxLCAyLCAzLCA0LCA1XQpyZGQgPSBzYy5wYXJhbGxlbGl6ZShkYXRhKQoKIyBEZWZpbmljacOzIGRlIHRyYW5zZm9ybWFjaW9ucwpyZGQyID0gcmRkLm1hcChsYW1iZGEgeDogeCAqIDIpCgojIERlZmluaWNpw7MgZCd1bmEgYWNjacOzCnJlc3VsdGF0ID0gcmRkMi5jb2xsZWN0KCkKCiMgTW9zdHJhIGVsIHJlc3VsdGF0CnByaW50KHJlc3VsdGF0KQoKIyBBdHVyYSBlbCBTcGFya0NvbnRleHQKc2Muc3RvcCgp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from pyspark import SparkContext, SparkConf

# Configuraci&oacute; del SparkContext
conf = SparkConf().setAppName(&quot;ExempleArquitecturaSpark&quot;)
sc = SparkContext(conf=conf)

# Creaci&oacute; d'un RDD
data = [1, 2, 3, 4, 5]
rdd = sc.parallelize(data)

# Definici&oacute; de transformacions
rdd2 = rdd.map(lambda x: x * 2)

# Definici&oacute; d'una acci&oacute;
resultat = rdd2.collect()

# Mostra el resultat
print(resultat)

# Atura el SparkContext
sc.stop()</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Configuració del SparkContext</strong>: Es crea un SparkContext amb una configuració específica.</li>
<li><strong>Creació d'un RDD</strong>: Es crea un RDD a partir d'una llista de dades.</li>
<li><strong>Definició de Transformacions</strong>: Es defineix una transformació <code>map</code> que multiplica cada element per 2.</li>
<li><strong>Definició d'una Acció</strong>: Es defineix una acció <code>collect</code> que retorna els resultats al driver.</li>
<li><strong>Mostra el Resultat</strong>: Es mostra el resultat de l'acció.</li>
<li><strong>Atura el SparkContext</strong>: Es para el SparkContext per alliberar els recursos.</li>
</ol>
</div><h1><p>Resum</p>
</h1>
<div class='content'><p>En aquesta secció, hem explorat l'arquitectura de Spark, incloent els components clau com el Driver Program, SparkContext, Cluster Manager, Executors i el DAG. També hem vist un exemple pràctic de com aquests components interactuen per processar dades. Amb aquesta comprensió, estem preparats per aprofundir en els conceptes bàsics de Spark en el següent mòdul.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='01-02-setting-up-spark-environment' title="Configuració de l'entorn Spark">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='01-04-spark-shell' title="Shell de Spark">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
