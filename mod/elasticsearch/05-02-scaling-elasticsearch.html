<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escalant Elasticsearch</title>

    <link rel="alternate" href="https://campusempresa.com/mod/elasticsearch/05-02-scaling-elasticsearch" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/elasticsearch/05-02-scaling-elasticsearch" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/elasticsearch/05-02-scaling-elasticsearch" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/elasticsearch/05-02-scaling-elasticsearch" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/elasticsearch/05-02-scaling-elasticsearch" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
<br>
			<cite>Construint la societat d'avui i del demà</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Contingut del curs</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competències tècniques</a>
				<a href="/all/conocimientos">Coneixements</a>
				<a href="/all/soft_skills">Competències socials</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-01-optimizing-search-performance' title="Optimitzant el Rendiment de la Cerca">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Escalant Elasticsearch</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-03-monitoring-maintenance' title="Monitorització i Manteniment">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Escalar Elasticsearch és crucial per assegurar que el sistema pugui manejar un augment en la càrrega de treball, tant en termes de volum de dades com de nombre de consultes. En aquest tema, explorarem les diferents estratègies i tècniques per escalar Elasticsearch de manera eficient.</p>
</div><h1><p>Objectius d'Aprenentatge</p>
</h1>
<div class='content'><ul>
<li>Comprendre els conceptes bàsics de l'escalabilitat en Elasticsearch.</li>
<li>Aprendre a escalar horitzontalment i verticalment.</li>
<li>Conèixer les millors pràctiques per a la configuració de nodes i clústers.</li>
<li>Identificar i resoldre colls d'ampolla de rendiment.</li>
</ul>
</div><h1><ol>
<li>Conceptes Bàsics d'Escalabilitat</li>
</ol>
</h1>
<div class='content'></div><h2><p>Escalabilitat Horitzontal vs. Vertical</p>
</h2>
<div class='content'><ul>
<li><strong>Escalabilitat Horitzontal</strong>: Afegir més nodes al clúster per distribuir la càrrega de treball.</li>
<li><strong>Escalabilitat Vertical</strong>: Augmentar els recursos (CPU, memòria, disc) dels nodes existents.</li>
</ul>
</div><h2><p>Nodes i Clústers</p>
</h2>
<div class='content'><ul>
<li><strong>Node</strong>: Una instància d'Elasticsearch.</li>
<li><strong>Clúster</strong>: Un conjunt de nodes que treballen junts per emmagatzemar dades i proporcionar capacitats de cerca.</li>
</ul>
</div><h1><ol start="2">
<li>Escalabilitat Horitzontal</li>
</ol>
</h1>
<div class='content'></div><h2><p>Afegint Nodes al Clúster</p>
</h2>
<div class='content'><p>Afegir nodes nous al clúster és una manera efectiva d'escalar horitzontalment. Això permet distribuir la càrrega de treball i millorar la capacitat de resposta.</p>
<h4>Passos per Afegir un Node</h4>
<ol>
<li><strong>Configura el Node Nou</strong>: Assegura't que el nou node tingui la mateixa configuració de xarxa i seguretat que els nodes existents.</li>
<li><strong>Actualitza la Configuració del Clúster</strong>: Afegeix el nou node a la configuració del clúster.</li>
<li><strong>Inicia el Node</strong>: Inicia el nou node i verifica que s'ha unit correctament al clúster.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGVtcGxlIGRlIGNvbmZpZ3VyYWNpw7MgZGVsIG5vZGUKY2x1c3Rlci5uYW1lOiBteS1jbHVzdGVyCm5vZGUubmFtZTogbmV3LW5vZGUKbmV0d29yay5ob3N0OiAwLjAuMC4wCmRpc2NvdmVyeS5zZWVkX2hvc3RzOiBbImV4aXN0aW5nLW5vZGUxIiwgImV4aXN0aW5nLW5vZGUyIl0KY2x1c3Rlci5pbml0aWFsX21hc3Rlcl9ub2RlczogWyJleGlzdGluZy1ub2RlMSIsICJleGlzdGluZy1ub2RlMiJd"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Exemple de configuraci&oacute; del node
cluster.name: my-cluster
node.name: new-node
network.host: 0.0.0.0
discovery.seed_hosts: [&quot;existing-node1&quot;, &quot;existing-node2&quot;]
cluster.initial_master_nodes: [&quot;existing-node1&quot;, &quot;existing-node2&quot;]</pre></div><div class='content'></div><h2><p>Repartició de Shards</p>
</h2>
<div class='content'><p>Els shards són les unitats bàsiques de dades en Elasticsearch. Quan afegeixes nous nodes, Elasticsearch pot redistribuir els shards per equilibrar la càrrega.</p>
<h4>Comprovació de l'Estat del Clúster</h4>
<p>Utilitza l'API <code>_cat/shards</code> per veure com es distribueixen els shards entre els nodes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9fY2F0L3NoYXJkcz92"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /_cat/shards?v</pre></div><div class='content'></div><h1><ol start="3">
<li>Escalabilitat Vertical</li>
</ol>
</h1>
<div class='content'></div><h2><p>Augmentant Recursos del Node</p>
</h2>
<div class='content'><p>Augmentar els recursos dels nodes existents pot ser una solució ràpida per millorar el rendiment.</p>
<h4>Memòria</h4>
<ul>
<li><strong>Heap Size</strong>: Augmenta la mida del heap de JVM per millorar el rendiment de les consultes.</li>
<li><strong>Memòria Físicament Disponible</strong>: Assegura't que el sistema operatiu tingui prou memòria per a Elasticsearch.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb25maWd1cmFjacOzIGRlIGxhIG1pZGEgZGVsIGhlYXAKRVNfSkFWQV9PUFRTPSItWG1zNGcgLVhteDRnIg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Configuraci&oacute; de la mida del heap
ES_JAVA_OPTS=&quot;-Xms4g -Xmx4g&quot;</pre></div><div class='content'><h4>CPU</h4>
<ul>
<li><strong>Augmenta el Nombre de Cores</strong>: Més cores poden ajudar a processar més consultes simultàniament.</li>
</ul>
<h4>Disc</h4>
<ul>
<li><strong>I/O del Disc</strong>: Utilitza discs SSD per millorar la velocitat d'I/O.</li>
</ul>
</div><h1><ol start="4">
<li>Millors Pràctiques</li>
</ol>
</h1>
<div class='content'></div><h2><p>Configuració de Nodes</p>
</h2>
<div class='content'><ul>
<li><strong>Nodes Mestres</strong>: Configura nodes dedicats com a mestres per gestionar la informació del clúster.</li>
<li><strong>Nodes de Dades</strong>: Nodes dedicats a emmagatzemar i cercar dades.</li>
<li><strong>Nodes de Coordinació</strong>: Nodes que actuen com a intermediaris per distribuir les consultes.</li>
</ul>
</div><h2><p>Monitorització</p>
</h2>
<div class='content'><ul>
<li><strong>X-Pack Monitoring</strong>: Utilitza X-Pack per monitoritzar el rendiment del clúster.</li>
<li><strong>Alertes</strong>: Configura alertes per detectar problemes de rendiment abans que afectin els usuaris.</li>
</ul>
</div><h1><ol start="5">
<li>Identificació i Resolució de Colls d'Ampolla</li>
</ol>
</h1>
<div class='content'></div><h2><p>Anàlisi de Rendiment</p>
</h2>
<div class='content'><ul>
<li><strong>API <code>_nodes/stats</code></strong>: Utilitza aquesta API per obtenir estadístiques detallades sobre l'ús de recursos.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9fbm9kZXMvc3RhdHM="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /_nodes/stats</pre></div><div class='content'></div><h2><p>Optimització de Consultes</p>
</h2>
<div class='content'><ul>
<li><strong>Caché de Consultes</strong>: Utilitza la caché de consultes per millorar el rendiment de les consultes repetitives.</li>
<li><strong>Filtratge</strong>: Utilitza filtres en lloc de consultes per a operacions que no necessiten puntuació.</li>
</ul>
</div><h1><p>Exercici Pràctic</p>
</h1>
<div class='content'></div><h2><p>Escalant un Clúster</p>
</h2>
<div class='content'><ol>
<li><strong>Afegir un Node Nou</strong>: Configura i afegeix un nou node al teu clúster existent.</li>
<li><strong>Redistribuir Shards</strong>: Verifica que els shards s'han redistribuït correctament.</li>
<li><strong>Monitoritzar el Rendiment</strong>: Utilitza les eines de monitorització per assegurar-te que el clúster està funcionant de manera òptima.</li>
</ol>
<h4>Solució</h4>
<ol>
<li>Configura el nou node amb la mateixa configuració de xarxa i seguretat.</li>
<li>Afegeix el nou node a la configuració del clúster.</li>
<li>Inicia el nou node i verifica la seva unió al clúster amb l'API <code>_cat/nodes</code>.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9fY2F0L25vZGVzP3Y="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /_cat/nodes?v</pre></div><div class='content'></div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>Escalar Elasticsearch és essencial per mantenir un rendiment òptim a mesura que augmenta la càrrega de treball. Tant l'escalabilitat horitzontal com la vertical tenen els seus avantatges i desavantatges, i sovint es necessiten ambdues per aconseguir un sistema equilibrat i eficient. Monitoritzar constantment el rendiment i ajustar la configuració segons sigui necessari és clau per a l'èxit a llarg termini.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-01-optimizing-search-performance' title="Optimitzant el Rendiment de la Cerca">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-03-monitoring-maintenance' title="Monitorització i Manteniment">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
