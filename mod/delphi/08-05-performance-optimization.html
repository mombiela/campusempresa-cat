<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimització del Rendiment</title>

    <link rel="alternate" href="https://campusempresa.com/mod/delphi/08-05-performance-optimization" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/delphi/08-05-performance-optimization" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/delphi/08-05-performance-optimization" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/delphi/08-05-performance-optimization" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/delphi/08-05-performance-optimization" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Contingut del curs</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competències tècniques</a>
				<a href="/all/conocimientos">Coneixements</a>
				<a href="/all/soft_skills">Competències socials</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-04-unit-testing-tdd' title="Proves Unitàries i Desenvolupament Basat en Proves">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Optimització del Rendiment</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-01-project-planning-design' title="Planificació i Disseny del Projecte">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com optimitzar el rendiment de les aplicacions desenvolupades amb Delphi/Object Pascal. Ens centrarem en diverses tècniques i estratègies per millorar l'eficiència del codi, reduir el temps d'execució i gestionar millor els recursos del sistema.</p>
</div><h1><p>Objectius del Tema</p>
</h1>
<div class='content'><ul>
<li>Comprendre la importància de l'optimització del rendiment.</li>
<li>Identificar colls d'ampolla en el codi.</li>
<li>Aplicar tècniques d'optimització a nivell de codi i arquitectura.</li>
<li>Utilitzar eines de perfilatge per mesurar i millorar el rendiment.</li>
</ul>
</div><h1><ol>
<li>Importància de l'Optimització del Rendiment</li>
</ol>
</h1>
<div class='content'><p>L'optimització del rendiment és crucial per assegurar que les aplicacions siguin ràpides, eficients i capaces de gestionar grans volums de dades o usuaris. Un bon rendiment pot millorar l'experiència de l'usuari, reduir els costos operatius i augmentar la vida útil de l'aplicació.</p>
</div><h1><ol start="2">
<li>Identificació de Colls d'Ampolla</li>
</ol>
</h1>
<div class='content'><p>Abans d'optimitzar, és essencial identificar les parts del codi que causen problemes de rendiment. Això es pot fer mitjançant:</p>
<ul>
<li><strong>Perfilatge del Codi</strong>: Utilitzar eines de perfilatge per mesurar el temps d'execució de diferents parts del codi.</li>
<li><strong>Anàlisi de Memòria</strong>: Identificar fugues de memòria i ús ineficient de la memòria.</li>
<li><strong>Monitoratge de Recursos</strong>: Observar l'ús de CPU, memòria i altres recursos del sistema.</li>
</ul>
</div><h2><p>Eines de Perfilatge</p>
</h2>
<div class='content'><p>Algunes eines populars per al perfilatge en Delphi inclouen:</p>
<ul>
<li><strong>AQtime</strong>: Una eina de perfilatge que permet mesurar el rendiment del codi i identificar colls d'ampolla.</li>
<li><strong>FastMM</strong>: Una eina per a la gestió de la memòria que ajuda a detectar fugues de memòria.</li>
</ul>
</div><h1><ol start="3">
<li>Tècniques d'Optimització</li>
</ol>
</h1>
<div class='content'></div><h2><p>3.1 Optimització de Bucles</p>
</h2>
<div class='content'><p>Els bucles són una font comuna de problemes de rendiment. Algunes tècniques per optimitzar els bucles inclouen:</p>
<ul>
<li><strong>Reduir el Nombre d'Iteracions</strong>: Evitar iteracions innecessàries.</li>
<li><strong>Utilitzar Estructures de Dades Adequades</strong>: Triar estructures de dades que permetin accés ràpid.</li>
<li><strong>Evitar Càlculs Redundants</strong>: Realitzar càlculs fora del bucle si és possible.</li>
</ul>
<h4>Exemple de Codi</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ29kaSBpbmVmaWNpZW50CmZvciBpIDo9IDEgdG8gTGVuZ3RoKGFycikgZG8KICBhcnJbaV0gOj0gYXJyW2ldICogMjsKCi8vIENvZGkgb3B0aW1pdHphdApsZW4gOj0gTGVuZ3RoKGFycik7CmZvciBpIDo9IDEgdG8gbGVuIGRvCiAgYXJyW2ldIDo9IGFycltpXSAqIDI7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Codi ineficient
for i := 1 to Length(arr) do
  arr[i] := arr[i] * 2;

// Codi optimitzat
len := Length(arr);
for i := 1 to len do
  arr[i] := arr[i] * 2;</pre></div><div class='content'></div><h2><p>3.2 Gestió Eficient de la Memòria</p>
</h2>
<div class='content'><p>Una gestió eficient de la memòria pot millorar significativament el rendiment. Algunes tècniques inclouen:</p>
<ul>
<li><strong>Evitar Fugues de Memòria</strong>: Assegurar-se que tota la memòria al·locada es desallotgi correctament.</li>
<li><strong>Utilitzar Estructures de Dades Adequades</strong>: Triar estructures de dades que utilitzin la memòria de manera eficient.</li>
<li><strong>Minimitzar l'Ús de la Memòria</strong>: Evitar al·locar memòria innecessària.</li>
</ul>
<h4>Exemple de Codi</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ29kaSBpbmVmaWNpZW50CnZhcgogIGxpc3Q6IFRMaXN0OwpiZWdpbgogIGxpc3QgOj0gVExpc3QuQ3JlYXRlOwogIHRyeQogICAgLy8gw5pzIGRlIGxhIGxsaXN0YQogIGZpbmFsbHkKICAgIGxpc3QuRnJlZTsKICBlbmQ7CmVuZDsKCi8vIENvZGkgb3B0aW1pdHphdAp2YXIKICBsaXN0OiBUTGlzdDsKYmVnaW4KICBsaXN0IDo9IFRMaXN0LkNyZWF0ZTsKICB0cnkKICAgIC8vIMOacyBkZSBsYSBsbGlzdGEKICBmaW5hbGx5CiAgICBsaXN0LkNsZWFyOyAvLyBBbGxpYmVyYXIgbWVtw7JyaWEgdXRpbGl0emFkYSBwZWxzIGVsZW1lbnRzCiAgICBsaXN0LkZyZWU7CiAgZW5kOwplbmQ7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Codi ineficient
var
  list: TList;
begin
  list := TList.Create;
  try
    // &Uacute;s de la llista
  finally
    list.Free;
  end;
end;

// Codi optimitzat
var
  list: TList;
begin
  list := TList.Create;
  try
    // &Uacute;s de la llista
  finally
    list.Clear; // Alliberar mem&ograve;ria utilitzada pels elements
    list.Free;
  end;
end;</pre></div><div class='content'></div><h2><p>3.3 Optimització de Funcions i Procediments</p>
</h2>
<div class='content'><p>Les funcions i procediments poden ser optimitzats per millorar el rendiment global de l'aplicació.</p>
<ul>
<li><strong>Evitar Crides Innecessàries</strong>: Reduir el nombre de crides a funcions i procediments.</li>
<li><strong>Passar Paràmetres per Referència</strong>: Passar grans estructures de dades per referència en lloc de per valor.</li>
</ul>
<h4>Exemple de Codi</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ29kaSBpbmVmaWNpZW50CmZ1bmN0aW9uIFN1bUFycmF5KGFycjogYXJyYXkgb2YgSW50ZWdlcik6IEludGVnZXI7CnZhcgogIGksIHN1bTogSW50ZWdlcjsKYmVnaW4KICBzdW0gOj0gMDsKICBmb3IgaSA6PSAwIHRvIEhpZ2goYXJyKSBkbwogICAgc3VtIDo9IHN1bSArIGFycltpXTsKICBSZXN1bHQgOj0gc3VtOwplbmQ7CgovLyBDb2RpIG9wdGltaXR6YXQKZnVuY3Rpb24gU3VtQXJyYXkoY29uc3QgYXJyOiBhcnJheSBvZiBJbnRlZ2VyKTogSW50ZWdlcjsKdmFyCiAgaSwgc3VtOiBJbnRlZ2VyOwpiZWdpbgogIHN1bSA6PSAwOwogIGZvciBpIDo9IDAgdG8gSGlnaChhcnIpIGRvCiAgICBzdW0gOj0gc3VtICsgYXJyW2ldOwogIFJlc3VsdCA6PSBzdW07CmVuZDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Codi ineficient
function SumArray(arr: array of Integer): Integer;
var
  i, sum: Integer;
begin
  sum := 0;
  for i := 0 to High(arr) do
    sum := sum + arr[i];
  Result := sum;
end;

// Codi optimitzat
function SumArray(const arr: array of Integer): Integer;
var
  i, sum: Integer;
begin
  sum := 0;
  for i := 0 to High(arr) do
    sum := sum + arr[i];
  Result := sum;
end;</pre></div><div class='content'></div><h1><ol start="4">
<li>Utilització d'Eines de Perfilatge</li>
</ol>
</h1>
<div class='content'><p>Les eines de perfilatge són essencials per mesurar el rendiment del codi i identificar colls d'ampolla. Algunes eines populars inclouen:</p>
<ul>
<li><strong>AQtime</strong>: Permet mesurar el temps d'execució de diferents parts del codi i identificar colls d'ampolla.</li>
<li><strong>FastMM</strong>: Ajuda a detectar fugues de memòria i ús ineficient de la memòria.</li>
</ul>
</div><h2><p>Exemple d'Ús d'AQtime</p>
</h2>
<div class='content'><ol>
<li><strong>Instal·lar AQtime</strong>: Descarregar i instal·lar AQtime.</li>
<li><strong>Configurar el Projecte</strong>: Obrir el projecte en AQtime i configurar les opcions de perfilatge.</li>
<li><strong>Executar el Perfilatge</strong>: Executar l'aplicació des d'AQtime i analitzar els resultats.</li>
</ol>
</div><h1><ol start="5">
<li>Consells Addicionals</li>
</ol>
</h1>
<div class='content'><ul>
<li><strong>Evitar l'Optimització Prematura</strong>: No optimitzar el codi abans de tenir una versió funcional i mesurable.</li>
<li><strong>Documentar les Optimitzacions</strong>: Documentar els canvis realitzats per a futures referències.</li>
<li><strong>Provar Regularment</strong>: Realitzar proves de rendiment regularment per assegurar-se que les optimitzacions no introdueixen errors.</li>
</ul>
</div><h1><p>Exercicis Pràctics</p>
</h1>
<div class='content'></div><h2><p>Exercici 1: Optimització de Bucles</p>
</h2>
<div class='content'><p>Optimitza el següent codi per reduir el nombre d'iteracions i evitar càlculs redundants.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgaSwgajogSW50ZWdlcjsKICBhcnI6IGFycmF5WzEuLjEwMDBdIG9mIEludGVnZXI7CmJlZ2luCiAgZm9yIGkgOj0gMSB0byAxMDAwIGRvCiAgICBmb3IgaiA6PSAxIHRvIDEwMDAgZG8KICAgICAgYXJyW2ldIDo9IGFycltpXSArIGo7CmVuZDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  i, j: Integer;
  arr: array[1..1000] of Integer;
begin
  for i := 1 to 1000 do
    for j := 1 to 1000 do
      arr[i] := arr[i] + j;
end;</pre></div><div class='content'><h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgaSwgaiwgc3VtOiBJbnRlZ2VyOwogIGFycjogYXJyYXlbMS4uMTAwMF0gb2YgSW50ZWdlcjsKYmVnaW4KICBzdW0gOj0gMDsKICBmb3IgaiA6PSAxIHRvIDEwMDAgZG8KICAgIHN1bSA6PSBzdW0gKyBqOwoKICBmb3IgaSA6PSAxIHRvIDEwMDAgZG8KICAgIGFycltpXSA6PSBzdW07CmVuZDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  i, j, sum: Integer;
  arr: array[1..1000] of Integer;
begin
  sum := 0;
  for j := 1 to 1000 do
    sum := sum + j;

  for i := 1 to 1000 do
    arr[i] := sum;
end;</pre></div><div class='content'></div><h2><p>Exercici 2: Gestió Eficient de la Memòria</p>
</h2>
<div class='content'><p>Identifica i corregeix les fugues de memòria en el següent codi.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgbGlzdDogVExpc3Q7CiAgb2JqOiBUT2JqZWN0OwpiZWdpbgogIGxpc3QgOj0gVExpc3QuQ3JlYXRlOwogIHRyeQogICAgb2JqIDo9IFRPYmplY3QuQ3JlYXRlOwogICAgbGlzdC5BZGQob2JqKTsKICAgIC8vIMOacyBkZSBsYSBsbGlzdGEKICBmaW5hbGx5CiAgICBsaXN0LkZyZWU7CiAgZW5kOwplbmQ7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  list: TList;
  obj: TObject;
begin
  list := TList.Create;
  try
    obj := TObject.Create;
    list.Add(obj);
    // &Uacute;s de la llista
  finally
    list.Free;
  end;
end;</pre></div><div class='content'><h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgbGlzdDogVExpc3Q7CiAgb2JqOiBUT2JqZWN0OwpiZWdpbgogIGxpc3QgOj0gVExpc3QuQ3JlYXRlOwogIHRyeQogICAgb2JqIDo9IFRPYmplY3QuQ3JlYXRlOwogICAgbGlzdC5BZGQob2JqKTsKICAgIC8vIMOacyBkZSBsYSBsbGlzdGEKICBmaW5hbGx5CiAgICBsaXN0LkNsZWFyOyAvLyBBbGxpYmVyYXIgbWVtw7JyaWEgdXRpbGl0emFkYSBwZWxzIGVsZW1lbnRzCiAgICBsaXN0LkZyZWU7CiAgZW5kOwplbmQ7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  list: TList;
  obj: TObject;
begin
  list := TList.Create;
  try
    obj := TObject.Create;
    list.Add(obj);
    // &Uacute;s de la llista
  finally
    list.Clear; // Alliberar mem&ograve;ria utilitzada pels elements
    list.Free;
  end;
end;</pre></div><div class='content'></div><h1><p>Resum</p>
</h1>
<div class='content'><p>En aquest tema, hem après la importància de l'optimització del rendiment i diverses tècniques per millorar l'eficiència del codi. Hem vist com identificar colls d'ampolla, optimitzar bucles, gestionar la memòria de manera eficient i utilitzar eines de perfilatge. A més, hem practicat aquestes tècniques amb exercicis pràctics. Amb aquestes habilitats, estem millor preparats per desenvolupar aplicacions ràpides i eficients amb Delphi/Object Pascal.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-04-unit-testing-tdd' title="Proves Unitàries i Desenvolupament Basat en Proves">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-01-project-planning-design' title="Planificació i Disseny del Projecte">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
