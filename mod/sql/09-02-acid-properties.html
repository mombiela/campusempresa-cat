<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Propietats ACID</title>

    <link rel="alternate" href="https://campusempresa.com/mod/sql/09-02-acid-properties" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/sql/09-02-acid-properties" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/sql/09-02-acid-properties" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/sql/09-02-acid-properties" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/sql/09-02-acid-properties" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-01-introduction-transactions' title="Introducció a les transaccions">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Propietats ACID</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-03-transaction-control-statements' title="Instruccions de control de transaccions">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Les propietats ACID són un conjunt de principis que garanteixen la fiabilitat de les transaccions en bases de dades. ACID és un acrònim que representa Atomicitat, Consistència, Aïllament i Durabilitat. Aquestes propietats asseguren que les transaccions es realitzin de manera segura i que la integritat de les dades es mantingui fins i tot en cas de fallades del sistema.</p>
</div><h1><ol>
<li>Atomicitat</li>
</ol>
</h1>
<div class='content'></div><h2><p>Definició</p>
</h2>
<div class='content'><p>L'atomicitat garanteix que una transacció es realitzi completament o no es realitzi en absolut. Això significa que si alguna part de la transacció falla, tota la transacció es desfa i la base de dades es retorna al seu estat anterior a la transacció.</p>
</div><h2><p>Exemple</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4gVFJBTlNBQ1RJT047CgotLSBJbnRlbnRlbSBpbnNlcmlyIHVuYSBub3ZhIGZpbGEgYSBsYSB0YXVsYSAnY2xpZW50cycKSU5TRVJUIElOVE8gY2xpZW50cyAoaWQsIG5vbSwgZW1haWwpIFZBTFVFUyAoMSwgJ0pvYW4nLCAnam9hbkBleGFtcGxlLmNvbScpOwoKLS0gSW50ZW50ZW0gYWN0dWFsaXR6YXIgdW5hIGZpbGEgYSBsYSB0YXVsYSAnY29tYW5kZXMnClVQREFURSBjb21hbmRlcyBTRVQgZXN0YXQgPSAnZW52aWF0JyBXSEVSRSBpZCA9IDEwMDsKCi0tIFNpIGFsZ3VuYSBkZSBsZXMgb3BlcmFjaW9ucyBmYWxsYSwgZXMgZGVzZmEgbGEgdHJhbnNhY2Npw7MKSUYgQEBFUlJPUiA8PiAwCkJFR0lOCiAgICBST0xMQkFDSyBUUkFOU0FDVElPTjsKRU5ECkVMU0UKQkVHSU4KICAgIENPTU1JVCBUUkFOU0FDVElPTjsKRU5E"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN TRANSACTION;

-- Intentem inserir una nova fila a la taula 'clients'
INSERT INTO clients (id, nom, email) VALUES (1, 'Joan', 'joan@example.com');

-- Intentem actualitzar una fila a la taula 'comandes'
UPDATE comandes SET estat = 'enviat' WHERE id = 100;

-- Si alguna de les operacions falla, es desfa la transacci&oacute;
IF @@ERROR &lt;&gt; 0
BEGIN
    ROLLBACK TRANSACTION;
END
ELSE
BEGIN
    COMMIT TRANSACTION;
END</pre></div><div class='content'></div><h2><p>Explicació</p>
</h2>
<div class='content'><p>En aquest exemple, si qualsevol de les instruccions SQL dins de la transacció falla, la transacció es desfa (ROLLBACK) i la base de dades es retorna al seu estat anterior. Si totes les instruccions s'executen correctament, la transacció es confirma (COMMIT).</p>
</div><h1><ol start="2">
<li>Consistència</li>
</ol>
</h1>
<div class='content'></div><h2><p>Definició</p>
</h2>
<div class='content'><p>La consistència assegura que una transacció porta la base de dades d'un estat vàlid a un altre estat vàlid. Això significa que qualsevol transacció només pot deixar la base de dades en un estat coherent, on totes les regles i restriccions de la base de dades es compleixen.</p>
</div><h2><p>Exemple</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4gVFJBTlNBQ1RJT047CgotLSBJbnNlcmltIHVuYSBub3ZhIGNvbWFuZGEKSU5TRVJUIElOVE8gY29tYW5kZXMgKGlkLCBjbGllbnRfaWQsIGltcG9ydF90b3RhbCkgVkFMVUVTICgxMDEsIDEsIDIwMCk7CgotLSBBY3R1YWxpdHplbSBlbCBzYWxkbyBkZWwgY2xpZW50ClVQREFURSBjbGllbnRzIFNFVCBzYWxkbyA9IHNhbGRvIC0gMjAwIFdIRVJFIGlkID0gMTsKCi0tIFNpIGFsZ3VuYSBkZSBsZXMgb3BlcmFjaW9ucyB2aW9sYSB1bmEgcmVzdHJpY2Npw7MsIGVzIGRlc2ZhIGxhIHRyYW5zYWNjacOzCklGIEBARVJST1IgPD4gMApCRUdJTgogICAgUk9MTEJBQ0sgVFJBTlNBQ1RJT047CkVORApFTFNFCkJFR0lOCiAgICBDT01NSVQgVFJBTlNBQ1RJT047CkVORA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN TRANSACTION;

-- Inserim una nova comanda
INSERT INTO comandes (id, client_id, import_total) VALUES (101, 1, 200);

-- Actualitzem el saldo del client
UPDATE clients SET saldo = saldo - 200 WHERE id = 1;

-- Si alguna de les operacions viola una restricci&oacute;, es desfa la transacci&oacute;
IF @@ERROR &lt;&gt; 0
BEGIN
    ROLLBACK TRANSACTION;
END
ELSE
BEGIN
    COMMIT TRANSACTION;
END</pre></div><div class='content'></div><h2><p>Explicació</p>
</h2>
<div class='content'><p>En aquest exemple, la transacció assegura que el saldo del client es redueix correctament quan es crea una nova comanda. Si alguna de les operacions viola una restricció (per exemple, saldo negatiu), la transacció es desfa per mantenir la consistència de la base de dades.</p>
</div><h1><ol start="3">
<li>Aïllament</li>
</ol>
</h1>
<div class='content'></div><h2><p>Definició</p>
</h2>
<div class='content'><p>L'aïllament garanteix que les transaccions concurrentes no interfereixin entre elles. Cada transacció es realitza com si fos l'única en execució, evitant així problemes com lectures brutes, lectures no repetibles i fantasmes.</p>
</div><h2><p>Nivells d'aïllament</p>
</h2>
<div class='content'><ul>
<li><strong>Read Uncommitted</strong>: Permet lectures brutes.</li>
<li><strong>Read Committed</strong>: Evita lectures brutes.</li>
<li><strong>Repeatable Read</strong>: Evita lectures no repetibles.</li>
<li><strong>Serializable</strong>: Evita lectures no repetibles i fantasmes.</li>
</ul>
</div><h2><p>Exemple</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VUIFRSQU5TQUNUSU9OIElTT0xBVElPTiBMRVZFTCBTRVJJQUxJWkFCTEU7CgpCRUdJTiBUUkFOU0FDVElPTjsKCi0tIFNlbGVjY2lvbmVtIGVsIHNhbGRvIGRlbCBjbGllbnQKU0VMRUNUIHNhbGRvIEZST00gY2xpZW50cyBXSEVSRSBpZCA9IDE7CgotLSBBY3R1YWxpdHplbSBlbCBzYWxkbyBkZWwgY2xpZW50ClVQREFURSBjbGllbnRzIFNFVCBzYWxkbyA9IHNhbGRvIC0gMjAwIFdIRVJFIGlkID0gMTsKCkNPTU1JVCBUUkFOU0FDVElPTjs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

BEGIN TRANSACTION;

-- Seleccionem el saldo del client
SELECT saldo FROM clients WHERE id = 1;

-- Actualitzem el saldo del client
UPDATE clients SET saldo = saldo - 200 WHERE id = 1;

COMMIT TRANSACTION;</pre></div><div class='content'></div><h2><p>Explicació</p>
</h2>
<div class='content'><p>En aquest exemple, el nivell d'aïllament <code>SERIALIZABLE</code> assegura que cap altra transacció pot modificar el saldo del client mentre aquesta transacció està en execució, evitant així lectures no repetibles i fantasmes.</p>
</div><h1><ol start="4">
<li>Durabilitat</li>
</ol>
</h1>
<div class='content'></div><h2><p>Definició</p>
</h2>
<div class='content'><p>La durabilitat assegura que una vegada una transacció es confirma (COMMIT), els seus canvis es conserven permanentment, fins i tot en cas de fallades del sistema.</p>
</div><h2><p>Exemple</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4gVFJBTlNBQ1RJT047CgotLSBJbnNlcmltIHVuYSBub3ZhIGNvbWFuZGEKSU5TRVJUIElOVE8gY29tYW5kZXMgKGlkLCBjbGllbnRfaWQsIGltcG9ydF90b3RhbCkgVkFMVUVTICgxMDIsIDEsIDE1MCk7CgotLSBDb25maXJtZW0gbGEgdHJhbnNhY2Npw7MKQ09NTUlUIFRSQU5TQUNUSU9OOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN TRANSACTION;

-- Inserim una nova comanda
INSERT INTO comandes (id, client_id, import_total) VALUES (102, 1, 150);

-- Confirmem la transacci&oacute;
COMMIT TRANSACTION;</pre></div><div class='content'></div><h2><p>Explicació</p>
</h2>
<div class='content'><p>En aquest exemple, una vegada que la transacció es confirma, la nova comanda es guarda permanentment a la base de dades. Fins i tot si el sistema falla immediatament després, els canvis realitzats per la transacció es conserven.</p>
</div><h1><p>Resum</p>
</h1>
<div class='content'><p>Les propietats ACID són fonamentals per garantir la fiabilitat i la integritat de les transaccions en bases de dades. Aquests principis asseguren que les transaccions es realitzin de manera segura, coherent i duradora, fins i tot en entorns amb múltiples usuaris i possibles fallades del sistema. Comprendre i aplicar aquestes propietats és essencial per a qualsevol desenvolupador que treballi amb bases de dades.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-01-introduction-transactions' title="Introducció a les transaccions">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-03-transaction-control-statements' title="Instruccions de control de transaccions">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
