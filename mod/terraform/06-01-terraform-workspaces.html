<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Espais de treball de Terraform</title>

    <link rel="alternate" href="https://campusempresa.com/mod/terraform/06-01-terraform-workspaces" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/terraform/06-01-terraform-workspaces" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/terraform/06-01-terraform-workspaces" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/terraform/06-01-terraform-workspaces" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/terraform/06-01-terraform-workspaces" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-provisioning-gcp-resources' title="Proveïment de recursos GCP">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Espais de treball de Terraform</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-terraform-functions' title="Funcions de Terraform">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1><p>Introducció</p>
</h1>
<div class='content'><p>Els espais de treball de Terraform són una funcionalitat avançada que permet gestionar múltiples entorns dins d'una mateixa configuració de Terraform. Això és especialment útil per separar entorns de desenvolupament, proves i producció sense haver de duplicar el codi de configuració.</p>
</div><h1><p>Conceptes Clau</p>
</h1>
<div class='content'><ul>
<li><strong>Espai de treball</strong>: Un espai de treball és una instància de l'estat de Terraform. Cada espai de treball té el seu propi fitxer d'estat.</li>
<li><strong>Espai de treball per defecte</strong>: Quan es crea una nova configuració de Terraform, es crea automàticament un espai de treball anomenat <code>default</code>.</li>
<li><strong>Comandes d'espais de treball</strong>: Terraform proporciona diverses comandes per gestionar els espais de treball, com ara crear, llistar, seleccionar i eliminar espais de treball.</li>
</ul>
</div><h1><p>Comandes d'Espais de Treball</p>
</h1>
<div class='content'></div><h2><p>Crear un Nou Espai de Treball</p>
</h2>
<div class='content'><p>Per crear un nou espai de treball, utilitza la comanda <code>terraform workspace new</code> seguida del nom de l'espai de treball:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIHdvcmtzcGFjZSBuZXcgZGVzZW52b2x1cGFtZW50"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform workspace new desenvolupament</pre></div><div class='content'></div><h2><p>Llistar Espais de Treball</p>
</h2>
<div class='content'><p>Per veure tots els espais de treball disponibles, utilitza la comanda <code>terraform workspace list</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIHdvcmtzcGFjZSBsaXN0"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform workspace list</pre></div><div class='content'></div><h2><p>Seleccionar un Espai de Treball</p>
</h2>
<div class='content'><p>Per canviar a un altre espai de treball, utilitza la comanda <code>terraform workspace select</code> seguida del nom de l'espai de treball:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIHdvcmtzcGFjZSBzZWxlY3QgZGVzZW52b2x1cGFtZW50"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform workspace select desenvolupament</pre></div><div class='content'></div><h2><p>Eliminar un Espai de Treball</p>
</h2>
<div class='content'><p>Per eliminar un espai de treball, utilitza la comanda <code>terraform workspace delete</code> seguida del nom de l'espai de treball. Nota: No pots eliminar l'espai de treball actual, primer has de canviar a un altre espai de treball.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIHdvcmtzcGFjZSBkZWxldGUgZGVzZW52b2x1cGFtZW50"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform workspace delete desenvolupament</pre></div><div class='content'></div><h1><p>Exemple Pràctic</p>
</h1>
<div class='content'></div><h2><p>Configuració Inicial</p>
</h2>
<div class='content'><p>Suposem que tenim una configuració bàsica de Terraform per desplegar una instància d'EC2 a AWS. El fitxer <code>main.tf</code> podria semblar així:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9ICJ1cy13ZXN0LTIiCn0KCnJlc291cmNlICJhd3NfaW5zdGFuY2UiICJleGFtcGxlIiB7CiAgYW1pICAgICAgICAgICA9ICJhbWktMGM1NWIxNTljYmZhZmUxZjAiCiAgaW5zdGFuY2VfdHlwZSA9ICJ0Mi5taWNybyIKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}

resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = &quot;t2.micro&quot;
}</pre></div><div class='content'></div><h2><p>Crear i Seleccionar Espais de Treball</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Crear espais de treball per a desenvolupament i producció</strong>:</p>
<pre><code class="language-bash">terraform workspace new desenvolupament
terraform workspace new produccio
</code></pre>
</li>
<li>
<p><strong>Seleccionar l'espai de treball de desenvolupament</strong>:</p>
<pre><code class="language-bash">terraform workspace select desenvolupament
</code></pre>
</li>
<li>
<p><strong>Aplicar la configuració a l'espai de treball de desenvolupament</strong>:</p>
<pre><code class="language-bash">terraform apply
</code></pre>
</li>
<li>
<p><strong>Seleccionar l'espai de treball de producció</strong>:</p>
<pre><code class="language-bash">terraform workspace select produccio
</code></pre>
</li>
<li>
<p><strong>Aplicar la configuració a l'espai de treball de producció</strong>:</p>
<pre><code class="language-bash">terraform apply
</code></pre>
</li>
</ol>
</div><h2><p>Verificar els Espais de Treball</p>
</h2>
<div class='content'><p>Després d'aplicar la configuració a cada espai de treball, pots verificar que cada espai de treball té el seu propi estat independent:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIHdvcmtzcGFjZSBsaXN0"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform workspace list</pre></div><div class='content'></div><h1><p>Exercici Pràctic</p>
</h1>
<div class='content'></div><h2><p>Objectiu</p>
</h2>
<div class='content'><p>Crear dos espais de treball (desenvolupament i producció) i desplegar una instància d'EC2 a cada espai de treball.</p>
</div><h2><p>Passos</p>
</h2>
<div class='content'><ol>
<li><strong>Crear una configuració bàsica de Terraform</strong>.</li>
<li><strong>Crear espais de treball per a desenvolupament i producció</strong>.</li>
<li><strong>Seleccionar l'espai de treball de desenvolupament i aplicar la configuració</strong>.</li>
<li><strong>Seleccionar l'espai de treball de producció i aplicar la configuració</strong>.</li>
</ol>
</div><h2><p>Solució</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Configuració bàsica de Terraform</strong> (<code>main.tf</code>):</p>
<pre><code class="language-hcl">provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}

resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = &quot;t2.micro&quot;
}
</code></pre>
</li>
<li>
<p><strong>Crear espais de treball</strong>:</p>
<pre><code class="language-bash">terraform workspace new desenvolupament
terraform workspace new produccio
</code></pre>
</li>
<li>
<p><strong>Seleccionar i aplicar configuració a l'espai de treball de desenvolupament</strong>:</p>
<pre><code class="language-bash">terraform workspace select desenvolupament
terraform apply
</code></pre>
</li>
<li>
<p><strong>Seleccionar i aplicar configuració a l'espai de treball de producció</strong>:</p>
<pre><code class="language-bash">terraform workspace select produccio
terraform apply
</code></pre>
</li>
</ol>
</div><h1><p>Resum</p>
</h1>
<div class='content'><p>Els espais de treball de Terraform permeten gestionar múltiples entorns dins d'una mateixa configuració, facilitant la separació d'entorns de desenvolupament, proves i producció. Utilitzant les comandes adequades, pots crear, llistar, seleccionar i eliminar espais de treball, mantenint així un control eficient sobre els teus entorns d'infraestructura.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-provisioning-gcp-resources' title="Proveïment de recursos GCP">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-terraform-functions' title="Funcions de Terraform">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
