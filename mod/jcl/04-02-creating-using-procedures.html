<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear i Utilitzar Procediments</title>

    <link rel="alternate" href="https://campusempresa.com/mod/jcl/04-02-creating-using-procedures" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/jcl/04-02-creating-using-procedures" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/jcl/04-02-creating-using-procedures" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/jcl/04-02-creating-using-procedures" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/jcl/04-02-creating-using-procedures" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-01-introduction-procedures' title="Introducció als Procediments">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Crear i Utilitzar Procediments</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-03-symbolic-parameters' title="Paràmetres Simbòlics">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com crear i utilitzar procediments en JCL. Els procediments (o PROCs) són una manera eficient de reutilitzar codi JCL, permetent definir una sèrie d'instruccions que es poden invocar des de múltiples treballs JCL. Això ajuda a estalviar temps i a mantenir la consistència en l'execució de tasques repetitives.</p>
</div><h1><p>Què és un Procediment?</p>
</h1>
<div class='content'><p>Un procediment en JCL és un conjunt d'instruccions JCL que es defineixen una vegada i es poden utilitzar múltiples vegades en diferents treballs. Els procediments es defineixen en fitxers de llibreria de procediments (PROCLIB) i es poden invocar mitjançant la instrucció <code>EXEC</code>.</p>
</div><h2><p>Avantatges d'Utilitzar Procediments</p>
</h2>
<div class='content'><ul>
<li><strong>Reutilització del Codi</strong>: Permet definir una vegada i utilitzar múltiples vegades.</li>
<li><strong>Manteniment Fàcil</strong>: Canvis en el procediment es reflecteixen en tots els treballs que l'utilitzen.</li>
<li><strong>Consistència</strong>: Assegura que les mateixes instruccions s'executin de manera consistent en diferents treballs.</li>
</ul>
</div><h1><p>Crear un Procediment</p>
</h1>
<div class='content'><p>Un procediment es defineix en un fitxer de llibreria de procediments. A continuació es mostra un exemple de com definir un procediment senzill:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly9NWVBST0MgUFJPQwovL1NURVAxICBFWEVDIFBHTT1JRUZCUjE0Ci8vREQxICAgIEREICAgRFNOPU1ZLkRBVEEuU0VULERJU1A9KE5FVyxDQVRMRyxERUxFVEUpLAovLyAgICAgICAgICAgICBTUEFDRT0oVFJLLDEpLFVOSVQ9U1lTREEKLy9TVEVQMiAgRVhFQyBQR009SUVCR0VORVIKLy9TWVNQUklOVCBERCBTWVNPVVQ9KgovL1NZU0lOICAgIEREIERVTU1ZCi8vU1lTVVQxICAgREQgRFNOPU1ZLkRBVEEuU0VULERJU1A9U0hSCi8vU1lTVVQyICAgREQgU1lTT1VUPSoKLy8="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>//MYPROC PROC
//STEP1  EXEC PGM=IEFBR14
//DD1    DD   DSN=MY.DATA.SET,DISP=(NEW,CATLG,DELETE),
//             SPACE=(TRK,1),UNIT=SYSDA
//STEP2  EXEC PGM=IEBGENER
//SYSPRINT DD SYSOUT=*
//SYSIN    DD DUMMY
//SYSUT1   DD DSN=MY.DATA.SET,DISP=SHR
//SYSUT2   DD SYSOUT=*
//</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ul>
<li><code>//MYPROC PROC</code>: Defineix el nom del procediment com <code>MYPROC</code>.</li>
<li><code>//STEP1 EXEC PGM=IEFBR14</code>: Defineix un pas que executa el programa <code>IEFBR14</code>.</li>
<li><code>//DD1 DD DSN=MY.DATA.SET,DISP=(NEW,CATLG,DELETE),...</code>: Defineix un conjunt de dades nou.</li>
<li><code>//STEP2 EXEC PGM=IEBGENER</code>: Defineix un segon pas que executa el programa <code>IEBGENER</code>.</li>
<li><code>//SYSPRINT DD SYSOUT=*</code>: Defineix la sortida del sistema.</li>
<li><code>//SYSIN DD DUMMY</code>: Defineix una entrada fictícia.</li>
<li><code>//SYSUT1 DD DSN=MY.DATA.SET,DISP=SHR</code>: Defineix un conjunt de dades existent.</li>
<li><code>//SYSUT2 DD SYSOUT=*</code>: Defineix la sortida del sistema.</li>
</ul>
</div><h1><p>Utilitzar un Procediment</p>
</h1>
<div class='content'><p>Per utilitzar un procediment en un treball JCL, es fa servir la instrucció <code>EXEC</code> amb el nom del procediment. A continuació es mostra un exemple de com invocar el procediment <code>MYPROC</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly9NWUpPQiAgSk9CIChBQ0NUKSwnRVhFTVBMRScsQ0xBU1M9QSxNU0dDTEFTUz1BCi8vU1RFUDEgIEVYRUMgTVlQUk9D"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>//MYJOB  JOB (ACCT),'EXEMPLE',CLASS=A,MSGCLASS=A
//STEP1  EXEC MYPROC</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ul>
<li><code>//MYJOB JOB (ACCT),'EXEMPLE',CLASS=A,MSGCLASS=A</code>: Defineix un treball JCL.</li>
<li><code>//STEP1 EXEC MYPROC</code>: Invoca el procediment <code>MYPROC</code>.</li>
</ul>
</div><h1><p>Sobreescriure Paràmetres en un Procediment</p>
</h1>
<div class='content'><p>És possible sobreescriure paràmetres en un procediment quan s'invoca. Això es fa especificant els nous valors en la instrucció <code>EXEC</code>. A continuació es mostra un exemple:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly9NWUpPQiAgSk9CIChBQ0NUKSwnRVhFTVBMRScsQ0xBU1M9QSxNU0dDTEFTUz1BCi8vU1RFUDEgIEVYRUMgTVlQUk9DCi8vU1RFUDEuREQxIEREIERTTj1ORVcuREFUQS5TRVQsRElTUD0oTkVXLENBVExHLERFTEVURSk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>//MYJOB  JOB (ACCT),'EXEMPLE',CLASS=A,MSGCLASS=A
//STEP1  EXEC MYPROC
//STEP1.DD1 DD DSN=NEW.DATA.SET,DISP=(NEW,CATLG,DELETE)</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ul>
<li><code>//STEP1.DD1 DD DSN=NEW.DATA.SET,DISP=(NEW,CATLG,DELETE)</code>: Sobreescriu el conjunt de dades <code>DD1</code> definit en el procediment <code>MYPROC</code> amb un nou conjunt de dades <code>NEW.DATA.SET</code>.</li>
</ul>
</div><h1><p>Exercici Pràctic</p>
</h1>
<div class='content'></div><h2><p>Exercici</p>
</h2>
<div class='content'><ol>
<li>Defineix un procediment anomenat <code>COPYPROC</code> que copiï un conjunt de dades a un altre.</li>
<li>Utilitza el procediment <code>COPYPROC</code> en un treball JCL.</li>
<li>Sobreescriu el conjunt de dades d'entrada i sortida en la invocació del procediment.</li>
</ol>
</div><h2><p>Solució</p>
</h2>
<div class='content'><h4>Definició del Procediment</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly9DT1BZUFJPQyBQUk9DCi8vQ09QWVNURVAgRVhFQyBQR009SUVCR0VORVIKLy9TWVNQUklOVCBERCBTWVNPVVQ9KgovL1NZU0lOICAgIEREIERVTU1ZCi8vU1lTVVQxICAgREQgRFNOPUlOUFVULkRBVEEuU0VULERJU1A9U0hSCi8vU1lTVVQyICAgREQgRFNOPU9VVFBVVC5EQVRBLlNFVCxESVNQPShORVcsQ0FUTEcsREVMRVRFKSwKLy8gICAgICAgICAgICAgU1BBQ0U9KFRSSywxKSxVTklUPVNZU0RBCi8v"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>//COPYPROC PROC
//COPYSTEP EXEC PGM=IEBGENER
//SYSPRINT DD SYSOUT=*
//SYSIN    DD DUMMY
//SYSUT1   DD DSN=INPUT.DATA.SET,DISP=SHR
//SYSUT2   DD DSN=OUTPUT.DATA.SET,DISP=(NEW,CATLG,DELETE),
//             SPACE=(TRK,1),UNIT=SYSDA
//</pre></div><div class='content'><h4>Utilització del Procediment</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly9NWUpPQiAgSk9CIChBQ0NUKSwnRVhFTVBMRScsQ0xBU1M9QSxNU0dDTEFTUz1BCi8vU1RFUDEgIEVYRUMgQ09QWVBST0MKLy9TVEVQMS5TWVNVVDEgREQgRFNOPU1ZLklOUFVULkRBVEEsRElTUD1TSFIKLy9TVEVQMS5TWVNVVDIgREQgRFNOPU1ZLk9VVFBVVC5EQVRBLERJU1A9KE5FVyxDQVRMRyxERUxFVEUpLAovLyAgICAgICAgICAgICAgIFNQQUNFPShUUkssMSksVU5JVD1TWVNEQQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>//MYJOB  JOB (ACCT),'EXEMPLE',CLASS=A,MSGCLASS=A
//STEP1  EXEC COPYPROC
//STEP1.SYSUT1 DD DSN=MY.INPUT.DATA,DISP=SHR
//STEP1.SYSUT2 DD DSN=MY.OUTPUT.DATA,DISP=(NEW,CATLG,DELETE),
//               SPACE=(TRK,1),UNIT=SYSDA</pre></div><div class='content'></div><h2><p>Explicació de la Solució</p>
</h2>
<div class='content'><ul>
<li><strong>Definició del Procediment</strong>: <code>COPYPROC</code> defineix un pas <code>COPYSTEP</code> que utilitza <code>IEBGENER</code> per copiar dades.</li>
<li><strong>Utilització del Procediment</strong>: <code>MYJOB</code> invoca <code>COPYPROC</code> i sobreescriu els conjunts de dades d'entrada (<code>SYSUT1</code>) i sortida (<code>SYSUT2</code>).</li>
</ul>
</div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>En aquest tema, hem après com crear i utilitzar procediments en JCL. Els procediments són una eina poderosa per reutilitzar codi i mantenir la consistència en els treballs JCL. També hem vist com sobreescriure paràmetres en la invocació d'un procediment per adaptar-lo a necessitats específiques. Amb aquesta base, estàs preparat per explorar paràmetres simbòlics en el següent tema.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-01-introduction-procedures' title="Introducció als Procediments">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-03-symbolic-parameters' title="Paràmetres Simbòlics">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
