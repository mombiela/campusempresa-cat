<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plugins i Loaders Personalitzats</title>

    <link rel="alternate" href="https://campusempresa.com/mod/webpack/06-05-custom-plugins-and-loaders" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/webpack/06-05-custom-plugins-and-loaders" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/webpack/06-05-custom-plugins-and-loaders" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/webpack/06-05-custom-plugins-and-loaders" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/webpack/06-05-custom-plugins-and-loaders" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-04-using-webpack-with-vue' title="Ús de Webpack amb Vue">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Plugins i Loaders Personalitzats</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-setting-up-a-react-project' title="Configuració d'un Projecte React">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com crear els nostres propis plugins i loaders per a Webpack. Els plugins i loaders personalitzats ens permeten estendre la funcionalitat de Webpack per adaptar-se a les necessitats específiques del nostre projecte.</p>
</div><h1><p>Continguts</p>
</h1>
<div class='content'><ol>
<li><a href="#introducció-als-plugins-i-loaders">Introducció als Plugins i Loaders</a></li>
<li><a href="#creació-dun-loader-personalitzat">Creació d'un Loader Personalitzat</a></li>
<li><a href="#creació-dun-plugin-personalitzat">Creació d'un Plugin Personalitzat</a></li>
<li><a href="#exemples-pràctics">Exemples Pràctics</a></li>
<li><a href="#exercicis-pràctics">Exercicis Pràctics</a></li>
<li><a href="#conclusió">Conclusió</a></li>
</ol>
</div><h1><p>Introducció als Plugins i Loaders</p>
</h1>
<div class='content'></div><h2><p>Què són els Loaders?</p>
</h2>
<div class='content'><p>Els loaders permeten a Webpack processar fitxers que no són JavaScript pur. Per exemple, podem utilitzar loaders per transformar fitxers TypeScript en JavaScript, o per carregar fitxers CSS.</p>
</div><h2><p>Què són els Plugins?</p>
</h2>
<div class='content'><p>Els plugins són utilitzats per realitzar tasques més complexes que no poden ser aconseguides només amb loaders. Poden fer qualsevol cosa des de l'optimització de bundles fins a la injecció de variables globals.</p>
</div><h1><p>Creació d'un Loader Personalitzat</p>
</h1>
<div class='content'></div><h2><p>Passos per Crear un Loader</p>
</h2>
<div class='content'><ol>
<li><strong>Crear el fitxer del loader</strong>: El loader és una funció que rep el contingut del fitxer com a entrada i retorna el contingut transformat.</li>
<li><strong>Configurar Webpack per utilitzar el loader</strong>: Afegir el loader a la configuració de Webpack.</li>
</ol>
</div><h2><p>Exemple de Loader</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gbXktbG9hZGVyLmpzCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oc291cmNlKSB7CiAgLy8gVHJhbnNmb3JtYXIgZWwgY29udGluZ3V0IGRlbCBmaXR4ZXIKICBjb25zdCB0cmFuc2Zvcm1lZFNvdXJjZSA9IHNvdXJjZS5yZXBsYWNlKC9jb25zb2xlXC5sb2dcKC9nLCAnY29uc29sZS53YXJuKCcpOwogIHJldHVybiB0cmFuc2Zvcm1lZFNvdXJjZTsKfTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// my-loader.js
module.exports = function(source) {
  // Transformar el contingut del fitxer
  const transformedSource = source.replace(/console\.log\(/g, 'console.warn(');
  return transformedSource;
};</pre></div><div class='content'></div><h2><p>Configuració de Webpack</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gd2VicGFjay5jb25maWcuanMKbW9kdWxlLmV4cG9ydHMgPSB7CiAgbW9kdWxlOiB7CiAgICBydWxlczogWwogICAgICB7CiAgICAgICAgdGVzdDogL1wuanMkLywKICAgICAgICB1c2U6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgbG9hZGVyOiBwYXRoLnJlc29sdmUoJ3BhdGgvdG8vbXktbG9hZGVyLmpzJykKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH0KICAgIF0KICB9Cn07"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// webpack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.js$/,
        use: [
          {
            loader: path.resolve('path/to/my-loader.js')
          }
        ]
      }
    ]
  }
};</pre></div><div class='content'></div><h1><p>Creació d'un Plugin Personalitzat</p>
</h1>
<div class='content'></div><h2><p>Passos per Crear un Plugin</p>
</h2>
<div class='content'><ol>
<li><strong>Crear el fitxer del plugin</strong>: El plugin és una classe que implementa el mètode <code>apply</code>.</li>
<li><strong>Configurar Webpack per utilitzar el plugin</strong>: Afegir el plugin a la configuració de Webpack.</li>
</ol>
</div><h2><p>Exemple de Plugin</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gbXktcGx1Z2luLmpzCmNsYXNzIE15UGx1Z2luIHsKICBhcHBseShjb21waWxlcikgewogICAgY29tcGlsZXIuaG9va3MuZG9uZS50YXAoJ015UGx1Z2luJywgKHN0YXRzKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdDb21waWxhY2nDsyBjb21wbGV0YWRhIScpOwogICAgfSk7CiAgfQp9Cgptb2R1bGUuZXhwb3J0cyA9IE15UGx1Z2luOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// my-plugin.js
class MyPlugin {
  apply(compiler) {
    compiler.hooks.done.tap('MyPlugin', (stats) =&gt; {
      console.log('Compilaci&oacute; completada!');
    });
  }
}

module.exports = MyPlugin;</pre></div><div class='content'></div><h2><p>Configuració de Webpack</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gd2VicGFjay5jb25maWcuanMKY29uc3QgTXlQbHVnaW4gPSByZXF1aXJlKCcuL3BhdGgvdG8vbXktcGx1Z2luLmpzJyk7Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBwbHVnaW5zOiBbCiAgICBuZXcgTXlQbHVnaW4oKQogIF0KfTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// webpack.config.js
const MyPlugin = require('./path/to/my-plugin.js');

module.exports = {
  plugins: [
    new MyPlugin()
  ]
};</pre></div><div class='content'></div><h1><p>Exemples Pràctics</p>
</h1>
<div class='content'></div><h2><p>Loader per Convertir Text a Majúscules</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gdXBwZXJjYXNlLWxvYWRlci5qcwptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHNvdXJjZSkgewogIHJldHVybiBzb3VyY2UudG9VcHBlckNhc2UoKTsKfTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// uppercase-loader.js
module.exports = function(source) {
  return source.toUpperCase();
};</pre></div><div class='content'></div><h2><p>Plugin per Afegir un Banner al Bundle</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gYmFubmVyLXBsdWdpbi5qcwpjbGFzcyBCYW5uZXJQbHVnaW4gewogIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgIHRoaXMuYmFubmVyID0gb3B0aW9ucy5iYW5uZXI7CiAgfQoKICBhcHBseShjb21waWxlcikgewogICAgY29tcGlsZXIuaG9va3MuZW1pdC50YXBBc3luYygnQmFubmVyUGx1Z2luJywgKGNvbXBpbGF0aW9uLCBjYWxsYmFjaykgPT4gewogICAgICBmb3IgKGNvbnN0IGZpbGVuYW1lIGluIGNvbXBpbGF0aW9uLmFzc2V0cykgewogICAgICAgIGlmIChjb21waWxhdGlvbi5hc3NldHMuaGFzT3duUHJvcGVydHkoZmlsZW5hbWUpKSB7CiAgICAgICAgICBjb25zdCBzb3VyY2UgPSBjb21waWxhdGlvbi5hc3NldHNbZmlsZW5hbWVdLnNvdXJjZSgpOwogICAgICAgICAgY29uc3QgYmFubmVyID0gYC8qICR7dGhpcy5iYW5uZXJ9ICovXG5gOwogICAgICAgICAgY29tcGlsYXRpb24uYXNzZXRzW2ZpbGVuYW1lXSA9IHsKICAgICAgICAgICAgc291cmNlOiAoKSA9PiBiYW5uZXIgKyBzb3VyY2UsCiAgICAgICAgICAgIHNpemU6ICgpID0+IGJhbm5lci5sZW5ndGggKyBzb3VyY2UubGVuZ3RoCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfQogICAgICBjYWxsYmFjaygpOwogICAgfSk7CiAgfQp9Cgptb2R1bGUuZXhwb3J0cyA9IEJhbm5lclBsdWdpbjs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// banner-plugin.js
class BannerPlugin {
  constructor(options) {
    this.banner = options.banner;
  }

  apply(compiler) {
    compiler.hooks.emit.tapAsync('BannerPlugin', (compilation, callback) =&gt; {
      for (const filename in compilation.assets) {
        if (compilation.assets.hasOwnProperty(filename)) {
          const source = compilation.assets[filename].source();
          const banner = `/* ${this.banner} */\n`;
          compilation.assets[filename] = {
            source: () =&gt; banner + source,
            size: () =&gt; banner.length + source.length
          };
        }
      }
      callback();
    });
  }
}

module.exports = BannerPlugin;</pre></div><div class='content'></div><h2><p>Configuració de Webpack</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gd2VicGFjay5jb25maWcuanMKY29uc3QgQmFubmVyUGx1Z2luID0gcmVxdWlyZSgnLi9wYXRoL3RvL2Jhbm5lci1wbHVnaW4uanMnKTsKCm1vZHVsZS5leHBvcnRzID0gewogIG1vZHVsZTogewogICAgcnVsZXM6IFsKICAgICAgewogICAgICAgIHRlc3Q6IC9cLnR4dCQvLAogICAgICAgIHVzZTogWwogICAgICAgICAgewogICAgICAgICAgICBsb2FkZXI6IHBhdGgucmVzb2x2ZSgncGF0aC90by91cHBlcmNhc2UtbG9hZGVyLmpzJykKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH0KICAgIF0KICB9LAogIHBsdWdpbnM6IFsKICAgIG5ldyBCYW5uZXJQbHVnaW4oeyBiYW5uZXI6ICdBcXVlc3Qgw6lzIHVuIGJhbm5lciBwZXJzb25hbGl0emF0JyB9KQogIF0KfTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// webpack.config.js
const BannerPlugin = require('./path/to/banner-plugin.js');

module.exports = {
  module: {
    rules: [
      {
        test: /\.txt$/,
        use: [
          {
            loader: path.resolve('path/to/uppercase-loader.js')
          }
        ]
      }
    ]
  },
  plugins: [
    new BannerPlugin({ banner: 'Aquest &eacute;s un banner personalitzat' })
  ]
};</pre></div><div class='content'></div><h1><p>Exercicis Pràctics</p>
</h1>
<div class='content'></div><h2><p>Exercici 1: Crear un Loader per Minificar HTML</p>
</h2>
<div class='content'><p><strong>Descripció</strong>: Crea un loader que elimini els espais en blanc innecessaris d'un fitxer HTML.</p>
<p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gbWluaWZ5LWh0bWwtbG9hZGVyLmpzCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oc291cmNlKSB7CiAgcmV0dXJuIHNvdXJjZS5yZXBsYWNlKC9ccysvZywgJyAnKS50cmltKCk7Cn07"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// minify-html-loader.js
module.exports = function(source) {
  return source.replace(/\s+/g, ' ').trim();
};</pre></div><div class='content'></div><h2><p>Exercici 2: Crear un Plugin per Registrar el Temps de Compilació</p>
</h2>
<div class='content'><p><strong>Descripció</strong>: Crea un plugin que registri el temps que triga la compilació de Webpack.</p>
<p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gdGltZS1sb2dnZXItcGx1Z2luLmpzCmNsYXNzIFRpbWVMb2dnZXJQbHVnaW4gewogIGFwcGx5KGNvbXBpbGVyKSB7CiAgICBjb21waWxlci5ob29rcy5jb21waWxlLnRhcCgnVGltZUxvZ2dlclBsdWdpbicsICgpID0+IHsKICAgICAgdGhpcy5zdGFydFRpbWUgPSBEYXRlLm5vdygpOwogICAgfSk7CgogICAgY29tcGlsZXIuaG9va3MuZG9uZS50YXAoJ1RpbWVMb2dnZXJQbHVnaW4nLCAoKSA9PiB7CiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpOwogICAgICBjb25zdCB0aW1lID0gZW5kVGltZSAtIHRoaXMuc3RhcnRUaW1lOwogICAgICBjb25zb2xlLmxvZyhgVGVtcHMgZGUgY29tcGlsYWNpw7M6ICR7dGltZX1tc2ApOwogICAgfSk7CiAgfQp9Cgptb2R1bGUuZXhwb3J0cyA9IFRpbWVMb2dnZXJQbHVnaW47"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// time-logger-plugin.js
class TimeLoggerPlugin {
  apply(compiler) {
    compiler.hooks.compile.tap('TimeLoggerPlugin', () =&gt; {
      this.startTime = Date.now();
    });

    compiler.hooks.done.tap('TimeLoggerPlugin', () =&gt; {
      const endTime = Date.now();
      const time = endTime - this.startTime;
      console.log(`Temps de compilaci&oacute;: ${time}ms`);
    });
  }
}

module.exports = TimeLoggerPlugin;</pre></div><div class='content'></div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>En aquest tema, hem après com crear loaders i plugins personalitzats per a Webpack. Els loaders ens permeten transformar fitxers abans de ser inclosos en el bundle, mentre que els plugins ens permeten estendre la funcionalitat de Webpack de maneres més complexes. Amb aquests coneixements, podem adaptar Webpack a les necessitats específiques dels nostres projectes, millorant així el nostre flux de treball i la qualitat del nostre codi.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-04-using-webpack-with-vue' title="Ús de Webpack amb Vue">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-setting-up-a-react-project' title="Configuració d'un Projecte React">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
