<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proves Unitàries en Ionic</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ionic/06-01-unit-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ionic/06-01-unit-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ionic/06-01-unit-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/ionic/06-01-unit-testing" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/ionic/06-01-unit-testing" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-05-push-notifications' title="Notificacions Push">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Proves Unitàries en Ionic</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-end-to-end-testing' title="Proves de Cap a Cap">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Les proves unitàries són una part essencial del desenvolupament de programari, ja que permeten verificar que les diferents parts del codi funcionen correctament de manera independent. En aquest tema, aprendrem com configurar i escriure proves unitàries per a una aplicació Ionic.</p>
</div><h1>Objectius del Tema</h1>
<div class='content'><ul>
<li>Entendre la importància de les proves unitàries.</li>
<li>Configurar l'entorn de proves unitàries en un projecte Ionic.</li>
<li>Escriure i executar proves unitàries bàsiques.</li>
</ul>
</div><h1>1. Importància de les Proves Unitàries</h1>
<div class='content'><p>Les proves unitàries ajuden a:</p>
<ul>
<li>Detectar errors en fases primerenques del desenvolupament.</li>
<li>Assegurar que els canvis en el codi no introdueixin nous errors (regressions).</li>
<li>Millorar la qualitat del codi i la confiança en el producte final.</li>
</ul>
</div><h1>2. Configuració de l'Entorn de Proves Unitàries</h1>
<div class='content'></div><h2>2.1 Instal·lació de Dependències</h2>
<div class='content'><p>Ionic utilitza Angular, i Angular ve amb un conjunt d'eines per a proves unitàries, com Jasmine i Karma. Per començar, assegura't que tens les dependències necessàries instal·lades:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgLS1zYXZlLWRldiBAYW5ndWxhci9jbGkgQGFuZ3VsYXIvY29yZSBAYW5ndWxhci9jb21waWxlci1jbGkgamFzbWluZS1jb3JlIGthcm1hIGthcm1hLWNocm9tZS1sYXVuY2hlciBrYXJtYS1qYXNtaW5lIGthcm1hLWphc21pbmUtaHRtbC1yZXBvcnRlcg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install --save-dev @angular/cli @angular/core @angular/compiler-cli jasmine-core karma karma-chrome-launcher karma-jasmine karma-jasmine-html-reporter</pre></div><div class='content'></div><h2>2.2 Configuració de Karma</h2>
<div class='content'><p>Karma és un test runner per a JavaScript. La configuració de Karma es troba en el fitxer <code>karma.conf.js</code>. Aquí tens un exemple de configuració bàsica:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY29uZmlnKSB7CiAgY29uZmlnLnNldCh7CiAgICBiYXNlUGF0aDogJycsCiAgICBmcmFtZXdvcmtzOiBbJ2phc21pbmUnLCAnQGFuZ3VsYXItZGV2a2l0L2J1aWxkLWFuZ3VsYXInXSwKICAgIHBsdWdpbnM6IFsKICAgICAgcmVxdWlyZSgna2FybWEtamFzbWluZScpLAogICAgICByZXF1aXJlKCdrYXJtYS1jaHJvbWUtbGF1bmNoZXInKSwKICAgICAgcmVxdWlyZSgna2FybWEtamFzbWluZS1odG1sLXJlcG9ydGVyJyksCiAgICAgIHJlcXVpcmUoJ0Bhbmd1bGFyLWRldmtpdC9idWlsZC1hbmd1bGFyL3BsdWdpbnMva2FybWEnKQogICAgXSwKICAgIGNsaWVudDogewogICAgICBjbGVhckNvbnRleHQ6IGZhbHNlIC8vIGxlYXZlIEphc21pbmUgU3BlYyBSdW5uZXIgb3V0cHV0IHZpc2libGUgaW4gYnJvd3NlcgogICAgfSwKICAgIHJlcG9ydGVyczogWydwcm9ncmVzcycsICdramh0bWwnXSwKICAgIHBvcnQ6IDk4NzYsCiAgICBjb2xvcnM6IHRydWUsCiAgICBsb2dMZXZlbDogY29uZmlnLkxPR19JTkZPLAogICAgYXV0b1dhdGNoOiB0cnVlLAogICAgYnJvd3NlcnM6IFsnQ2hyb21lJ10sCiAgICBzaW5nbGVSdW46IGZhbHNlLAogICAgcmVzdGFydE9uRmlsZUNoYW5nZTogdHJ1ZQogIH0pOwp9Ow=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module.exports = function (config) {
  config.set({
    basePath: '',
    frameworks: ['jasmine', '@angular-devkit/build-angular'],
    plugins: [
      require('karma-jasmine'),
      require('karma-chrome-launcher'),
      require('karma-jasmine-html-reporter'),
      require('@angular-devkit/build-angular/plugins/karma')
    ],
    client: {
      clearContext: false // leave Jasmine Spec Runner output visible in browser
    },
    reporters: ['progress', 'kjhtml'],
    port: 9876,
    colors: true,
    logLevel: config.LOG_INFO,
    autoWatch: true,
    browsers: ['Chrome'],
    singleRun: false,
    restartOnFileChange: true
  });
};</pre></div><div class='content'></div><h1>3. Escriure Proves Unitàries</h1>
<div class='content'></div><h2>3.1 Estructura d'una Prova Unitària</h2>
<div class='content'><p>Les proves unitàries en Angular es fan amb Jasmine. Aquí tens un exemple bàsic d'una prova unitària per a un component:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50Rml4dHVyZSwgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IE15Q29tcG9uZW50IH0gZnJvbSAnLi9teS1jb21wb25lbnQuY29tcG9uZW50JzsKCmRlc2NyaWJlKCdNeUNvbXBvbmVudCcsICgpID0+IHsKICBsZXQgY29tcG9uZW50OiBNeUNvbXBvbmVudDsKICBsZXQgZml4dHVyZTogQ29tcG9uZW50Rml4dHVyZTxNeUNvbXBvbmVudD47CgogIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4gewogICAgYXdhaXQgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgICAgZGVjbGFyYXRpb25zOiBbIE15Q29tcG9uZW50IF0KICAgIH0pCiAgICAuY29tcGlsZUNvbXBvbmVudHMoKTsKICB9KTsKCiAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICBmaXh0dXJlID0gVGVzdEJlZC5jcmVhdGVDb21wb25lbnQoTXlDb21wb25lbnQpOwogICAgY29tcG9uZW50ID0gZml4dHVyZS5jb21wb25lbnRJbnN0YW5jZTsKICAgIGZpeHR1cmUuZGV0ZWN0Q2hhbmdlcygpOwogIH0pOwoKICBpdCgnc2hvdWxkIGNyZWF0ZScsICgpID0+IHsKICAgIGV4cGVjdChjb21wb25lbnQpLnRvQmVUcnV0aHkoKTsKICB9KTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ComponentFixture, TestBed } from '@angular/core/testing';
import { MyComponent } from './my-component.component';

describe('MyComponent', () =&gt; {
  let component: MyComponent;
  let fixture: ComponentFixture&lt;MyComponent&gt;;

  beforeEach(async () =&gt; {
    await TestBed.configureTestingModule({
      declarations: [ MyComponent ]
    })
    .compileComponents();
  });

  beforeEach(() =&gt; {
    fixture = TestBed.createComponent(MyComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () =&gt; {
    expect(component).toBeTruthy();
  });
});</pre></div><div class='content'></div><h2>3.2 Explicació del Codi</h2>
<div class='content'><ul>
<li><code>describe</code>: Defineix un conjunt de proves per a un component o servei.</li>
<li><code>beforeEach</code>: Executa codi abans de cada prova. Aquí es configura el mòdul de proves i es crea una instància del component.</li>
<li><code>it</code>: Defineix una prova individual. En aquest cas, verifica que el component es crea correctament.</li>
</ul>
</div><h2>3.3 Exemple Pràctic</h2>
<div class='content'><p>Suposem que tenim un component <code>CounterComponent</code> que incrementa un comptador. Aquí tens una prova unitària per verificar aquesta funcionalitat:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50Rml4dHVyZSwgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IENvdW50ZXJDb21wb25lbnQgfSBmcm9tICcuL2NvdW50ZXIuY29tcG9uZW50JzsKCmRlc2NyaWJlKCdDb3VudGVyQ29tcG9uZW50JywgKCkgPT4gewogIGxldCBjb21wb25lbnQ6IENvdW50ZXJDb21wb25lbnQ7CiAgbGV0IGZpeHR1cmU6IENvbXBvbmVudEZpeHR1cmU8Q291bnRlckNvbXBvbmVudD47CgogIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4gewogICAgYXdhaXQgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgICAgZGVjbGFyYXRpb25zOiBbIENvdW50ZXJDb21wb25lbnQgXQogICAgfSkKICAgIC5jb21waWxlQ29tcG9uZW50cygpOwogIH0pOwoKICBiZWZvcmVFYWNoKCgpID0+IHsKICAgIGZpeHR1cmUgPSBUZXN0QmVkLmNyZWF0ZUNvbXBvbmVudChDb3VudGVyQ29tcG9uZW50KTsKICAgIGNvbXBvbmVudCA9IGZpeHR1cmUuY29tcG9uZW50SW5zdGFuY2U7CiAgICBmaXh0dXJlLmRldGVjdENoYW5nZXMoKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCBpbmNyZW1lbnQgY291bnRlcicsICgpID0+IHsKICAgIGNvbXBvbmVudC5pbmNyZW1lbnQoKTsKICAgIGV4cGVjdChjb21wb25lbnQuY291bnRlcikudG9CZSgxKTsKICB9KTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ComponentFixture, TestBed } from '@angular/core/testing';
import { CounterComponent } from './counter.component';

describe('CounterComponent', () =&gt; {
  let component: CounterComponent;
  let fixture: ComponentFixture&lt;CounterComponent&gt;;

  beforeEach(async () =&gt; {
    await TestBed.configureTestingModule({
      declarations: [ CounterComponent ]
    })
    .compileComponents();
  });

  beforeEach(() =&gt; {
    fixture = TestBed.createComponent(CounterComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should increment counter', () =&gt; {
    component.increment();
    expect(component.counter).toBe(1);
  });
});</pre></div><div class='content'></div><h1>4. Executar les Proves Unitàries</h1>
<div class='content'><p>Per executar les proves unitàries, utilitza el següent comandament:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmcgdGVzdA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ng test</pre></div><div class='content'><p>Aquest comandament obrirà un navegador i mostrarà els resultats de les proves.</p>
</div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Prova Unitària per a un Servei</h2>
<div class='content'><p>Crea un servei <code>MathService</code> amb una funció <code>add(a: number, b: number): number</code> que retorni la suma de dos números. Escriu una prova unitària per verificar aquesta funció.</p>
<h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gbWF0aC5zZXJ2aWNlLnRzCmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKCkBJbmplY3RhYmxlKHsKICBwcm92aWRlZEluOiAncm9vdCcKfSkKZXhwb3J0IGNsYXNzIE1hdGhTZXJ2aWNlIHsKICBhZGQoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBudW1iZXIgewogICAgcmV0dXJuIGEgKyBiOwogIH0KfQoKLy8gbWF0aC5zZXJ2aWNlLnNwZWMudHMKaW1wb3J0IHsgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IE1hdGhTZXJ2aWNlIH0gZnJvbSAnLi9tYXRoLnNlcnZpY2UnOwoKZGVzY3JpYmUoJ01hdGhTZXJ2aWNlJywgKCkgPT4gewogIGxldCBzZXJ2aWNlOiBNYXRoU2VydmljZTsKCiAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICBUZXN0QmVkLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoe30pOwogICAgc2VydmljZSA9IFRlc3RCZWQuaW5qZWN0KE1hdGhTZXJ2aWNlKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCBhZGQgdHdvIG51bWJlcnMnLCAoKSA9PiB7CiAgICBleHBlY3Qoc2VydmljZS5hZGQoMSwgMikpLnRvQmUoMyk7CiAgfSk7Cn0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// math.service.ts
import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class MathService {
  add(a: number, b: number): number {
    return a + b;
  }
}

// math.service.spec.ts
import { TestBed } from '@angular/core/testing';
import { MathService } from './math.service';

describe('MathService', () =&gt; {
  let service: MathService;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({});
    service = TestBed.inject(MathService);
  });

  it('should add two numbers', () =&gt; {
    expect(service.add(1, 2)).toBe(3);
  });
});</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>En aquesta secció, hem après la importància de les proves unitàries, com configurar l'entorn de proves en un projecte Ionic, i com escriure i executar proves unitàries bàsiques. Les proves unitàries són una eina poderosa per assegurar la qualitat del codi i la seva robustesa davant de canvis futurs. En el proper tema, explorarem les proves de cap a cap per verificar el funcionament complet de l'aplicació.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-05-push-notifications' title="Notificacions Push">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-end-to-end-testing' title="Proves de Cap a Cap">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
