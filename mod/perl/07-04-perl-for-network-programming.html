<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perl per a la Programació de Xarxes</title>

    <link rel="alternate" href="https://campusempresa.com/mod/perl/07-04-perl-for-network-programming" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/perl/07-04-perl-for-network-programming" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/perl/07-04-perl-for-network-programming" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/perl/07-04-perl-for-network-programming" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/perl/07-04-perl-for-network-programming" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-03-perl-for-data-processing' title="Perl per al Processament de Dades">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Perl per a la Programació de Xarxes</h2></a>
			</div>
	<div class='col-2 text-end'>
			</div>
</div>
<div class='content'></div><h1>Introducció</h1>
<div class='content'><p>En aquest tema, explorarem com utilitzar Perl per a la programació de xarxes. Perl és una eina poderosa per a la manipulació de xarxes gràcies als seus mòduls integrats i la seva capacitat per gestionar tasques de xarxa de manera eficient. Aprendrem a crear clients i servidors, a treballar amb sockets i a utilitzar mòduls com <code>Net::HTTP</code> i <code>LWP::UserAgent</code>.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ol>
<li><strong>Sockets</strong>: Un socket és un punt final per a la comunicació entre dues màquines.</li>
<li><strong>Clients i Servidors</strong>: En la programació de xarxes, un client sol·licita serveis i un servidor proporciona aquests serveis.</li>
<li><strong>Protocols</strong>: Els protocols com HTTP, FTP, i TCP/IP defineixen les regles per a la comunicació de xarxa.</li>
</ol>
</div><h1>Sockets en Perl</h1>
<div class='content'></div><h2>Creació d'un Client TCP</h2>
<div class='content'><p>Un client TCP es connecta a un servidor i envia o rep dades. A continuació, es mostra un exemple bàsic de client TCP en Perl:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwp1c2UgSU86OlNvY2tldDo6SU5FVDsKCiMgQ3JlYWNpw7MgZGVsIHNvY2tldCBkZWwgY2xpZW50Cm15ICRzb2NrZXQgPSBuZXcgSU86OlNvY2tldDo6SU5FVCAoCiAgICBQZWVySG9zdCA9PiAnMTI3LjAuMC4xJywKICAgIFBlZXJQb3J0ID0+ICc1MDAwJywKICAgIFByb3RvID0+ICd0Y3AnLAopIG9yIGRpZSAiTm8gcydoYSBwb2d1dCBjb25uZWN0YXIgYWwgc2Vydmlkb3I6ICQhXG4iOwoKcHJpbnQgIkNvbm5lY3RhdCBhbCBzZXJ2aWRvclxuIjsKCiMgRW52aWFyIGRhZGVzIGFsIHNlcnZpZG9yCm15ICRkYXRhID0gIkhvbGEsIHNlcnZpZG9yISI7CiRzb2NrZXQtPnNlbmQoJGRhdGEpOwoKIyBSZWJyZSByZXNwb3N0YSBkZWwgc2Vydmlkb3IKbXkgJHJlc3BvbnNlID0gIiI7CiRzb2NrZXQtPnJlY3YoJHJlc3BvbnNlLCAxMDI0KTsKcHJpbnQgIlJlc3Bvc3RhIGRlbCBzZXJ2aWRvcjogJHJlc3BvbnNlXG4iOwoKIyBUYW5jYXIgZWwgc29ja2V0CiRzb2NrZXQtPmNsb3NlKCk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use strict;
use warnings;
use IO::Socket::INET;

# Creaci&oacute; del socket del client
my $socket = new IO::Socket::INET (
    PeerHost =&gt; '127.0.0.1',
    PeerPort =&gt; '5000',
    Proto =&gt; 'tcp',
) or die &quot;No s'ha pogut connectar al servidor: $!\n&quot;;

print &quot;Connectat al servidor\n&quot;;

# Enviar dades al servidor
my $data = &quot;Hola, servidor!&quot;;
$socket-&gt;send($data);

# Rebre resposta del servidor
my $response = &quot;&quot;;
$socket-&gt;recv($response, 1024);
print &quot;Resposta del servidor: $response\n&quot;;

# Tancar el socket
$socket-&gt;close();</pre></div><div class='content'></div><h2>Creació d'un Servidor TCP</h2>
<div class='content'><p>Un servidor TCP escolta les connexions entrants i respon als clients. Aquí teniu un exemple bàsic de servidor TCP en Perl:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwp1c2UgSU86OlNvY2tldDo6SU5FVDsKCiMgQ3JlYWNpw7MgZGVsIHNvY2tldCBkZWwgc2Vydmlkb3IKbXkgJHNvY2tldCA9IG5ldyBJTzo6U29ja2V0OjpJTkVUICgKICAgIExvY2FsSG9zdCA9PiAnMTI3LjAuMC4xJywKICAgIExvY2FsUG9ydCA9PiAnNTAwMCcsCiAgICBQcm90byA9PiAndGNwJywKICAgIExpc3RlbiA9PiA1LAogICAgUmV1c2UgPT4gMSwKKSBvciBkaWUgIk5vIHMnaGEgcG9ndXQgY3JlYXIgZWwgc29ja2V0OiAkIVxuIjsKCnByaW50ICJTZXJ2aWRvciBlc3BlcmFudCBjb25uZXhpb25zIGEgbGEgcG9ydGEgNTAwMFxuIjsKCndoaWxlICgxKSB7CiAgICAjIEFjY2VwdGFyIGNvbm5leGnDsyBkZWwgY2xpZW50CiAgICBteSAkY2xpZW50X3NvY2tldCA9ICRzb2NrZXQtPmFjY2VwdCgpOwogICAgCiAgICAjIFJlYnJlIGRhZGVzIGRlbCBjbGllbnQKICAgIG15ICRkYXRhID0gIiI7CiAgICAkY2xpZW50X3NvY2tldC0+cmVjdigkZGF0YSwgMTAyNCk7CiAgICBwcmludCAiRGFkZXMgcmVidWRlczogJGRhdGFcbiI7CiAgICAKICAgICMgRW52aWFyIHJlc3Bvc3RhIGFsIGNsaWVudAogICAgbXkgJHJlc3BvbnNlID0gIkhvbGEsIGNsaWVudCEiOwogICAgJGNsaWVudF9zb2NrZXQtPnNlbmQoJHJlc3BvbnNlKTsKICAgIAogICAgIyBUYW5jYXIgZWwgc29ja2V0IGRlbCBjbGllbnQKICAgICRjbGllbnRfc29ja2V0LT5jbG9zZSgpOwp9CgojIFRhbmNhciBlbCBzb2NrZXQgZGVsIHNlcnZpZG9yCiRzb2NrZXQtPmNsb3NlKCk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use strict;
use warnings;
use IO::Socket::INET;

# Creaci&oacute; del socket del servidor
my $socket = new IO::Socket::INET (
    LocalHost =&gt; '127.0.0.1',
    LocalPort =&gt; '5000',
    Proto =&gt; 'tcp',
    Listen =&gt; 5,
    Reuse =&gt; 1,
) or die &quot;No s'ha pogut crear el socket: $!\n&quot;;

print &quot;Servidor esperant connexions a la porta 5000\n&quot;;

while (1) {
    # Acceptar connexi&oacute; del client
    my $client_socket = $socket-&gt;accept();
    
    # Rebre dades del client
    my $data = &quot;&quot;;
    $client_socket-&gt;recv($data, 1024);
    print &quot;Dades rebudes: $data\n&quot;;
    
    # Enviar resposta al client
    my $response = &quot;Hola, client!&quot;;
    $client_socket-&gt;send($response);
    
    # Tancar el socket del client
    $client_socket-&gt;close();
}

# Tancar el socket del servidor
$socket-&gt;close();</pre></div><div class='content'></div><h1>Utilització de Mòduls de Xarxa</h1>
<div class='content'></div><h2>`Net::HTTP`</h2>
<div class='content'><p>El mòdul <code>Net::HTTP</code> permet fer sol·licituds HTTP. Aquí teniu un exemple de com fer una sol·licitud GET:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwp1c2UgTmV0OjpIVFRQOwoKbXkgJHMgPSBOZXQ6OkhUVFAtPm5ldyhIb3N0ID0+ICJ3d3cuZXhhbXBsZS5jb20iKSB8fCBkaWUgJEA7CiRzLT53cml0ZV9yZXF1ZXN0KEdFVCA9PiAiLyIsICdVc2VyLUFnZW50JyA9PiAiTW96aWxsYS81LjAiKTsKCm15ICgkY29kZSwgJG1lc3MsICVoKSA9ICRzLT5yZWFkX3Jlc3BvbnNlX2hlYWRlcnM7CnByaW50ICJDb2RpIGRlIHJlc3Bvc3RhOiAkY29kZVxuIjsKCndoaWxlICgxKSB7CiAgICBteSAkYnVmOwogICAgbXkgJG4gPSAkcy0+cmVhZF9lbnRpdHlfYm9keSgkYnVmLCAxMDI0KTsKICAgIGRpZSAiRXJyb3IgZGUgbGVjdHVyYTogJCFcbiIgdW5sZXNzIGRlZmluZWQgJG47CiAgICBsYXN0IHVubGVzcyAkbjsKICAgIHByaW50ICRidWY7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use strict;
use warnings;
use Net::HTTP;

my $s = Net::HTTP-&gt;new(Host =&gt; &quot;www.example.com&quot;) || die $@;
$s-&gt;write_request(GET =&gt; &quot;/&quot;, 'User-Agent' =&gt; &quot;Mozilla/5.0&quot;);

my ($code, $mess, %h) = $s-&gt;read_response_headers;
print &quot;Codi de resposta: $code\n&quot;;

while (1) {
    my $buf;
    my $n = $s-&gt;read_entity_body($buf, 1024);
    die &quot;Error de lectura: $!\n&quot; unless defined $n;
    last unless $n;
    print $buf;
}</pre></div><div class='content'></div><h2>`LWP::UserAgent`</h2>
<div class='content'><p>El mòdul <code>LWP::UserAgent</code> és una eina més avançada per fer sol·licituds HTTP. Aquí teniu un exemple de com fer una sol·licitud GET i processar la resposta:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwp1c2UgTFdQOjpVc2VyQWdlbnQ7CgpteSAkdWEgPSBMV1A6OlVzZXJBZ2VudC0+bmV3OwpteSAkcmVzcG9uc2UgPSAkdWEtPmdldCgnaHR0cDovL3d3dy5leGFtcGxlLmNvbScpOwoKaWYgKCRyZXNwb25zZS0+aXNfc3VjY2VzcykgewogICAgcHJpbnQgJHJlc3BvbnNlLT5kZWNvZGVkX2NvbnRlbnQ7Cn0gZWxzZSB7CiAgICBkaWUgJHJlc3BvbnNlLT5zdGF0dXNfbGluZTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use strict;
use warnings;
use LWP::UserAgent;

my $ua = LWP::UserAgent-&gt;new;
my $response = $ua-&gt;get('http://www.example.com');

if ($response-&gt;is_success) {
    print $response-&gt;decoded_content;
} else {
    die $response-&gt;status_line;
}</pre></div><div class='content'></div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Client i Servidor TCP</h2>
<div class='content'><ol>
<li><strong>Objectiu</strong>: Crear un client i un servidor TCP que intercanviïn missatges.</li>
<li><strong>Instruccions</strong>:
<ul>
<li>Modifiqueu els exemples de client i servidor TCP anteriors per enviar i rebre missatges personalitzats.</li>
<li>El client ha d'enviar un missatge al servidor, i el servidor ha de respondre amb un missatge diferent.</li>
</ul>
</li>
</ol>
</div><h2>Exercici 2: Sol·licitud HTTP amb `LWP::UserAgent`</h2>
<div class='content'><ol>
<li><strong>Objectiu</strong>: Fer una sol·licitud GET a una pàgina web i processar la resposta.</li>
<li><strong>Instruccions</strong>:
<ul>
<li>Utilitzeu el mòdul <code>LWP::UserAgent</code> per fer una sol·licitud GET a una pàgina web de la vostra elecció.</li>
<li>Imprimiu el contingut de la resposta a la consola.</li>
</ul>
</li>
</ol>
</div><h1>Solucions</h1>
<div class='content'></div><h2>Solució a l'Exercici 1</h2>
<div class='content'><p><strong>Client TCP:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwp1c2UgSU86OlNvY2tldDo6SU5FVDsKCm15ICRzb2NrZXQgPSBuZXcgSU86OlNvY2tldDo6SU5FVCAoCiAgICBQZWVySG9zdCA9PiAnMTI3LjAuMC4xJywKICAgIFBlZXJQb3J0ID0+ICc1MDAwJywKICAgIFByb3RvID0+ICd0Y3AnLAopIG9yIGRpZSAiTm8gcydoYSBwb2d1dCBjb25uZWN0YXIgYWwgc2Vydmlkb3I6ICQhXG4iOwoKcHJpbnQgIkNvbm5lY3RhdCBhbCBzZXJ2aWRvclxuIjsKCm15ICRkYXRhID0gIkhvbGEsIHNlcnZpZG9yISI7CiRzb2NrZXQtPnNlbmQoJGRhdGEpOwoKbXkgJHJlc3BvbnNlID0gIiI7CiRzb2NrZXQtPnJlY3YoJHJlc3BvbnNlLCAxMDI0KTsKcHJpbnQgIlJlc3Bvc3RhIGRlbCBzZXJ2aWRvcjogJHJlc3BvbnNlXG4iOwoKJHNvY2tldC0+Y2xvc2UoKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use strict;
use warnings;
use IO::Socket::INET;

my $socket = new IO::Socket::INET (
    PeerHost =&gt; '127.0.0.1',
    PeerPort =&gt; '5000',
    Proto =&gt; 'tcp',
) or die &quot;No s'ha pogut connectar al servidor: $!\n&quot;;

print &quot;Connectat al servidor\n&quot;;

my $data = &quot;Hola, servidor!&quot;;
$socket-&gt;send($data);

my $response = &quot;&quot;;
$socket-&gt;recv($response, 1024);
print &quot;Resposta del servidor: $response\n&quot;;

$socket-&gt;close();</pre></div><div class='content'><p><strong>Servidor TCP:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwp1c2UgSU86OlNvY2tldDo6SU5FVDsKCm15ICRzb2NrZXQgPSBuZXcgSU86OlNvY2tldDo6SU5FVCAoCiAgICBMb2NhbEhvc3QgPT4gJzEyNy4wLjAuMScsCiAgICBMb2NhbFBvcnQgPT4gJzUwMDAnLAogICAgUHJvdG8gPT4gJ3RjcCcsCiAgICBMaXN0ZW4gPT4gNSwKICAgIFJldXNlID0+IDEsCikgb3IgZGllICJObyBzJ2hhIHBvZ3V0IGNyZWFyIGVsIHNvY2tldDogJCFcbiI7CgpwcmludCAiU2Vydmlkb3IgZXNwZXJhbnQgY29ubmV4aW9ucyBhIGxhIHBvcnRhIDUwMDBcbiI7Cgp3aGlsZSAoMSkgewogICAgbXkgJGNsaWVudF9zb2NrZXQgPSAkc29ja2V0LT5hY2NlcHQoKTsKICAgIAogICAgbXkgJGRhdGEgPSAiIjsKICAgICRjbGllbnRfc29ja2V0LT5yZWN2KCRkYXRhLCAxMDI0KTsKICAgIHByaW50ICJEYWRlcyByZWJ1ZGVzOiAkZGF0YVxuIjsKICAgIAogICAgbXkgJHJlc3BvbnNlID0gIkhvbGEsIGNsaWVudCEiOwogICAgJGNsaWVudF9zb2NrZXQtPnNlbmQoJHJlc3BvbnNlKTsKICAgIAogICAgJGNsaWVudF9zb2NrZXQtPmNsb3NlKCk7Cn0KCiRzb2NrZXQtPmNsb3NlKCk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use strict;
use warnings;
use IO::Socket::INET;

my $socket = new IO::Socket::INET (
    LocalHost =&gt; '127.0.0.1',
    LocalPort =&gt; '5000',
    Proto =&gt; 'tcp',
    Listen =&gt; 5,
    Reuse =&gt; 1,
) or die &quot;No s'ha pogut crear el socket: $!\n&quot;;

print &quot;Servidor esperant connexions a la porta 5000\n&quot;;

while (1) {
    my $client_socket = $socket-&gt;accept();
    
    my $data = &quot;&quot;;
    $client_socket-&gt;recv($data, 1024);
    print &quot;Dades rebudes: $data\n&quot;;
    
    my $response = &quot;Hola, client!&quot;;
    $client_socket-&gt;send($response);
    
    $client_socket-&gt;close();
}

$socket-&gt;close();</pre></div><div class='content'></div><h2>Solució a l'Exercici 2</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHN0cmljdDsKdXNlIHdhcm5pbmdzOwp1c2UgTFdQOjpVc2VyQWdlbnQ7CgpteSAkdWEgPSBMV1A6OlVzZXJBZ2VudC0+bmV3OwpteSAkcmVzcG9uc2UgPSAkdWEtPmdldCgnaHR0cDovL3d3dy5leGFtcGxlLmNvbScpOwoKaWYgKCRyZXNwb25zZS0+aXNfc3VjY2VzcykgewogICAgcHJpbnQgJHJlc3BvbnNlLT5kZWNvZGVkX2NvbnRlbnQ7Cn0gZWxzZSB7CiAgICBkaWUgJHJlc3BvbnNlLT5zdGF0dXNfbGluZTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use strict;
use warnings;
use LWP::UserAgent;

my $ua = LWP::UserAgent-&gt;new;
my $response = $ua-&gt;get('http://www.example.com');

if ($response-&gt;is_success) {
    print $response-&gt;decoded_content;
} else {
    die $response-&gt;status_line;
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>En aquest tema, hem après els conceptes bàsics de la programació de xarxes amb Perl, incloent la creació de clients i servidors TCP, i l'ús de mòduls com <code>Net::HTTP</code> i <code>LWP::UserAgent</code> per fer sol·licituds HTTP. Amb aquests coneixements, esteu preparats per començar a desenvolupar aplicacions de xarxa més complexes amb Perl.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-03-perl-for-data-processing' title="Perl per al Processament de Dades">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
