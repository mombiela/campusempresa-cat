<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>Introducció a Flask-SQLAlchemy</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flask/04-01-intro-flask-sqlalchemy" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flask/04-01-intro-flask-sqlalchemy" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flask/04-01-intro-flask-sqlalchemy" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>var DEVELOP = window.location.href.indexOf("localhost")!=-1 && true;</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/mod/flask/04-01-intro-flask-sqlalchemy" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/flask/04-01-intro-flask-sqlalchemy" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Tot el coneixement al teu abast</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col" id="left_menu">
					<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Contingut del curs
	</a>

			</div>
		</div>
	</div>
</div>

<!--  
<div class="top-bar container-fluid">
	<div class="container-xxl">
		<nav class="navbar navbar-expand-md p-0">
			<div class="container-fluid">
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				
				<div class="collapse navbar-collapse" id="navbarNav">
					<div class="navbar-nav me-auto">
							<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Contingut del curs
	</a>

					</div>
				</div>			
							</div>
		</nav>
	</div>
</div>
 -->				<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-03-file-uploads' title="Càrrega de Fitxers">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<h2 style="text-decoration:underline">Introducció a Flask-SQLAlchemy</h2>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-02-defining-models' title="Definició de Models">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1>Què és Flask-SQLAlchemy?</h1>
<div class='content'><p>Flask-SQLAlchemy és una extensió per a Flask que simplifica la integració de SQLAlchemy, un ORM (Object-Relational Mapping) per a Python, amb les aplicacions web desenvolupades amb Flask. SQLAlchemy proporciona una interfície d'alt nivell per interactuar amb bases de dades relacionals, permetent als desenvolupadors treballar amb objectes Python en lloc de sentències SQL directes.</p>
</div><h2>Avantatges de Flask-SQLAlchemy:</h2>
<div class='content'><ul>
<li><strong>Simplificació de la configuració</strong>: Facilita la configuració de SQLAlchemy amb Flask.</li>
<li><strong>Integració fluida</strong>: Proporciona una integració perfecta amb les funcionalitats de Flask.</li>
<li><strong>Abstracció de la base de dades</strong>: Permet treballar amb objectes Python en lloc de sentències SQL.</li>
<li><strong>Suport per a múltiples bases de dades</strong>: Compatible amb diverses bases de dades com SQLite, MySQL, PostgreSQL, etc.</li>
</ul>
</div><h1>Configuració de Flask-SQLAlchemy</h1>
<div class='content'></div><h2>Instal·lació</h2>
<div class='content'><p>Per començar a utilitzar Flask-SQLAlchemy, primer cal instal·lar l'extensió. Pots fer-ho utilitzant pip:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwIGluc3RhbGwgZmxhc2stc3FsYWxjaGVteQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pip install flask-sqlalchemy</pre></div><div class='content'></div><h2>Configuració Bàsica</h2>
<div class='content'><p>Després d'instal·lar Flask-SQLAlchemy, cal configurar-lo dins de la teva aplicació Flask. A continuació es mostra un exemple de com fer-ho:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2sKZnJvbSBmbGFza19zcWxhbGNoZW15IGltcG9ydCBTUUxBbGNoZW15CgphcHAgPSBGbGFzayhfX25hbWVfXykKCiMgQ29uZmlndXJhY2nDsyBkZSBsYSBiYXNlIGRlIGRhZGVzCmFwcC5jb25maWdbJ1NRTEFMQ0hFTVlfREFUQUJBU0VfVVJJJ10gPSAnc3FsaXRlOi8vL215ZGF0YWJhc2UuZGInCmFwcC5jb25maWdbJ1NRTEFMQ0hFTVlfVFJBQ0tfTU9ESUZJQ0FUSU9OUyddID0gRmFsc2UKCiMgSW5pY2lhbGl0emFjacOzIGRlIGwnZXh0ZW5zacOzCmRiID0gU1FMQWxjaGVteShhcHApCgojIERlZmluaWNpw7MgZCd1biBtb2RlbApjbGFzcyBVc2VyKGRiLk1vZGVsKToKICAgIGlkID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpCiAgICB1c2VybmFtZSA9IGRiLkNvbHVtbihkYi5TdHJpbmcoODApLCB1bmlxdWU9VHJ1ZSwgbnVsbGFibGU9RmFsc2UpCiAgICBlbWFpbCA9IGRiLkNvbHVtbihkYi5TdHJpbmcoMTIwKSwgdW5pcXVlPVRydWUsIG51bGxhYmxlPUZhbHNlKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gZic8VXNlciB7c2VsZi51c2VybmFtZX0+JwoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIGFwcC5ydW4oZGVidWc9VHJ1ZSk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from flask import Flask
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)

# Configuraci&oacute; de la base de dades
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///mydatabase.db'
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False

# Inicialitzaci&oacute; de l'extensi&oacute;
db = SQLAlchemy(app)

# Definici&oacute; d'un model
class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(80), unique=True, nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)

    def __repr__(self):
        return f'&lt;User {self.username}&gt;'

if __name__ == '__main__':
    app.run(debug=True)</pre></div><div class='content'></div><h2>Explicació del Codi</h2>
<div class='content'><ol>
<li><strong>Importacions</strong>: Importem les classes necessàries de Flask i Flask-SQLAlchemy.</li>
<li><strong>Configuració de l'aplicació</strong>: Creem una instància de l'aplicació Flask i configurem la URI de la base de dades. En aquest cas, utilitzem una base de dades SQLite anomenada <code>mydatabase.db</code>.</li>
<li><strong>Inicialització de SQLAlchemy</strong>: Inicialitzem l'extensió SQLAlchemy amb la nostra aplicació Flask.</li>
<li><strong>Definició d'un model</strong>: Definim un model <code>User</code> amb tres columnes: <code>id</code>, <code>username</code> i <code>email</code>. Aquest model representa una taula a la base de dades.</li>
<li><strong>Execució de l'aplicació</strong>: Executem l'aplicació Flask en mode de depuració.</li>
</ol>
</div><h1>Creació de la Base de Dades</h1>
<div class='content'><p>Després de definir els models, cal crear la base de dades i les taules corresponents. Això es pot fer utilitzant el mètode <code>create_all()</code> de l'objecte <code>db</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("d2l0aCBhcHAuYXBwX2NvbnRleHQoKToKICAgIGRiLmNyZWF0ZV9hbGwoKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>with app.app_context():
    db.create_all()</pre></div><div class='content'><p>Aquest codi crea totes les taules definides pels models dins del context de l'aplicació.</p>
</div><h1>Exercici Pràctic</h1>
<div class='content'></div><h2>Objectiu</h2>
<div class='content'><p>Crear una aplicació Flask que utilitzi Flask-SQLAlchemy per gestionar una base de dades d'usuaris.</p>
</div><h2>Passos</h2>
<div class='content'><ol>
<li>
<p><strong>Instal·la Flask i Flask-SQLAlchemy</strong>:</p>
<pre><code class="language-bash">pip install flask flask-sqlalchemy
</code></pre>
</li>
<li>
<p><strong>Crea un fitxer <code>app.py</code></strong> i afegeix el següent codi:</p>
<pre><code class="language-python">from flask import Flask
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)

app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///users.db'
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False

db = SQLAlchemy(app)

class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(80), unique=True, nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)

    def __repr__(self):
        return f'&lt;User {self.username}&gt;'

@app.route('/')
def index():
    return &quot;Hello, Flask-SQLAlchemy!&quot;

if __name__ == '__main__':
    with app.app_context():
        db.create_all()
    app.run(debug=True)
</code></pre>
</li>
<li>
<p><strong>Executa l'aplicació</strong>:</p>
<pre><code class="language-bash">python app.py
</code></pre>
</li>
<li>
<p><strong>Verifica que la base de dades <code>users.db</code> s'ha creat</strong> al directori del teu projecte.</p>
</li>
</ol>
</div><h2>Solució</h2>
<div class='content'><p>El codi anterior crea una aplicació Flask que utilitza Flask-SQLAlchemy per gestionar una base de dades SQLite anomenada <code>users.db</code>. La base de dades conté una taula <code>User</code> amb les columnes <code>id</code>, <code>username</code> i <code>email</code>.</p>
</div><h1>Conclusió</h1>
<div class='content'><p>En aquesta secció, hem après què és Flask-SQLAlchemy, com instal·lar-lo i configurar-lo, i com definir models per interactuar amb una base de dades. També hem creat una aplicació Flask senzilla que utilitza Flask-SQLAlchemy per gestionar una base de dades d'usuaris. En el proper mòdul, explorarem com definir models més complexos i realitzar operacions CRUD (Crear, Llegir, Actualitzar, Esborrar) amb Flask-SQLAlchemy.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-03-file-uploads' title="Càrrega de Fitxers">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-02-defining-models' title="Definició de Models">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
				<!-- 
	<h1>Publicitat</h1>
	<p>Aquest espai està destinat a publicitat.</p>
	<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
	<p>Gràcies per col·laborar!</p>
	 -->
			
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curs de Desenvolupament Web amb Flask</h1>
<h2>Mòdul 1: Introducció a Flask</h2>
<ul>
<li><a href="01-01-what-is-flask">Què és Flask?</a></li>
<li><a href="01-02-setting-up-environment">Configuració del Teu Entorn de Desenvolupament</a></li>
<li><a href="01-03-first-flask-app">Creant la Teva Primera Aplicació Flask</a></li>
<li><a href="01-04-flask-app-structure">Entenent l'Estructura d'una Aplicació Flask</a></li>
</ul>
<h2>Mòdul 2: Conceptes Bàsics de Flask</h2>
<ul>
<li><a href="02-01-routing-url-mapping">Enrutament i Mapeig d'URL</a></li>
<li><a href="02-02-handling-http-methods">Gestió de Mètodes HTTP</a></li>
<li><a href="02-03-rendering-templates">Renderització de Plantilles amb Jinja2</a></li>
<li><a href="02-04-static-files">Treballant amb Fitxers Estàtics</a></li>
</ul>
<h2>Mòdul 3: Formularis i Entrada d'Usuari</h2>
<ul>
<li><a href="03-01-creating-handling-forms">Creació i Gestió de Formularis</a></li>
<li><a href="03-02-form-validation-wtforms">Validació de Formularis amb WTForms</a></li>
<li><a href="03-03-file-uploads">Càrrega de Fitxers</a></li>
</ul>
<h2>Mòdul 4: Integració de Bases de Dades</h2>
<ul>
<li><a href="04-01-intro-flask-sqlalchemy">Introducció a Flask-SQLAlchemy</a></li>
<li><a href="04-02-defining-models">Definició de Models</a></li>
<li><a href="04-03-crud-operations">Realització d'Operacions CRUD</a></li>
<li><a href="04-04-database-migrations">Migracions de Bases de Dades amb Flask-Migrate</a></li>
</ul>
<h2>Mòdul 5: Autenticació d'Usuaris</h2>
<ul>
<li><a href="05-01-user-registration">Registre d'Usuaris</a></li>
<li><a href="05-02-user-login-logout">Inici i Tancament de Sessió d'Usuaris</a></li>
<li><a href="05-03-password-hashing">Hashing de Contrasenyes</a></li>
<li><a href="05-04-user-session-management">Gestió de Sessions d'Usuaris</a></li>
</ul>
<h2>Mòdul 6: Conceptes Avançats de Flask</h2>
<ul>
<li><a href="06-01-blueprints">Blueprints per a Aplicacions Grans</a></li>
<li><a href="06-02-error-handling">Gestió d'Errors</a></li>
<li><a href="06-03-custom-error-pages">Pàgines d'Error Personalitzades</a></li>
<li><a href="06-04-logging-debugging">Registre i Depuració</a></li>
</ul>
<h2>Mòdul 7: APIs RESTful amb Flask</h2>
<ul>
<li><a href="07-01-intro-restful-apis">Introducció a les APIs RESTful</a></li>
<li><a href="07-02-creating-restful-endpoints">Creació de Punts Finals RESTful</a></li>
<li><a href="07-03-handling-json-data">Gestió de Dades JSON</a></li>
<li><a href="07-04-authentication-apis">Autenticació per a APIs</a></li>
</ul>
<h2>Mòdul 8: Desplegament i Producció</h2>
<ul>
<li><a href="08-01-configuring-production">Configuració de Flask per a Producció</a></li>
<li><a href="08-02-deploying-heroku">Desplegament a Heroku</a></li>
<li><a href="08-03-deploying-aws">Desplegament a AWS</a></li>
<li><a href="08-04-monitoring-performance">Monitorització i Optimització del Rendiment</a></li>
</ul>
<h2>Mòdul 9: Proves i Millors Pràctiques</h2>
<ul>
<li><a href="09-01-unit-testing">Proves Unitàries amb Flask</a></li>
<li><a href="09-02-integration-testing">Proves d'Integració</a></li>
<li><a href="09-03-test-coverage">Cobertura de Proves</a></li>
<li><a href="09-04-best-practices">Millors Pràctiques per al Desenvolupament amb Flask</a></li>
</ul>
<h2>Mòdul 10: Extensions i Ecosistema de Flask</h2>
<ul>
<li><a href="10-01-popular-extensions">Extensions Populars de Flask</a></li>
<li><a href="10-02-flask-mail">Ús de Flask-Mail per a Correu Electrònic</a></li>
<li><a href="10-03-flask-admin">Ús de Flask-Admin per a Interfícies d'Administració</a></li>
<li><a href="10-04-flask-socketio">Ús de Flask-SocketIO per a WebSockets</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
