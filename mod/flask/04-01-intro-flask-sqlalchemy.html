<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introducció a Flask-SQLAlchemy</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flask/04-01-intro-flask-sqlalchemy" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flask/04-01-intro-flask-sqlalchemy" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flask/04-01-intro-flask-sqlalchemy" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/flask/04-01-intro-flask-sqlalchemy" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/flask/04-01-intro-flask-sqlalchemy" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='03-03-file-uploads' title="Càrrega de Fitxers">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Introducció a Flask-SQLAlchemy</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-02-defining-models' title="Definició de Models">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1><p>Què és Flask-SQLAlchemy?</p>
</h1>
<div class='content'><p>Flask-SQLAlchemy és una extensió per a Flask que simplifica la integració de SQLAlchemy, un ORM (Object-Relational Mapping) per a Python, amb les aplicacions web desenvolupades amb Flask. SQLAlchemy proporciona una interfície d'alt nivell per interactuar amb bases de dades relacionals, permetent als desenvolupadors treballar amb objectes Python en lloc de sentències SQL directes.</p>
</div><h2><p>Avantatges de Flask-SQLAlchemy:</p>
</h2>
<div class='content'><ul>
<li><strong>Simplificació de la configuració</strong>: Facilita la configuració de SQLAlchemy amb Flask.</li>
<li><strong>Integració fluida</strong>: Proporciona una integració perfecta amb les funcionalitats de Flask.</li>
<li><strong>Abstracció de la base de dades</strong>: Permet treballar amb objectes Python en lloc de sentències SQL.</li>
<li><strong>Suport per a múltiples bases de dades</strong>: Compatible amb diverses bases de dades com SQLite, MySQL, PostgreSQL, etc.</li>
</ul>
</div><h1><p>Configuració de Flask-SQLAlchemy</p>
</h1>
<div class='content'></div><h2><p>Instal·lació</p>
</h2>
<div class='content'><p>Per començar a utilitzar Flask-SQLAlchemy, primer cal instal·lar l'extensió. Pots fer-ho utilitzant pip:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwIGluc3RhbGwgZmxhc2stc3FsYWxjaGVteQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pip install flask-sqlalchemy</pre></div><div class='content'></div><h2><p>Configuració Bàsica</p>
</h2>
<div class='content'><p>Després d'instal·lar Flask-SQLAlchemy, cal configurar-lo dins de la teva aplicació Flask. A continuació es mostra un exemple de com fer-ho:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2sKZnJvbSBmbGFza19zcWxhbGNoZW15IGltcG9ydCBTUUxBbGNoZW15CgphcHAgPSBGbGFzayhfX25hbWVfXykKCiMgQ29uZmlndXJhY2nDsyBkZSBsYSBiYXNlIGRlIGRhZGVzCmFwcC5jb25maWdbJ1NRTEFMQ0hFTVlfREFUQUJBU0VfVVJJJ10gPSAnc3FsaXRlOi8vL215ZGF0YWJhc2UuZGInCmFwcC5jb25maWdbJ1NRTEFMQ0hFTVlfVFJBQ0tfTU9ESUZJQ0FUSU9OUyddID0gRmFsc2UKCiMgSW5pY2lhbGl0emFjacOzIGRlIGwnZXh0ZW5zacOzCmRiID0gU1FMQWxjaGVteShhcHApCgojIERlZmluaWNpw7MgZCd1biBtb2RlbApjbGFzcyBVc2VyKGRiLk1vZGVsKToKICAgIGlkID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpCiAgICB1c2VybmFtZSA9IGRiLkNvbHVtbihkYi5TdHJpbmcoODApLCB1bmlxdWU9VHJ1ZSwgbnVsbGFibGU9RmFsc2UpCiAgICBlbWFpbCA9IGRiLkNvbHVtbihkYi5TdHJpbmcoMTIwKSwgdW5pcXVlPVRydWUsIG51bGxhYmxlPUZhbHNlKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gZic8VXNlciB7c2VsZi51c2VybmFtZX0+JwoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIGFwcC5ydW4oZGVidWc9VHJ1ZSk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from flask import Flask
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)

# Configuraci&oacute; de la base de dades
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///mydatabase.db'
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False

# Inicialitzaci&oacute; de l'extensi&oacute;
db = SQLAlchemy(app)

# Definici&oacute; d'un model
class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(80), unique=True, nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)

    def __repr__(self):
        return f'&lt;User {self.username}&gt;'

if __name__ == '__main__':
    app.run(debug=True)</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Importacions</strong>: Importem les classes necessàries de Flask i Flask-SQLAlchemy.</li>
<li><strong>Configuració de l'aplicació</strong>: Creem una instància de l'aplicació Flask i configurem la URI de la base de dades. En aquest cas, utilitzem una base de dades SQLite anomenada <code>mydatabase.db</code>.</li>
<li><strong>Inicialització de SQLAlchemy</strong>: Inicialitzem l'extensió SQLAlchemy amb la nostra aplicació Flask.</li>
<li><strong>Definició d'un model</strong>: Definim un model <code>User</code> amb tres columnes: <code>id</code>, <code>username</code> i <code>email</code>. Aquest model representa una taula a la base de dades.</li>
<li><strong>Execució de l'aplicació</strong>: Executem l'aplicació Flask en mode de depuració.</li>
</ol>
</div><h1><p>Creació de la Base de Dades</p>
</h1>
<div class='content'><p>Després de definir els models, cal crear la base de dades i les taules corresponents. Això es pot fer utilitzant el mètode <code>create_all()</code> de l'objecte <code>db</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("d2l0aCBhcHAuYXBwX2NvbnRleHQoKToKICAgIGRiLmNyZWF0ZV9hbGwoKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>with app.app_context():
    db.create_all()</pre></div><div class='content'><p>Aquest codi crea totes les taules definides pels models dins del context de l'aplicació.</p>
</div><h1><p>Exercici Pràctic</p>
</h1>
<div class='content'></div><h2><p>Objectiu</p>
</h2>
<div class='content'><p>Crear una aplicació Flask que utilitzi Flask-SQLAlchemy per gestionar una base de dades d'usuaris.</p>
</div><h2><p>Passos</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Instal·la Flask i Flask-SQLAlchemy</strong>:</p>
<pre><code class="language-bash">pip install flask flask-sqlalchemy
</code></pre>
</li>
<li>
<p><strong>Crea un fitxer <code>app.py</code></strong> i afegeix el següent codi:</p>
<pre><code class="language-python">from flask import Flask
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)

app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///users.db'
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False

db = SQLAlchemy(app)

class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(80), unique=True, nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)

    def __repr__(self):
        return f'&lt;User {self.username}&gt;'

@app.route('/')
def index():
    return &quot;Hello, Flask-SQLAlchemy!&quot;

if __name__ == '__main__':
    with app.app_context():
        db.create_all()
    app.run(debug=True)
</code></pre>
</li>
<li>
<p><strong>Executa l'aplicació</strong>:</p>
<pre><code class="language-bash">python app.py
</code></pre>
</li>
<li>
<p><strong>Verifica que la base de dades <code>users.db</code> s'ha creat</strong> al directori del teu projecte.</p>
</li>
</ol>
</div><h2><p>Solució</p>
</h2>
<div class='content'><p>El codi anterior crea una aplicació Flask que utilitza Flask-SQLAlchemy per gestionar una base de dades SQLite anomenada <code>users.db</code>. La base de dades conté una taula <code>User</code> amb les columnes <code>id</code>, <code>username</code> i <code>email</code>.</p>
</div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>En aquesta secció, hem après què és Flask-SQLAlchemy, com instal·lar-lo i configurar-lo, i com definir models per interactuar amb una base de dades. També hem creat una aplicació Flask senzilla que utilitza Flask-SQLAlchemy per gestionar una base de dades d'usuaris. En el proper mòdul, explorarem com definir models més complexos i realitzar operacions CRUD (Crear, Llegir, Actualitzar, Esborrar) amb Flask-SQLAlchemy.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='03-03-file-uploads' title="Càrrega de Fitxers">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-02-defining-models' title="Definició de Models">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
