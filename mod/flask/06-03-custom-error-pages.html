<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Pàgines d'Error Personalitzades</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flask/06-03-custom-error-pages" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flask/06-03-custom-error-pages" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flask/06-03-custom-error-pages" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<a href="https://enterprisecampus.net/mod/flask/06-03-custom-error-pages" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/flask/06-03-custom-error-pages" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</span>
			<span class="d-none d-md-inline"><br><cite>Tot el coneixement al teu abast</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
					 				<a href="/"><i class="bi bi-house-fill"></i> HOME</a>
											</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-02-error-handling' title="Gestió d'Errors">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Pàgines d'Error Personalitzades</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-04-logging-debugging' title="Registre i Depuració">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com crear pàgines d'error personalitzades en una aplicació Flask. Les pàgines d'error personalitzades no només milloren l'experiència de l'usuari, sinó que també poden proporcionar informació útil sobre què ha anat malament.</p>
</div><h1>Objectius</h1>
<div class='content'><ul>
<li>Entendre la importància de les pàgines d'error personalitzades.</li>
<li>Aprendre a definir i gestionar errors comuns com el 404 (No Trobat) i el 500 (Error Intern del Servidor).</li>
<li>Crear plantilles personalitzades per a les pàgines d'error.</li>
</ul>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Errors HTTP</strong>: Codi d'estat que indica que una sol·licitud HTTP no s'ha pogut completar correctament.</li>
<li><strong>Gestió d'Errors</strong>: Procés de capturar i gestionar errors per proporcionar una resposta adequada a l'usuari.</li>
<li><strong>Plantilles d'Error</strong>: Fitxers HTML que es mostren quan es produeix un error.</li>
</ul>
</div><h1>Definint Pàgines d'Error Personalitzades</h1>
<div class='content'></div><h2><ol>
<li>Configuració Bàsica</li>
</ol></h2>
<div class='content'><p>Primer, necessitem configurar la nostra aplicació Flask per gestionar errors específics. Utilitzarem el decorador <code>@app.errorhandler</code> per capturar errors i definir les nostres pàgines personalitzades.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIHJlbmRlcl90ZW1wbGF0ZQoKYXBwID0gRmxhc2soX19uYW1lX18pCgpAYXBwLmVycm9yaGFuZGxlcig0MDQpCmRlZiBwYWdlX25vdF9mb3VuZChlKToKICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoJzQwNC5odG1sJyksIDQwNAoKQGFwcC5lcnJvcmhhbmRsZXIoNTAwKQpkZWYgaW50ZXJuYWxfc2VydmVyX2Vycm9yKGUpOgogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnNTAwLmh0bWwnKSwgNTAwCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgYXBwLnJ1bihkZWJ1Zz1UcnVlKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from flask import Flask, render_template

app = Flask(__name__)

@app.errorhandler(404)
def page_not_found(e):
    return render_template('404.html'), 404

@app.errorhandler(500)
def internal_server_error(e):
    return render_template('500.html'), 500

if __name__ == '__main__':
    app.run(debug=True)</pre></div><div class='content'></div><h2><ol start="2">
<li>Creant Plantilles d'Error</li>
</ol></h2>
<div class='content'><p>A continuació, crearem les plantilles HTML per a les pàgines d'error. Aquestes plantilles es troben normalment a la carpeta <code>templates</code>.</p>
<h4>404.html</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+UMOgZ2luYSBObyBUcm9iYWRhPC90aXRsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxoMT5FcnJvciA0MDQ8L2gxPgogICAgPHA+TGEgcMOgZ2luYSBxdWUgZXN0w6BzIGJ1c2NhbnQgbm8gZXhpc3RlaXguPC9wPgogICAgPGEgaHJlZj0ie3sgdXJsX2ZvcignaW5kZXgnKSB9fSI+VG9ybmEgYSBsYSBww6BnaW5hIHByaW5jaXBhbDwvYT4KPC9ib2R5Pgo8L2h0bWw+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;P&agrave;gina No Trobada&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Error 404&lt;/h1&gt;
    &lt;p&gt;La p&agrave;gina que est&agrave;s buscant no existeix.&lt;/p&gt;
    &lt;a href=&quot;{{ url_for('index') }}&quot;&gt;Torna a la p&agrave;gina principal&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'><h4>500.html</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+RXJyb3IgSW50ZXJuIGRlbCBTZXJ2aWRvcjwvdGl0bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8aDE+RXJyb3IgNTAwPC9oMT4KICAgIDxwPkhpIGhhIGhhZ3V0IHVuIGVycm9yIGludGVybiBkZWwgc2Vydmlkb3IuIFNpIHVzIHBsYXUsIGludGVudGEtaG8gbcOpcyB0YXJkLjwvcD4KICAgIDxhIGhyZWY9Int7IHVybF9mb3IoJ2luZGV4JykgfX0iPlRvcm5hIGEgbGEgcMOgZ2luYSBwcmluY2lwYWw8L2E+CjwvYm9keT4KPC9odG1sPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Error Intern del Servidor&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Error 500&lt;/h1&gt;
    &lt;p&gt;Hi ha hagut un error intern del servidor. Si us plau, intenta-ho m&eacute;s tard.&lt;/p&gt;
    &lt;a href=&quot;{{ url_for('index') }}&quot;&gt;Torna a la p&agrave;gina principal&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h2><ol start="3">
<li>Prova de les Pàgines d'Error</li>
</ol></h2>
<div class='content'><p>Per provar les pàgines d'error, podem accedir a una URL que no existeixi per veure la pàgina 404, o provocar un error intern del servidor per veure la pàgina 500.</p>
<h4>Provocant un Error 404</h4>
<p>Accedeix a una URL que no existeixi, per exemple: <code>http://localhost:5000/nonexistent</code>.</p>
<h4>Provocant un Error 500</h4>
<p>Podem provocar un error 500 afegint un error intencionat al nostre codi, com ara dividir per zero:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGFwcC5yb3V0ZSgnL2NhdXNlX2Vycm9yJykKZGVmIGNhdXNlX2Vycm9yKCk6CiAgICAxIC8gMCAgIyBBaXjDsiBwcm92b2NhcsOgIHVuIGVycm9yIDUwMA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@app.route('/cause_error')
def cause_error():
    1 / 0  # Aix&ograve; provocar&agrave; un error 500</pre></div><div class='content'><p>Accedeix a <code>http://localhost:5000/cause_error</code> per veure la pàgina d'error 500.</p>
</div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Pàgina d'Error 403</h2>
<div class='content'><p>Crea una pàgina d'error personalitzada per a l'error 403 (Prohibit). Defineix el controlador d'errors i crea la plantilla HTML corresponent.</p>
<h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGFwcC5lcnJvcmhhbmRsZXIoNDAzKQpkZWYgZm9yYmlkZGVuKGUpOgogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnNDAzLmh0bWwnKSwgNDAz"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@app.errorhandler(403)
def forbidden(e):
    return render_template('403.html'), 403</pre></div><div class='content'><h4>403.html</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+QWNjw6lzIFByb2hpYml0PC90aXRsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxoMT5FcnJvciA0MDM8L2gxPgogICAgPHA+Tm8gdGVucyBwZXJtw61zIHBlciBhY2NlZGlyIGEgYXF1ZXN0YSBww6BnaW5hLjwvcD4KICAgIDxhIGhyZWY9Int7IHVybF9mb3IoJ2luZGV4JykgfX0iPlRvcm5hIGEgbGEgcMOgZ2luYSBwcmluY2lwYWw8L2E+CjwvYm9keT4KPC9odG1sPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Acc&eacute;s Prohibit&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Error 403&lt;/h1&gt;
    &lt;p&gt;No tens perm&iacute;s per accedir a aquesta p&agrave;gina.&lt;/p&gt;
    &lt;a href=&quot;{{ url_for('index') }}&quot;&gt;Torna a la p&agrave;gina principal&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h2>Exercici 2: Pàgina d'Error 401</h2>
<div class='content'><p>Crea una pàgina d'error personalitzada per a l'error 401 (No Autoritzat). Defineix el controlador d'errors i crea la plantilla HTML corresponent.</p>
<h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGFwcC5lcnJvcmhhbmRsZXIoNDAxKQpkZWYgdW5hdXRob3JpemVkKGUpOgogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnNDAxLmh0bWwnKSwgNDAx"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@app.errorhandler(401)
def unauthorized(e):
    return render_template('401.html'), 401</pre></div><div class='content'><h4>401.html</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+Tm8gQXV0b3JpdHphdDwvdGl0bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8aDE+RXJyb3IgNDAxPC9oMT4KICAgIDxwPk5vIGVzdMOgcyBhdXRvcml0emF0IHBlciBhY2NlZGlyIGEgYXF1ZXN0YSBww6BnaW5hLjwvcD4KICAgIDxhIGhyZWY9Int7IHVybF9mb3IoJ2luZGV4JykgfX0iPlRvcm5hIGEgbGEgcMOgZ2luYSBwcmluY2lwYWw8L2E+CjwvYm9keT4KPC9odG1sPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;No Autoritzat&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Error 401&lt;/h1&gt;
    &lt;p&gt;No est&agrave;s autoritzat per accedir a aquesta p&agrave;gina.&lt;/p&gt;
    &lt;a href=&quot;{{ url_for('index') }}&quot;&gt;Torna a la p&agrave;gina principal&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>En aquesta secció, hem après com crear pàgines d'error personalitzades per a una aplicació Flask. Hem vist com gestionar errors comuns com el 404 i el 500, i com crear plantilles HTML per a aquestes pàgines. També hem practicat creant pàgines d'error per a altres codis d'estat HTTP com el 403 i el 401. Amb aquestes habilitats, podem millorar significativament l'experiència de l'usuari en les nostres aplicacions web.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-02-error-handling' title="Gestió d'Errors">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-04-logging-debugging' title="Registre i Depuració">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Publicitat</h1>
<p>Aquest espai està destinat a publicitat.</p>
<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Gràcies per col·laborar!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			









		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
