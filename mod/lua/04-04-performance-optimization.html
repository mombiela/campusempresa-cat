<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Optimització del Rendiment</title>

    <link rel="alternate" href="https://campusempresa.com/mod/lua/04-04-performance-optimization" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/lua/04-04-performance-optimization" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/lua/04-04-performance-optimization" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<a href="https://enterprisecampus.net/mod/lua/04-04-performance-optimization" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/lua/04-04-performance-optimization" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</span>
			<span class="d-none d-md-inline"><br><cite>Tot el coneixement al teu abast</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
					 				<a href="/"><i class="bi bi-house-fill"></i> HOME</a>
											</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-03-debugging-techniques' title="Tècniques de Depuració">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Optimització del Rendiment</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-05-lua-c-api' title="Ús de l'API C de Lua">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com optimitzar el rendiment dels nostres scripts en Lua. La optimització del rendiment és crucial per assegurar que les nostres aplicacions funcionin de manera eficient, especialment quan es tracta de projectes grans o de temps real, com els jocs.</p>
</div><h1>Continguts</h1>
<div class='content'><ol>
<li><a href="#introducció-a-la-optimització-del-rendiment">Introducció a la Optimització del Rendiment</a></li>
<li><a href="#perfils-de-rendiment">Perfils de Rendiment</a></li>
<li><a href="#optimització-de-codi">Optimització de Codi</a></li>
<li><a href="#gestió-de-memòria">Gestió de Memòria</a></li>
<li><a href="#consells-i-trucs">Consells i Trucs</a></li>
<li><a href="#exercicis-pràctics">Exercicis Pràctics</a></li>
</ol>
</div><h1>Introducció a la Optimització del Rendiment</h1>
<div class='content'><p>La optimització del rendiment implica identificar i millorar les parts del codi que consumeixen més recursos, ja sigui temps de CPU o memòria. És important seguir un enfocament sistemàtic per evitar optimitzacions prematures que podrien complicar el codi sense beneficis significatius.</p>
</div><h1>Perfils de Rendiment</h1>
<div class='content'></div><h2>Què és un Perfil de Rendiment?</h2>
<div class='content'><p>Un perfil de rendiment és una anàlisi detallada de com el codi utilitza els recursos del sistema. Això inclou el temps de CPU, l'ús de memòria i altres mètriques de rendiment.</p>
</div><h2>Eines de Perfilat</h2>
<div class='content'><ul>
<li><strong>LuaProfiler</strong>: Una eina popular per perfilar scripts Lua.</li>
<li><strong>luatrace</strong>: Una altra eina que proporciona traçats detallats del rendiment.</li>
</ul>
</div><h2>Exemple d'Ús de LuaProfiler</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgcHJvZmlsZXIgPSByZXF1aXJlKCJwcm9maWxlciIpCnByb2ZpbGVyLnN0YXJ0KCkKCi0tIEVsIHRldSBjb2RpIGFxdcOtCmZvciBpID0gMSwgMTAwMDAwMCBkbwogICAgbG9jYWwgeCA9IGkgKiAyCmVuZAoKcHJvZmlsZXIuc3RvcCgpCnByb2ZpbGVyLnJlcG9ydCgicHJvZmlsZS50eHQiKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local profiler = require(&quot;profiler&quot;)
profiler.start()

-- El teu codi aqu&iacute;
for i = 1, 1000000 do
    local x = i * 2
end

profiler.stop()
profiler.report(&quot;profile.txt&quot;)</pre></div><div class='content'><p>Aquest codi utilitza LuaProfiler per generar un informe de rendiment que es guarda en el fitxer <code>profile.txt</code>.</p>
</div><h1>Optimització de Codi</h1>
<div class='content'></div><h2>Evitar Operacions Innecessàries</h2>
<div class='content'><ul>
<li><strong>Evita bucles innecessaris</strong>: Redueix el nombre de bucles o iteracions.</li>
<li><strong>Utilitza variables locals</strong>: Les variables locals són més ràpides que les globals.</li>
</ul>
</div><h2>Exemple</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gQ29kaSBubyBvcHRpbWl0emF0CmZvciBpID0gMSwgMTAwMDAwMCBkbwogICAgZ2xvYmFsVmFyID0gaSAqIDIKZW5kCgotLSBDb2RpIG9wdGltaXR6YXQKbG9jYWwgbG9jYWxWYXIKZm9yIGkgPSAxLCAxMDAwMDAwIGRvCiAgICBsb2NhbFZhciA9IGkgKiAyCmVuZA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Codi no optimitzat
for i = 1, 1000000 do
    globalVar = i * 2
end

-- Codi optimitzat
local localVar
for i = 1, 1000000 do
    localVar = i * 2
end</pre></div><div class='content'></div><h2>Utilitzar Estructures de Dades Adequades</h2>
<div class='content'><ul>
<li><strong>Taules</strong>: Utilitza taules de manera eficient per emmagatzemar i accedir a dades.</li>
</ul>
</div><h2>Exemple</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gQ29kaSBubyBvcHRpbWl0emF0CmxvY2FsIGRhdGEgPSB7fQpmb3IgaSA9IDEsIDEwMDAwMDAgZG8KICAgIGRhdGFbImtleSIgLi4gaV0gPSBpCmVuZAoKLS0gQ29kaSBvcHRpbWl0emF0CmxvY2FsIGRhdGEgPSB7fQpmb3IgaSA9IDEsIDEwMDAwMDAgZG8KICAgIGRhdGFbaV0gPSBpCmVuZA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Codi no optimitzat
local data = {}
for i = 1, 1000000 do
    data[&quot;key&quot; .. i] = i
end

-- Codi optimitzat
local data = {}
for i = 1, 1000000 do
    data[i] = i
end</pre></div><div class='content'></div><h1>Gestió de Memòria</h1>
<div class='content'></div><h2>Recollida d'Escombraries</h2>
<div class='content'><p>Lua utilitza un col·lector d'escombraries automàtic per gestionar la memòria. No obstant això, és important entendre com funciona per evitar problemes de rendiment.</p>
<ul>
<li><strong>Evita la creació excessiva d'objectes</strong>: Redueix la freqüència de la recollida d'escombraries.</li>
<li><strong>Utilitza <code>collectgarbage</code></strong>: Controla manualment la recollida d'escombraries si és necessari.</li>
</ul>
</div><h2>Exemple</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gRm9yw6dhIGxhIHJlY29sbGlkYSBkJ2VzY29tYnJhcmllcwpjb2xsZWN0Z2FyYmFnZSgiY29sbGVjdCIp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- For&ccedil;a la recollida d'escombraries
collectgarbage(&quot;collect&quot;)</pre></div><div class='content'></div><h1>Consells i Trucs</h1>
<div class='content'><ul>
<li><strong>Precompila el codi</strong>: Utilitza <code>luac</code> per precompilar scripts Lua.</li>
<li><strong>Evita l'ús excessiu de funcions anònimes</strong>: Les funcions anònimes poden ser menys eficients.</li>
<li><strong>Utilitza taules amb claus numèriques</strong>: Les taules amb claus numèriques són més ràpides que les taules amb claus de cadena.</li>
</ul>
</div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Optimització de Bucles</h2>
<div class='content'><p>Optimitza el següent codi per millorar el seu rendiment:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgc3VtID0gMApmb3IgaSA9IDEsIDEwMDAwMDAgZG8KICAgIGZvciBqID0gMSwgMTAwMCBkbwogICAgICAgIHN1bSA9IHN1bSArIChpICogaikKICAgIGVuZAplbmQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local sum = 0
for i = 1, 1000000 do
    for j = 1, 1000 do
        sum = sum + (i * j)
    end
end</pre></div><div class='content'><h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgc3VtID0gMApmb3IgaSA9IDEsIDEwMDAwMDAgZG8KICAgIGxvY2FsIGlfbXVsID0gaSAqIDEwMDAKICAgIHN1bSA9IHN1bSArIChpX211bCAqICgxMDAwICsgMSkgLyAyKQplbmQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local sum = 0
for i = 1, 1000000 do
    local i_mul = i * 1000
    sum = sum + (i_mul * (1000 + 1) / 2)
end</pre></div><div class='content'></div><h2>Exercici 2: Gestió de Memòria</h2>
<div class='content'><p>Escriu un codi que creï i elimini objectes de manera eficient per evitar problemes de memòria.</p>
<h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgb2JqZWN0cyA9IHt9CmZvciBpID0gMSwgMTAwMDAwMCBkbwogICAgb2JqZWN0c1tpXSA9IHt2YWx1ZSA9IGl9CmVuZAoKLS0gQWxsaWJlcmEgbWVtw7JyaWEKZm9yIGkgPSAxLCAxMDAwMDAwIGRvCiAgICBvYmplY3RzW2ldID0gbmlsCmVuZAoKY29sbGVjdGdhcmJhZ2UoImNvbGxlY3QiKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local objects = {}
for i = 1, 1000000 do
    objects[i] = {value = i}
end

-- Allibera mem&ograve;ria
for i = 1, 1000000 do
    objects[i] = nil
end

collectgarbage(&quot;collect&quot;)</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>En aquesta secció, hem après diverses tècniques per optimitzar el rendiment dels nostres scripts en Lua. Hem cobert des de l'ús d'eines de perfilat fins a la gestió de memòria i l'optimització de codi. Amb aquestes tècniques, podreu escriure codi més eficient i millorar el rendiment de les vostres aplicacions Lua.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-03-debugging-techniques' title="Tècniques de Depuració">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-05-lua-c-api' title="Ús de l'API C de Lua">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Publicitat</h1>
<p>Aquest espai està destinat a publicitat.</p>
<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Gràcies per col·laborar!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			









		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
