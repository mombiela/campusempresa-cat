<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desplegament</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ruby/09-05-deployment" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ruby/09-05-deployment" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ruby/09-05-deployment" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/ruby/09-05-deployment" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/ruby/09-05-deployment" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
<br>
			<cite>Construint la societat d'avui i del demà</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Llenguatges de Programació</a>
				 					<a href="/categ/frameworks">Frameworks i Llibreries</a>
				 					<a href="/categ/tech-tools">Eines Tècniques</a>
				 					<a href="/categ/foundations">Fonaments Teòrics</a>
				 					<a href="/categ/soft-skills">Habilitats Socials</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-04-testing-debugging' title="Proves i Depuració">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Desplegament</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
			</div>
</div>
<div class='content'><p>En aquesta secció, aprendrem com desplegar una aplicació Ruby on Rails en un entorn de producció. El desplegament és el procés de posar la teva aplicació en un servidor perquè els usuaris finals puguin accedir-hi. Hi ha diverses opcions per desplegar aplicacions Rails, però en aquest curs ens centrarem en una de les més populars: Heroku.</p>
</div><h1><ol>
<li>Preparació per al Desplegament</li>
</ol>
</h1>
<div class='content'></div><h2><p>1.1. Requisits Previs</p>
</h2>
<div class='content'><p>Abans de començar, assegura't de tenir els següents elements configurats:</p>
<ul>
<li>Un compte a <a href="https://www.heroku.com/">Heroku</a>.</li>
<li>Git instal·lat al teu sistema.</li>
<li>La teva aplicació Rails en un repositori Git.</li>
</ul>
</div><h2><p>1.2. Instal·lació de l'Heroku CLI</p>
</h2>
<div class='content'><p>L'Heroku CLI (Command Line Interface) és una eina que et permet gestionar les teves aplicacions Heroku des de la línia de comandes. Pots instal·lar-la seguint les instruccions a <a href="https://devcenter.heroku.com/articles/heroku-cli">Heroku CLI</a>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBQZXIgaW5zdGFswrdsYXIgSGVyb2t1IENMSSBlbiBtYWNPUwpicmV3IHRhcCBoZXJva3UvYnJldyAmJiBicmV3IGluc3RhbGwgaGVyb2t1CgojIFBlciBpbnN0YWzCt2xhciBIZXJva3UgQ0xJIGVuIFVidW50dQpjdXJsIGh0dHBzOi8vY2xpLWFzc2V0cy5oZXJva3UuY29tL2luc3RhbGwtdWJ1bnR1LnNoIHwgc2g="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Per instal&middot;lar Heroku CLI en macOS
brew tap heroku/brew &amp;&amp; brew install heroku

# Per instal&middot;lar Heroku CLI en Ubuntu
curl https://cli-assets.heroku.com/install-ubuntu.sh | sh</pre></div><div class='content'></div><h1><ol start="2">
<li>Desplegant a Heroku</li>
</ol>
</h1>
<div class='content'></div><h2><p>2.1. Creació d'una Aplicació Heroku</p>
</h2>
<div class='content'><p>Un cop tinguis l'Heroku CLI instal·lat, pots crear una nova aplicació Heroku.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBBdXRlbnRpY2EndCBhIEhlcm9rdQpoZXJva3UgbG9naW4KCiMgQ3JlYSB1bmEgbm92YSBhcGxpY2FjacOzIEhlcm9rdQpoZXJva3UgY3JlYXRlIG5vbS1kZS1sYS10ZXZhLWFwbGljYWNpbw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Autentica't a Heroku
heroku login

# Crea una nova aplicaci&oacute; Heroku
heroku create nom-de-la-teva-aplicacio</pre></div><div class='content'></div><h2><p>2.2. Configuració del Fitxer <code>Gemfile</code></p>
</h2>
<div class='content'><p>Assegura't que el teu <code>Gemfile</code> inclogui les gemmes necessàries per a producció. Per exemple, la gem <code>pg</code> per a PostgreSQL, que és la base de dades per defecte a Heroku.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBHZW1maWxlCmdlbSAncGcnLCBncm91cDogOnByb2R1Y3Rpb24KZ2VtICdyYWlsc18xMmZhY3RvcicsIGdyb3VwOiA6cHJvZHVjdGlvbg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Gemfile
gem 'pg', group: :production
gem 'rails_12factor', group: :production</pre></div><div class='content'></div><h2><p>2.3. Configuració de la Base de Dades</p>
</h2>
<div class='content'><p>Heroku utilitza PostgreSQL per defecte. Assegura't que la teva aplicació està configurada per utilitzar PostgreSQL en producció.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBjb25maWcvZGF0YWJhc2UueW1sCnByb2R1Y3Rpb246CiAgYWRhcHRlcjogcG9zdGdyZXNxbAogIGVuY29kaW5nOiB1bmljb2RlCiAgcG9vbDogNQogIGRhdGFiYXNlOiA8JT0gRU5WWydEQVRBQkFTRV9VUkwnXSAlPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># config/database.yml
production:
  adapter: postgresql
  encoding: unicode
  pool: 5
  database: &lt;%= ENV['DATABASE_URL'] %&gt;</pre></div><div class='content'></div><h2><p>2.4. Desplegament de l'Aplicació</p>
</h2>
<div class='content'><p>Un cop tot estigui configurat, pots desplegar la teva aplicació a Heroku.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBBZmVnZWl4IGVscyBjYW52aXMgYWwgcmVwb3NpdG9yaSBHaXQKZ2l0IGFkZCAuCmdpdCBjb21taXQgLW0gIlByZXBhcmFudCBwZXIgYWwgZGVzcGxlZ2FtZW50IGEgSGVyb2t1IgoKIyBEZXNwbGVnYSBhIEhlcm9rdQpnaXQgcHVzaCBoZXJva3UgbWFpbg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Afegeix els canvis al repositori Git
git add .
git commit -m &quot;Preparant per al desplegament a Heroku&quot;

# Desplega a Heroku
git push heroku main</pre></div><div class='content'></div><h2><p>2.5. Migració de la Base de Dades</p>
</h2>
<div class='content'><p>Després de desplegar l'aplicació, necessitaràs executar les migracions de la base de dades.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGVjdXRhIGxlcyBtaWdyYWNpb25zIGEgSGVyb2t1Cmhlcm9rdSBydW4gcmFpbHMgZGI6bWlncmF0ZQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Executa les migracions a Heroku
heroku run rails db:migrate</pre></div><div class='content'></div><h1><ol start="3">
<li>Configuració Addicional</li>
</ol>
</h1>
<div class='content'></div><h2><p>3.1. Variables d'Entorn</p>
</h2>
<div class='content'><p>Heroku utilitza variables d'entorn per a la configuració de l'aplicació. Pots establir variables d'entorn utilitzant l'Heroku CLI.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFc3RhYmxlaXggdW5hIHZhcmlhYmxlIGQnZW50b3JuCmhlcm9rdSBjb25maWc6c2V0IE5PTV9WQVJJQUJMRT12YWxvcg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Estableix una variable d'entorn
heroku config:set NOM_VARIABLE=valor</pre></div><div class='content'></div><h2><p>3.2. Monitorització i Escalabilitat</p>
</h2>
<div class='content'><p>Heroku ofereix eines per monitoritzar i escalar la teva aplicació. Pots afegir add-ons per a monitorització, com New Relic, i escalar la teva aplicació afegint més dynos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBBZmVnaXIgdW4gYWRkLW9uIGRlIG1vbml0b3JpdHphY2nDswpoZXJva3UgYWRkb25zOmNyZWF0ZSBuZXdyZWxpYwoKIyBFc2NhbGFyIGxhIHRldmEgYXBsaWNhY2nDswpoZXJva3UgcHM6c2NhbGUgd2ViPTI="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Afegir un add-on de monitoritzaci&oacute;
heroku addons:create newrelic

# Escalar la teva aplicaci&oacute;
heroku ps:scale web=2</pre></div><div class='content'></div><h1><ol start="4">
<li>Exercici Pràctic</li>
</ol>
</h1>
<div class='content'></div><h2><p>Exercici</p>
</h2>
<div class='content'><p>Desplega una aplicació Rails simple a Heroku seguint els passos descrits anteriorment. La teva aplicació hauria de tenir una pàgina d'inici que mostri un missatge de benvinguda.</p>
</div><h2><p>Solució</p>
</h2>
<div class='content'><ol>
<li>Crea una nova aplicació Rails.</li>
<li>Configura el <code>Gemfile</code> i <code>database.yml</code> per a producció.</li>
<li>Crea un repositori Git i puja la teva aplicació.</li>
<li>Crea una aplicació Heroku i desplega-la.</li>
<li>Executa les migracions de la base de dades.</li>
<li>Verifica que la teva aplicació està funcionant correctament a Heroku.</li>
</ol>
</div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>En aquesta secció, hem après com desplegar una aplicació Ruby on Rails a Heroku. Hem cobert els passos necessaris per preparar la teva aplicació, crear una aplicació Heroku, configurar la base de dades, desplegar l'aplicació i executar les migracions. També hem vist com configurar variables d'entorn i utilitzar eines de monitorització i escalabilitat. Amb aquests coneixements, estàs preparat per posar la teva aplicació Rails en producció i fer-la accessible als usuaris finals.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-04-testing-debugging' title="Proves i Depuració">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
