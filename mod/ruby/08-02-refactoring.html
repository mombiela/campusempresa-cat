<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refactorització</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ruby/08-02-refactoring" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ruby/08-02-refactoring" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ruby/08-02-refactoring" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=2" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/ruby/08-02-refactoring" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/ruby/08-02-refactoring" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
<br>
			<cite>Construint la societat d'avui i del demà</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Llenguatges de Programació</a>
				 					<a href="/categ/frameworks">Frameworks i Llibreries</a>
				 					<a href="/categ/tech-tools">Eines Tècniques</a>
				 					<a href="/categ/foundations">Fonaments Teòrics</a>
				 					<a href="/categ/soft-skills">Habilitats Socials</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-01-code-style-conventions' title="Estil de Codi i Convencions">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Refactorització</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-03-performance-optimization' title="Optimització del Rendiment">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>La refactorització és el procés de millorar el codi existent sense canviar-ne el comportament extern. L'objectiu és fer que el codi sigui més llegible, mantenible i eficient. En aquesta secció, explorarem diverses tècniques i estratègies per refactoritzar el codi en Ruby.</p>
</div><h1><p>Objectius de la Refactorització</p>
</h1>
<div class='content'><ul>
<li><strong>Millorar la llegibilitat:</strong> Fer que el codi sigui més fàcil de llegir i entendre.</li>
<li><strong>Reduir la complexitat:</strong> Simplificar el codi per fer-lo més fàcil de mantenir.</li>
<li><strong>Eliminar la duplicació:</strong> Reduir la redundància en el codi.</li>
<li><strong>Millorar el rendiment:</strong> Optimitzar el codi per fer-lo més eficient.</li>
</ul>
</div><h1><p>Tècniques de Refactorització</p>
</h1>
<div class='content'></div><h2><ol>
<li>Extracció de Mètodes</li>
</ol>
</h2>
<div class='content'><p>L'extracció de mètodes consisteix a moure blocs de codi repetits o complexos a mètodes separats. Això ajuda a reduir la duplicació i a fer que el codi sigui més modular.</p>
<p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBBYmFucyBkZSBsYSByZWZhY3Rvcml0emFjacOzCmNsYXNzIEludm9pY2UKICBkZWYgcHJpbnRfZGV0YWlscwogICAgcHV0cyAiSW52b2ljZSBEZXRhaWxzIgogICAgcHV0cyAiRGF0ZTogI3tUaW1lLm5vd30iCiAgICBwdXRzICJBbW91bnQ6ICQxMDAiCiAgZW5kCmVuZAoKIyBEZXNwcsOpcyBkZSBsYSByZWZhY3Rvcml0emFjacOzCmNsYXNzIEludm9pY2UKICBkZWYgcHJpbnRfZGV0YWlscwogICAgcHV0cyAiSW52b2ljZSBEZXRhaWxzIgogICAgcHJpbnRfZGF0ZQogICAgcHJpbnRfYW1vdW50CiAgZW5kCgogIHByaXZhdGUKCiAgZGVmIHByaW50X2RhdGUKICAgIHB1dHMgIkRhdGU6ICN7VGltZS5ub3d9IgogIGVuZAoKICBkZWYgcHJpbnRfYW1vdW50CiAgICBwdXRzICJBbW91bnQ6ICQxMDAiCiAgZW5kCmVuZA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Abans de la refactoritzaci&oacute;
class Invoice
  def print_details
    puts &quot;Invoice Details&quot;
    puts &quot;Date: #{Time.now}&quot;
    puts &quot;Amount: $100&quot;
  end
end

# Despr&eacute;s de la refactoritzaci&oacute;
class Invoice
  def print_details
    puts &quot;Invoice Details&quot;
    print_date
    print_amount
  end

  private

  def print_date
    puts &quot;Date: #{Time.now}&quot;
  end

  def print_amount
    puts &quot;Amount: $100&quot;
  end
end</pre></div><div class='content'></div><h2><ol start="2">
<li>Substitució de Condicionals per Polimorfisme</li>
</ol>
</h2>
<div class='content'><p>Els condicionals complexos poden ser difícils de llegir i mantenir. Substituir-los per polimorfisme pot simplificar el codi.</p>
<p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBBYmFucyBkZSBsYSByZWZhY3Rvcml0emFjacOzCmNsYXNzIEFuaW1hbAogIGRlZiBtYWtlX3NvdW5kKHR5cGUpCiAgICBpZiB0eXBlID09ICdkb2cnCiAgICAgICdXb29mIScKICAgIGVsc2lmIHR5cGUgPT0gJ2NhdCcKICAgICAgJ01lb3chJwogICAgZWxzZQogICAgICAnVW5rbm93biBzb3VuZCcKICAgIGVuZAogIGVuZAplbmQKCiMgRGVzcHLDqXMgZGUgbGEgcmVmYWN0b3JpdHphY2nDswpjbGFzcyBBbmltYWwKICBkZWYgbWFrZV9zb3VuZAogICAgcmFpc2UgTm90SW1wbGVtZW50ZWRFcnJvciwgJ1RoaXMgbWV0aG9kIHNob3VsZCBiZSBvdmVycmlkZGVuJwogIGVuZAplbmQKCmNsYXNzIERvZyA8IEFuaW1hbAogIGRlZiBtYWtlX3NvdW5kCiAgICAnV29vZiEnCiAgZW5kCmVuZAoKY2xhc3MgQ2F0IDwgQW5pbWFsCiAgZGVmIG1ha2Vfc291bmQKICAgICdNZW93IScKICBlbmQKZW5k"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Abans de la refactoritzaci&oacute;
class Animal
  def make_sound(type)
    if type == 'dog'
      'Woof!'
    elsif type == 'cat'
      'Meow!'
    else
      'Unknown sound'
    end
  end
end

# Despr&eacute;s de la refactoritzaci&oacute;
class Animal
  def make_sound
    raise NotImplementedError, 'This method should be overridden'
  end
end

class Dog &lt; Animal
  def make_sound
    'Woof!'
  end
end

class Cat &lt; Animal
  def make_sound
    'Meow!'
  end
end</pre></div><div class='content'></div><h2><ol start="3">
<li>Utilització de Mòduls per Compartir Comportament</li>
</ol>
</h2>
<div class='content'><p>Els mòduls poden ser utilitzats per compartir comportament entre classes sense necessitat d'herència.</p>
<p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBBYmFucyBkZSBsYSByZWZhY3Rvcml0emFjacOzCmNsYXNzIERvZwogIGRlZiBzcGVhawogICAgJ1dvb2YhJwogIGVuZAplbmQKCmNsYXNzIENhdAogIGRlZiBzcGVhawogICAgJ01lb3chJwogIGVuZAplbmQKCiMgRGVzcHLDqXMgZGUgbGEgcmVmYWN0b3JpdHphY2nDswptb2R1bGUgU3BlYWthYmxlCiAgZGVmIHNwZWFrCiAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yLCAnVGhpcyBtZXRob2Qgc2hvdWxkIGJlIG92ZXJyaWRkZW4nCiAgZW5kCmVuZAoKY2xhc3MgRG9nCiAgaW5jbHVkZSBTcGVha2FibGUKCiAgZGVmIHNwZWFrCiAgICAnV29vZiEnCiAgZW5kCmVuZAoKY2xhc3MgQ2F0CiAgaW5jbHVkZSBTcGVha2FibGUKCiAgZGVmIHNwZWFrCiAgICAnTWVvdyEnCiAgZW5kCmVuZA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Abans de la refactoritzaci&oacute;
class Dog
  def speak
    'Woof!'
  end
end

class Cat
  def speak
    'Meow!'
  end
end

# Despr&eacute;s de la refactoritzaci&oacute;
module Speakable
  def speak
    raise NotImplementedError, 'This method should be overridden'
  end
end

class Dog
  include Speakable

  def speak
    'Woof!'
  end
end

class Cat
  include Speakable

  def speak
    'Meow!'
  end
end</pre></div><div class='content'></div><h2><ol start="4">
<li>Simplificació de Bucles</li>
</ol>
</h2>
<div class='content'><p>Els bucles complexos poden ser simplificats utilitzant mètodes d'iteració més expressius.</p>
<p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBBYmFucyBkZSBsYSByZWZhY3Rvcml0emFjacOzCm51bWJlcnMgPSBbMSwgMiwgMywgNCwgNV0Kc3VtID0gMApudW1iZXJzLmVhY2ggZG8gfG51bWJlcnwKICBzdW0gKz0gbnVtYmVyCmVuZAoKIyBEZXNwcsOpcyBkZSBsYSByZWZhY3Rvcml0emFjacOzCm51bWJlcnMgPSBbMSwgMiwgMywgNCwgNV0Kc3VtID0gbnVtYmVycy5yZWR1Y2UoOisp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Abans de la refactoritzaci&oacute;
numbers = [1, 2, 3, 4, 5]
sum = 0
numbers.each do |number|
  sum += number
end

# Despr&eacute;s de la refactoritzaci&oacute;
numbers = [1, 2, 3, 4, 5]
sum = numbers.reduce(:+)</pre></div><div class='content'></div><h1><p>Exercicis Pràctics</p>
</h1>
<div class='content'></div><h2><p>Exercici 1: Extracció de Mètodes</p>
</h2>
<div class='content'><p>Refactoritza el següent codi per utilitzar l'extracció de mètodes:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgUmVwb3J0CiAgZGVmIGdlbmVyYXRlCiAgICBwdXRzICJSZXBvcnQgVGl0bGUiCiAgICBwdXRzICJEYXRlOiAje1RpbWUubm93fSIKICAgIHB1dHMgIkNvbnRlbnQ6IFRoaXMgaXMgdGhlIHJlcG9ydCBjb250ZW50LiIKICBlbmQKZW5k"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Report
  def generate
    puts &quot;Report Title&quot;
    puts &quot;Date: #{Time.now}&quot;
    puts &quot;Content: This is the report content.&quot;
  end
end</pre></div><div class='content'><p><strong>Solució:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgUmVwb3J0CiAgZGVmIGdlbmVyYXRlCiAgICBwdXRzICJSZXBvcnQgVGl0bGUiCiAgICBwcmludF9kYXRlCiAgICBwcmludF9jb250ZW50CiAgZW5kCgogIHByaXZhdGUKCiAgZGVmIHByaW50X2RhdGUKICAgIHB1dHMgIkRhdGU6ICN7VGltZS5ub3d9IgogIGVuZAoKICBkZWYgcHJpbnRfY29udGVudAogICAgcHV0cyAiQ29udGVudDogVGhpcyBpcyB0aGUgcmVwb3J0IGNvbnRlbnQuIgogIGVuZAplbmQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Report
  def generate
    puts &quot;Report Title&quot;
    print_date
    print_content
  end

  private

  def print_date
    puts &quot;Date: #{Time.now}&quot;
  end

  def print_content
    puts &quot;Content: This is the report content.&quot;
  end
end</pre></div><div class='content'></div><h2><p>Exercici 2: Substitució de Condicionals per Polimorfisme</p>
</h2>
<div class='content'><p>Refactoritza el següent codi per utilitzar polimorfisme:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgVmVoaWNsZQogIGRlZiBtb3ZlKHR5cGUpCiAgICBpZiB0eXBlID09ICdjYXInCiAgICAgICdEcml2aW5nJwogICAgZWxzaWYgdHlwZSA9PSAnYmlrZScKICAgICAgJ1JpZGluZycKICAgIGVsc2UKICAgICAgJ1Vua25vd24gbW92ZW1lbnQnCiAgICBlbmQKICBlbmQKZW5k"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Vehicle
  def move(type)
    if type == 'car'
      'Driving'
    elsif type == 'bike'
      'Riding'
    else
      'Unknown movement'
    end
  end
end</pre></div><div class='content'><p><strong>Solució:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgVmVoaWNsZQogIGRlZiBtb3ZlCiAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yLCAnVGhpcyBtZXRob2Qgc2hvdWxkIGJlIG92ZXJyaWRkZW4nCiAgZW5kCmVuZAoKY2xhc3MgQ2FyIDwgVmVoaWNsZQogIGRlZiBtb3ZlCiAgICAnRHJpdmluZycKICBlbmQKZW5kCgpjbGFzcyBCaWtlIDwgVmVoaWNsZQogIGRlZiBtb3ZlCiAgICAnUmlkaW5nJwogIGVuZAplbmQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Vehicle
  def move
    raise NotImplementedError, 'This method should be overridden'
  end
end

class Car &lt; Vehicle
  def move
    'Driving'
  end
end

class Bike &lt; Vehicle
  def move
    'Riding'
  end
end</pre></div><div class='content'></div><h1><p>Resum</p>
</h1>
<div class='content'><p>La refactorització és una pràctica essencial per mantenir el codi net, llegible i fàcil de mantenir. Hem explorat diverses tècniques de refactorització, incloent l'extracció de mètodes, la substitució de condicionals per polimorfisme, l'ús de mòduls per compartir comportament i la simplificació de bucles. Practicar aquestes tècniques t'ajudarà a escriure codi de millor qualitat i a millorar les teves habilitats com a programador.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-01-code-style-conventions' title="Estil de Codi i Convencions">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-03-performance-optimization' title="Optimització del Rendiment">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Publicitat</h1>
<p>Aquest espai està destinat a publicitat.</p>
<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Gràcies per col·laborar!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
