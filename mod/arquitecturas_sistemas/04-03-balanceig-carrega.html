<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Balanceig de Càrrega</title>

    <link rel="alternate" href="https://campusempresa.com/mod/arquitecturas_sistemas/04-03-balanceo-carga" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/arquitecturas_sistemas/04-03-balanceig-carrega" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/arquitecturas_sistemas/04-03-load-balancing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/arquitecturas_sistemas/04-03-load-balancing" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/arquitecturas_sistemas/04-03-balanceo-carga" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-optimitzacio-rendiment' title="Optimització de Rendiment">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Balanceig de Càrrega</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-01-principis-seguretat' title="Principis de Seguretat">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>El balanceig de càrrega és una tècnica fonamental en el disseny d'arquitectures de sistemes escalables i robustes. Aquesta tècnica permet distribuir de manera eficient el tràfic de xarxa o les càrregues de treball entre múltiples servidors, assegurant que cap servidor individual es sobrecarregui i que els recursos es utilitzin de manera òptima.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ol>
<li><strong>Balancejador de Càrrega (Load Balancer)</strong>: Dispositiu o programari que distribueix el tràfic entrant entre diversos servidors.</li>
<li><strong>Nodes</strong>: Els servidors que reben el tràfic distribuït pel balancejador de càrrega.</li>
<li><strong>Algoritmes de Balanceig de Càrrega</strong>: Regles que determinen com es distribueix el tràfic entre els nodes.</li>
</ol>
</div><h1>Tipus de Balancejadors de Càrrega</h1>
<div class='content'></div><h2>1. Balancejadors de Càrrega de Capa 4 (Transport Layer)</h2>
<div class='content'><p>Operen en la capa de transport del model OSI (TCP/UDP). Distribueixen el tràfic basant-se en la informació de les capçaleres de transport, com ara adreces IP i ports.</p>
<p><strong>Exemples</strong>:</p>
<ul>
<li><strong>AWS Elastic Load Balancer (ELB)</strong></li>
<li><strong>HAProxy</strong></li>
</ul>
</div><h2>2. Balancejadors de Càrrega de Capa 7 (Application Layer)</h2>
<div class='content'><p>Operen en la capa d'aplicació del model OSI. Distribueixen el tràfic basant-se en informació de les capçaleres d'aplicació, com ara URL, cookies, o capçaleres HTTP.</p>
<p><strong>Exemples</strong>:</p>
<ul>
<li><strong>NGINX</strong></li>
<li><strong>Traefik</strong></li>
</ul>
</div><h1>Algoritmes de Balanceig de Càrrega</h1>
<div class='content'></div><h2>1. Round Robin</h2>
<div class='content'><p>Distribueix les sol·licituds de manera seqüencial entre els servidors disponibles.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U29swrdsaWNpdHVkIDEgLT4gU2Vydmlkb3IgMQpTb2zCt2xpY2l0dWQgMiAtPiBTZXJ2aWRvciAyClNvbMK3bGljaXR1ZCAzIC0+IFNlcnZpZG9yIDMKU29swrdsaWNpdHVkIDQgLT4gU2Vydmlkb3IgMQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Sol&middot;licitud 1 -&gt; Servidor 1
Sol&middot;licitud 2 -&gt; Servidor 2
Sol&middot;licitud 3 -&gt; Servidor 3
Sol&middot;licitud 4 -&gt; Servidor 1</pre></div><div class='content'></div><h2>2. Least Connections</h2>
<div class='content'><p>Assigna la sol·licitud al servidor amb el menor nombre de connexions actives.</p>
</div><h2>3. IP Hash</h2>
<div class='content'><p>Utilitza un hash de l'adreça IP del client per determinar quin servidor ha de gestionar la sol·licitud.</p>
</div><h2>4. Weighted Round Robin</h2>
<div class='content'><p>Similar al Round Robin, però permet assignar pesos als servidors per distribuir el tràfic de manera no uniforme.</p>
</div><h1>Implementació Pràctica</h1>
<div class='content'></div><h2>Exemple amb NGINX</h2>
<div class='content'><p>A continuació es mostra un exemple de configuració d'un balancejador de càrrega amb NGINX utilitzant l'algoritme Round Robin.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICB1cHN0cmVhbSBiYWNrZW5kIHsKICAgICAgICBzZXJ2ZXIgYmFja2VuZDEuZXhhbXBsZS5jb207CiAgICAgICAgc2VydmVyIGJhY2tlbmQyLmV4YW1wbGUuY29tOwogICAgICAgIHNlcnZlciBiYWNrZW5kMy5leGFtcGxlLmNvbTsKICAgIH0KCiAgICBzZXJ2ZXIgewogICAgICAgIGxpc3RlbiA4MDsKCiAgICAgICAgbG9jYXRpb24gLyB7CiAgICAgICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL2JhY2tlbmQ7CiAgICAgICAgfQogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    upstream backend {
        server backend1.example.com;
        server backend2.example.com;
        server backend3.example.com;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://backend;
        }
    }
}</pre></div><div class='content'></div><h2>Explicació del Codi</h2>
<div class='content'><ul>
<li><strong>upstream backend</strong>: Defineix un grup de servidors backend.</li>
<li><strong>server backend1.example.com</strong>: Defineix cada servidor backend.</li>
<li><strong>proxy_pass http://backend</strong>: Redirigeix les sol·licituds al grup de servidors backend.</li>
</ul>
</div><h1>Exercici Pràctic</h1>
<div class='content'></div><h2>Configuració d'un Balancejador de Càrrega amb HAProxy</h2>
<div class='content'><ol>
<li>Instal·la HAProxy en el teu servidor.</li>
<li>Configura HAProxy per utilitzar l'algoritme Least Connections.</li>
</ol>
<p><strong>Configuració Exemple</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2xvYmFsCiAgICBsb2cgL2Rldi9sb2cgbG9jYWwwCiAgICBsb2cgL2Rldi9sb2cgbG9jYWwxIG5vdGljZQogICAgY2hyb290IC92YXIvbGliL2hhcHJveHkKICAgIHN0YXRzIHNvY2tldCAvcnVuL2hhcHJveHkvYWRtaW4uc29jayBtb2RlIDY2MCBsZXZlbCBhZG1pbgogICAgc3RhdHMgdGltZW91dCAzMHMKICAgIHVzZXIgaGFwcm94eQogICAgZ3JvdXAgaGFwcm94eQogICAgZGFlbW9uCgpkZWZhdWx0cwogICAgbG9nIGdsb2JhbAogICAgbW9kZSBodHRwCiAgICBvcHRpb24gaHR0cGxvZwogICAgb3B0aW9uIGRvbnRsb2dudWxsCiAgICB0aW1lb3V0IGNvbm5lY3QgNTAwMAogICAgdGltZW91dCBjbGllbnQgIDUwMDAwCiAgICB0aW1lb3V0IHNlcnZlciAgNTAwMDAKCmZyb250ZW5kIGh0dHBfZnJvbnQKICAgIGJpbmQgKjo4MAogICAgZGVmYXVsdF9iYWNrZW5kIGh0dHBfYmFjawoKYmFja2VuZCBodHRwX2JhY2sKICAgIGJhbGFuY2UgbGVhc3Rjb25uCiAgICBzZXJ2ZXIgc2VydmVyMSAxOTIuMTY4LjEuMTo4MCBjaGVjawogICAgc2VydmVyIHNlcnZlcjIgMTkyLjE2OC4xLjI6ODAgY2hlY2sKICAgIHNlcnZlciBzZXJ2ZXIzIDE5Mi4xNjguMS4zOjgwIGNoZWNr"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>global
    log /dev/log local0
    log /dev/log local1 notice
    chroot /var/lib/haproxy
    stats socket /run/haproxy/admin.sock mode 660 level admin
    stats timeout 30s
    user haproxy
    group haproxy
    daemon

defaults
    log global
    mode http
    option httplog
    option dontlognull
    timeout connect 5000
    timeout client  50000
    timeout server  50000

frontend http_front
    bind *:80
    default_backend http_back

backend http_back
    balance leastconn
    server server1 192.168.1.1:80 check
    server server2 192.168.1.2:80 check
    server server3 192.168.1.3:80 check</pre></div><div class='content'></div><h2>Explicació del Codi</h2>
<div class='content'><ul>
<li><strong>frontend http_front</strong>: Defineix la configuració del frontend, que escolta en el port 80.</li>
<li><strong>default_backend http_back</strong>: Defineix el backend per defecte.</li>
<li><strong>balance leastconn</strong>: Utilitza l'algoritme Least Connections per distribuir el tràfic.</li>
<li><strong>server server1 192.168.1.1:80 check</strong>: Defineix els servidors backend i habilita la verificació de salut.</li>
</ul>
</div><h1>Errors Comuns i Consells</h1>
<div class='content'><ol>
<li><strong>No Configurar la Verificació de Salut</strong>: Assegura't que els servidors backend es verifiquin periòdicament per evitar enviar tràfic a servidors inactius.</li>
<li><strong>Sobrecàrrega d'un Sol Servidor</strong>: Utilitza algoritmes de balanceig adequats per evitar la sobrecàrrega d'un sol servidor.</li>
<li><strong>No Monitoritzar el Rendiment</strong>: Implementa eines de monitorització per assegurar-te que el balancejador de càrrega funciona correctament i optimitza segons sigui necessari.</li>
</ol>
</div><h1>Conclusió</h1>
<div class='content'><p>El balanceig de càrrega és una tècnica essencial per assegurar la disponibilitat i escalabilitat dels sistemes. Comprendre els diferents tipus de balancejadors de càrrega i algoritmes de distribució de tràfic és crucial per dissenyar arquitectures robustes i eficients. Amb les eines i configuracions adequades, pots millorar significativament el rendiment i la resiliència del teu sistema.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-optimitzacio-rendiment' title="Optimització de Rendiment">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-01-principis-seguretat' title="Principis de Seguretat">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
