<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cas d'estudi: API d'una botiga en línia</title>

    <link rel="alternate" href="https://campusempresa.com/mod/rest_api/06-01-caso-estudio-api-tienda-en-linea" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/rest_api/06-01-caso-estudio-api-tienda-en-linea" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/rest_api/06-01-case-study-online-store-api" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/rest_api/06-01-case-study-online-store-api" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/rest_api/06-01-caso-estudio-api-tienda-en-linea" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-integracion-continua-despliegue' title="Integració contínua i desplegament">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Cas d'estudi: API d'una botiga en línia</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-caso-estudio-api-red-social' title="Cas d'estudi: API d'una xarxa social">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest cas d'estudi, dissenyarem i desenvoluparem una API RESTful per a una botiga en línia. Aquest projecte ens permetrà aplicar els conceptes apresos en els mòduls anteriors i veure com es poden implementar en un escenari real.</p>
</div><h1>Objectius del cas d'estudi</h1>
<div class='content'><ol>
<li><strong>Dissenyar l'arquitectura de l'API</strong>: Definir els recursos, les URIs, els mètodes HTTP i els codis d'estat.</li>
<li><strong>Desenvolupar l'API</strong>: Implementar l'API utilitzant un framework popular.</li>
<li><strong>Provar l'API</strong>: Assegurar-nos que l'API funciona correctament i compleix amb els requisits.</li>
<li><strong>Documentar l'API</strong>: Crear una documentació clara i completa per a l'API.</li>
</ol>
</div><h1>1. Disseny de l'arquitectura de l'API</h1>
<div class='content'></div><h2>Recursos i URIs</h2>
<div class='content'><p>Els recursos principals de la nostra botiga en línia seran:</p>
<ul>
<li><strong>Productes</strong>: Informació sobre els productes disponibles.</li>
<li><strong>Categories</strong>: Classificació dels productes.</li>
<li><strong>Usuaris</strong>: Informació sobre els clients.</li>
<li><strong>Comandes</strong>: Informació sobre les comandes realitzades pels clients.</li>
</ul>
<table>
<thead>
<tr>
<th>Recurs</th>
<th>URI Base</th>
</tr>
</thead>
<tbody>
<tr>
<td>Productes</td>
<td><code>/products</code></td>
</tr>
<tr>
<td>Categories</td>
<td><code>/categories</code></td>
</tr>
<tr>
<td>Usuaris</td>
<td><code>/users</code></td>
</tr>
<tr>
<td>Comandes</td>
<td><code>/orders</code></td>
</tr>
</tbody>
</table>
</div><h2>Mètodes HTTP</h2>
<div class='content'><p>Utilitzarem els següents mètodes HTTP per interactuar amb els recursos:</p>
<table>
<thead>
<tr>
<th>Operació</th>
<th>Mètode HTTP</th>
<th>URI</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td>Obtenir productes</td>
<td><code>GET</code></td>
<td><code>/products</code></td>
<td>Obtenir una llista de productes</td>
</tr>
<tr>
<td>Crear producte</td>
<td><code>POST</code></td>
<td><code>/products</code></td>
<td>Afegir un nou producte</td>
</tr>
<tr>
<td>Obtenir producte</td>
<td><code>GET</code></td>
<td><code>/products/{id}</code></td>
<td>Obtenir un producte específic</td>
</tr>
<tr>
<td>Actualitzar producte</td>
<td><code>PUT</code></td>
<td><code>/products/{id}</code></td>
<td>Actualitzar un producte</td>
</tr>
<tr>
<td>Eliminar producte</td>
<td><code>DELETE</code></td>
<td><code>/products/{id}</code></td>
<td>Eliminar un producte</td>
</tr>
<tr>
<td>Obtenir categories</td>
<td><code>GET</code></td>
<td><code>/categories</code></td>
<td>Obtenir una llista de categories</td>
</tr>
<tr>
<td>Crear categoria</td>
<td><code>POST</code></td>
<td><code>/categories</code></td>
<td>Afegir una nova categoria</td>
</tr>
<tr>
<td>Obtenir categoria</td>
<td><code>GET</code></td>
<td><code>/categories/{id}</code></td>
<td>Obtenir una categoria específica</td>
</tr>
<tr>
<td>Actualitzar categoria</td>
<td><code>PUT</code></td>
<td><code>/categories/{id}</code></td>
<td>Actualitzar una categoria</td>
</tr>
<tr>
<td>Eliminar categoria</td>
<td><code>DELETE</code></td>
<td><code>/categories/{id}</code></td>
<td>Eliminar una categoria</td>
</tr>
<tr>
<td>Obtenir usuaris</td>
<td><code>GET</code></td>
<td><code>/users</code></td>
<td>Obtenir una llista d'usuaris</td>
</tr>
<tr>
<td>Crear usuari</td>
<td><code>POST</code></td>
<td><code>/users</code></td>
<td>Afegir un nou usuari</td>
</tr>
<tr>
<td>Obtenir usuari</td>
<td><code>GET</code></td>
<td><code>/users/{id}</code></td>
<td>Obtenir un usuari específic</td>
</tr>
<tr>
<td>Actualitzar usuari</td>
<td><code>PUT</code></td>
<td><code>/users/{id}</code></td>
<td>Actualitzar un usuari</td>
</tr>
<tr>
<td>Eliminar usuari</td>
<td><code>DELETE</code></td>
<td><code>/users/{id}</code></td>
<td>Eliminar un usuari</td>
</tr>
<tr>
<td>Obtenir comandes</td>
<td><code>GET</code></td>
<td><code>/orders</code></td>
<td>Obtenir una llista de comandes</td>
</tr>
<tr>
<td>Crear comanda</td>
<td><code>POST</code></td>
<td><code>/orders</code></td>
<td>Afegir una nova comanda</td>
</tr>
<tr>
<td>Obtenir comanda</td>
<td><code>GET</code></td>
<td><code>/orders/{id}</code></td>
<td>Obtenir una comanda específica</td>
</tr>
<tr>
<td>Actualitzar comanda</td>
<td><code>PUT</code></td>
<td><code>/orders/{id}</code></td>
<td>Actualitzar una comanda</td>
</tr>
<tr>
<td>Eliminar comanda</td>
<td><code>DELETE</code></td>
<td><code>/orders/{id}</code></td>
<td>Eliminar una comanda</td>
</tr>
</tbody>
</table>
</div><h2>Codis d'estat HTTP</h2>
<div class='content'><p>Utilitzarem els següents codis d'estat HTTP per indicar el resultat de les operacions:</p>
<table>
<thead>
<tr>
<th>Codi d'estat</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>200 OK</code></td>
<td>Operació realitzada correctament</td>
</tr>
<tr>
<td><code>201 Created</code></td>
<td>Recurs creat correctament</td>
</tr>
<tr>
<td><code>400 Bad Request</code></td>
<td>Sol·licitud incorrecta</td>
</tr>
<tr>
<td><code>401 Unauthorized</code></td>
<td>No autoritzat</td>
</tr>
<tr>
<td><code>404 Not Found</code></td>
<td>Recurs no trobat</td>
</tr>
<tr>
<td><code>500 Internal Server Error</code></td>
<td>Error del servidor</td>
</tr>
</tbody>
</table>
</div><h1>2. Desenvolupament de l'API</h1>
<div class='content'></div><h2>Configuració de l'entorn de desenvolupament</h2>
<div class='content'><p>Per aquest cas d'estudi, utilitzarem Node.js amb Express, un framework popular per al desenvolupament d'APIs RESTful.</p>
<h4>Instal·lació de Node.js i Express</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBJbnN0YWzCt2xhY2nDsyBkZSBOb2RlLmpzIChzaSBubyBlc3TDoCBpbnN0YWzCt2xhdCkKJCBzdWRvIGFwdC1nZXQgaW5zdGFsbCBub2RlanMKJCBzdWRvIGFwdC1nZXQgaW5zdGFsbCBucG0KCiMgQ3JlYWNpw7MgZCd1biBub3UgcHJvamVjdGUKJCBta2RpciBvbmxpbmUtc3RvcmUtYXBpCiQgY2Qgb25saW5lLXN0b3JlLWFwaQokIG5wbSBpbml0IC15CgojIEluc3RhbMK3bGFjacOzIGQnRXhwcmVzcwokIG5wbSBpbnN0YWxsIGV4cHJlc3M="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Instal&middot;laci&oacute; de Node.js (si no est&agrave; instal&middot;lat)
$ sudo apt-get install nodejs
$ sudo apt-get install npm

# Creaci&oacute; d'un nou projecte
$ mkdir online-store-api
$ cd online-store-api
$ npm init -y

# Instal&middot;laci&oacute; d'Express
$ npm install express</pre></div><div class='content'></div><h2>Creació d'un servidor bàsic</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc2VydmVyLmpzCmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7CmNvbnN0IGFwcCA9IGV4cHJlc3MoKTsKY29uc3QgcG9ydCA9IDMwMDA7CgphcHAudXNlKGV4cHJlc3MuanNvbigpKTsKCmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHsKICByZXMuc2VuZCgnQmVudmluZ3V0IGEgbGEgYm90aWdhIGVuIGzDrW5pYSEnKTsKfSk7CgphcHAubGlzdGVuKHBvcnQsICgpID0+IHsKICBjb25zb2xlLmxvZyhgU2Vydmlkb3IgZXNjb2x0YW50IGEgaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9YCk7Cn0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// server.js
const express = require('express');
const app = express();
const port = 3000;

app.use(express.json());

app.get('/', (req, res) =&gt; {
  res.send('Benvingut a la botiga en l&iacute;nia!');
});

app.listen(port, () =&gt; {
  console.log(`Servidor escoltant a http://localhost:${port}`);
});</pre></div><div class='content'></div><h2>Gestió de peticions i respostes</h2>
<div class='content'><p>Afegirem rutes per gestionar les peticions als recursos definits anteriorment.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gcm91dGVzL3Byb2R1Y3RzLmpzCmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7CmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7CgpsZXQgcHJvZHVjdHMgPSBbXTsKCi8vIE9idGVuaXIgdG90cyBlbHMgcHJvZHVjdGVzCnJvdXRlci5nZXQoJy8nLCAocmVxLCByZXMpID0+IHsKICByZXMuc3RhdHVzKDIwMCkuanNvbihwcm9kdWN0cyk7Cn0pOwoKLy8gQ3JlYXIgdW4gbm91IHByb2R1Y3RlCnJvdXRlci5wb3N0KCcvJywgKHJlcSwgcmVzKSA9PiB7CiAgY29uc3QgcHJvZHVjdCA9IHJlcS5ib2R5OwogIHByb2R1Y3RzLnB1c2gocHJvZHVjdCk7CiAgcmVzLnN0YXR1cygyMDEpLmpzb24ocHJvZHVjdCk7Cn0pOwoKLy8gT2J0ZW5pciB1biBwcm9kdWN0ZSBlc3BlY8OtZmljCnJvdXRlci5nZXQoJy86aWQnLCAocmVxLCByZXMpID0+IHsKICBjb25zdCBwcm9kdWN0ID0gcHJvZHVjdHMuZmluZChwID0+IHAuaWQgPT09IHBhcnNlSW50KHJlcS5wYXJhbXMuaWQpKTsKICBpZiAoIXByb2R1Y3QpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCgnUHJvZHVjdGUgbm8gdHJvYmF0Jyk7CiAgcmVzLnN0YXR1cygyMDApLmpzb24ocHJvZHVjdCk7Cn0pOwoKLy8gQWN0dWFsaXR6YXIgdW4gcHJvZHVjdGUKcm91dGVyLnB1dCgnLzppZCcsIChyZXEsIHJlcykgPT4gewogIGNvbnN0IHByb2R1Y3QgPSBwcm9kdWN0cy5maW5kKHAgPT4gcC5pZCA9PT0gcGFyc2VJbnQocmVxLnBhcmFtcy5pZCkpOwogIGlmICghcHJvZHVjdCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKCdQcm9kdWN0ZSBubyB0cm9iYXQnKTsKCiAgcHJvZHVjdC5uYW1lID0gcmVxLmJvZHkubmFtZTsKICBwcm9kdWN0LnByaWNlID0gcmVxLmJvZHkucHJpY2U7CiAgcmVzLnN0YXR1cygyMDApLmpzb24ocHJvZHVjdCk7Cn0pOwoKLy8gRWxpbWluYXIgdW4gcHJvZHVjdGUKcm91dGVyLmRlbGV0ZSgnLzppZCcsIChyZXEsIHJlcykgPT4gewogIGNvbnN0IHByb2R1Y3RJbmRleCA9IHByb2R1Y3RzLmZpbmRJbmRleChwID0+IHAuaWQgPT09IHBhcnNlSW50KHJlcS5wYXJhbXMuaWQpKTsKICBpZiAocHJvZHVjdEluZGV4ID09PSAtMSkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKCdQcm9kdWN0ZSBubyB0cm9iYXQnKTsKCiAgcHJvZHVjdHMuc3BsaWNlKHByb2R1Y3RJbmRleCwgMSk7CiAgcmVzLnN0YXR1cygyMDApLnNlbmQoJ1Byb2R1Y3RlIGVsaW1pbmF0Jyk7Cn0pOwoKbW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// routes/products.js
const express = require('express');
const router = express.Router();

let products = [];

// Obtenir tots els productes
router.get('/', (req, res) =&gt; {
  res.status(200).json(products);
});

// Crear un nou producte
router.post('/', (req, res) =&gt; {
  const product = req.body;
  products.push(product);
  res.status(201).json(product);
});

// Obtenir un producte espec&iacute;fic
router.get('/:id', (req, res) =&gt; {
  const product = products.find(p =&gt; p.id === parseInt(req.params.id));
  if (!product) return res.status(404).send('Producte no trobat');
  res.status(200).json(product);
});

// Actualitzar un producte
router.put('/:id', (req, res) =&gt; {
  const product = products.find(p =&gt; p.id === parseInt(req.params.id));
  if (!product) return res.status(404).send('Producte no trobat');

  product.name = req.body.name;
  product.price = req.body.price;
  res.status(200).json(product);
});

// Eliminar un producte
router.delete('/:id', (req, res) =&gt; {
  const productIndex = products.findIndex(p =&gt; p.id === parseInt(req.params.id));
  if (productIndex === -1) return res.status(404).send('Producte no trobat');

  products.splice(productIndex, 1);
  res.status(200).send('Producte eliminat');
});

module.exports = router;</pre></div><div class='content'></div><h2>Integració de les rutes al servidor principal</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc2VydmVyLmpzCmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7CmNvbnN0IGFwcCA9IGV4cHJlc3MoKTsKY29uc3QgcG9ydCA9IDMwMDA7CgphcHAudXNlKGV4cHJlc3MuanNvbigpKTsKCmNvbnN0IHByb2R1Y3RzUm91dGVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvcHJvZHVjdHMnKTsKYXBwLnVzZSgnL3Byb2R1Y3RzJywgcHJvZHVjdHNSb3V0ZXIpOwoKYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4gewogIHJlcy5zZW5kKCdCZW52aW5ndXQgYSBsYSBib3RpZ2EgZW4gbMOtbmlhIScpOwp9KTsKCmFwcC5saXN0ZW4ocG9ydCwgKCkgPT4gewogIGNvbnNvbGUubG9nKGBTZXJ2aWRvciBlc2NvbHRhbnQgYSBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH1gKTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// server.js
const express = require('express');
const app = express();
const port = 3000;

app.use(express.json());

const productsRouter = require('./routes/products');
app.use('/products', productsRouter);

app.get('/', (req, res) =&gt; {
  res.send('Benvingut a la botiga en l&iacute;nia!');
});

app.listen(port, () =&gt; {
  console.log(`Servidor escoltant a http://localhost:${port}`);
});</pre></div><div class='content'></div><h1>3. Proves i validació</h1>
<div class='content'><p>Utilitzarem Postman per provar les diferents rutes de la nostra API. Crearem col·leccions de peticions per a cada recurs i verificarem que les respostes siguin correctes.</p>
</div><h2>Exemple de peticions amb Postman</h2>
<div class='content'><ol>
<li><strong>GET /products</strong>: Obtenir tots els productes.</li>
<li><strong>POST /products</strong>: Crear un nou producte.</li>
<li><strong>GET /products/{id}</strong>: Obtenir un producte específic.</li>
<li><strong>PUT /products/{id}</strong>: Actualitzar un producte.</li>
<li><strong>DELETE /products/{id}</strong>: Eliminar un producte.</li>
</ol>
</div><h1>4. Documentació de l'API</h1>
<div class='content'><p>Utilitzarem Swagger per documentar la nostra API. Swagger ens permet crear una documentació interactiva que facilita la comprensió i l'ús de l'API.</p>
</div><h2>Instal·lació de Swagger</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCBucG0gaW5zdGFsbCBzd2FnZ2VyLXVpLWV4cHJlc3Mgc3dhZ2dlci1qc2RvYw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ npm install swagger-ui-express swagger-jsdoc</pre></div><div class='content'></div><h2>Configuració de Swagger</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc2VydmVyLmpzCmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7CmNvbnN0IGFwcCA9IGV4cHJlc3MoKTsKY29uc3QgcG9ydCA9IDMwMDA7CgphcHAudXNlKGV4cHJlc3MuanNvbigpKTsKCmNvbnN0IHByb2R1Y3RzUm91dGVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvcHJvZHVjdHMnKTsKYXBwLnVzZSgnL3Byb2R1Y3RzJywgcHJvZHVjdHNSb3V0ZXIpOwoKY29uc3Qgc3dhZ2dlclVpID0gcmVxdWlyZSgnc3dhZ2dlci11aS1leHByZXNzJyk7CmNvbnN0IHN3YWdnZXJKc2RvYyA9IHJlcXVpcmUoJ3N3YWdnZXItanNkb2MnKTsKCmNvbnN0IHN3YWdnZXJPcHRpb25zID0gewogIHN3YWdnZXJEZWZpbml0aW9uOiB7CiAgICBpbmZvOiB7CiAgICAgIHRpdGxlOiAnQm90aWdhIGVuIGzDrW5pYSBBUEknLAogICAgICB2ZXJzaW9uOiAnMS4wLjAnLAogICAgICBkZXNjcmlwdGlvbjogJ0FQSSBwZXIgZ2VzdGlvbmFyIHVuYSBib3RpZ2EgZW4gbMOtbmlhJywKICAgIH0sCiAgfSwKICBhcGlzOiBbJy4vcm91dGVzLyouanMnXSwKfTsKCmNvbnN0IHN3YWdnZXJEb2NzID0gc3dhZ2dlckpzZG9jKHN3YWdnZXJPcHRpb25zKTsKYXBwLnVzZSgnL2FwaS1kb2NzJywgc3dhZ2dlclVpLnNlcnZlLCBzd2FnZ2VyVWkuc2V0dXAoc3dhZ2dlckRvY3MpKTsKCmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHsKICByZXMuc2VuZCgnQmVudmluZ3V0IGEgbGEgYm90aWdhIGVuIGzDrW5pYSEnKTsKfSk7CgphcHAubGlzdGVuKHBvcnQsICgpID0+IHsKICBjb25zb2xlLmxvZyhgU2Vydmlkb3IgZXNjb2x0YW50IGEgaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9YCk7Cn0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// server.js
const express = require('express');
const app = express();
const port = 3000;

app.use(express.json());

const productsRouter = require('./routes/products');
app.use('/products', productsRouter);

const swaggerUi = require('swagger-ui-express');
const swaggerJsdoc = require('swagger-jsdoc');

const swaggerOptions = {
  swaggerDefinition: {
    info: {
      title: 'Botiga en l&iacute;nia API',
      version: '1.0.0',
      description: 'API per gestionar una botiga en l&iacute;nia',
    },
  },
  apis: ['./routes/*.js'],
};

const swaggerDocs = swaggerJsdoc(swaggerOptions);
app.use('/api-docs', swaggerUi.serve, swaggerUi.setup(swaggerDocs));

app.get('/', (req, res) =&gt; {
  res.send('Benvingut a la botiga en l&iacute;nia!');
});

app.listen(port, () =&gt; {
  console.log(`Servidor escoltant a http://localhost:${port}`);
});</pre></div><div class='content'></div><h2>Documentació de les rutes amb Swagger</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gcm91dGVzL3Byb2R1Y3RzLmpzCmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7CmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7CgpsZXQgcHJvZHVjdHMgPSBbXTsKCi8qKgogKiBAc3dhZ2dlcgogKiAvcHJvZHVjdHM6CiAqICAgZ2V0OgogKiAgICAgc3VtbWFyeTogT2J0ZW5pciB0b3RzIGVscyBwcm9kdWN0ZXMKICogICAgIHJlc3BvbnNlczoKICogICAgICAgMjAwOgogKiAgICAgICAgIGRlc2NyaXB0aW9uOiBMbGlzdGEgZGUgcHJvZHVjdGVzCiAqLwpyb3V0ZXIuZ2V0KCcvJywgKHJlcSwgcmVzKSA9PiB7CiAgcmVzLnN0YXR1cygyMDApLmpzb24ocHJvZHVjdHMpOwp9KTsKCi8qKgogKiBAc3dhZ2dlcgogKiAvcHJvZHVjdHM6CiAqICAgcG9zdDoKICogICAgIHN1bW1hcnk6IENyZWFyIHVuIG5vdSBwcm9kdWN0ZQogKiAgICAgcGFyYW1ldGVyczoKICogICAgICAgLSBpbjogYm9keQogKiAgICAgICAgIG5hbWU6IHByb2R1Y3QKICogICAgICAgICBkZXNjcmlwdGlvbjogRWwgcHJvZHVjdGUgYSBjcmVhcgogKiAgICAgICAgIHNjaGVtYToKICogICAgICAgICAgIHR5cGU6IG9iamVjdAogKiAgICAgICAgICAgcmVxdWlyZWQ6CiAqICAgICAgICAgICAgIC0gbmFtZQogKiAgICAgICAgICAgICAtIHByaWNlCiAqICAgICAgICAgICBwcm9wZXJ0aWVzOgogKiAgICAgICAgICAgICBuYW1lOgogKiAgICAgICAgICAgICAgIHR5cGU6IHN0cmluZwogKiAgICAgICAgICAgICBwcmljZToKICogICAgICAgICAgICAgICB0eXBlOiBudW1iZXIKICogICAgIHJlc3BvbnNlczoKICogICAgICAgMjAxOgogKiAgICAgICAgIGRlc2NyaXB0aW9uOiBQcm9kdWN0ZSBjcmVhdCBjb3JyZWN0YW1lbnQKICovCnJvdXRlci5wb3N0KCcvJywgKHJlcSwgcmVzKSA9PiB7CiAgY29uc3QgcHJvZHVjdCA9IHJlcS5ib2R5OwogIHByb2R1Y3RzLnB1c2gocHJvZHVjdCk7CiAgcmVzLnN0YXR1cygyMDEpLmpzb24ocHJvZHVjdCk7Cn0pOwoKLyoqCiAqIEBzd2FnZ2VyCiAqIC9wcm9kdWN0cy97aWR9OgogKiAgIGdldDoKICogICAgIHN1bW1hcnk6IE9idGVuaXIgdW4gcHJvZHVjdGUgZXNwZWPDrWZpYwogKiAgICAgcGFyYW1ldGVyczoKICogICAgICAgLSBpbjogcGF0aAogKiAgICAgICAgIG5hbWU6IGlkCiAqICAgICAgICAgcmVxdWlyZWQ6IHRydWUKICogICAgICAgICBkZXNjcmlwdGlvbjogSUQgZGVsIHByb2R1Y3RlCiAqICAgICAgICAgc2NoZW1hOgogKiAgICAgICAgICAgdHlwZTogaW50ZWdlcgogKiAgICAgcmVzcG9uc2VzOgogKiAgICAgICAyMDA6CiAqICAgICAgICAgZGVzY3JpcHRpb246IFByb2R1Y3RlIHRyb2JhdAogKiAgICAgICA0MDQ6CiAqICAgICAgICAgZGVzY3JpcHRpb246IFByb2R1Y3RlIG5vIHRyb2JhdAogKi8Kcm91dGVyLmdldCgnLzppZCcsIChyZXEsIHJlcykgPT4gewogIGNvbnN0IHByb2R1Y3QgPSBwcm9kdWN0cy5maW5kKHAgPT4gcC5pZCA9PT0gcGFyc2VJbnQocmVxLnBhcmFtcy5pZCkpOwogIGlmICghcHJvZHVjdCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKCdQcm9kdWN0ZSBubyB0cm9iYXQnKTsKICByZXMuc3RhdHVzKDIwMCkuanNvbihwcm9kdWN0KTsKfSk7CgovKioKICogQHN3YWdnZXIKICogL3Byb2R1Y3RzL3tpZH06CiAqICAgcHV0OgogKiAgICAgc3VtbWFyeTogQWN0dWFsaXR6YXIgdW4gcHJvZHVjdGUKICogICAgIHBhcmFtZXRlcnM6CiAqICAgICAgIC0gaW46IHBhdGgKICogICAgICAgICBuYW1lOiBpZAogKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAqICAgICAgICAgZGVzY3JpcHRpb246IElEIGRlbCBwcm9kdWN0ZQogKiAgICAgICAgIHNjaGVtYToKICogICAgICAgICAgIHR5cGU6IGludGVnZXIKICogICAgICAgLSBpbjogYm9keQogKiAgICAgICAgIG5hbWU6IHByb2R1Y3QKICogICAgICAgICBkZXNjcmlwdGlvbjogRWwgcHJvZHVjdGUgYSBhY3R1YWxpdHphcgogKiAgICAgICAgIHNjaGVtYToKICogICAgICAgICAgIHR5cGU6IG9iamVjdAogKiAgICAgICAgICAgcHJvcGVydGllczoKICogICAgICAgICAgICAgbmFtZToKICogICAgICAgICAgICAgICB0eXBlOiBzdHJpbmcKICogICAgICAgICAgICAgcHJpY2U6CiAqICAgICAgICAgICAgICAgdHlwZTogbnVtYmVyCiAqICAgICByZXNwb25zZXM6CiAqICAgICAgIDIwMDoKICogICAgICAgICBkZXNjcmlwdGlvbjogUHJvZHVjdGUgYWN0dWFsaXR6YXQgY29ycmVjdGFtZW50CiAqICAgICAgIDQwNDoKICogICAgICAgICBkZXNjcmlwdGlvbjogUHJvZHVjdGUgbm8gdHJvYmF0CiAqLwpyb3V0ZXIucHV0KCcvOmlkJywgKHJlcSwgcmVzKSA9PiB7CiAgY29uc3QgcHJvZHVjdCA9IHByb2R1Y3RzLmZpbmQocCA9PiBwLmlkID09PSBwYXJzZUludChyZXEucGFyYW1zLmlkKSk7CiAgaWYgKCFwcm9kdWN0KSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoJ1Byb2R1Y3RlIG5vIHRyb2JhdCcpOwoKICBwcm9kdWN0Lm5hbWUgPSByZXEuYm9keS5uYW1lOwogIHByb2R1Y3QucHJpY2UgPSByZXEuYm9keS5wcmljZTsKICByZXMuc3RhdHVzKDIwMCkuanNvbihwcm9kdWN0KTsKfSk7CgovKioKICogQHN3YWdnZXIKICogL3Byb2R1Y3RzL3tpZH06CiAqICAgZGVsZXRlOgogKiAgICAgc3VtbWFyeTogRWxpbWluYXIgdW4gcHJvZHVjdGUKICogICAgIHBhcmFtZXRlcnM6CiAqICAgICAgIC0gaW46IHBhdGgKICogICAgICAgICBuYW1lOiBpZAogKiAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAqICAgICAgICAgZGVzY3JpcHRpb246IElEIGRlbCBwcm9kdWN0ZQogKiAgICAgICAgIHNjaGVtYToKICogICAgICAgICAgIHR5cGU6IGludGVnZXIKICogICAgIHJlc3BvbnNlczoKICogICAgICAgMjAwOgogKiAgICAgICAgIGRlc2NyaXB0aW9uOiBQcm9kdWN0ZSBlbGltaW5hdCBjb3JyZWN0YW1lbnQKICogICAgICAgNDA0OgogKiAgICAgICAgIGRlc2NyaXB0aW9uOiBQcm9kdWN0ZSBubyB0cm9iYXQKICovCnJvdXRlci5kZWxldGUoJy86aWQnLCAocmVxLCByZXMpID0+IHsKICBjb25zdCBwcm9kdWN0SW5kZXggPSBwcm9kdWN0cy5maW5kSW5kZXgocCA9PiBwLmlkID09PSBwYXJzZUludChyZXEucGFyYW1zLmlkKSk7CiAgaWYgKHByb2R1Y3RJbmRleCA9PT0gLTEpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCgnUHJvZHVjdGUgbm8gdHJvYmF0Jyk7CgogIHByb2R1Y3RzLnNwbGljZShwcm9kdWN0SW5kZXgsIDEpOwogIHJlcy5zdGF0dXMoMjAwKS5zZW5kKCdQcm9kdWN0ZSBlbGltaW5hdCcpOwp9KTsKCm1vZHVsZS5leHBvcnRzID0gcm91dGVyOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// routes/products.js
const express = require('express');
const router = express.Router();

let products = [];

/**
 * @swagger
 * /products:
 *   get:
 *     summary: Obtenir tots els productes
 *     responses:
 *       200:
 *         description: Llista de productes
 */
router.get('/', (req, res) =&gt; {
  res.status(200).json(products);
});

/**
 * @swagger
 * /products:
 *   post:
 *     summary: Crear un nou producte
 *     parameters:
 *       - in: body
 *         name: product
 *         description: El producte a crear
 *         schema:
 *           type: object
 *           required:
 *             - name
 *             - price
 *           properties:
 *             name:
 *               type: string
 *             price:
 *               type: number
 *     responses:
 *       201:
 *         description: Producte creat correctament
 */
router.post('/', (req, res) =&gt; {
  const product = req.body;
  products.push(product);
  res.status(201).json(product);
});

/**
 * @swagger
 * /products/{id}:
 *   get:
 *     summary: Obtenir un producte espec&iacute;fic
 *     parameters:
 *       - in: path
 *         name: id
 *         required: true
 *         description: ID del producte
 *         schema:
 *           type: integer
 *     responses:
 *       200:
 *         description: Producte trobat
 *       404:
 *         description: Producte no trobat
 */
router.get('/:id', (req, res) =&gt; {
  const product = products.find(p =&gt; p.id === parseInt(req.params.id));
  if (!product) return res.status(404).send('Producte no trobat');
  res.status(200).json(product);
});

/**
 * @swagger
 * /products/{id}:
 *   put:
 *     summary: Actualitzar un producte
 *     parameters:
 *       - in: path
 *         name: id
 *         required: true
 *         description: ID del producte
 *         schema:
 *           type: integer
 *       - in: body
 *         name: product
 *         description: El producte a actualitzar
 *         schema:
 *           type: object
 *           properties:
 *             name:
 *               type: string
 *             price:
 *               type: number
 *     responses:
 *       200:
 *         description: Producte actualitzat correctament
 *       404:
 *         description: Producte no trobat
 */
router.put('/:id', (req, res) =&gt; {
  const product = products.find(p =&gt; p.id === parseInt(req.params.id));
  if (!product) return res.status(404).send('Producte no trobat');

  product.name = req.body.name;
  product.price = req.body.price;
  res.status(200).json(product);
});

/**
 * @swagger
 * /products/{id}:
 *   delete:
 *     summary: Eliminar un producte
 *     parameters:
 *       - in: path
 *         name: id
 *         required: true
 *         description: ID del producte
 *         schema:
 *           type: integer
 *     responses:
 *       200:
 *         description: Producte eliminat correctament
 *       404:
 *         description: Producte no trobat
 */
router.delete('/:id', (req, res) =&gt; {
  const productIndex = products.findIndex(p =&gt; p.id === parseInt(req.params.id));
  if (productIndex === -1) return res.status(404).send('Producte no trobat');

  products.splice(productIndex, 1);
  res.status(200).send('Producte eliminat');
});

module.exports = router;</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>En aquest cas d'estudi, hem dissenyat i desenvolupat una API RESTful per a una botiga en línia, aplicant els principis i pràctiques apreses en els mòduls anteriors. Hem creat una arquitectura clara, implementat les rutes necessàries, provat l'API amb Postman i documentat l'API amb Swagger. Aquest projecte ens ha permès veure com es poden aplicar els conceptes teòrics en un escenari pràctic i real.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-integracion-continua-despliegue' title="Integració contínua i desplegament">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-caso-estudio-api-red-social' title="Cas d'estudi: API d'una xarxa social">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
