<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestió d'Errors en Operacions d'Arxius</title>

    <link rel="alternate" href="https://campusempresa.com/mod/c/09-04-error-handling-in-file-operations" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/c/09-04-error-handling-in-file-operations" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/c/09-04-error-handling-in-file-operations" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/c/09-04-error-handling-in-file-operations" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/c/09-04-error-handling-in-file-operations" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-03-file-positioning' title="Posicionament d'Arxius">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Gestió d'Errors en Operacions d'Arxius</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='10-01-preprocessor-directives' title="Directives del Preprocessador">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com gestionar errors durant les operacions d'arxius en C. La gestió d'errors és una part crucial de la programació robusta, ja que permet que el programa reaccioni adequadament a situacions inesperades, com ara la impossibilitat d'obrir un arxiu o errors de lectura/escriptura.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ol>
<li><strong>Funcions de Gestió d'Arxius</strong>: Les funcions de la biblioteca estàndard de C per a la gestió d'arxius, com <code>fopen</code>, <code>fclose</code>, <code>fread</code>, <code>fwrite</code>, etc., retornen valors que indiquen si l'operació ha tingut èxit o ha fallat.</li>
<li><strong>errno</strong>: Una variable global que emmagatzema el codi d'error de l'última operació fallida.</li>
<li><strong>perror()</strong>: Una funció que imprimeix un missatge d'error a la sortida estàndard d'errors.</li>
<li><strong>strerror()</strong>: Una funció que retorna una cadena de text que descriu l'error corresponent a un codi d'error.</li>
</ol>
</div><h1>Exemples Pràctics</h1>
<div class='content'></div><h2>Exemple 1: Comprovar si un Arxiu s'Obre Correctament</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxlcnJuby5oPgojaW5jbHVkZSA8c3RyaW5nLmg+CgppbnQgbWFpbigpIHsKICAgIEZJTEUgKmZpbGUgPSBmb3BlbigiZXhhbXBsZS50eHQiLCAiciIpOwogICAgaWYgKGZpbGUgPT0gTlVMTCkgewogICAgICAgIHBlcnJvcigiRXJyb3Igb3BlbmluZyBmaWxlIik7CiAgICAgICAgcmV0dXJuIDE7CiAgICB9CiAgICAvLyBPcGVyYWNpb25zIGFtYiBsJ2FyeGl1CiAgICBmY2xvc2UoZmlsZSk7CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;errno.h&gt;
#include &lt;string.h&gt;

int main() {
    FILE *file = fopen(&quot;example.txt&quot;, &quot;r&quot;);
    if (file == NULL) {
        perror(&quot;Error opening file&quot;);
        return 1;
    }
    // Operacions amb l'arxiu
    fclose(file);
    return 0;
}</pre></div><div class='content'><p><strong>Explicació</strong>:</p>
<ul>
<li><code>fopen</code> intenta obrir l'arxiu &quot;example.txt&quot; en mode lectura.</li>
<li>Si <code>fopen</code> retorna <code>NULL</code>, significa que l'arxiu no s'ha pogut obrir.</li>
<li><code>perror</code> imprimeix un missatge d'error que inclou una descripció de l'error basat en <code>errno</code>.</li>
</ul>
</div><h2>Exemple 2: Gestió d'Errors en Lectura d'Arxius</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxlcnJuby5oPgojaW5jbHVkZSA8c3RyaW5nLmg+CgppbnQgbWFpbigpIHsKICAgIEZJTEUgKmZpbGUgPSBmb3BlbigiZXhhbXBsZS50eHQiLCAiciIpOwogICAgaWYgKGZpbGUgPT0gTlVMTCkgewogICAgICAgIHBlcnJvcigiRXJyb3Igb3BlbmluZyBmaWxlIik7CiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgY2hhciBidWZmZXJbMjU2XTsKICAgIGlmIChmZ2V0cyhidWZmZXIsIHNpemVvZihidWZmZXIpLCBmaWxlKSA9PSBOVUxMKSB7CiAgICAgICAgaWYgKGZlb2YoZmlsZSkpIHsKICAgICAgICAgICAgcHJpbnRmKCJFbmQgb2YgZmlsZSByZWFjaGVkLlxuIik7CiAgICAgICAgfSBlbHNlIGlmIChmZXJyb3IoZmlsZSkpIHsKICAgICAgICAgICAgcGVycm9yKCJFcnJvciByZWFkaW5nIGZpbGUiKTsKICAgICAgICB9CiAgICAgICAgZmNsb3NlKGZpbGUpOwogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgIHByaW50ZigiUmVhZCBsaW5lOiAlc1xuIiwgYnVmZmVyKTsKICAgIGZjbG9zZShmaWxlKTsKICAgIHJldHVybiAwOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;errno.h&gt;
#include &lt;string.h&gt;

int main() {
    FILE *file = fopen(&quot;example.txt&quot;, &quot;r&quot;);
    if (file == NULL) {
        perror(&quot;Error opening file&quot;);
        return 1;
    }

    char buffer[256];
    if (fgets(buffer, sizeof(buffer), file) == NULL) {
        if (feof(file)) {
            printf(&quot;End of file reached.\n&quot;);
        } else if (ferror(file)) {
            perror(&quot;Error reading file&quot;);
        }
        fclose(file);
        return 1;
    }

    printf(&quot;Read line: %s\n&quot;, buffer);
    fclose(file);
    return 0;
}</pre></div><div class='content'><p><strong>Explicació</strong>:</p>
<ul>
<li><code>fgets</code> llegeix una línia de l'arxiu.</li>
<li>Si <code>fgets</code> retorna <code>NULL</code>, es comprova si s'ha arribat al final de l'arxiu amb <code>feof</code> o si hi ha hagut un error de lectura amb <code>ferror</code>.</li>
<li><code>perror</code> s'utilitza per imprimir un missatge d'error si hi ha hagut un error de lectura.</li>
</ul>
</div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Comprovar l'Existència d'un Arxiu</h2>
<div class='content'><p>Escriu un programa que comprovi si un arxiu especificat per l'usuari existeix. Si l'arxiu no existeix, el programa ha de mostrar un missatge d'error adequat.</p>
<p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxlcnJuby5oPgojaW5jbHVkZSA8c3RyaW5nLmg+CgppbnQgbWFpbigpIHsKICAgIGNoYXIgZmlsZW5hbWVbMjU2XTsKICAgIHByaW50ZigiRW50ZXIgdGhlIGZpbGVuYW1lOiAiKTsKICAgIHNjYW5mKCIlcyIsIGZpbGVuYW1lKTsKCiAgICBGSUxFICpmaWxlID0gZm9wZW4oZmlsZW5hbWUsICJyIik7CiAgICBpZiAoZmlsZSA9PSBOVUxMKSB7CiAgICAgICAgcGVycm9yKCJFcnJvciBvcGVuaW5nIGZpbGUiKTsKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAgICBwcmludGYoIkZpbGUgb3BlbmVkIHN1Y2Nlc3NmdWxseS5cbiIpOwogICAgZmNsb3NlKGZpbGUpOwogICAgcmV0dXJuIDA7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;errno.h&gt;
#include &lt;string.h&gt;

int main() {
    char filename[256];
    printf(&quot;Enter the filename: &quot;);
    scanf(&quot;%s&quot;, filename);

    FILE *file = fopen(filename, &quot;r&quot;);
    if (file == NULL) {
        perror(&quot;Error opening file&quot;);
        return 1;
    }

    printf(&quot;File opened successfully.\n&quot;);
    fclose(file);
    return 0;
}</pre></div><div class='content'></div><h2>Exercici 2: Escriure en un Arxiu i Gestionar Errors</h2>
<div class='content'><p>Escriu un programa que intenti escriure en un arxiu. Si l'operació d'escriptura falla, el programa ha de mostrar un missatge d'error adequat.</p>
<p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxlcnJuby5oPgojaW5jbHVkZSA8c3RyaW5nLmg+CgppbnQgbWFpbigpIHsKICAgIEZJTEUgKmZpbGUgPSBmb3Blbigib3V0cHV0LnR4dCIsICJ3Iik7CiAgICBpZiAoZmlsZSA9PSBOVUxMKSB7CiAgICAgICAgcGVycm9yKCJFcnJvciBvcGVuaW5nIGZpbGUgZm9yIHdyaXRpbmciKTsKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAgICBjb25zdCBjaGFyICp0ZXh0ID0gIkhlbGxvLCBXb3JsZCEiOwogICAgaWYgKGZwdXRzKHRleHQsIGZpbGUpID09IEVPRikgewogICAgICAgIHBlcnJvcigiRXJyb3Igd3JpdGluZyB0byBmaWxlIik7CiAgICAgICAgZmNsb3NlKGZpbGUpOwogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgIHByaW50ZigiVGV4dCB3cml0dGVuIHN1Y2Nlc3NmdWxseS5cbiIpOwogICAgZmNsb3NlKGZpbGUpOwogICAgcmV0dXJuIDA7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;errno.h&gt;
#include &lt;string.h&gt;

int main() {
    FILE *file = fopen(&quot;output.txt&quot;, &quot;w&quot;);
    if (file == NULL) {
        perror(&quot;Error opening file for writing&quot;);
        return 1;
    }

    const char *text = &quot;Hello, World!&quot;;
    if (fputs(text, file) == EOF) {
        perror(&quot;Error writing to file&quot;);
        fclose(file);
        return 1;
    }

    printf(&quot;Text written successfully.\n&quot;);
    fclose(file);
    return 0;
}</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>En aquesta secció, hem après com gestionar errors durant les operacions d'arxius en C. Hem vist com utilitzar funcions com <code>perror</code> i <code>strerror</code> per proporcionar informació detallada sobre els errors. També hem practicat amb exemples i exercicis per reforçar aquests conceptes. La gestió d'errors és essencial per escriure programes robustos i fiables, i és una habilitat clau per a qualsevol programador.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-03-file-positioning' title="Posicionament d'Arxius">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='10-01-preprocessor-directives' title="Directives del Preprocessador">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
