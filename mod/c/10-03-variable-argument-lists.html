<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Llistes d'Arguments Variables</title>

    <link rel="alternate" href="https://campusempresa.com/mod/c/10-03-variable-argument-lists" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/c/10-03-variable-argument-lists" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/c/10-03-variable-argument-lists" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/c/10-03-variable-argument-lists" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/c/10-03-variable-argument-lists" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='10-02-command-line-arguments' title="Arguments de Línia de Comandes">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Llistes d'Arguments Variables</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='10-04-multithreading-in-c' title="Multifil en C">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest tema, explorarem com gestionar funcions que poden rebre un nombre variable d'arguments. Aquestes funcions són molt útils quan no sabem per endavant quants arguments es passaran a la funció. Un exemple clàssic d'aquesta funcionalitat és la funció <code>printf</code> de la biblioteca estàndard de C.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ol>
<li><strong>Llistes d'Arguments Variables</strong>: Permeten que una funció accepti un nombre indeterminat d'arguments.</li>
<li><strong>Biblioteca <code>stdarg.h</code></strong>: Proporciona macros per gestionar arguments variables.</li>
<li><strong>Macros Principals</strong>:
<ul>
<li><code>va_list</code>: Tipus de dades per emmagatzemar la llista d'arguments.</li>
<li><code>va_start</code>: Inicialitza la llista d'arguments.</li>
<li><code>va_arg</code>: Recupera un argument de la llista.</li>
<li><code>va_end</code>: Finalitza l'ús de la llista d'arguments.</li>
</ul>
</li>
</ol>
</div><h1>Exemples Pràctics</h1>
<div class='content'></div><h2>Exemple 1: Funció que Suma Nombres</h2>
<div class='content'><p>A continuació, es mostra una funció que suma un nombre variable d'arguments:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCmludCBzdW1hKGludCBudW1fYXJncywgLi4uKSB7CiAgICB2YV9saXN0IGFyZ3M7CiAgICB2YV9zdGFydChhcmdzLCBudW1fYXJncyk7CgogICAgaW50IHN1bSA9IDA7CiAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bV9hcmdzOyBpKyspIHsKICAgICAgICBzdW0gKz0gdmFfYXJnKGFyZ3MsIGludCk7CiAgICB9CgogICAgdmFfZW5kKGFyZ3MpOwogICAgcmV0dXJuIHN1bTsKfQoKaW50IG1haW4oKSB7CiAgICBwcmludGYoIlN1bWEgZGUgMSwgMiwgMzogJWRcbiIsIHN1bWEoMywgMSwgMiwgMykpOwogICAgcHJpbnRmKCJTdW1hIGRlIDQsIDUsIDYsIDc6ICVkXG4iLCBzdW1hKDQsIDQsIDUsIDYsIDcpKTsKICAgIHJldHVybiAwOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;

int suma(int num_args, ...) {
    va_list args;
    va_start(args, num_args);

    int sum = 0;
    for (int i = 0; i &lt; num_args; i++) {
        sum += va_arg(args, int);
    }

    va_end(args);
    return sum;
}

int main() {
    printf(&quot;Suma de 1, 2, 3: %d\n&quot;, suma(3, 1, 2, 3));
    printf(&quot;Suma de 4, 5, 6, 7: %d\n&quot;, suma(4, 4, 5, 6, 7));
    return 0;
}</pre></div><div class='content'><h4>Explicació del Codi</h4>
<ol>
<li><strong>Declaració de la Funció</strong>: <code>int suma(int num_args, ...)</code> indica que la funció accepta un nombre variable d'arguments després del primer argument <code>num_args</code>.</li>
<li><strong>Inicialització de la Llista d'Arguments</strong>: <code>va_list args; va_start(args, num_args);</code> inicialitza la llista d'arguments.</li>
<li><strong>Recuperació d'Arguments</strong>: <code>sum += va_arg(args, int);</code> recupera cada argument de la llista.</li>
<li><strong>Finalització de la Llista d'Arguments</strong>: <code>va_end(args);</code> finalitza l'ús de la llista d'arguments.</li>
</ol>
</div><h2>Exemple 2: Funció que Troba el Màxim</h2>
<div class='content'><p>A continuació, es mostra una funció que troba el màxim d'un nombre variable d'arguments:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCmludCBtYXgoaW50IG51bV9hcmdzLCAuLi4pIHsKICAgIHZhX2xpc3QgYXJnczsKICAgIHZhX3N0YXJ0KGFyZ3MsIG51bV9hcmdzKTsKCiAgICBpbnQgbWF4X3ZhbCA9IHZhX2FyZyhhcmdzLCBpbnQpOwogICAgZm9yIChpbnQgaSA9IDE7IGkgPCBudW1fYXJnczsgaSsrKSB7CiAgICAgICAgaW50IHZhbCA9IHZhX2FyZyhhcmdzLCBpbnQpOwogICAgICAgIGlmICh2YWwgPiBtYXhfdmFsKSB7CiAgICAgICAgICAgIG1heF92YWwgPSB2YWw7CiAgICAgICAgfQogICAgfQoKICAgIHZhX2VuZChhcmdzKTsKICAgIHJldHVybiBtYXhfdmFsOwp9CgppbnQgbWFpbigpIHsKICAgIHByaW50ZigiTcOgeGltIGRlIDEsIDIsIDM6ICVkXG4iLCBtYXgoMywgMSwgMiwgMykpOwogICAgcHJpbnRmKCJNw6B4aW0gZGUgNCwgNSwgNiwgNzogJWRcbiIsIG1heCg0LCA0LCA1LCA2LCA3KSk7CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;

int max(int num_args, ...) {
    va_list args;
    va_start(args, num_args);

    int max_val = va_arg(args, int);
    for (int i = 1; i &lt; num_args; i++) {
        int val = va_arg(args, int);
        if (val &gt; max_val) {
            max_val = val;
        }
    }

    va_end(args);
    return max_val;
}

int main() {
    printf(&quot;M&agrave;xim de 1, 2, 3: %d\n&quot;, max(3, 1, 2, 3));
    printf(&quot;M&agrave;xim de 4, 5, 6, 7: %d\n&quot;, max(4, 4, 5, 6, 7));
    return 0;
}</pre></div><div class='content'><h4>Explicació del Codi</h4>
<ol>
<li><strong>Inicialització de la Llista d'Arguments</strong>: <code>va_list args; va_start(args, num_args);</code> inicialitza la llista d'arguments.</li>
<li><strong>Recuperació del Primer Argument</strong>: <code>int max_val = va_arg(args, int);</code> recupera el primer argument.</li>
<li><strong>Comparació d'Arguments</strong>: <code>if (val &gt; max_val) { max_val = val; }</code> compara cada argument amb el màxim actual.</li>
<li><strong>Finalització de la Llista d'Arguments</strong>: <code>va_end(args);</code> finalitza l'ús de la llista d'arguments.</li>
</ol>
</div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Funció que Calcula la Mitjana</h2>
<div class='content'><p>Escriu una funció que calculi la mitjana d'un nombre variable d'arguments.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCmRvdWJsZSBtaXRqYW5hKGludCBudW1fYXJncywgLi4uKSB7CiAgICAvLyBJbXBsZW1lbnRhIGxhIGZ1bmNpw7MgYXF1w60KfQoKaW50IG1haW4oKSB7CiAgICBwcmludGYoIk1pdGphbmEgZGUgMSwgMiwgMzogJS4yZlxuIiwgbWl0amFuYSgzLCAxLCAyLCAzKSk7CiAgICBwcmludGYoIk1pdGphbmEgZGUgNCwgNSwgNiwgNzogJS4yZlxuIiwgbWl0amFuYSg0LCA0LCA1LCA2LCA3KSk7CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;

double mitjana(int num_args, ...) {
    // Implementa la funci&oacute; aqu&iacute;
}

int main() {
    printf(&quot;Mitjana de 1, 2, 3: %.2f\n&quot;, mitjana(3, 1, 2, 3));
    printf(&quot;Mitjana de 4, 5, 6, 7: %.2f\n&quot;, mitjana(4, 4, 5, 6, 7));
    return 0;
}</pre></div><div class='content'><h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCmRvdWJsZSBtaXRqYW5hKGludCBudW1fYXJncywgLi4uKSB7CiAgICB2YV9saXN0IGFyZ3M7CiAgICB2YV9zdGFydChhcmdzLCBudW1fYXJncyk7CgogICAgZG91YmxlIHN1bSA9IDA7CiAgICBmb3IgKGludCBpID0gMDsgaSA8IG51bV9hcmdzOyBpKyspIHsKICAgICAgICBzdW0gKz0gdmFfYXJnKGFyZ3MsIGludCk7CiAgICB9CgogICAgdmFfZW5kKGFyZ3MpOwogICAgcmV0dXJuIHN1bSAvIG51bV9hcmdzOwp9CgppbnQgbWFpbigpIHsKICAgIHByaW50ZigiTWl0amFuYSBkZSAxLCAyLCAzOiAlLjJmXG4iLCBtaXRqYW5hKDMsIDEsIDIsIDMpKTsKICAgIHByaW50ZigiTWl0amFuYSBkZSA0LCA1LCA2LCA3OiAlLjJmXG4iLCBtaXRqYW5hKDQsIDQsIDUsIDYsIDcpKTsKICAgIHJldHVybiAwOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;

double mitjana(int num_args, ...) {
    va_list args;
    va_start(args, num_args);

    double sum = 0;
    for (int i = 0; i &lt; num_args; i++) {
        sum += va_arg(args, int);
    }

    va_end(args);
    return sum / num_args;
}

int main() {
    printf(&quot;Mitjana de 1, 2, 3: %.2f\n&quot;, mitjana(3, 1, 2, 3));
    printf(&quot;Mitjana de 4, 5, 6, 7: %.2f\n&quot;, mitjana(4, 4, 5, 6, 7));
    return 0;
}</pre></div><div class='content'></div><h2>Exercici 2: Funció que Troba el Mínim</h2>
<div class='content'><p>Escriu una funció que trobi el mínim d'un nombre variable d'arguments.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCmludCBtaW4oaW50IG51bV9hcmdzLCAuLi4pIHsKICAgIC8vIEltcGxlbWVudGEgbGEgZnVuY2nDsyBhcXXDrQp9CgppbnQgbWFpbigpIHsKICAgIHByaW50ZigiTcOtbmltIGRlIDEsIDIsIDM6ICVkXG4iLCBtaW4oMywgMSwgMiwgMykpOwogICAgcHJpbnRmKCJNw61uaW0gZGUgNCwgNSwgNiwgNzogJWRcbiIsIG1pbig0LCA0LCA1LCA2LCA3KSk7CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;

int min(int num_args, ...) {
    // Implementa la funci&oacute; aqu&iacute;
}

int main() {
    printf(&quot;M&iacute;nim de 1, 2, 3: %d\n&quot;, min(3, 1, 2, 3));
    printf(&quot;M&iacute;nim de 4, 5, 6, 7: %d\n&quot;, min(4, 4, 5, 6, 7));
    return 0;
}</pre></div><div class='content'><h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRhcmcuaD4KCmludCBtaW4oaW50IG51bV9hcmdzLCAuLi4pIHsKICAgIHZhX2xpc3QgYXJnczsKICAgIHZhX3N0YXJ0KGFyZ3MsIG51bV9hcmdzKTsKCiAgICBpbnQgbWluX3ZhbCA9IHZhX2FyZyhhcmdzLCBpbnQpOwogICAgZm9yIChpbnQgaSA9IDE7IGkgPCBudW1fYXJnczsgaSsrKSB7CiAgICAgICAgaW50IHZhbCA9IHZhX2FyZyhhcmdzLCBpbnQpOwogICAgICAgIGlmICh2YWwgPCBtaW5fdmFsKSB7CiAgICAgICAgICAgIG1pbl92YWwgPSB2YWw7CiAgICAgICAgfQogICAgfQoKICAgIHZhX2VuZChhcmdzKTsKICAgIHJldHVybiBtaW5fdmFsOwp9CgppbnQgbWFpbigpIHsKICAgIHByaW50ZigiTcOtbmltIGRlIDEsIDIsIDM6ICVkXG4iLCBtaW4oMywgMSwgMiwgMykpOwogICAgcHJpbnRmKCJNw61uaW0gZGUgNCwgNSwgNiwgNzogJWRcbiIsIG1pbig0LCA0LCA1LCA2LCA3KSk7CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;

int min(int num_args, ...) {
    va_list args;
    va_start(args, num_args);

    int min_val = va_arg(args, int);
    for (int i = 1; i &lt; num_args; i++) {
        int val = va_arg(args, int);
        if (val &lt; min_val) {
            min_val = val;
        }
    }

    va_end(args);
    return min_val;
}

int main() {
    printf(&quot;M&iacute;nim de 1, 2, 3: %d\n&quot;, min(3, 1, 2, 3));
    printf(&quot;M&iacute;nim de 4, 5, 6, 7: %d\n&quot;, min(4, 4, 5, 6, 7));
    return 0;
}</pre></div><div class='content'></div><h1>Errors Comuns i Consells</h1>
<div class='content'><ol>
<li><strong>No oblidar <code>va_end</code></strong>: Sempre assegura't de cridar <code>va_end</code> per evitar fuites de memòria.</li>
<li><strong>Tipus d'Arguments</strong>: Assegura't que els tipus d'arguments passats a <code>va_arg</code> coincideixin amb els tipus reals dels arguments.</li>
<li><strong>Nombre d'Arguments</strong>: Assegura't que el nombre d'arguments passat a la funció coincideixi amb el nombre real d'arguments.</li>
</ol>
</div><h1>Resum</h1>
<div class='content'><p>En aquest tema, hem après com gestionar funcions amb un nombre variable d'arguments utilitzant la biblioteca <code>stdarg.h</code>. Hem vist exemples pràctics i hem practicat amb exercicis per reforçar els conceptes apresos. Ara estàs preparat per utilitzar llistes d'arguments variables en les teves pròpies funcions en C.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='10-02-command-line-arguments' title="Arguments de Línia de Comandes">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='10-04-multithreading-in-c' title="Multifil en C">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
