<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unions en C</title>

    <link rel="alternate" href="https://campusempresa.com/mod/c/07-03-unions-in-c" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/c/07-03-unions-in-c" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/c/07-03-unions-in-c" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/c/07-03-unions-in-c" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/c/07-03-unions-in-c" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-02-nested-structures' title="Estructures Imbricades">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Unions en C</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-04-bit-fields' title="Camps de Bits">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Les unions en C són una característica poderosa que permet emmagatzemar diferents tipus de dades en la mateixa ubicació de memòria. A diferència de les estructures, on cada membre té la seva pròpia ubicació de memòria, en una unió tots els membres comparteixen la mateixa ubicació de memòria. Això significa que només un membre de la unió pot contenir un valor en qualsevol moment.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ol>
<li><strong>Definició d'Unió</strong>: Una unió es defineix de manera similar a una estructura, però amb la paraula clau <code>union</code>.</li>
<li><strong>Compartició de Memòria</strong>: Tots els membres d'una unió comparteixen la mateixa ubicació de memòria.</li>
<li><strong>Ús de Memòria</strong>: La mida d'una unió és igual a la mida del seu membre més gran.</li>
<li><strong>Accés als Membres</strong>: Només un membre de la unió pot ser utilitzat a la vegada.</li>
</ol>
</div><h1>Definició d'una Unió</h1>
<div class='content'><p>La sintaxi per definir una unió és similar a la d'una estructura:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dW5pb24gRXhlbXBsZSB7CiAgICBpbnQgaTsKICAgIGZsb2F0IGY7CiAgICBjaGFyIGM7Cn07"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>union Exemple {
    int i;
    float f;
    char c;
};</pre></div><div class='content'><p>En aquest exemple, <code>Exemple</code> és una unió que pot contenir un <code>int</code>, un <code>float</code> o un <code>char</code>, però només un d'aquests a la vegada.</p>
</div><h1>Declaració i Inicialització</h1>
<div class='content'><p>Per declarar una variable d'una unió i inicialitzar-la, es fa de la següent manera:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dW5pb24gRXhlbXBsZSBlOwplLmkgPSAxMDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>union Exemple e;
e.i = 10;</pre></div><div class='content'><p>En aquest cas, <code>e</code> és una variable de la unió <code>Exemple</code> i s'ha inicialitzat el membre <code>i</code> amb el valor <code>10</code>.</p>
</div><h1>Accés als Membres</h1>
<div class='content'><p>Només un membre de la unió pot contenir un valor a la vegada. Si s'assigna un valor a un altre membre, el valor anterior es perdrà.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+Cgp1bmlvbiBFeGVtcGxlIHsKICAgIGludCBpOwogICAgZmxvYXQgZjsKICAgIGNoYXIgYzsKfTsKCmludCBtYWluKCkgewogICAgdW5pb24gRXhlbXBsZSBlOwogICAgZS5pID0gMTA7CiAgICBwcmludGYoImUuaSA9ICVkXG4iLCBlLmkpOwogICAgCiAgICBlLmYgPSAyMjAuNTsKICAgIHByaW50ZigiZS5mID0gJWZcbiIsIGUuZik7CiAgICAKICAgIGUuYyA9ICdBJzsKICAgIHByaW50ZigiZS5jID0gJWNcbiIsIGUuYyk7CiAgICAKICAgIHJldHVybiAwOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

union Exemple {
    int i;
    float f;
    char c;
};

int main() {
    union Exemple e;
    e.i = 10;
    printf(&quot;e.i = %d\n&quot;, e.i);
    
    e.f = 220.5;
    printf(&quot;e.f = %f\n&quot;, e.f);
    
    e.c = 'A';
    printf(&quot;e.c = %c\n&quot;, e.c);
    
    return 0;
}</pre></div><div class='content'><p>Sortida esperada:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZS5pID0gMTAKZS5mID0gMjIwLjUwMDAwMAplLmMgPSBB"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>e.i = 10
e.f = 220.500000
e.c = A</pre></div><div class='content'></div><h1>Comparació amb Estructures</h1>
<div class='content'><table>
<thead>
<tr>
<th>Característica</th>
<th>Estructura</th>
<th>Unió</th>
</tr>
</thead>
<tbody>
<tr>
<td>Memòria</td>
<td>Cada membre té la seva pròpia ubicació de memòria.</td>
<td>Tots els membres comparteixen la mateixa ubicació de memòria.</td>
</tr>
<tr>
<td>Mida</td>
<td>La suma de les mides de tots els membres.</td>
<td>La mida del membre més gran.</td>
</tr>
<tr>
<td>Ús</td>
<td>Pot contenir valors en tots els membres simultàniament.</td>
<td>Només un membre pot contenir un valor a la vegada.</td>
</tr>
</tbody>
</table>
</div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Definició i Ús d'Una Unió</h2>
<div class='content'><p><strong>Descripció</strong>: Defineix una unió que pugui contenir un <code>int</code>, un <code>float</code> i un <code>char</code>. Declara una variable d'aquesta unió i assigna valors a cada membre, imprimint el valor després de cada assignació.</p>
<p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+Cgp1bmlvbiBFeGVtcGxlIHsKICAgIGludCBpOwogICAgZmxvYXQgZjsKICAgIGNoYXIgYzsKfTsKCmludCBtYWluKCkgewogICAgdW5pb24gRXhlbXBsZSBlOwogICAgCiAgICBlLmkgPSAxMDsKICAgIHByaW50ZigiZS5pID0gJWRcbiIsIGUuaSk7CiAgICAKICAgIGUuZiA9IDIyMC41OwogICAgcHJpbnRmKCJlLmYgPSAlZlxuIiwgZS5mKTsKICAgIAogICAgZS5jID0gJ0EnOwogICAgcHJpbnRmKCJlLmMgPSAlY1xuIiwgZS5jKTsKICAgIAogICAgcmV0dXJuIDA7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

union Exemple {
    int i;
    float f;
    char c;
};

int main() {
    union Exemple e;
    
    e.i = 10;
    printf(&quot;e.i = %d\n&quot;, e.i);
    
    e.f = 220.5;
    printf(&quot;e.f = %f\n&quot;, e.f);
    
    e.c = 'A';
    printf(&quot;e.c = %c\n&quot;, e.c);
    
    return 0;
}</pre></div><div class='content'></div><h2>Exercici 2: Comparació de Mida</h2>
<div class='content'><p><strong>Descripció</strong>: Defineix una estructura i una unió amb els mateixos membres (<code>int</code>, <code>float</code>, <code>char</code>). Imprimeix la mida de l'estructura i la unió utilitzant l'operador <code>sizeof</code>.</p>
<p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CgpzdHJ1Y3QgRXN0cnVjdHVyYSB7CiAgICBpbnQgaTsKICAgIGZsb2F0IGY7CiAgICBjaGFyIGM7Cn07Cgp1bmlvbiBVbmlvIHsKICAgIGludCBpOwogICAgZmxvYXQgZjsKICAgIGNoYXIgYzsKfTsKCmludCBtYWluKCkgewogICAgcHJpbnRmKCJNaWRhIGRlIGwnZXN0cnVjdHVyYTogJWx1IGJ5dGVzXG4iLCBzaXplb2Yoc3RydWN0IEVzdHJ1Y3R1cmEpKTsKICAgIHByaW50ZigiTWlkYSBkZSBsYSB1bmnDszogJWx1IGJ5dGVzXG4iLCBzaXplb2YodW5pb24gVW5pbykpOwogICAgCiAgICByZXR1cm4gMDsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

struct Estructura {
    int i;
    float f;
    char c;
};

union Unio {
    int i;
    float f;
    char c;
};

int main() {
    printf(&quot;Mida de l'estructura: %lu bytes\n&quot;, sizeof(struct Estructura));
    printf(&quot;Mida de la uni&oacute;: %lu bytes\n&quot;, sizeof(union Unio));
    
    return 0;
}</pre></div><div class='content'><p>Sortida esperada (pot variar segons el sistema):</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TWlkYSBkZSBsJ2VzdHJ1Y3R1cmE6IDEyIGJ5dGVzCk1pZGEgZGUgbGEgdW5pw7M6IDQgYnl0ZXM="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Mida de l'estructura: 12 bytes
Mida de la uni&oacute;: 4 bytes</pre></div><div class='content'></div><h1>Errors Comuns</h1>
<div class='content'><ol>
<li><strong>Accés a Membres No Inicialitzats</strong>: Intentar accedir a un membre de la unió que no ha estat inicialitzat pot donar resultats inesperats.</li>
<li><strong>Confusió amb Estructures</strong>: Recorda que, a diferència de les estructures, només un membre de la unió pot contenir un valor a la vegada.</li>
</ol>
</div><h1>Consells Addicionals</h1>
<div class='content'><ul>
<li>Utilitza unions quan necessitis emmagatzemar diferents tipus de dades en la mateixa ubicació de memòria per estalviar espai.</li>
<li>Sigues conscient que només un membre de la unió pot ser utilitzat a la vegada, i l'assignació d'un nou valor a un membre sobreescriurà el valor anterior.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Les unions són una eina útil en C per gestionar diferents tipus de dades en la mateixa ubicació de memòria. Tot i que poden ser confuses al principi, la seva comprensió i ús adequat poden ajudar a optimitzar l'ús de memòria en els teus programes. En el següent tema, explorarem els camps de bits, una altra característica avançada de C que permet una gestió més precisa de la memòria.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-02-nested-structures' title="Estructures Imbricades">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-04-bit-fields' title="Camps de Bits">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
