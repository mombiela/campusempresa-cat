<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abast i Durada de les Variables</title>

    <link rel="alternate" href="https://campusempresa.com/mod/fortran/04-04-scope-lifetime-variables" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/fortran/04-04-scope-lifetime-variables" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/fortran/04-04-scope-lifetime-variables" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/fortran/04-04-scope-lifetime-variables" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/fortran/04-04-scope-lifetime-variables" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
<br>
			<cite>Construint la societat d'avui i del demà</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Llenguatges de Programació</a>
				 					<a href="/categ/frameworks">Frameworks i Llibreries</a>
				 					<a href="/categ/tech-tools">Eines Tècniques</a>
				 					<a href="/categ/foundations">Fonaments Teòrics</a>
				 					<a href="/categ/soft-skills">Habilitats Socials</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-03-passing-arguments' title="Passant Arguments">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Abast i Durada de les Variables</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-01-derived-types' title="Tipus Derivats">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, explorarem dos conceptes fonamentals en la programació: l'abast (scope) i la durada (lifetime) de les variables. Aquests conceptes determinen on i quan es poden utilitzar les variables en un programa Fortran.</p>
</div><h1><ol>
<li>Abast de les Variables</li>
</ol>
</h1>
<div class='content'><p>L'abast d'una variable es refereix a la regió del codi on la variable és accessible. En Fortran, l'abast de les variables es pot dividir en dos tipus principals:</p>
</div><h2><p>1.1. Abast Local</p>
</h2>
<div class='content'><p>Les variables locals són aquelles que es declaren dins d'un bloc de codi, com ara una subrutina, una funció o un bloc DO. Aquestes variables només són accessibles dins del bloc on es declaren.</p>
<p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvZ3JhbSBtYWluCiAgICBpbXBsaWNpdCBub25lCiAgICBjYWxsIGV4YW1wbGVTdWJyb3V0aW5lKCkKY29udGFpbnMKICAgIHN1YnJvdXRpbmUgZXhhbXBsZVN1YnJvdXRpbmUoKQogICAgICAgIGludGVnZXIgOjogbG9jYWxWYXIKICAgICAgICBsb2NhbFZhciA9IDEwCiAgICAgICAgcHJpbnQgKiwgIlZhbG9yIGRlIGxvY2FsVmFyIGRpbnMgZGUgbGEgc3VicnV0aW5hOiAiLCBsb2NhbFZhcgogICAgZW5kIHN1YnJvdXRpbmUgZXhhbXBsZVN1YnJvdXRpbmUKZW5kIHByb2dyYW0gbWFpbg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>program main
    implicit none
    call exampleSubroutine()
contains
    subroutine exampleSubroutine()
        integer :: localVar
        localVar = 10
        print *, &quot;Valor de localVar dins de la subrutina: &quot;, localVar
    end subroutine exampleSubroutine
end program main</pre></div><div class='content'><p>En aquest exemple, <code>localVar</code> és una variable local de la subrutina <code>exampleSubroutine</code> i no és accessible fora d'aquesta subrutina.</p>
</div><h2><p>1.2. Abast Global</p>
</h2>
<div class='content'><p>Les variables globals són aquelles que es declaren fora de qualsevol subrutina o funció, normalment al començament del programa o en un mòdul. Aquestes variables són accessibles des de qualsevol part del programa.</p>
<p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlIGdsb2JhbE1vZHVsZQogICAgaW1wbGljaXQgbm9uZQogICAgaW50ZWdlciA6OiBnbG9iYWxWYXIKZW5kIG1vZHVsZSBnbG9iYWxNb2R1bGUKCnByb2dyYW0gbWFpbgogICAgdXNlIGdsb2JhbE1vZHVsZQogICAgaW1wbGljaXQgbm9uZQogICAgZ2xvYmFsVmFyID0gMjAKICAgIGNhbGwgZXhhbXBsZVN1YnJvdXRpbmUoKQogICAgcHJpbnQgKiwgIlZhbG9yIGRlIGdsb2JhbFZhciBlbiBlbCBwcm9ncmFtYSBwcmluY2lwYWw6ICIsIGdsb2JhbFZhcgpjb250YWlucwogICAgc3Vicm91dGluZSBleGFtcGxlU3Vicm91dGluZSgpCiAgICAgICAgdXNlIGdsb2JhbE1vZHVsZQogICAgICAgIHByaW50ICosICJWYWxvciBkZSBnbG9iYWxWYXIgZGlucyBkZSBsYSBzdWJydXRpbmE6ICIsIGdsb2JhbFZhcgogICAgZW5kIHN1YnJvdXRpbmUgZXhhbXBsZVN1YnJvdXRpbmUKZW5kIHByb2dyYW0gbWFpbg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module globalModule
    implicit none
    integer :: globalVar
end module globalModule

program main
    use globalModule
    implicit none
    globalVar = 20
    call exampleSubroutine()
    print *, &quot;Valor de globalVar en el programa principal: &quot;, globalVar
contains
    subroutine exampleSubroutine()
        use globalModule
        print *, &quot;Valor de globalVar dins de la subrutina: &quot;, globalVar
    end subroutine exampleSubroutine
end program main</pre></div><div class='content'><p>En aquest exemple, <code>globalVar</code> és una variable global declarada en el mòdul <code>globalModule</code> i és accessible tant des del programa principal com des de la subrutina <code>exampleSubroutine</code>.</p>
</div><h1><ol start="2">
<li>Durada de les Variables</li>
</ol>
</h1>
<div class='content'><p>La durada d'una variable es refereix al temps durant el qual la variable existeix en la memòria durant l'execució del programa. En Fortran, la durada de les variables es pot dividir en dos tipus principals:</p>
</div><h2><p>2.1. Durada Automàtica</p>
</h2>
<div class='content'><p>Les variables automàtiques són aquelles que es creen quan s'entra en el bloc de codi on es declaren i es destrueixen quan se surt d'aquest bloc. Aquest és el comportament per defecte de les variables locals.</p>
<p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvZ3JhbSBtYWluCiAgICBpbXBsaWNpdCBub25lCiAgICBjYWxsIGV4YW1wbGVTdWJyb3V0aW5lKCkKY29udGFpbnMKICAgIHN1YnJvdXRpbmUgZXhhbXBsZVN1YnJvdXRpbmUoKQogICAgICAgIGludGVnZXIgOjogbG9jYWxWYXIKICAgICAgICBsb2NhbFZhciA9IDEwCiAgICAgICAgcHJpbnQgKiwgIlZhbG9yIGRlIGxvY2FsVmFyIGRpbnMgZGUgbGEgc3VicnV0aW5hOiAiLCBsb2NhbFZhcgogICAgZW5kIHN1YnJvdXRpbmUgZXhhbXBsZVN1YnJvdXRpbmUKZW5kIHByb2dyYW0gbWFpbg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>program main
    implicit none
    call exampleSubroutine()
contains
    subroutine exampleSubroutine()
        integer :: localVar
        localVar = 10
        print *, &quot;Valor de localVar dins de la subrutina: &quot;, localVar
    end subroutine exampleSubroutine
end program main</pre></div><div class='content'><p>En aquest exemple, <code>localVar</code> es crea quan s'entra en la subrutina <code>exampleSubroutine</code> i es destrueix quan se surt d'aquesta subrutina.</p>
</div><h2><p>2.2. Durada Estàtica</p>
</h2>
<div class='content'><p>Les variables estàtiques són aquelles que es mantenen en la memòria durant tota l'execució del programa. Aquestes variables es poden declarar utilitzant l'atribut <code>save</code>.</p>
<p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvZ3JhbSBtYWluCiAgICBpbXBsaWNpdCBub25lCiAgICBjYWxsIGV4YW1wbGVTdWJyb3V0aW5lKCkKICAgIGNhbGwgZXhhbXBsZVN1YnJvdXRpbmUoKQpjb250YWlucwogICAgc3Vicm91dGluZSBleGFtcGxlU3Vicm91dGluZSgpCiAgICAgICAgaW50ZWdlciwgc2F2ZSA6OiBzdGF0aWNWYXIgPSAwCiAgICAgICAgc3RhdGljVmFyID0gc3RhdGljVmFyICsgMQogICAgICAgIHByaW50ICosICJWYWxvciBkZSBzdGF0aWNWYXIgZGlucyBkZSBsYSBzdWJydXRpbmE6ICIsIHN0YXRpY1ZhcgogICAgZW5kIHN1YnJvdXRpbmUgZXhhbXBsZVN1YnJvdXRpbmUKZW5kIHByb2dyYW0gbWFpbg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>program main
    implicit none
    call exampleSubroutine()
    call exampleSubroutine()
contains
    subroutine exampleSubroutine()
        integer, save :: staticVar = 0
        staticVar = staticVar + 1
        print *, &quot;Valor de staticVar dins de la subrutina: &quot;, staticVar
    end subroutine exampleSubroutine
end program main</pre></div><div class='content'><p>En aquest exemple, <code>staticVar</code> és una variable estàtica que conserva el seu valor entre les crides a la subrutina <code>exampleSubroutine</code>.</p>
</div><h1><p>Exercicis Pràctics</p>
</h1>
<div class='content'></div><h2><p>Exercici 1: Variables Locals i Globals</p>
</h2>
<div class='content'><ol>
<li>Declara una variable global <code>globalCounter</code> en un mòdul.</li>
<li>Escriu una subrutina que incrementi <code>globalCounter</code> i imprimeixi el seu valor.</li>
<li>Crida la subrutina diverses vegades des del programa principal i observa el valor de <code>globalCounter</code>.</li>
</ol>
<p><strong>Solució:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlIGNvdW50ZXJNb2R1bGUKICAgIGltcGxpY2l0IG5vbmUKICAgIGludGVnZXIgOjogZ2xvYmFsQ291bnRlciA9IDAKZW5kIG1vZHVsZSBjb3VudGVyTW9kdWxlCgpwcm9ncmFtIG1haW4KICAgIHVzZSBjb3VudGVyTW9kdWxlCiAgICBpbXBsaWNpdCBub25lCiAgICBjYWxsIGluY3JlbWVudENvdW50ZXIoKQogICAgY2FsbCBpbmNyZW1lbnRDb3VudGVyKCkKICAgIGNhbGwgaW5jcmVtZW50Q291bnRlcigpCmNvbnRhaW5zCiAgICBzdWJyb3V0aW5lIGluY3JlbWVudENvdW50ZXIoKQogICAgICAgIHVzZSBjb3VudGVyTW9kdWxlCiAgICAgICAgZ2xvYmFsQ291bnRlciA9IGdsb2JhbENvdW50ZXIgKyAxCiAgICAgICAgcHJpbnQgKiwgIlZhbG9yIGRlIGdsb2JhbENvdW50ZXI6ICIsIGdsb2JhbENvdW50ZXIKICAgIGVuZCBzdWJyb3V0aW5lIGluY3JlbWVudENvdW50ZXIKZW5kIHByb2dyYW0gbWFpbg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module counterModule
    implicit none
    integer :: globalCounter = 0
end module counterModule

program main
    use counterModule
    implicit none
    call incrementCounter()
    call incrementCounter()
    call incrementCounter()
contains
    subroutine incrementCounter()
        use counterModule
        globalCounter = globalCounter + 1
        print *, &quot;Valor de globalCounter: &quot;, globalCounter
    end subroutine incrementCounter
end program main</pre></div><div class='content'></div><h2><p>Exercici 2: Variables Estàtiques</p>
</h2>
<div class='content'><ol>
<li>Escriu una subrutina que utilitzi una variable estàtica per comptar el nombre de vegades que s'ha cridat.</li>
<li>Crida la subrutina diverses vegades des del programa principal i imprimeix el nombre de crides.</li>
</ol>
<p><strong>Solució:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvZ3JhbSBtYWluCiAgICBpbXBsaWNpdCBub25lCiAgICBjYWxsIGNvdW50Q2FsbHMoKQogICAgY2FsbCBjb3VudENhbGxzKCkKICAgIGNhbGwgY291bnRDYWxscygpCmNvbnRhaW5zCiAgICBzdWJyb3V0aW5lIGNvdW50Q2FsbHMoKQogICAgICAgIGludGVnZXIsIHNhdmUgOjogY2FsbENvdW50ID0gMAogICAgICAgIGNhbGxDb3VudCA9IGNhbGxDb3VudCArIDEKICAgICAgICBwcmludCAqLCAiTm9tYnJlIGRlIGNyaWRlcyBhIGxhIHN1YnJ1dGluYTogIiwgY2FsbENvdW50CiAgICBlbmQgc3Vicm91dGluZSBjb3VudENhbGxzCmVuZCBwcm9ncmFtIG1haW4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>program main
    implicit none
    call countCalls()
    call countCalls()
    call countCalls()
contains
    subroutine countCalls()
        integer, save :: callCount = 0
        callCount = callCount + 1
        print *, &quot;Nombre de crides a la subrutina: &quot;, callCount
    end subroutine countCalls
end program main</pre></div><div class='content'></div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>En aquesta secció, hem après sobre l'abast i la durada de les variables en Fortran. Hem vist com les variables locals i globals tenen diferents àmbits d'aplicació i com les variables automàtiques i estàtiques tenen diferents durades de vida. Aquests conceptes són fonamentals per escriure codi Fortran eficient i mantenible. En la propera secció, explorarem les estructures de dades avançades en Fortran.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-03-passing-arguments' title="Passant Arguments">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-01-derived-types' title="Tipus Derivats">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
