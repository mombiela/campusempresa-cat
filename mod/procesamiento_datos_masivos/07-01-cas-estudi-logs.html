<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cas d'Estudi 1: Anàlisi de Logs</title>

    <link rel="alternate" href="https://campusempresa.com/mod/procesamiento_datos_masivos/07-01-caso-estudio-logs" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/procesamiento_datos_masivos/07-01-cas-estudi-logs" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/procesamiento_datos_masivos/07-01-case-study-logs" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/procesamiento_datos_masivos/07-01-case-study-logs" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/procesamiento_datos_masivos/07-01-caso-estudio-logs" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Contingut del curs</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competències tècniques</a>
				<a href="/all/conocimientos">Coneixements</a>
				<a href="/all/soft_skills">Competències socials</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-03-visualitzacio-dades' title="Visualització de Dades">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Cas d'Estudi 1: Anàlisi de Logs</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-02-cas-estudi-recomendacions' title="Cas d'Estudi 2: Recomendacions en Temps Real">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introducció</p>
</h1>
<div class='content'><p>En aquest cas d'estudi, explorarem com utilitzar tècniques i tecnologies de processament de dades massives per analitzar logs de servidors. Els logs són registres detallats de les activitats que es duen a terme en un sistema informàtic, i la seva anàlisi pot proporcionar informació valuosa sobre el rendiment del sistema, la detecció d'errors i la seguretat.</p>
</div><h1><p>Objectius</p>
</h1>
<div class='content'><ol>
<li><strong>Comprendre la importància dels logs en la gestió de sistemes.</strong></li>
<li><strong>Aprendre a emmagatzemar i processar grans volums de logs.</strong></li>
<li><strong>Aplicar tècniques d'anàlisi per extreure informació útil dels logs.</strong></li>
<li><strong>Utilitzar eines específiques per a l'anàlisi de logs.</strong></li>
</ol>
</div><h1><p>Passos per a l'Anàlisi de Logs</p>
</h1>
<div class='content'></div><h2><ol>
<li>Recollida de Logs</li>
</ol>
</h2>
<div class='content'><h4>Fonts de Logs</h4>
<ul>
<li><strong>Servidors Web:</strong> Apache, Nginx</li>
<li><strong>Servidors d'Aplicacions:</strong> Tomcat, JBoss</li>
<li><strong>Sistemes Operatius:</strong> Linux, Windows</li>
<li><strong>Dispositius de Xarxa:</strong> Routers, Firewalls</li>
</ul>
<h4>Eines de Recollida</h4>
<ul>
<li><strong>Fluentd:</strong> Plataforma de recollida de dades de logs.</li>
<li><strong>Logstash:</strong> Component de la suite ELK (Elasticsearch, Logstash, Kibana) per a la recollida i processament de logs.</li>
<li><strong>Filebeat:</strong> Agent lleuger per enviar logs a Logstash o Elasticsearch.</li>
</ul>
</div><h2><ol start="2">
<li>Emmagatzematge de Logs</li>
</ol>
</h2>
<div class='content'><h4>Sistemes d'Emmagatzematge</h4>
<ul>
<li><strong>HDFS (Hadoop Distributed File System):</strong> Per a l'emmagatzematge distribuït de grans volums de dades.</li>
<li><strong>Elasticsearch:</strong> Motor de cerca i anàlisi distribuït, ideal per a l'indexació i cerca de logs.</li>
<li><strong>Amazon S3:</strong> Emmagatzematge al núvol escalable.</li>
</ul>
</div><h2><ol start="3">
<li>Processament de Logs</li>
</ol>
</h2>
<div class='content'><h4>Tècniques de Processament</h4>
<ul>
<li><strong>MapReduce:</strong> Model de programació per al processament de grans volums de dades en paral·lel.</li>
<li><strong>Apache Spark:</strong> Plataforma de processament de dades massives en temps real.</li>
<li><strong>Apache Flink:</strong> Motor de processament de fluxos de dades en temps real.</li>
</ul>
<h4>Exemple de Codi amb Apache Spark</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBweXNwYXJrLnNxbCBpbXBvcnQgU3BhcmtTZXNzaW9uCgojIENyZWFyIHVuYSBzZXNzacOzIGRlIFNwYXJrCnNwYXJrID0gU3BhcmtTZXNzaW9uLmJ1aWxkZXIuYXBwTmFtZSgiTG9nIEFuYWx5c2lzIikuZ2V0T3JDcmVhdGUoKQoKIyBDYXJyZWdhciBlbHMgbG9ncyBkZXMgZGUgSERGUwpsb2dzX2RmID0gc3BhcmsucmVhZC50ZXh0KCJoZGZzOi8vL3BhdGgvdG8vbG9ncyIpCgojIEZpbHRyYXIgbGVzIGzDrW5pZXMgcXVlIGNvbnRlbmVuIGVycm9ycwplcnJvcnNfZGYgPSBsb2dzX2RmLmZpbHRlcihsb2dzX2RmLnZhbHVlLmNvbnRhaW5zKCJFUlJPUiIpKQoKIyBDb21wdGFyIGVsIG5vbWJyZSBkJ2Vycm9ycwplcnJvcl9jb3VudCA9IGVycm9yc19kZi5jb3VudCgpCgpwcmludChmIk5vbWJyZSB0b3RhbCBkJ2Vycm9yczoge2Vycm9yX2NvdW50fSIpCgojIE1vc3RyYXIgbGVzIHByaW1lcmVzIDEwIGzDrW5pZXMgYW1iIGVycm9ycwplcnJvcnNfZGYuc2hvdygxMCwgdHJ1bmNhdGU9RmFsc2UpCgojIFRhbmNhciBsYSBzZXNzacOzIGRlIFNwYXJrCnNwYXJrLnN0b3AoKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from pyspark.sql import SparkSession

# Crear una sessi&oacute; de Spark
spark = SparkSession.builder.appName(&quot;Log Analysis&quot;).getOrCreate()

# Carregar els logs des de HDFS
logs_df = spark.read.text(&quot;hdfs:///path/to/logs&quot;)

# Filtrar les l&iacute;nies que contenen errors
errors_df = logs_df.filter(logs_df.value.contains(&quot;ERROR&quot;))

# Comptar el nombre d'errors
error_count = errors_df.count()

print(f&quot;Nombre total d'errors: {error_count}&quot;)

# Mostrar les primeres 10 l&iacute;nies amb errors
errors_df.show(10, truncate=False)

# Tancar la sessi&oacute; de Spark
spark.stop()</pre></div><div class='content'></div><h2><ol start="4">
<li>Anàlisi de Logs</li>
</ol>
</h2>
<div class='content'><h4>Mètriques Clau</h4>
<ul>
<li><strong>Nombre de Peticions per Segon:</strong> Mesura del tràfic del servidor.</li>
<li><strong>Temps de Resposta:</strong> Indicador del rendiment del sistema.</li>
<li><strong>Errors per Tipus:</strong> Classificació dels errors per tipus (404, 500, etc.).</li>
<li><strong>IP's Suspitoses:</strong> Identificació de possibles intents de seguretat.</li>
</ul>
<h4>Eines d'Anàlisi</h4>
<ul>
<li><strong>Kibana:</strong> Eina de visualització de dades per a Elasticsearch.</li>
<li><strong>Grafana:</strong> Plataforma de monitoratge i visualització de dades.</li>
<li><strong>Splunk:</strong> Plataforma per a la cerca, monitoratge i anàlisi de dades de logs.</li>
</ul>
</div><h2><ol start="5">
<li>Visualització de Dades</li>
</ol>
</h2>
<div class='content'><h4>Creació de Dashboards</h4>
<ul>
<li><strong>Kibana:</strong> Crear visualitzacions i dashboards interactius per monitoritzar els logs en temps real.</li>
<li><strong>Grafana:</strong> Configurar panells de control per visualitzar mètriques clau.</li>
</ul>
<h4>Exemple de Dashboard en Kibana</h4>
<ol>
<li><strong>Importar Dades:</strong> Configurar un índex en Kibana per als logs emmagatzemats en Elasticsearch.</li>
<li><strong>Crear Visualitzacions:</strong> Utilitzar les eines de visualització de Kibana per crear gràfics de línies, barres, pastissos, etc.</li>
<li><strong>Configurar Dashboards:</strong> Agrupar les visualitzacions en un dashboard per a una monitorització centralitzada.</li>
</ol>
</div><h1><p>Exercici Pràctic</p>
</h1>
<div class='content'></div><h2><p>Descripció</p>
</h2>
<div class='content'><p>Crea un pipeline de processament de logs utilitzant Apache Spark i visualitza els resultats en Kibana.</p>
</div><h2><p>Passos</p>
</h2>
<div class='content'><ol>
<li><strong>Recollir Logs:</strong> Utilitza Filebeat per enviar logs a Elasticsearch.</li>
<li><strong>Processar Logs:</strong> Escriu un script en PySpark per filtrar i comptar errors en els logs.</li>
<li><strong>Visualitzar Dades:</strong> Configura un dashboard en Kibana per mostrar el nombre d'errors per hora.</li>
</ol>
</div><h2><p>Solució</p>
</h2>
<div class='content'><h4>Recollida de Logs amb Filebeat</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmlsZWJlYXQuaW5wdXRzOgotIHR5cGU6IGxvZwogIHBhdGhzOgogICAgLSAvdmFyL2xvZy8qLmxvZwoKb3V0cHV0LmVsYXN0aWNzZWFyY2g6CiAgaG9zdHM6IFsibG9jYWxob3N0OjkyMDAiXQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>filebeat.inputs:
- type: log
  paths:
    - /var/log/*.log

output.elasticsearch:
  hosts: [&quot;localhost:9200&quot;]</pre></div><div class='content'><h4>Processament de Logs amb PySpark</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBweXNwYXJrLnNxbCBpbXBvcnQgU3BhcmtTZXNzaW9uCgpzcGFyayA9IFNwYXJrU2Vzc2lvbi5idWlsZGVyLmFwcE5hbWUoIkxvZyBBbmFseXNpcyIpLmdldE9yQ3JlYXRlKCkKbG9nc19kZiA9IHNwYXJrLnJlYWQudGV4dCgiaGRmczovLy9wYXRoL3RvL2xvZ3MiKQplcnJvcnNfZGYgPSBsb2dzX2RmLmZpbHRlcihsb2dzX2RmLnZhbHVlLmNvbnRhaW5zKCJFUlJPUiIpKQplcnJvcl9jb3VudCA9IGVycm9yc19kZi5jb3VudCgpCnByaW50KGYiTm9tYnJlIHRvdGFsIGQnZXJyb3JzOiB7ZXJyb3JfY291bnR9IikKZXJyb3JzX2RmLnNob3coMTAsIHRydW5jYXRlPUZhbHNlKQpzcGFyay5zdG9wKCk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from pyspark.sql import SparkSession

spark = SparkSession.builder.appName(&quot;Log Analysis&quot;).getOrCreate()
logs_df = spark.read.text(&quot;hdfs:///path/to/logs&quot;)
errors_df = logs_df.filter(logs_df.value.contains(&quot;ERROR&quot;))
error_count = errors_df.count()
print(f&quot;Nombre total d'errors: {error_count}&quot;)
errors_df.show(10, truncate=False)
spark.stop()</pre></div><div class='content'><h4>Visualització en Kibana</h4>
<ol>
<li><strong>Configurar Índex:</strong> Crear un índex en Kibana per als logs.</li>
<li><strong>Crear Visualitzacions:</strong> Crear gràfics per mostrar el nombre d'errors per hora.</li>
<li><strong>Configurar Dashboard:</strong> Agrupar les visualitzacions en un dashboard.</li>
</ol>
</div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>L'anàlisi de logs és una tasca essencial per a la gestió i monitoratge de sistemes informàtics. Utilitzant tecnologies com Apache Spark i eines de visualització com Kibana, podem extreure informació valuosa dels logs per millorar el rendiment, detectar errors i garantir la seguretat del sistema. Aquest cas d'estudi ha proporcionat una guia pràctica per implementar un pipeline d'anàlisi de logs, des de la recollida fins a la visualització de dades.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-03-visualitzacio-dades' title="Visualització de Dades">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-02-cas-estudi-recomendacions' title="Cas d'Estudi 2: Recomendacions en Temps Real">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
