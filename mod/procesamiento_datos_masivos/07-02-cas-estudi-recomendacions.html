<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cas d'Estudi 2: Recomendacions en Temps Real</title>

    <link rel="alternate" href="https://campusempresa.com/mod/procesamiento_datos_masivos/07-02-caso-estudio-recomendaciones" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/procesamiento_datos_masivos/07-02-cas-estudi-recomendacions" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/procesamiento_datos_masivos/07-02-case-study-recommendations" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/procesamiento_datos_masivos/07-02-case-study-recommendations" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/procesamiento_datos_masivos/07-02-caso-estudio-recomendaciones" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-01-cas-estudi-logs' title="Cas d'Estudi 1: Anàlisi de Logs">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Cas d'Estudi 2: Recomendacions en Temps Real</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-03-cas-estudi-xarxes-socials' title="Cas d'Estudi 3: Monitoratge de Xarxes Socials">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció</h1>
<div class='content'><p>En aquest cas d'estudi, explorarem com implementar un sistema de recomanacions en temps real utilitzant tecnologies de processament de dades massives. Els sistemes de recomanacions són essencials en moltes aplicacions modernes, com ara comerç electrònic, plataformes de streaming i xarxes socials, per personalitzar l'experiència de l'usuari i augmentar la seva satisfacció.</p>
</div><h1>Objectius</h1>
<div class='content'><ol>
<li><strong>Comprendre els components clau d'un sistema de recomanacions en temps real.</strong></li>
<li><strong>Aprendre a utilitzar Apache Kafka per a la ingesta de dades en temps real.</strong></li>
<li><strong>Implementar un model de recomanacions utilitzant Apache Spark.</strong></li>
<li><strong>Visualitzar les recomanacions generades en temps real.</strong></li>
</ol>
</div><h1>Components Clau d'un Sistema de Recomendacions en Temps Real</h1>
<div class='content'><ol>
<li>
<p><strong>Ingesta de Dades:</strong></p>
<ul>
<li>Utilització de sistemes de missatgeria com Apache Kafka per a la ingesta de dades en temps real.</li>
<li>Captura de dades d'interacció de l'usuari, com ara clics, visualitzacions i compres.</li>
</ul>
</li>
<li>
<p><strong>Processament de Dades:</strong></p>
<ul>
<li>Utilització d'Apache Spark per processar les dades en temps real.</li>
<li>Aplicació d'algoritmes de recomanació, com ara filtratge col·laboratiu o models basats en contingut.</li>
</ul>
</li>
<li>
<p><strong>Emmagatzematge de Resultats:</strong></p>
<ul>
<li>Emmagatzematge de les recomanacions generades en una base de dades NoSQL per a un accés ràpid.</li>
</ul>
</li>
<li>
<p><strong>Visualització i Servei de Recomendacions:</strong></p>
<ul>
<li>Utilització d'APIs per servir les recomanacions als usuaris en temps real.</li>
<li>Visualització de les recomanacions en una interfície d'usuari.</li>
</ul>
</li>
</ol>
</div><h1>Implementació Pràctica</h1>
<div class='content'></div><h2>1. Ingesta de Dades amb Apache Kafka</h2>
<div class='content'><p>Apache Kafka és una plataforma de missatgeria distribuïda que permet la ingesta de grans volums de dades en temps real. A continuació, es mostra un exemple de com configurar un productor i un consumidor de Kafka.</p>
<h4>Configuració del Productor de Kafka</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBrYWZrYSBpbXBvcnQgS2Fma2FQcm9kdWNlcgppbXBvcnQganNvbgoKcHJvZHVjZXIgPSBLYWZrYVByb2R1Y2VyKGJvb3RzdHJhcF9zZXJ2ZXJzPSdsb2NhbGhvc3Q6OTA5MicsCiAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZV9zZXJpYWxpemVyPWxhbWJkYSB2OiBqc29uLmR1bXBzKHYpLmVuY29kZSgndXRmLTgnKSkKCmRlZiBzZW5kX21lc3NhZ2UodG9waWMsIG1lc3NhZ2UpOgogICAgcHJvZHVjZXIuc2VuZCh0b3BpYywgbWVzc2FnZSkKICAgIHByb2R1Y2VyLmZsdXNoKCkKCiMgRXhlbXBsZSBkJ2VudmlhbWVudCBkZSBkYWRlcyBkJ2ludGVyYWNjacOzIGRlIGwndXN1YXJpCnVzZXJfaW50ZXJhY3Rpb24gPSB7J3VzZXJfaWQnOiAnMTIzJywgJ2l0ZW1faWQnOiAnNDU2JywgJ2FjdGlvbic6ICdjbGljayd9CnNlbmRfbWVzc2FnZSgndXNlcl9pbnRlcmFjdGlvbnMnLCB1c2VyX2ludGVyYWN0aW9uKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from kafka import KafkaProducer
import json

producer = KafkaProducer(bootstrap_servers='localhost:9092',
                         value_serializer=lambda v: json.dumps(v).encode('utf-8'))

def send_message(topic, message):
    producer.send(topic, message)
    producer.flush()

# Exemple d'enviament de dades d'interacci&oacute; de l'usuari
user_interaction = {'user_id': '123', 'item_id': '456', 'action': 'click'}
send_message('user_interactions', user_interaction)</pre></div><div class='content'><h4>Configuració del Consumidor de Kafka</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBrYWZrYSBpbXBvcnQgS2Fma2FDb25zdW1lcgoKY29uc3VtZXIgPSBLYWZrYUNvbnN1bWVyKCd1c2VyX2ludGVyYWN0aW9ucycsCiAgICAgICAgICAgICAgICAgICAgICAgICBib290c3RyYXBfc2VydmVycz0nbG9jYWxob3N0OjkwOTInLAogICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVfZGVzZXJpYWxpemVyPWxhbWJkYSB4OiBqc29uLmxvYWRzKHguZGVjb2RlKCd1dGYtOCcpKSkKCmZvciBtZXNzYWdlIGluIGNvbnN1bWVyOgogICAgcHJpbnQobWVzc2FnZS52YWx1ZSk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from kafka import KafkaConsumer

consumer = KafkaConsumer('user_interactions',
                         bootstrap_servers='localhost:9092',
                         value_deserializer=lambda x: json.loads(x.decode('utf-8')))

for message in consumer:
    print(message.value)</pre></div><div class='content'></div><h2>2. Processament de Dades amb Apache Spark</h2>
<div class='content'><p>Apache Spark és una eina potent per al processament de dades en temps real. Utilitzarem Spark Streaming per processar les dades d'interacció dels usuaris i generar recomanacions.</p>
<h4>Configuració de Spark Streaming</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBweXNwYXJrLnNxbCBpbXBvcnQgU3BhcmtTZXNzaW9uCmZyb20gcHlzcGFyay5zdHJlYW1pbmcgaW1wb3J0IFN0cmVhbWluZ0NvbnRleHQKZnJvbSBweXNwYXJrLnN0cmVhbWluZy5rYWZrYSBpbXBvcnQgS2Fma2FVdGlscwoKc3BhcmsgPSBTcGFya1Nlc3Npb24uYnVpbGRlci5hcHBOYW1lKCJSZWFsVGltZVJlY29tbWVuZGF0aW9ucyIpLmdldE9yQ3JlYXRlKCkKc3NjID0gU3RyZWFtaW5nQ29udGV4dChzcGFyay5zcGFya0NvbnRleHQsIDEwKQoKa2Fma2Ffc3RyZWFtID0gS2Fma2FVdGlscy5jcmVhdGVEaXJlY3RTdHJlYW0oc3NjLCBbJ3VzZXJfaW50ZXJhY3Rpb25zJ10sIHsnbWV0YWRhdGEuYnJva2VyLmxpc3QnOiAnbG9jYWxob3N0OjkwOTInfSkKCmRlZiBwcm9jZXNzX3JkZChyZGQpOgogICAgaWYgbm90IHJkZC5pc0VtcHR5KCk6CiAgICAgICAgZGYgPSBzcGFyay5yZWFkLmpzb24ocmRkKQogICAgICAgICMgQXBsaWNhciBhbGdvcml0bWVzIGRlIHJlY29tYW5hY2nDsyBhcXXDrQogICAgICAgIGRmLnNob3coKQoKa2Fma2Ffc3RyZWFtLmZvcmVhY2hSREQobGFtYmRhIHJkZDogcHJvY2Vzc19yZGQocmRkKSkKc3NjLnN0YXJ0KCkKc3NjLmF3YWl0VGVybWluYXRpb24oKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from pyspark.sql import SparkSession
from pyspark.streaming import StreamingContext
from pyspark.streaming.kafka import KafkaUtils

spark = SparkSession.builder.appName(&quot;RealTimeRecommendations&quot;).getOrCreate()
ssc = StreamingContext(spark.sparkContext, 10)

kafka_stream = KafkaUtils.createDirectStream(ssc, ['user_interactions'], {'metadata.broker.list': 'localhost:9092'})

def process_rdd(rdd):
    if not rdd.isEmpty():
        df = spark.read.json(rdd)
        # Aplicar algoritmes de recomanaci&oacute; aqu&iacute;
        df.show()

kafka_stream.foreachRDD(lambda rdd: process_rdd(rdd))
ssc.start()
ssc.awaitTermination()</pre></div><div class='content'></div><h2>3. Emmagatzematge de Resultats</h2>
<div class='content'><p>Les recomanacions generades es poden emmagatzemar en una base de dades NoSQL com MongoDB per a un accés ràpid.</p>
<h4>Exemple d'Emmagatzematge en MongoDB</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBweW1vbmdvIGltcG9ydCBNb25nb0NsaWVudAoKY2xpZW50ID0gTW9uZ29DbGllbnQoJ2xvY2FsaG9zdCcsIDI3MDE3KQpkYiA9IGNsaWVudC5yZWNvbW1lbmRhdGlvbnNfZGIKCmRlZiBzdG9yZV9yZWNvbW1lbmRhdGlvbnModXNlcl9pZCwgcmVjb21tZW5kYXRpb25zKToKICAgIGRiLnJlY29tbWVuZGF0aW9ucy5pbnNlcnRfb25lKHsndXNlcl9pZCc6IHVzZXJfaWQsICdyZWNvbW1lbmRhdGlvbnMnOiByZWNvbW1lbmRhdGlvbnN9KQoKIyBFeGVtcGxlIGQnZW1tYWdhdHplbWF0Z2UgZGUgcmVjb21hbmFjaW9ucwpzdG9yZV9yZWNvbW1lbmRhdGlvbnMoJzEyMycsIFsnaXRlbV80NTYnLCAnaXRlbV83ODknXSk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from pymongo import MongoClient

client = MongoClient('localhost', 27017)
db = client.recommendations_db

def store_recommendations(user_id, recommendations):
    db.recommendations.insert_one({'user_id': user_id, 'recommendations': recommendations})

# Exemple d'emmagatzematge de recomanacions
store_recommendations('123', ['item_456', 'item_789'])</pre></div><div class='content'></div><h2>4. Visualització i Servei de Recomendacions</h2>
<div class='content'><p>Les recomanacions es poden servir als usuaris mitjançant una API RESTful.</p>
<h4>Exemple d'API RESTful amb Flask</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIHJlcXVlc3QsIGpzb25pZnkKZnJvbSBweW1vbmdvIGltcG9ydCBNb25nb0NsaWVudAoKYXBwID0gRmxhc2soX19uYW1lX18pCmNsaWVudCA9IE1vbmdvQ2xpZW50KCdsb2NhbGhvc3QnLCAyNzAxNykKZGIgPSBjbGllbnQucmVjb21tZW5kYXRpb25zX2RiCgpAYXBwLnJvdXRlKCcvcmVjb21tZW5kYXRpb25zLzx1c2VyX2lkPicsIG1ldGhvZHM9WydHRVQnXSkKZGVmIGdldF9yZWNvbW1lbmRhdGlvbnModXNlcl9pZCk6CiAgICByZWNvbW1lbmRhdGlvbnMgPSBkYi5yZWNvbW1lbmRhdGlvbnMuZmluZF9vbmUoeyd1c2VyX2lkJzogdXNlcl9pZH0pCiAgICBpZiByZWNvbW1lbmRhdGlvbnM6CiAgICAgICAgcmV0dXJuIGpzb25pZnkocmVjb21tZW5kYXRpb25zWydyZWNvbW1lbmRhdGlvbnMnXSkKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIGpzb25pZnkoW10pCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgYXBwLnJ1bihkZWJ1Zz1UcnVlKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from flask import Flask, request, jsonify
from pymongo import MongoClient

app = Flask(__name__)
client = MongoClient('localhost', 27017)
db = client.recommendations_db

@app.route('/recommendations/&lt;user_id&gt;', methods=['GET'])
def get_recommendations(user_id):
    recommendations = db.recommendations.find_one({'user_id': user_id})
    if recommendations:
        return jsonify(recommendations['recommendations'])
    else:
        return jsonify([])

if __name__ == '__main__':
    app.run(debug=True)</pre></div><div class='content'></div><h1>Exercici Pràctic</h1>
<div class='content'></div><h2>Objectiu</h2>
<div class='content'><p>Implementar un sistema de recomanacions en temps real utilitzant Apache Kafka i Apache Spark.</p>
</div><h2>Passos</h2>
<div class='content'><ol>
<li>Configura un productor de Kafka per enviar dades d'interacció de l'usuari.</li>
<li>Configura un consumidor de Kafka per rebre les dades d'interacció.</li>
<li>Utilitza Spark Streaming per processar les dades d'interacció i generar recomanacions.</li>
<li>Emmagatzema les recomanacions generades en una base de dades NoSQL.</li>
<li>Implementa una API RESTful per servir les recomanacions als usuaris.</li>
</ol>
</div><h2>Solució</h2>
<div class='content'><p>La solució es troba en els exemples de codi proporcionats anteriorment. Assegura't de seguir els passos i adaptar el codi a les teves necessitats específiques.</p>
</div><h1>Conclusió</h1>
<div class='content'><p>En aquest cas d'estudi, hem après a implementar un sistema de recomanacions en temps real utilitzant tecnologies de processament de dades massives com Apache Kafka i Apache Spark. Hem vist com ingerir dades en temps real, processar-les per generar recomanacions i servir aquestes recomanacions als usuaris mitjançant una API RESTful. Aquest coneixement és essencial per desenvolupar aplicacions modernes que necessiten personalitzar l'experiència de l'usuari en temps real.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-01-cas-estudi-logs' title="Cas d'Estudi 1: Anàlisi de Logs">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-03-cas-estudi-xarxes-socials' title="Cas d'Estudi 3: Monitoratge de Xarxes Socials">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
