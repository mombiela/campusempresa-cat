<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guàrdies de Tipus</title>

    <link rel="alternate" href="https://campusempresa.com/mod/typescript/03-03-type-guards" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/typescript/03-03-type-guards" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/typescript/03-03-type-guards" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/typescript/03-03-type-guards" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/typescript/03-03-type-guards" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
<br>
			<cite>Construint la societat d'avui i del demà</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Contingut del curs</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competències tècniques</a>
				<a href="/all/conocimientos">Coneixements</a>
				<a href="/all/soft_skills">Competències socials</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-02-type-aliases' title="Àlies de Tipus">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Guàrdies de Tipus</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-04-mapped-types' title="Tipus Mapats">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Les guàrdies de tipus (type guards) són una característica poderosa de TypeScript que permeten verificar el tipus d'una variable en temps d'execució. Això és especialment útil quan es treballa amb tipus d'unió, ja que permet assegurar-se que una variable compleix amb un determinat tipus abans de realitzar operacions específiques d'aquest tipus.</p>
</div><h1><p>Conceptes Clau</p>
</h1>
<div class='content'><ol>
<li><strong>Tipus d'Unió</strong>: Permeten que una variable pugui tenir més d'un tipus.</li>
<li><strong>Guàrdies de Tipus</strong>: Verifiquen el tipus d'una variable en temps d'execució.</li>
<li><strong>Operadors <code>typeof</code> i <code>instanceof</code></strong>: Eines comunes per implementar guàrdies de tipus.</li>
</ol>
</div><h1><p>Tipus d'Unió</p>
</h1>
<div class='content'><p>Abans d'entrar en les guàrdies de tipus, és important entendre els tipus d'unió. Un tipus d'unió permet que una variable pugui tenir més d'un tipus.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IHZhbG9yOiBzdHJpbmcgfCBudW1iZXI7CnZhbG9yID0gIkhvbGEiOwp2YWxvciA9IDQyOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let valor: string | number;
valor = &quot;Hola&quot;;
valor = 42;</pre></div><div class='content'></div><h1><p>Guàrdies de Tipus amb <code>typeof</code></p>
</h1>
<div class='content'><p>L'operador <code>typeof</code> és una manera senzilla de verificar el tipus primitiu d'una variable.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gaW1wcmltaXJWYWxvcih2YWxvcjogc3RyaW5nIHwgbnVtYmVyKSB7CiAgICBpZiAodHlwZW9mIHZhbG9yID09PSAic3RyaW5nIikgewogICAgICAgIGNvbnNvbGUubG9nKGBFbCB2YWxvciDDqXMgdW5hIGNhZGVuYTogJHt2YWxvcn1gKTsKICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coYEVsIHZhbG9yIMOpcyB1biBuw7ptZXJvOiAke3ZhbG9yfWApOwogICAgfQp9CgppbXByaW1pclZhbG9yKCJIb2xhIik7CmltcHJpbWlyVmFsb3IoNDIpOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function imprimirValor(valor: string | number) {
    if (typeof valor === &quot;string&quot;) {
        console.log(`El valor &eacute;s una cadena: ${valor}`);
    } else {
        console.log(`El valor &eacute;s un n&uacute;mero: ${valor}`);
    }
}

imprimirValor(&quot;Hola&quot;);
imprimirValor(42);</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Funció <code>imprimirValor</code></strong>: Accepta un paràmetre que pot ser una cadena (<code>string</code>) o un número (<code>number</code>).</li>
<li><strong>Guàrdia de Tipus <code>typeof</code></strong>: Verifica si el tipus de <code>valor</code> és una cadena. Si és així, imprimeix un missatge específic per a cadenes. Si no, assumeix que és un número i imprimeix un missatge per a números.</li>
</ol>
</div><h1><p>Guàrdies de Tipus amb <code>instanceof</code></p>
</h1>
<div class='content'><p>L'operador <code>instanceof</code> és útil per verificar si un objecte és una instància d'una classe específica.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgR2F0byB7CiAgICBtYXVsbGFyKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJNaWF1ISIpOwogICAgfQp9CgpjbGFzcyBHb3MgewogICAgYm9yZGFyKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJHdWF1ISIpOwogICAgfQp9CgpmdW5jdGlvbiBmZXJTb3JvbGwoYW5pbWFsOiBHYXRvIHwgR29zKSB7CiAgICBpZiAoYW5pbWFsIGluc3RhbmNlb2YgR2F0bykgewogICAgICAgIGFuaW1hbC5tYXVsbGFyKCk7CiAgICB9IGVsc2UgewogICAgICAgIGFuaW1hbC5ib3JkYXIoKTsKICAgIH0KfQoKY29uc3QgZ2F0ID0gbmV3IEdhdG8oKTsKY29uc3QgZ29zID0gbmV3IEdvcygpOwoKZmVyU29yb2xsKGdhdCk7CmZlclNvcm9sbChnb3MpOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Gato {
    maullar() {
        console.log(&quot;Miau!&quot;);
    }
}

class Gos {
    bordar() {
        console.log(&quot;Guau!&quot;);
    }
}

function ferSoroll(animal: Gato | Gos) {
    if (animal instanceof Gato) {
        animal.maullar();
    } else {
        animal.bordar();
    }
}

const gat = new Gato();
const gos = new Gos();

ferSoroll(gat);
ferSoroll(gos);</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Classes <code>Gato</code> i <code>Gos</code></strong>: Defineixen dos tipus d'animals amb mètodes específics (<code>maullar</code> i <code>bordar</code>).</li>
<li><strong>Funció <code>ferSoroll</code></strong>: Accepta un paràmetre que pot ser un <code>Gato</code> o un <code>Gos</code>.</li>
<li><strong>Guàrdia de Tipus <code>instanceof</code></strong>: Verifica si <code>animal</code> és una instància de <code>Gato</code>. Si és així, crida el mètode <code>maullar</code>. Si no, assumeix que és un <code>Gos</code> i crida el mètode <code>bordar</code>.</li>
</ol>
</div><h1><p>Guàrdies de Tipus Personalitzades</p>
</h1>
<div class='content'><p>També es poden crear funcions de guàrdia de tipus personalitzades per a tipus més complexos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW50ZXJmYWNlIFBlaXggewogICAgbmVkYXIoKTogdm9pZDsKfQoKaW50ZXJmYWNlIE9jZWxsIHsKICAgIHZvbGFyKCk6IHZvaWQ7Cn0KCmZ1bmN0aW9uIMOpc1BlaXgoYW5pbWFsOiBQZWl4IHwgT2NlbGwpOiBhbmltYWwgaXMgUGVpeCB7CiAgICByZXR1cm4gKGFuaW1hbCBhcyBQZWl4KS5uZWRhciAhPT0gdW5kZWZpbmVkOwp9CgpmdW5jdGlvbiBtb3VyZShhbmltYWw6IFBlaXggfCBPY2VsbCkgewogICAgaWYgKMOpc1BlaXgoYW5pbWFsKSkgewogICAgICAgIGFuaW1hbC5uZWRhcigpOwogICAgfSBlbHNlIHsKICAgICAgICBhbmltYWwudm9sYXIoKTsKICAgIH0KfQoKY29uc3QgcGVpeDogUGVpeCA9IHsgbmVkYXI6ICgpID0+IGNvbnNvbGUubG9nKCJFbCBwZWl4IG5lZGEiKSB9Owpjb25zdCBvY2VsbDogT2NlbGwgPSB7IHZvbGFyOiAoKSA9PiBjb25zb2xlLmxvZygiTCdvY2VsbCB2b2xhIikgfTsKCm1vdXJlKHBlaXgpOwptb3VyZShvY2VsbCk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>interface Peix {
    nedar(): void;
}

interface Ocell {
    volar(): void;
}

function &eacute;sPeix(animal: Peix | Ocell): animal is Peix {
    return (animal as Peix).nedar !== undefined;
}

function moure(animal: Peix | Ocell) {
    if (&eacute;sPeix(animal)) {
        animal.nedar();
    } else {
        animal.volar();
    }
}

const peix: Peix = { nedar: () =&gt; console.log(&quot;El peix neda&quot;) };
const ocell: Ocell = { volar: () =&gt; console.log(&quot;L'ocell vola&quot;) };

moure(peix);
moure(ocell);</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Interfícies <code>Peix</code> i <code>Ocell</code></strong>: Defineixen dos tipus d'animals amb mètodes específics (<code>nedar</code> i <code>volar</code>).</li>
<li><strong>Funció <code>ésPeix</code></strong>: És una guàrdia de tipus personalitzada que verifica si un animal és un <code>Peix</code>.</li>
<li><strong>Funció <code>moure</code></strong>: Accepta un paràmetre que pot ser un <code>Peix</code> o un <code>Ocell</code>.</li>
<li><strong>Guàrdia de Tipus Personalitzada</strong>: Utilitza la funció <code>ésPeix</code> per verificar si <code>animal</code> és un <code>Peix</code>. Si és així, crida el mètode <code>nedar</code>. Si no, assumeix que és un <code>Ocell</code> i crida el mètode <code>volar</code>.</li>
</ol>
</div><h1><p>Exercicis Pràctics</p>
</h1>
<div class='content'></div><h2><p>Exercici 1</p>
</h2>
<div class='content'><p>Escriu una funció que accepti un paràmetre que pot ser un <code>string</code> o un <code>number</code>. Si és un <code>string</code>, retorna la seva longitud. Si és un <code>number</code>, retorna el seu doble.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gcHJvY2Vzc2FyVmFsb3IodmFsb3I6IHN0cmluZyB8IG51bWJlcik6IG51bWJlciB7CiAgICAvLyBJbXBsZW1lbnRhIGxhIGZ1bmNpw7MgYXF1w60KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function processarValor(valor: string | number): number {
    // Implementa la funci&oacute; aqu&iacute;
}</pre></div><div class='content'></div><h2><p>Solució</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gcHJvY2Vzc2FyVmFsb3IodmFsb3I6IHN0cmluZyB8IG51bWJlcik6IG51bWJlciB7CiAgICBpZiAodHlwZW9mIHZhbG9yID09PSAic3RyaW5nIikgewogICAgICAgIHJldHVybiB2YWxvci5sZW5ndGg7CiAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB2YWxvciAqIDI7CiAgICB9Cn0KCmNvbnNvbGUubG9nKHByb2Nlc3NhclZhbG9yKCJIb2xhIikpOyAvLyA0CmNvbnNvbGUubG9nKHByb2Nlc3NhclZhbG9yKDIxKSk7IC8vIDQy"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function processarValor(valor: string | number): number {
    if (typeof valor === &quot;string&quot;) {
        return valor.length;
    } else {
        return valor * 2;
    }
}

console.log(processarValor(&quot;Hola&quot;)); // 4
console.log(processarValor(21)); // 42</pre></div><div class='content'></div><h2><p>Exercici 2</p>
</h2>
<div class='content'><p>Crea una funció que accepti un paràmetre que pot ser un <code>Gato</code> o un <code>Gos</code> (utilitza les classes de l'exemple anterior). La funció ha de retornar un missatge diferent depenent del tipus d'animal.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZGVzY3JpdXJlQW5pbWFsKGFuaW1hbDogR2F0byB8IEdvcyk6IHN0cmluZyB7CiAgICAvLyBJbXBsZW1lbnRhIGxhIGZ1bmNpw7MgYXF1w60KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function descriureAnimal(animal: Gato | Gos): string {
    // Implementa la funci&oacute; aqu&iacute;
}</pre></div><div class='content'></div><h2><p>Solució</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZGVzY3JpdXJlQW5pbWFsKGFuaW1hbDogR2F0byB8IEdvcyk6IHN0cmluZyB7CiAgICBpZiAoYW5pbWFsIGluc3RhbmNlb2YgR2F0bykgewogICAgICAgIHJldHVybiAiQXF1ZXN0IMOpcyB1biBnYXQuIjsKICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICJBcXVlc3Qgw6lzIHVuIGdvcy4iOwogICAgfQp9Cgpjb25zb2xlLmxvZyhkZXNjcml1cmVBbmltYWwobmV3IEdhdG8oKSkpOyAvLyBBcXVlc3Qgw6lzIHVuIGdhdC4KY29uc29sZS5sb2coZGVzY3JpdXJlQW5pbWFsKG5ldyBHb3MoKSkpOyAvLyBBcXVlc3Qgw6lzIHVuIGdvcy4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function descriureAnimal(animal: Gato | Gos): string {
    if (animal instanceof Gato) {
        return &quot;Aquest &eacute;s un gat.&quot;;
    } else {
        return &quot;Aquest &eacute;s un gos.&quot;;
    }
}

console.log(descriureAnimal(new Gato())); // Aquest &eacute;s un gat.
console.log(descriureAnimal(new Gos())); // Aquest &eacute;s un gos.</pre></div><div class='content'></div><h1><p>Resum</p>
</h1>
<div class='content'><p>Les guàrdies de tipus són una eina essencial en TypeScript per treballar amb tipus d'unió i assegurar-se que les operacions es realitzen de manera segura. Utilitzant operadors com <code>typeof</code> i <code>instanceof</code>, així com guàrdies de tipus personalitzades, es pot verificar el tipus d'una variable en temps d'execució i evitar errors comuns. Practicar amb aquests conceptes ajudarà a millorar la seguretat i la robustesa del teu codi TypeScript.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-02-type-aliases' title="Àlies de Tipus">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-04-mapped-types' title="Tipus Mapats">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
