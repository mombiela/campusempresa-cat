<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promeses</title>

    <link rel="alternate" href="https://campusempresa.com/mod/typescript/05-01-promises" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/typescript/05-01-promises" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/typescript/05-01-promises" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/typescript/05-01-promises" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/typescript/05-01-promises" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-05-decorators' title="Decoradors">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Promeses</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-02-async-await' title="Async/Await">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1><p>Introducció a les Promeses</p>
</h1>
<div class='content'><p>Les promeses són una característica fonamental de JavaScript per gestionar operacions asíncrones. En TypeScript, les promeses es poden utilitzar de la mateixa manera que en JavaScript, però amb l'avantatge addicional de la tipificació estàtica.</p>
</div><h2><p>Què és una Promesa?</p>
</h2>
<div class='content'><p>Una promesa és un objecte que representa el resultat eventual (o error) d'una operació asíncrona. Una promesa pot estar en un dels següents estats:</p>
<ul>
<li><strong>Pending (pendent)</strong>: La promesa està en procés.</li>
<li><strong>Fulfilled (complerta)</strong>: L'operació s'ha completat amb èxit.</li>
<li><strong>Rejected (rebutjada)</strong>: L'operació ha fallat.</li>
</ul>
</div><h2><p>Creació d'una Promesa</p>
</h2>
<div class='content'><p>Per crear una promesa, utilitzem el constructor <code>Promise</code>, que pren una funció amb dos paràmetres: <code>resolve</code> i <code>reject</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbXlQcm9taXNlOiBQcm9taXNlPG51bWJlcj4gPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICBjb25zdCBzdWNjZXNzID0gdHJ1ZTsgLy8gU2ltdWxhY2nDsyBkJ3VuYSBjb25kaWNpw7MKCiAgICBpZiAoc3VjY2VzcykgewogICAgICAgIHJlc29sdmUoNDIpOyAvLyBPcGVyYWNpw7MgZXhpdG9zYQogICAgfSBlbHNlIHsKICAgICAgICByZWplY3QoJ0Vycm9yOiBPcGVyYWNpw7MgZmFsbGlkYScpOyAvLyBPcGVyYWNpw7MgZmFsbGlkYQogICAgfQp9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const myPromise: Promise&lt;number&gt; = new Promise((resolve, reject) =&gt; {
    const success = true; // Simulaci&oacute; d'una condici&oacute;

    if (success) {
        resolve(42); // Operaci&oacute; exitosa
    } else {
        reject('Error: Operaci&oacute; fallida'); // Operaci&oacute; fallida
    }
});</pre></div><div class='content'></div><h2><p>Consumint una Promesa</p>
</h2>
<div class='content'><p>Per consumir una promesa, utilitzem els mètodes <code>then</code> i <code>catch</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bXlQcm9taXNlCiAgICAudGhlbigocmVzdWx0KSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ1Jlc3VsdGF0OicsIHJlc3VsdCk7IC8vIFJlc3VsdGF0OiA0MgogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7CiAgICB9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>myPromise
    .then((result) =&gt; {
        console.log('Resultat:', result); // Resultat: 42
    })
    .catch((error) =&gt; {
        console.error('Error:', error);
    });</pre></div><div class='content'></div><h1><p>Exemple Pràctic</p>
</h1>
<div class='content'><p>Vegem un exemple pràctic on fem una crida asíncrona simulada a una API.</p>
</div><h2><p>Simulació d'una Crida a una API</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZmV0Y2hEYXRhKCk6IFByb21pc2U8c3RyaW5nPiB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBjb25zdCBzdWNjZXNzID0gdHJ1ZTsgLy8gU2ltdWxhY2nDsyBkJ3VuYSBjb25kaWNpw7MKCiAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7CiAgICAgICAgICAgICAgICByZXNvbHZlKCdEYWRlcyByZWN1cGVyYWRlcyBhbWIgw6h4aXQnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlamVjdCgnRXJyb3IgZW4gcmVjdXBlcmFyIGxlcyBkYWRlcycpOwogICAgICAgICAgICB9CiAgICAgICAgfSwgMjAwMCk7CiAgICB9KTsKfQoKZmV0Y2hEYXRhKCkKICAgIC50aGVuKChkYXRhKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7IC8vIERhZGVzIHJlY3VwZXJhZGVzIGFtYiDDqHhpdAogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgIH0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function fetchData(): Promise&lt;string&gt; {
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            const success = true; // Simulaci&oacute; d'una condici&oacute;

            if (success) {
                resolve('Dades recuperades amb &egrave;xit');
            } else {
                reject('Error en recuperar les dades');
            }
        }, 2000);
    });
}

fetchData()
    .then((data) =&gt; {
        console.log(data); // Dades recuperades amb &egrave;xit
    })
    .catch((error) =&gt; {
        console.error(error);
    });</pre></div><div class='content'></div><h2><p>Tipificació de Promeses</p>
</h2>
<div class='content'><p>En TypeScript, podem especificar el tipus de dades que una promesa retornarà utilitzant la sintaxi <code>Promise&lt;T&gt;</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZmV0Y2hOdW1iZXIoKTogUHJvbWlzZTxudW1iZXI+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHJlc29sdmUoMTAwKTsKICAgICAgICB9LCAxMDAwKTsKICAgIH0pOwp9CgpmZXRjaE51bWJlcigpCiAgICAudGhlbigobnVtKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ07Dum1lcm86JywgbnVtKTsgLy8gTsO6bWVybzogMTAwCiAgICB9KQogICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTsKICAgIH0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function fetchNumber(): Promise&lt;number&gt; {
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            resolve(100);
        }, 1000);
    });
}

fetchNumber()
    .then((num) =&gt; {
        console.log('N&uacute;mero:', num); // N&uacute;mero: 100
    })
    .catch((error) =&gt; {
        console.error('Error:', error);
    });</pre></div><div class='content'></div><h1><p>Exercicis Pràctics</p>
</h1>
<div class='content'></div><h2><p>Exercici 1: Creació d'una Promesa</p>
</h2>
<div class='content'><p>Crea una funció <code>getUserName</code> que retorni una promesa que es resol amb el nom d'un usuari després de 1 segon.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZ2V0VXNlck5hbWUoKTogUHJvbWlzZTxzdHJpbmc+IHsKICAgIC8vIEltcGxlbWVudGEgbGEgZnVuY2nDsyBhcXXDrQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function getUserName(): Promise&lt;string&gt; {
    // Implementa la funci&oacute; aqu&iacute;
}</pre></div><div class='content'><h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZ2V0VXNlck5hbWUoKTogUHJvbWlzZTxzdHJpbmc+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHJlc29sdmUoJ0pvaG4gRG9lJyk7CiAgICAgICAgfSwgMTAwMCk7CiAgICB9KTsKfQoKZ2V0VXNlck5hbWUoKQogICAgLnRoZW4oKG5hbWUpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygnTm9tIGRlIGxcJ3VzdWFyaTonLCBuYW1lKTsgLy8gTm9tIGRlIGwndXN1YXJpOiBKb2huIERvZQogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7CiAgICB9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function getUserName(): Promise&lt;string&gt; {
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            resolve('John Doe');
        }, 1000);
    });
}

getUserName()
    .then((name) =&gt; {
        console.log('Nom de l\'usuari:', name); // Nom de l'usuari: John Doe
    })
    .catch((error) =&gt; {
        console.error('Error:', error);
    });</pre></div><div class='content'></div><h2><p>Exercici 2: Gestió d'Errors</p>
</h2>
<div class='content'><p>Modifica la funció <code>getUserName</code> per simular un error i gestiona'l utilitzant <code>catch</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZ2V0VXNlck5hbWUoKTogUHJvbWlzZTxzdHJpbmc+IHsKICAgIC8vIEltcGxlbWVudGEgbGEgZnVuY2nDsyBhcXXDrQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function getUserName(): Promise&lt;string&gt; {
    // Implementa la funci&oacute; aqu&iacute;
}</pre></div><div class='content'><h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZ2V0VXNlck5hbWUoKTogUHJvbWlzZTxzdHJpbmc+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBmYWxzZTsgLy8gU2ltdWxhY2nDsyBkJ3VuIGVycm9yCgogICAgICAgICAgICBpZiAoc3VjY2VzcykgewogICAgICAgICAgICAgICAgcmVzb2x2ZSgnSm9obiBEb2UnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlamVjdCgnRXJyb3I6IE5vIHNcJ2hhIHBvZ3V0IHJlY3VwZXJhciBlbCBub20gZGUgbFwndXN1YXJpJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9LCAxMDAwKTsKICAgIH0pOwp9CgpnZXRVc2VyTmFtZSgpCiAgICAudGhlbigobmFtZSkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdOb20gZGUgbFwndXN1YXJpOicsIG5hbWUpOwogICAgfSkKICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7IC8vIEVycm9yOiBObyBzJ2hhIHBvZ3V0IHJlY3VwZXJhciBlbCBub20gZGUgbCd1c3VhcmkKICAgIH0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function getUserName(): Promise&lt;string&gt; {
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            const success = false; // Simulaci&oacute; d'un error

            if (success) {
                resolve('John Doe');
            } else {
                reject('Error: No s\'ha pogut recuperar el nom de l\'usuari');
            }
        }, 1000);
    });
}

getUserName()
    .then((name) =&gt; {
        console.log('Nom de l\'usuari:', name);
    })
    .catch((error) =&gt; {
        console.error('Error:', error); // Error: No s'ha pogut recuperar el nom de l'usuari
    });</pre></div><div class='content'></div><h1><p>Resum</p>
</h1>
<div class='content'><p>En aquesta secció, hem après què són les promeses, com crear-les i consumir-les, i com gestionar errors en operacions asíncrones. Les promeses són una eina poderosa per treballar amb codi asíncron i, amb la tipificació de TypeScript, podem escriure codi més segur i mantenible. En la següent secció, explorarem l'ús de <code>async</code> i <code>await</code> per simplificar encara més el treball amb promeses.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-05-decorators' title="Decoradors">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-02-async-await' title="Async/Await">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
