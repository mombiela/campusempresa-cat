<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mòdul 4: Patrons de Comportament</title>

    <link rel="alternate" href="https://campusempresa.com/mod/patrones_diseno/4-7-memento" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/patrones_diseno/4-7-memento" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/patrones_diseno/4-7-memento" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/patrones_diseno/4-7-memento" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/patrones_diseno/4-7-memento" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='4-6-mediator'>&#x25C4;Mediator</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Mòdul 4: Patrons de Comportament</a>
	</div>
	<div class='col-4 text-end'>
					<a href='4-8-observer'>Observer &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>4-7: Memento</h1>
<div class='content'></div><h2>Què és el Patró Memento?</h2>
<div class='content'><p>El patró Memento és un patró de disseny de comportament que permet capturar i emmagatzemar l'estat intern d'un objecte sense trencar l'encapsulació, de manera que l'objecte pugui ser restaurat a aquest estat més tard. És especialment útil per implementar funcionalitats de desfer (undo) i refer (redo).</p>
</div><h2>Components del Patró Memento</h2>
<div class='content'><p>El patró Memento consta de tres components principals:</p>
<ol>
<li><strong>Originator</strong>: L'objecte que conté l'estat original que es vol guardar.</li>
<li><strong>Memento</strong>: L'objecte que emmagatzema l'estat intern de l'Originator.</li>
<li><strong>Caretaker</strong>: L'objecte que guarda els Mementos i els utilitza per restaurar l'estat de l'Originator.</li>
</ol>
</div><h2>Diagrama UML</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ky0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLSsKfCAgIE9yaWdpbmF0b3IgICB8PC0tLS0tPnwgICAgTWVtZW50byAgICAgfDwtLS0tLT58ICAgQ2FyZXRha2VyICAgIHwKKy0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLSsKfCAtIHN0YXRlICAgICAgICB8ICAgICAgIHwgLSBzdGF0ZSAgICAgICAgfCAgICAgICB8IC0gbWVtZW50b3MgICAgIHwKfCArIGNyZWF0ZU1lbWVudG8oKSAgICAgIHwgKyBnZXRTdGF0ZSgpICAgfCAgICAgICB8ICsgYWRkTWVtZW50bygpIHwKfCArIHNldE1lbWVudG8oKSAgICAgICAgIHwgICAgICAgICAgICAgICAgfCAgICAgICB8ICsgZ2V0TWVtZW50bygpIHwKKy0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLSs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>+----------------+       +----------------+       +----------------+
|   Originator   |&lt;-----&gt;|    Memento     |&lt;-----&gt;|   Caretaker    |
+----------------+       +----------------+       +----------------+
| - state        |       | - state        |       | - mementos     |
| + createMemento()      | + getState()   |       | + addMemento() |
| + setMemento()         |                |       | + getMemento() |
+----------------+       +----------------+       +----------------+</pre></div><div class='content'></div><h2>Implementació en Codi</h2>
<div class='content'><p>A continuació es mostra una implementació del patró Memento en Python:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgTWVtZW50bzoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzdGF0ZSk6CiAgICAgICAgc2VsZi5fc3RhdGUgPSBzdGF0ZQoKICAgIGRlZiBnZXRfc3RhdGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX3N0YXRlCgoKY2xhc3MgT3JpZ2luYXRvcjoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLl9zdGF0ZSA9IE5vbmUKCiAgICBkZWYgc2V0X3N0YXRlKHNlbGYsIHN0YXRlKToKICAgICAgICBwcmludChmIlNldHRpbmcgc3RhdGUgdG8ge3N0YXRlfSIpCiAgICAgICAgc2VsZi5fc3RhdGUgPSBzdGF0ZQoKICAgIGRlZiBnZXRfc3RhdGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX3N0YXRlCgogICAgZGVmIGNyZWF0ZV9tZW1lbnRvKHNlbGYpOgogICAgICAgIHJldHVybiBNZW1lbnRvKHNlbGYuX3N0YXRlKQoKICAgIGRlZiBzZXRfbWVtZW50byhzZWxmLCBtZW1lbnRvKToKICAgICAgICBzZWxmLl9zdGF0ZSA9IG1lbWVudG8uZ2V0X3N0YXRlKCkKICAgICAgICBwcmludChmIlN0YXRlIHJlc3RvcmVkIHRvIHtzZWxmLl9zdGF0ZX0iKQoKCmNsYXNzIENhcmV0YWtlcjoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLl9tZW1lbnRvcyA9IFtdCgogICAgZGVmIGFkZF9tZW1lbnRvKHNlbGYsIG1lbWVudG8pOgogICAgICAgIHNlbGYuX21lbWVudG9zLmFwcGVuZChtZW1lbnRvKQoKICAgIGRlZiBnZXRfbWVtZW50byhzZWxmLCBpbmRleCk6CiAgICAgICAgcmV0dXJuIHNlbGYuX21lbWVudG9zW2luZGV4XQoKCiMgRXhlbXBsZSBkJ8O6cwpvcmlnaW5hdG9yID0gT3JpZ2luYXRvcigpCmNhcmV0YWtlciA9IENhcmV0YWtlcigpCgpvcmlnaW5hdG9yLnNldF9zdGF0ZSgiU3RhdGUxIikKY2FyZXRha2VyLmFkZF9tZW1lbnRvKG9yaWdpbmF0b3IuY3JlYXRlX21lbWVudG8oKSkKCm9yaWdpbmF0b3Iuc2V0X3N0YXRlKCJTdGF0ZTIiKQpjYXJldGFrZXIuYWRkX21lbWVudG8ob3JpZ2luYXRvci5jcmVhdGVfbWVtZW50bygpKQoKb3JpZ2luYXRvci5zZXRfc3RhdGUoIlN0YXRlMyIpCnByaW50KGYiQ3VycmVudCBTdGF0ZToge29yaWdpbmF0b3IuZ2V0X3N0YXRlKCl9IikKCm9yaWdpbmF0b3Iuc2V0X21lbWVudG8oY2FyZXRha2VyLmdldF9tZW1lbnRvKDApKQpwcmludChmIlJlc3RvcmVkIFN0YXRlOiB7b3JpZ2luYXRvci5nZXRfc3RhdGUoKX0iKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Memento:
    def __init__(self, state):
        self._state = state

    def get_state(self):
        return self._state


class Originator:
    def __init__(self):
        self._state = None

    def set_state(self, state):
        print(f&quot;Setting state to {state}&quot;)
        self._state = state

    def get_state(self):
        return self._state

    def create_memento(self):
        return Memento(self._state)

    def set_memento(self, memento):
        self._state = memento.get_state()
        print(f&quot;State restored to {self._state}&quot;)


class Caretaker:
    def __init__(self):
        self._mementos = []

    def add_memento(self, memento):
        self._mementos.append(memento)

    def get_memento(self, index):
        return self._mementos[index]


# Exemple d'&uacute;s
originator = Originator()
caretaker = Caretaker()

originator.set_state(&quot;State1&quot;)
caretaker.add_memento(originator.create_memento())

originator.set_state(&quot;State2&quot;)
caretaker.add_memento(originator.create_memento())

originator.set_state(&quot;State3&quot;)
print(f&quot;Current State: {originator.get_state()}&quot;)

originator.set_memento(caretaker.get_memento(0))
print(f&quot;Restored State: {originator.get_state()}&quot;)</pre></div><div class='content'></div><h2>Explicació del Codi</h2>
<div class='content'><ol>
<li><strong>Memento</strong>: Emmagatzema l'estat intern de l'Originator.</li>
<li><strong>Originator</strong>: Té mètodes per crear un Memento i per restaurar el seu estat a partir d'un Memento.</li>
<li><strong>Caretaker</strong>: Gestiona els Mementos i els proporciona a l'Originator quan cal restaurar un estat anterior.</li>
</ol>
</div><h2>Avantatges i Desavantatges</h2>
<div class='content'><p><strong>Avantatges:</strong></p>
<ul>
<li><strong>Encapsulació</strong>: Manté l'encapsulació de l'objecte Originator.</li>
<li><strong>Desfer i Refer</strong>: Facilita la implementació de funcionalitats de desfer i refer.</li>
</ul>
<p><strong>Desavantatges:</strong></p>
<ul>
<li><strong>Memòria</strong>: Pot consumir molta memòria si es guarden molts Mementos.</li>
<li><strong>Complexitat</strong>: Pot augmentar la complexitat del codi si no es gestiona adequadament.</li>
</ul>
</div><h2>Conclusió</h2>
<div class='content'><p>El patró Memento és una solució elegant per gestionar l'estat intern dels objectes i permetre la restauració d'estats anteriors sense trencar l'encapsulació. És especialment útil en aplicacions que requereixen funcionalitats de desfer i refer, com ara editors de text o aplicacions gràfiques. Tot i això, cal tenir en compte l'ús de memòria i la complexitat afegida que pot comportar.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='4-6-mediator'>&#x25C4;Mediator</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Mòdul 4: Patrons de Comportament</a>
	</div>
	<div class='col-4 text-end'>
					<a href='4-8-observer'>Observer &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
