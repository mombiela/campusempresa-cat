<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Patrons de Disseny en Sistemes Distribuïts</title>

    <link rel="alternate" href="https://campusempresa.com/mod/patrones_diseno/06-03-patrones-sistemas-distribuidos" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/patrones_diseno/06-03-patrons-sistemes-distribuits" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/patrones_diseno/06-03-patterns-distributed-systems" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>var DEVELOP = window.location.href.indexOf("localhost")!=-1 && true;</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/mod/patrones_diseno/06-03-patterns-distributed-systems" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/patrones_diseno/06-03-patrones-sistemas-distribuidos" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Tot el coneixement al teu abast</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col" id="left_menu">
					<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Contingut del curs
	</a>

			</div>
		</div>
	</div>
</div>

<!--  
<div class="top-bar container-fluid">
	<div class="container-xxl">
		<nav class="navbar navbar-expand-md p-0">
			<div class="container-fluid">
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				
				<div class="collapse navbar-collapse" id="navbarNav">
					<div class="navbar-nav me-auto">
							<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Contingut del curs
	</a>

					</div>
				</div>			
							</div>
		</nav>
	</div>
</div>
 -->				<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-02-patrons-microserveis' title="Patrons de Disseny en Microserveis">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<h2 style="text-decoration:underline">Patrons de Disseny en Sistemes Distribuïts</h2>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-04-patrons-desenvolupament-agil' title="Patrons de Disseny en Desenvolupament Àgil">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Els sistemes distribuïts són aquells en els quals components situats en diferents nodes de la xarxa col·laboren per aconseguir un objectiu comú. Aquests sistemes presenten desafiaments únics, com la latència de xarxa, la tolerància a fallades i la consistència de dades. Els patrons de disseny poden ajudar a abordar aquests desafiaments de manera eficient i estructurada.</p>
</div><h1>Objectius d'aquest Tema</h1>
<div class='content'><ul>
<li>Entendre els desafiaments específics dels sistemes distribuïts.</li>
<li>Aprendre sobre patrons de disseny específics per a sistemes distribuïts.</li>
<li>Veure exemples pràctics de com implementar aquests patrons.</li>
<li>Realitzar exercicis pràctics per reforçar els conceptes apresos.</li>
</ul>
</div><h1>Desafiaments dels Sistemes Distribuïts</h1>
<div class='content'><ol>
<li><strong>Latència de Xarxa</strong>: La comunicació entre nodes pot ser lenta i imprevisible.</li>
<li><strong>Tolerància a Fallades</strong>: Els nodes poden fallar, i el sistema ha de continuar funcionant.</li>
<li><strong>Consistència de Dades</strong>: Mantenir les dades consistents entre diferents nodes és complex.</li>
<li><strong>Escalabilitat</strong>: El sistema ha de poder manejar un augment en la càrrega de treball.</li>
<li><strong>Seguretat</strong>: La comunicació entre nodes ha de ser segura.</li>
</ol>
</div><h1>Patrons de Disseny per a Sistemes Distribuïts</h1>
<div class='content'></div><h2><ol>
<li><strong>Patró de Proxy Distribuït</strong></li>
</ol></h2>
<div class='content'><h4>Descripció</h4>
<p>El patró de Proxy Distribuït permet que un objecte actui com a representant d'un altre objecte situat en un node diferent. Això ajuda a encapsular la complexitat de la comunicació remota.</p>
<h4>Exemple de Codi</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW50ZXJmw61jaWUgZGVsIHNlcnZlaQpwdWJsaWMgaW50ZXJmYWNlIFJlbW90ZVNlcnZpY2UgewogICAgU3RyaW5nIGZldGNoRGF0YSgpOwp9CgovLyBJbXBsZW1lbnRhY2nDsyBkZWwgc2VydmVpIGVuIGVsIHNlcnZpZG9yCnB1YmxpYyBjbGFzcyBSZW1vdGVTZXJ2aWNlSW1wbCBpbXBsZW1lbnRzIFJlbW90ZVNlcnZpY2UgewogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgU3RyaW5nIGZldGNoRGF0YSgpIHsKICAgICAgICByZXR1cm4gIkRhZGVzIGRlcyBkZWwgc2Vydmlkb3IiOwogICAgfQp9CgovLyBQcm94eSBxdWUgYWN0dWEgY29tIGEgcmVwcmVzZW50YW50IGRlbCBzZXJ2ZWkgcmVtb3QKcHVibGljIGNsYXNzIFJlbW90ZVNlcnZpY2VQcm94eSBpbXBsZW1lbnRzIFJlbW90ZVNlcnZpY2UgewogICAgcHJpdmF0ZSBSZW1vdGVTZXJ2aWNlIHJlbW90ZVNlcnZpY2U7CgogICAgcHVibGljIFJlbW90ZVNlcnZpY2VQcm94eShSZW1vdGVTZXJ2aWNlIHJlbW90ZVNlcnZpY2UpIHsKICAgICAgICB0aGlzLnJlbW90ZVNlcnZpY2UgPSByZW1vdGVTZXJ2aWNlOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIFN0cmluZyBmZXRjaERhdGEoKSB7CiAgICAgICAgLy8gQXF1w60gZXMgcG9kcmlhIGFmZWdpciBsYSBsw7JnaWNhIGRlIGNvbXVuaWNhY2nDsyByZW1vdGEKICAgICAgICByZXR1cm4gcmVtb3RlU2VydmljZS5mZXRjaERhdGEoKTsKICAgIH0KfQoKLy8gQ2xpZW50IHF1ZSB1dGlsaXR6YSBlbCBwcm94eQpwdWJsaWMgY2xhc3MgQ2xpZW50IHsKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKICAgICAgICBSZW1vdGVTZXJ2aWNlIHNlcnZpY2UgPSBuZXcgUmVtb3RlU2VydmljZVByb3h5KG5ldyBSZW1vdGVTZXJ2aWNlSW1wbCgpKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oc2VydmljZS5mZXRjaERhdGEoKSk7CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Interf&iacute;cie del servei
public interface RemoteService {
    String fetchData();
}

// Implementaci&oacute; del servei en el servidor
public class RemoteServiceImpl implements RemoteService {
    @Override
    public String fetchData() {
        return &quot;Dades des del servidor&quot;;
    }
}

// Proxy que actua com a representant del servei remot
public class RemoteServiceProxy implements RemoteService {
    private RemoteService remoteService;

    public RemoteServiceProxy(RemoteService remoteService) {
        this.remoteService = remoteService;
    }

    @Override
    public String fetchData() {
        // Aqu&iacute; es podria afegir la l&ograve;gica de comunicaci&oacute; remota
        return remoteService.fetchData();
    }
}

// Client que utilitza el proxy
public class Client {
    public static void main(String[] args) {
        RemoteService service = new RemoteServiceProxy(new RemoteServiceImpl());
        System.out.println(service.fetchData());
    }
}</pre></div><div class='content'><h4>Explicació</h4>
<ul>
<li><strong>RemoteService</strong>: Interfície que defineix el servei.</li>
<li><strong>RemoteServiceImpl</strong>: Implementació del servei en el servidor.</li>
<li><strong>RemoteServiceProxy</strong>: Proxy que encapsula la comunicació remota.</li>
<li><strong>Client</strong>: Client que utilitza el servei a través del proxy.</li>
</ul>
</div><h2><ol start="2">
<li><strong>Patró de Consistència Eventual</strong></li>
</ol></h2>
<div class='content'><h4>Descripció</h4>
<p>Aquest patró permet que les dades siguin eventualment consistents en tots els nodes, acceptant que poden estar temporalment inconsistents.</p>
<h4>Exemple de Codi</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ2xhc3NlIHF1ZSByZXByZXNlbnRhIHVuIGVzZGV2ZW5pbWVudApwdWJsaWMgY2xhc3MgRXZlbnQgewogICAgcHJpdmF0ZSBTdHJpbmcgZGF0YTsKCiAgICBwdWJsaWMgRXZlbnQoU3RyaW5nIGRhdGEpIHsKICAgICAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0RGF0YSgpIHsKICAgICAgICByZXR1cm4gZGF0YTsKICAgIH0KfQoKLy8gQ2xhc3NlIHF1ZSBtYW5lamEgbGEgcmVwbGljYWNpw7MgZCdlc2RldmVuaW1lbnRzCnB1YmxpYyBjbGFzcyBFdmVudFJlcGxpY2F0b3IgewogICAgcHJpdmF0ZSBMaXN0PEV2ZW50PiBldmVudExvZyA9IG5ldyBBcnJheUxpc3Q8PigpOwoKICAgIHB1YmxpYyB2b2lkIHJlcGxpY2F0ZUV2ZW50KEV2ZW50IGV2ZW50KSB7CiAgICAgICAgZXZlbnRMb2cuYWRkKGV2ZW50KTsKICAgICAgICAvLyBMw7JnaWNhIHBlciByZXBsaWNhciBsJ2VzZGV2ZW5pbWVudCBhIGFsdHJlcyBub2RlcwogICAgfQoKICAgIHB1YmxpYyBMaXN0PEV2ZW50PiBnZXRFdmVudExvZygpIHsKICAgICAgICByZXR1cm4gZXZlbnRMb2c7CiAgICB9Cn0KCi8vIEV4ZW1wbGUgZCfDunMKcHVibGljIGNsYXNzIE1haW4gewogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIEV2ZW50UmVwbGljYXRvciByZXBsaWNhdG9yID0gbmV3IEV2ZW50UmVwbGljYXRvcigpOwogICAgICAgIEV2ZW50IGV2ZW50ID0gbmV3IEV2ZW50KCJEYWRlcyBub3ZlcyIpOwogICAgICAgIHJlcGxpY2F0b3IucmVwbGljYXRlRXZlbnQoZXZlbnQpOwoKICAgICAgICAvLyBTaW11bGFjacOzIGRlIGxhIGNvbnNpc3TDqG5jaWEgZXZlbnR1YWwKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkVzZGV2ZW5pbWVudHMgcmVwbGljYXRzOiAiICsgcmVwbGljYXRvci5nZXRFdmVudExvZygpLnNpemUoKSk7CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Classe que representa un esdeveniment
public class Event {
    private String data;

    public Event(String data) {
        this.data = data;
    }

    public String getData() {
        return data;
    }
}

// Classe que maneja la replicaci&oacute; d'esdeveniments
public class EventReplicator {
    private List&lt;Event&gt; eventLog = new ArrayList&lt;&gt;();

    public void replicateEvent(Event event) {
        eventLog.add(event);
        // L&ograve;gica per replicar l'esdeveniment a altres nodes
    }

    public List&lt;Event&gt; getEventLog() {
        return eventLog;
    }
}

// Exemple d'&uacute;s
public class Main {
    public static void main(String[] args) {
        EventReplicator replicator = new EventReplicator();
        Event event = new Event(&quot;Dades noves&quot;);
        replicator.replicateEvent(event);

        // Simulaci&oacute; de la consist&egrave;ncia eventual
        System.out.println(&quot;Esdeveniments replicats: &quot; + replicator.getEventLog().size());
    }
}</pre></div><div class='content'><h4>Explicació</h4>
<ul>
<li><strong>Event</strong>: Classe que representa un esdeveniment que ha de ser replicat.</li>
<li><strong>EventReplicator</strong>: Classe que maneja la replicació d'esdeveniments.</li>
<li><strong>Main</strong>: Exemple d'ús que mostra com replicar un esdeveniment.</li>
</ul>
</div><h2><ol start="3">
<li><strong>Patró de Circuit Breaker</strong></li>
</ol></h2>
<div class='content'><h4>Descripció</h4>
<p>El patró de Circuit Breaker evita que un sistema intenti fer operacions que probablement fallaran, permetent que es recuperi més ràpidament.</p>
<h4>Exemple de Codi</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ2xhc3NlIHF1ZSBpbXBsZW1lbnRhIGVsIHBhdHLDsyBkZSBDaXJjdWl0IEJyZWFrZXIKcHVibGljIGNsYXNzIENpcmN1aXRCcmVha2VyIHsKICAgIHByaXZhdGUgYm9vbGVhbiBpc09wZW4gPSBmYWxzZTsKICAgIHByaXZhdGUgaW50IGZhaWx1cmVDb3VudCA9IDA7CiAgICBwcml2YXRlIGludCBmYWlsdXJlVGhyZXNob2xkID0gMzsKCiAgICBwdWJsaWMgdm9pZCBjYWxsU2VydmljZSgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGlmIChpc09wZW4pIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigiQ2lyY3VpdCBpcyBvcGVuLiBTZXJ2aWNlIGNhbGwgYmxvY2tlZC4iKTsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIFNpbXVsYWNpw7MgZGUgbGEgY3JpZGEgYWwgc2VydmVpCiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHNpbXVsYXRlU2VydmljZUNhbGwoKTsKICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7CiAgICAgICAgICAgICAgICBmYWlsdXJlQ291bnQrKzsKICAgICAgICAgICAgICAgIGlmIChmYWlsdXJlQ291bnQgPj0gZmFpbHVyZVRocmVzaG9sZCkgewogICAgICAgICAgICAgICAgICAgIGlzT3BlbiA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmYWlsdXJlQ291bnQgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZmFpbHVyZUNvdW50Kys7CiAgICAgICAgICAgIGlmIChmYWlsdXJlQ291bnQgPj0gZmFpbHVyZVRocmVzaG9sZCkgewogICAgICAgICAgICAgICAgaXNPcGVuID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBlOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIGJvb2xlYW4gc2ltdWxhdGVTZXJ2aWNlQ2FsbCgpIHsKICAgICAgICAvLyBTaW11bGFjacOzIGQndW5hIGNyaWRhIGFsIHNlcnZlaSBxdWUgcG90IGZhbGxhcgogICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpID4gMC41OwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlc2V0KCkgewogICAgICAgIGlzT3BlbiA9IGZhbHNlOwogICAgICAgIGZhaWx1cmVDb3VudCA9IDA7CiAgICB9Cn0KCi8vIEV4ZW1wbGUgZCfDunMKcHVibGljIGNsYXNzIE1haW4gewogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIENpcmN1aXRCcmVha2VyIGNpcmN1aXRCcmVha2VyID0gbmV3IENpcmN1aXRCcmVha2VyKCk7CgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMTA7IGkrKykgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY2lyY3VpdEJyZWFrZXIuY2FsbFNlcnZpY2UoKTsKICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiU2VydmljZSBjYWxsIHN1Y2Nlc3NmdWwiKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihlLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Classe que implementa el patr&oacute; de Circuit Breaker
public class CircuitBreaker {
    private boolean isOpen = false;
    private int failureCount = 0;
    private int failureThreshold = 3;

    public void callService() throws Exception {
        if (isOpen) {
            throw new Exception(&quot;Circuit is open. Service call blocked.&quot;);
        }

        try {
            // Simulaci&oacute; de la crida al servei
            boolean success = simulateServiceCall();
            if (!success) {
                failureCount++;
                if (failureCount &gt;= failureThreshold) {
                    isOpen = true;
                }
            } else {
                failureCount = 0;
            }
        } catch (Exception e) {
            failureCount++;
            if (failureCount &gt;= failureThreshold) {
                isOpen = true;
            }
            throw e;
        }
    }

    private boolean simulateServiceCall() {
        // Simulaci&oacute; d'una crida al servei que pot fallar
        return Math.random() &gt; 0.5;
    }

    public void reset() {
        isOpen = false;
        failureCount = 0;
    }
}

// Exemple d'&uacute;s
public class Main {
    public static void main(String[] args) {
        CircuitBreaker circuitBreaker = new CircuitBreaker();

        for (int i = 0; i &lt; 10; i++) {
            try {
                circuitBreaker.callService();
                System.out.println(&quot;Service call successful&quot;);
            } catch (Exception e) {
                System.out.println(e.getMessage());
            }
        }
    }
}</pre></div><div class='content'><h4>Explicació</h4>
<ul>
<li><strong>CircuitBreaker</strong>: Implementació del patró de Circuit Breaker.</li>
<li><strong>simulateServiceCall</strong>: Simulació d'una crida al servei que pot fallar.</li>
<li><strong>Main</strong>: Exemple d'ús que mostra com utilitzar el Circuit Breaker.</li>
</ul>
</div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Implementar un Proxy Distribuït</h2>
<div class='content'><p><strong>Descripció</strong>: Implementa un proxy distribuït per a un servei que retorna la data i hora actual des d'un servidor remot.</p>
<p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW50ZXJmw61jaWUgZGVsIHNlcnZlaQpwdWJsaWMgaW50ZXJmYWNlIERhdGVUaW1lU2VydmljZSB7CiAgICBTdHJpbmcgZ2V0Q3VycmVudERhdGVUaW1lKCk7Cn0KCi8vIEltcGxlbWVudGFjacOzIGRlbCBzZXJ2ZWkgZW4gZWwgc2Vydmlkb3IKcHVibGljIGNsYXNzIERhdGVUaW1lU2VydmljZUltcGwgaW1wbGVtZW50cyBEYXRlVGltZVNlcnZpY2UgewogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgU3RyaW5nIGdldEN1cnJlbnREYXRlVGltZSgpIHsKICAgICAgICByZXR1cm4gTG9jYWxEYXRlVGltZS5ub3coKS50b1N0cmluZygpOwogICAgfQp9CgovLyBQcm94eSBxdWUgYWN0dWEgY29tIGEgcmVwcmVzZW50YW50IGRlbCBzZXJ2ZWkgcmVtb3QKcHVibGljIGNsYXNzIERhdGVUaW1lU2VydmljZVByb3h5IGltcGxlbWVudHMgRGF0ZVRpbWVTZXJ2aWNlIHsKICAgIHByaXZhdGUgRGF0ZVRpbWVTZXJ2aWNlIGRhdGVUaW1lU2VydmljZTsKCiAgICBwdWJsaWMgRGF0ZVRpbWVTZXJ2aWNlUHJveHkoRGF0ZVRpbWVTZXJ2aWNlIGRhdGVUaW1lU2VydmljZSkgewogICAgICAgIHRoaXMuZGF0ZVRpbWVTZXJ2aWNlID0gZGF0ZVRpbWVTZXJ2aWNlOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIFN0cmluZyBnZXRDdXJyZW50RGF0ZVRpbWUoKSB7CiAgICAgICAgLy8gQXF1w60gZXMgcG9kcmlhIGFmZWdpciBsYSBsw7JnaWNhIGRlIGNvbXVuaWNhY2nDsyByZW1vdGEKICAgICAgICByZXR1cm4gZGF0ZVRpbWVTZXJ2aWNlLmdldEN1cnJlbnREYXRlVGltZSgpOwogICAgfQp9CgovLyBDbGllbnQgcXVlIHV0aWxpdHphIGVsIHByb3h5CnB1YmxpYyBjbGFzcyBDbGllbnQgewogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIERhdGVUaW1lU2VydmljZSBzZXJ2aWNlID0gbmV3IERhdGVUaW1lU2VydmljZVByb3h5KG5ldyBEYXRlVGltZVNlcnZpY2VJbXBsKCkpOwogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihzZXJ2aWNlLmdldEN1cnJlbnREYXRlVGltZSgpKTsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Interf&iacute;cie del servei
public interface DateTimeService {
    String getCurrentDateTime();
}

// Implementaci&oacute; del servei en el servidor
public class DateTimeServiceImpl implements DateTimeService {
    @Override
    public String getCurrentDateTime() {
        return LocalDateTime.now().toString();
    }
}

// Proxy que actua com a representant del servei remot
public class DateTimeServiceProxy implements DateTimeService {
    private DateTimeService dateTimeService;

    public DateTimeServiceProxy(DateTimeService dateTimeService) {
        this.dateTimeService = dateTimeService;
    }

    @Override
    public String getCurrentDateTime() {
        // Aqu&iacute; es podria afegir la l&ograve;gica de comunicaci&oacute; remota
        return dateTimeService.getCurrentDateTime();
    }
}

// Client que utilitza el proxy
public class Client {
    public static void main(String[] args) {
        DateTimeService service = new DateTimeServiceProxy(new DateTimeServiceImpl());
        System.out.println(service.getCurrentDateTime());
    }
}</pre></div><div class='content'></div><h2>Exercici 2: Implementar un Circuit Breaker</h2>
<div class='content'><p><strong>Descripció</strong>: Implementa un Circuit Breaker per a un servei que retorna un missatge de benvinguda. El servei ha de fallar aleatòriament per simular un entorn real.</p>
<p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ2xhc3NlIHF1ZSBpbXBsZW1lbnRhIGVsIHBhdHLDsyBkZSBDaXJjdWl0IEJyZWFrZXIKcHVibGljIGNsYXNzIENpcmN1aXRCcmVha2VyIHsKICAgIHByaXZhdGUgYm9vbGVhbiBpc09wZW4gPSBmYWxzZTsKICAgIHByaXZhdGUgaW50IGZhaWx1cmVDb3VudCA9IDA7CiAgICBwcml2YXRlIGludCBmYWlsdXJlVGhyZXNob2xkID0gMzsKCiAgICBwdWJsaWMgdm9pZCBjYWxsU2VydmljZSgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIGlmIChpc09wZW4pIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbigiQ2lyY3VpdCBpcyBvcGVuLiBTZXJ2aWNlIGNhbGwgYmxvY2tlZC4iKTsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIFNpbXVsYWNpw7MgZGUgbGEgY3JpZGEgYWwgc2VydmVpCiAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHNpbXVsYXRlU2VydmljZUNhbGwoKTsKICAgICAgICAgICAgaWYgKCFzdWNjZXNzKSB7CiAgICAgICAgICAgICAgICBmYWlsdXJlQ291bnQrKzsKICAgICAgICAgICAgICAgIGlmIChmYWlsdXJlQ291bnQgPj0gZmFpbHVyZVRocmVzaG9sZCkgewogICAgICAgICAgICAgICAgICAgIGlzT3BlbiA9IHRydWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmYWlsdXJlQ291bnQgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgZmFpbHVyZUNvdW50Kys7CiAgICAgICAgICAgIGlmIChmYWlsdXJlQ291bnQgPj0gZmFpbHVyZVRocmVzaG9sZCkgewogICAgICAgICAgICAgICAgaXNPcGVuID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBlOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIGJvb2xlYW4gc2ltdWxhdGVTZXJ2aWNlQ2FsbCgpIHsKICAgICAgICAvLyBTaW11bGFjacOzIGQndW5hIGNyaWRhIGFsIHNlcnZlaSBxdWUgcG90IGZhbGxhcgogICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpID4gMC41OwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlc2V0KCkgewogICAgICAgIGlzT3BlbiA9IGZhbHNlOwogICAgICAgIGZhaWx1cmVDb3VudCA9IDA7CiAgICB9Cn0KCi8vIEV4ZW1wbGUgZCfDunMKcHVibGljIGNsYXNzIE1haW4gewogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIENpcmN1aXRCcmVha2VyIGNpcmN1aXRCcmVha2VyID0gbmV3IENpcmN1aXRCcmVha2VyKCk7CgogICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMTA7IGkrKykgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY2lyY3VpdEJyZWFrZXIuY2FsbFNlcnZpY2UoKTsKICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiU2VydmljZSBjYWxsIHN1Y2Nlc3NmdWwiKTsKICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihlLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Classe que implementa el patr&oacute; de Circuit Breaker
public class CircuitBreaker {
    private boolean isOpen = false;
    private int failureCount = 0;
    private int failureThreshold = 3;

    public void callService() throws Exception {
        if (isOpen) {
            throw new Exception(&quot;Circuit is open. Service call blocked.&quot;);
        }

        try {
            // Simulaci&oacute; de la crida al servei
            boolean success = simulateServiceCall();
            if (!success) {
                failureCount++;
                if (failureCount &gt;= failureThreshold) {
                    isOpen = true;
                }
            } else {
                failureCount = 0;
            }
        } catch (Exception e) {
            failureCount++;
            if (failureCount &gt;= failureThreshold) {
                isOpen = true;
            }
            throw e;
        }
    }

    private boolean simulateServiceCall() {
        // Simulaci&oacute; d'una crida al servei que pot fallar
        return Math.random() &gt; 0.5;
    }

    public void reset() {
        isOpen = false;
        failureCount = 0;
    }
}

// Exemple d'&uacute;s
public class Main {
    public static void main(String[] args) {
        CircuitBreaker circuitBreaker = new CircuitBreaker();

        for (int i = 0; i &lt; 10; i++) {
            try {
                circuitBreaker.callService();
                System.out.println(&quot;Service call successful&quot;);
            } catch (Exception e) {
                System.out.println(e.getMessage());
            }
        }
    }
}</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>En aquesta secció, hem explorat diversos patrons de disseny específics per a sistemes distribuïts, com el Proxy Distribuït, la Consistència Eventual i el Circuit Breaker. Aquests patrons ajuden a abordar els desafiaments únics dels sistemes distribuïts, com la latència de xarxa, la tolerància a fallades i la consistència de dades. Hem vist exemples pràctics de com implementar aquests patrons i hem realitzat exercicis per reforçar els conceptes apresos.</p>
<p>En el següent mòdul, explorarem com aplicar aquests patrons en arquitectures modernes com els microserveis i els sistemes distribuïts.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-02-patrons-microserveis' title="Patrons de Disseny en Microserveis">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-04-patrons-desenvolupament-agil' title="Patrons de Disseny en Desenvolupament Àgil">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
				<!-- 
	<h1>Publicitat</h1>
	<p>Aquest espai està destinat a publicitat.</p>
	<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
	<p>Gràcies per col·laborar!</p>
	 -->
			
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curs de Patrons de Disseny de Programari</h1>
<h2>Mòdul 1: Introducció als Patrons de Disseny</h2>
<ul>
<li><a href="01-01-que-son-patrons">Què són els Patrons de Disseny?</a></li>
<li><a href="01-02-historia-origen">Història i Origen dels Patrons de Disseny</a></li>
<li><a href="01-03-classificacio-patrons">Classificació dels Patrons de Disseny</a></li>
<li><a href="01-04-avantatges-desavantatges">Avantatges i Desavantatges d'Usar Patrons de Disseny</a></li>
</ul>
<h2>Mòdul 2: Patrons Creacionals</h2>
<ul>
<li><a href="02-01-introduccio-creacionals">Introducció als Patrons Creacionals</a></li>
<li><a href="02-02-singleton">Singleton</a></li>
<li><a href="02-03-factory-method">Factory Method</a></li>
<li><a href="02-04-abstract-factory">Abstract Factory</a></li>
<li><a href="02-05-builder">Builder</a></li>
<li><a href="02-06-prototype">Prototype</a></li>
</ul>
<h2>Mòdul 3: Patrons Estructurals</h2>
<ul>
<li><a href="03-01-introduccio-estructurals">Introducció als Patrons Estructurals</a></li>
<li><a href="03-02-adapter">Adapter</a></li>
<li><a href="03-03-bridge">Bridge</a></li>
<li><a href="03-04-composite">Composite</a></li>
<li><a href="03-05-decorator">Decorator</a></li>
<li><a href="03-06-facade">Facade</a></li>
<li><a href="03-07-flyweight">Flyweight</a></li>
<li><a href="03-08-proxy">Proxy</a></li>
</ul>
<h2>Mòdul 4: Patrons de Comportament</h2>
<ul>
<li><a href="04-01-introduccio-comportament">Introducció als Patrons de Comportament</a></li>
<li><a href="04-02-chain-of-responsibility">Chain of Responsibility</a></li>
<li><a href="04-03-command">Command</a></li>
<li><a href="04-04-interpreter">Interpreter</a></li>
<li><a href="04-05-iterator">Iterator</a></li>
<li><a href="04-06-mediator">Mediator</a></li>
<li><a href="04-07-memento">Memento</a></li>
<li><a href="04-08-observer">Observer</a></li>
<li><a href="04-09-state">State</a></li>
<li><a href="04-10-strategy">Strategy</a></li>
<li><a href="04-11-template-method">Template Method</a></li>
<li><a href="04-12-visitor">Visitor</a></li>
</ul>
<h2>Mòdul 5: Aplicació de Patrons de Disseny</h2>
<ul>
<li><a href="05-01-seleccionar-patro">Com Seleccionar el Patró Adequat</a></li>
<li><a href="05-02-exemples-practics">Exemples Pràctics d'Ús de Patrons</a></li>
<li><a href="05-03-patrons-projectes-reals">Patrons de Disseny en Projectes Reals</a></li>
<li><a href="05-04-refactoritzacio-patrons">Refactorització Usant Patrons de Disseny</a></li>
</ul>
<h2>Mòdul 6: Patrons de Disseny Avançats</h2>
<ul>
<li><a href="06-01-patrons-arquitectures-modernes">Patrons de Disseny en Arquitectures Modernes</a></li>
<li><a href="06-02-patrons-microserveis">Patrons de Disseny en Microserveis</a></li>
<li><a href="06-03-patrons-sistemes-distribuits">Patrons de Disseny en Sistemes Distribuïts</a></li>
<li><a href="06-04-patrons-desenvolupament-agil">Patrons de Disseny en Desenvolupament Àgil</a></li>
</ul>
<h2>Mòdul 7: Recursos Addicionals i Conclusió</h2>
<ul>
<li><a href="07-01-llibres-recomanats">Llibres Recomanats</a></li>
<li><a href="07-02-cursos-tutorials">Cursos i Tutorials en Línia</a></li>
<li><a href="07-03-comunitats-forums">Comunitats i Fòrums</a></li>
<li><a href="07-04-conclusio">Conclusió del Curs</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
