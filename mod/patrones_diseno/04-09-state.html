<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>State</title>

    <link rel="alternate" href="https://campusempresa.com/mod/patrones_diseno/04-09-state" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/patrones_diseno/04-09-state" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/patrones_diseno/04-09-state" hreflang="en" />
    
	<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->
	<link href="/css/bootstrap/bootstrap.css?v=1" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<!-- 
  	<style type="text/css">
  		img {
  			visibility:hidden;
  		}
  	</style>
  	 -->
  	<script>
  		var LANG = "ca";
  		var CATEGORY = "foundations";
  		var MOD_NAME = "patrones_diseno";
  		var TEMA_NAME = "04-09";
  		var TYPE = "mod";
  		var PATH = "mod/patrones_diseno/04-09-state";
  		var IS_INDEX = false;
  		var DEVELOP = sessionStorage.getItem("DEVELOP") == "true";
  		  		var ALL_PAGES_MOD = ["01-01-que-son-patrons","01-02-historia-origen","01-03-classificacio-patrons","01-04-avantatges-desavantatges","02-01-introduccio-creacionals","02-02-singleton","02-03-factory-method","02-04-abstract-factory","02-05-builder","02-06-prototype","03-01-introduccio-estructurals","03-02-adapter","03-03-bridge","03-04-composite","03-05-decorator","03-06-facade","03-07-flyweight","03-08-proxy","04-01-introduccio-comportament","04-02-chain-of-responsibility","04-03-command","04-04-interpreter","04-05-iterator","04-06-mediator","04-07-memento","04-08-observer","04-09-state","04-10-strategy","04-11-template-method","04-12-visitor","05-01-seleccionar-patro","05-02-exemples-practics","05-03-patrons-projectes-reals","05-04-refactoritzacio-patrons","06-01-patrons-arquitectures-modernes","06-02-patrons-microserveis","06-03-patrons-sistemes-distribuits","06-04-patrons-desenvolupament-agil","07-01-llibres-recomanats","07-02-cursos-tutorials","07-03-comunitats-forums","07-04-conclusio"];
  		  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
  	<script type="module" src="/js/app.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
</head>

<body class="">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/mod/patrones_diseno/04-09-state" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/patrones_diseno/04-09-state" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Tot el coneixement al teu abast</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my_modules" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Els meus cursos</b></i>
</a>
<a href="/end_modules" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalitzats             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" style="display:none;" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0">
	<div class="col-6 p-0" data-mod="patrones_diseno">
		<a  href="#" class="text-secondary d-none" data-read-mod="patrones_diseno" data-read-unit="04-09" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar com a llegit
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="patrones_diseno" data-unread-unit="04-09" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar com a no llegit
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contingut del curs
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2'>
					<a href='04-08-observer' title="Observer" class="py-2 px-3 btn btn-primary d-none d-md-inline">
				<i class="bi bi-caret-left-square-fill"></i> Anterior 
			</a>
			<a href='04-08-observer' title="Observer" class="py-2 px-3 btn btn-primary d-md-none">
				<i class="bi bi-caret-left-square-fill"></i>
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">State</h2>
			</div>
	<div class='col-2 text-end'>
					<a href='04-10-strategy' title="Strategy" class="py-2 px-3 d-none d-md-inline btn btn-primary"
				data-read-mod="patrones_diseno" data-read-unit="04-09">
				Següent <i class="bi bi-caret-right-square-fill"></i>
			</a>
			<a href='04-10-strategy' title="Strategy" class="py-2 px-3 d-md-none btn btn-primary" 
				data-read-mod="patrones_diseno" data-read-unit="04-09">
				<i class="bi bi-caret-right-square-fill"></i>
			</a>
			</div>
</div>
<div class='content'></div><h1>Introducció al Patró State</h1>
<div class='content'><p>El patró State és un patró de disseny de comportament que permet a un objecte canviar el seu comportament quan el seu estat intern canvia. Aquest patró és especialment útil quan un objecte ha de canviar el seu comportament en funció del seu estat, i aquests canvis de comportament són complexos o nombrosos.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Context</strong>: L'objecte que conté l'estat actual i delega el comportament a l'estat.</li>
<li><strong>State</strong>: Una interfície o classe abstracta que defineix el comportament associat a un estat particular del context.</li>
<li><strong>Concrete States</strong>: Implementacions concretes de la interfície State que defineixen el comportament específic per a un estat particular.</li>
</ul>
</div><h2>Diagrama UML</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ky0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0rCnwgICAgIENvbnRleHQgICAgIHwgICAgICAgICAgfCAgICAgIFN0YXRlICAgICAgfAorLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLSsKfCAtIHN0YXRlOiBTdGF0ZSAgfDw+LS0tLS0tLS18ICsgaGFuZGxlKCk6IHZvaWR8CistLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tKwp8ICsgcmVxdWVzdCgpOiB2b2lkfCAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0rCistLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgICAgICAgICAgICAgIF4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgQ29uY3JldGVTdGF0ZUEgIHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0rCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCArIGhhbmRsZSgpOiB2b2lkfAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLSsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgQ29uY3JldGVTdGF0ZUIgIHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0rCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCArIGhhbmRsZSgpOiB2b2lkfAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLSs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>+-----------------+          +-----------------+
|     Context     |          |      State      |
+-----------------+          +-----------------+
| - state: State  |&lt;&gt;--------| + handle(): void|
+-----------------+          +-----------------+
| + request(): void|          +-----------------+
+-----------------+                    ^
                                       |
                                       |
                             +-----------------+
                             | ConcreteStateA  |
                             +-----------------+
                             | + handle(): void|
                             +-----------------+
                                       ^
                                       |
                             +-----------------+
                             | ConcreteStateB  |
                             +-----------------+
                             | + handle(): void|
                             +-----------------+</pre></div><div class='content'></div><h2>Exemple Pràctic</h2>
<div class='content'><p>Suposem que estem desenvolupant una màquina de cafè que té diferents estats: <code>Ready</code>, <code>Brewing</code>, i <code>OutOfService</code>. Cada estat té un comportament diferent quan es prem el botó de començar.</p>
<h4>Implementació en Java</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW50ZXJmw61jaWUgU3RhdGUKaW50ZXJmYWNlIFN0YXRlIHsKICAgIHZvaWQgaGFuZGxlUmVxdWVzdCgpOwp9CgovLyBFc3RhdCBjb25jcmV0OiBSZWFkeQpjbGFzcyBSZWFkeVN0YXRlIGltcGxlbWVudHMgU3RhdGUgewogICAgcHJpdmF0ZSBDb2ZmZWVNYWNoaW5lIGNvZmZlZU1hY2hpbmU7CgogICAgcHVibGljIFJlYWR5U3RhdGUoQ29mZmVlTWFjaGluZSBjb2ZmZWVNYWNoaW5lKSB7CiAgICAgICAgdGhpcy5jb2ZmZWVNYWNoaW5lID0gY29mZmVlTWFjaGluZTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGhhbmRsZVJlcXVlc3QoKSB7CiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJTdGFydGluZyB0aGUgYnJld2luZyBwcm9jZXNzLi4uIik7CiAgICAgICAgY29mZmVlTWFjaGluZS5zZXRTdGF0ZShjb2ZmZWVNYWNoaW5lLmdldEJyZXdpbmdTdGF0ZSgpKTsKICAgIH0KfQoKLy8gRXN0YXQgY29uY3JldDogQnJld2luZwpjbGFzcyBCcmV3aW5nU3RhdGUgaW1wbGVtZW50cyBTdGF0ZSB7CiAgICBwcml2YXRlIENvZmZlZU1hY2hpbmUgY29mZmVlTWFjaGluZTsKCiAgICBwdWJsaWMgQnJld2luZ1N0YXRlKENvZmZlZU1hY2hpbmUgY29mZmVlTWFjaGluZSkgewogICAgICAgIHRoaXMuY29mZmVlTWFjaGluZSA9IGNvZmZlZU1hY2hpbmU7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBoYW5kbGVSZXF1ZXN0KCkgewogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiQWxyZWFkeSBicmV3aW5nIGNvZmZlZS4uLiIpOwogICAgfQp9CgovLyBFc3RhdCBjb25jcmV0OiBPdXRPZlNlcnZpY2UKY2xhc3MgT3V0T2ZTZXJ2aWNlU3RhdGUgaW1wbGVtZW50cyBTdGF0ZSB7CiAgICBwcml2YXRlIENvZmZlZU1hY2hpbmUgY29mZmVlTWFjaGluZTsKCiAgICBwdWJsaWMgT3V0T2ZTZXJ2aWNlU3RhdGUoQ29mZmVlTWFjaGluZSBjb2ZmZWVNYWNoaW5lKSB7CiAgICAgICAgdGhpcy5jb2ZmZWVNYWNoaW5lID0gY29mZmVlTWFjaGluZTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGhhbmRsZVJlcXVlc3QoKSB7CiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJNYWNoaW5lIGlzIG91dCBvZiBzZXJ2aWNlLiIpOwogICAgfQp9CgovLyBDb250ZXh0OiBDb2ZmZWVNYWNoaW5lCmNsYXNzIENvZmZlZU1hY2hpbmUgewogICAgcHJpdmF0ZSBTdGF0ZSByZWFkeVN0YXRlOwogICAgcHJpdmF0ZSBTdGF0ZSBicmV3aW5nU3RhdGU7CiAgICBwcml2YXRlIFN0YXRlIG91dE9mU2VydmljZVN0YXRlOwoKICAgIHByaXZhdGUgU3RhdGUgY3VycmVudFN0YXRlOwoKICAgIHB1YmxpYyBDb2ZmZWVNYWNoaW5lKCkgewogICAgICAgIHJlYWR5U3RhdGUgPSBuZXcgUmVhZHlTdGF0ZSh0aGlzKTsKICAgICAgICBicmV3aW5nU3RhdGUgPSBuZXcgQnJld2luZ1N0YXRlKHRoaXMpOwogICAgICAgIG91dE9mU2VydmljZVN0YXRlID0gbmV3IE91dE9mU2VydmljZVN0YXRlKHRoaXMpOwoKICAgICAgICBjdXJyZW50U3RhdGUgPSByZWFkeVN0YXRlOyAvLyBJbml0aWFsIHN0YXRlCiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0U3RhdGUoU3RhdGUgc3RhdGUpIHsKICAgICAgICBjdXJyZW50U3RhdGUgPSBzdGF0ZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBwcmVzc0J1dHRvbigpIHsKICAgICAgICBjdXJyZW50U3RhdGUuaGFuZGxlUmVxdWVzdCgpOwogICAgfQoKICAgIHB1YmxpYyBTdGF0ZSBnZXRSZWFkeVN0YXRlKCkgewogICAgICAgIHJldHVybiByZWFkeVN0YXRlOwogICAgfQoKICAgIHB1YmxpYyBTdGF0ZSBnZXRCcmV3aW5nU3RhdGUoKSB7CiAgICAgICAgcmV0dXJuIGJyZXdpbmdTdGF0ZTsKICAgIH0KCiAgICBwdWJsaWMgU3RhdGUgZ2V0T3V0T2ZTZXJ2aWNlU3RhdGUoKSB7CiAgICAgICAgcmV0dXJuIG91dE9mU2VydmljZVN0YXRlOwogICAgfQp9CgovLyBDbGllbnQKcHVibGljIGNsYXNzIFN0YXRlUGF0dGVybkRlbW8gewogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIENvZmZlZU1hY2hpbmUgY29mZmVlTWFjaGluZSA9IG5ldyBDb2ZmZWVNYWNoaW5lKCk7CgogICAgICAgIGNvZmZlZU1hY2hpbmUucHJlc3NCdXR0b24oKTsgLy8gU3RhcnRpbmcgdGhlIGJyZXdpbmcgcHJvY2Vzcy4uLgogICAgICAgIGNvZmZlZU1hY2hpbmUucHJlc3NCdXR0b24oKTsgLy8gQWxyZWFkeSBicmV3aW5nIGNvZmZlZS4uLgoKICAgICAgICBjb2ZmZWVNYWNoaW5lLnNldFN0YXRlKGNvZmZlZU1hY2hpbmUuZ2V0T3V0T2ZTZXJ2aWNlU3RhdGUoKSk7CiAgICAgICAgY29mZmVlTWFjaGluZS5wcmVzc0J1dHRvbigpOyAvLyBNYWNoaW5lIGlzIG91dCBvZiBzZXJ2aWNlLgogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Interf&iacute;cie State
interface State {
    void handleRequest();
}

// Estat concret: Ready
class ReadyState implements State {
    private CoffeeMachine coffeeMachine;

    public ReadyState(CoffeeMachine coffeeMachine) {
        this.coffeeMachine = coffeeMachine;
    }

    @Override
    public void handleRequest() {
        System.out.println(&quot;Starting the brewing process...&quot;);
        coffeeMachine.setState(coffeeMachine.getBrewingState());
    }
}

// Estat concret: Brewing
class BrewingState implements State {
    private CoffeeMachine coffeeMachine;

    public BrewingState(CoffeeMachine coffeeMachine) {
        this.coffeeMachine = coffeeMachine;
    }

    @Override
    public void handleRequest() {
        System.out.println(&quot;Already brewing coffee...&quot;);
    }
}

// Estat concret: OutOfService
class OutOfServiceState implements State {
    private CoffeeMachine coffeeMachine;

    public OutOfServiceState(CoffeeMachine coffeeMachine) {
        this.coffeeMachine = coffeeMachine;
    }

    @Override
    public void handleRequest() {
        System.out.println(&quot;Machine is out of service.&quot;);
    }
}

// Context: CoffeeMachine
class CoffeeMachine {
    private State readyState;
    private State brewingState;
    private State outOfServiceState;

    private State currentState;

    public CoffeeMachine() {
        readyState = new ReadyState(this);
        brewingState = new BrewingState(this);
        outOfServiceState = new OutOfServiceState(this);

        currentState = readyState; // Initial state
    }

    public void setState(State state) {
        currentState = state;
    }

    public void pressButton() {
        currentState.handleRequest();
    }

    public State getReadyState() {
        return readyState;
    }

    public State getBrewingState() {
        return brewingState;
    }

    public State getOutOfServiceState() {
        return outOfServiceState;
    }
}

// Client
public class StatePatternDemo {
    public static void main(String[] args) {
        CoffeeMachine coffeeMachine = new CoffeeMachine();

        coffeeMachine.pressButton(); // Starting the brewing process...
        coffeeMachine.pressButton(); // Already brewing coffee...

        coffeeMachine.setState(coffeeMachine.getOutOfServiceState());
        coffeeMachine.pressButton(); // Machine is out of service.
    }
}</pre></div><div class='content'></div><h2>Exercici Pràctic</h2>
<div class='content'><h4>Enunciat</h4>
<p>Implementa un sistema de semàfor utilitzant el patró State. El semàfor ha de tenir tres estats: <code>Red</code>, <code>Yellow</code>, i <code>Green</code>. Cada estat ha de tenir un comportament diferent quan es canvia l'estat.</p>
<h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW50ZXJmw61jaWUgU3RhdGUKaW50ZXJmYWNlIFRyYWZmaWNMaWdodFN0YXRlIHsKICAgIHZvaWQgY2hhbmdlKFRyYWZmaWNMaWdodCB0cmFmZmljTGlnaHQpOwp9CgovLyBFc3RhdCBjb25jcmV0OiBSZWQKY2xhc3MgUmVkU3RhdGUgaW1wbGVtZW50cyBUcmFmZmljTGlnaHRTdGF0ZSB7CiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGNoYW5nZShUcmFmZmljTGlnaHQgdHJhZmZpY0xpZ2h0KSB7CiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJDaGFuZ2luZyBmcm9tIFJlZCB0byBHcmVlbi4uLiIpOwogICAgICAgIHRyYWZmaWNMaWdodC5zZXRTdGF0ZShuZXcgR3JlZW5TdGF0ZSgpKTsKICAgIH0KfQoKLy8gRXN0YXQgY29uY3JldDogWWVsbG93CmNsYXNzIFllbGxvd1N0YXRlIGltcGxlbWVudHMgVHJhZmZpY0xpZ2h0U3RhdGUgewogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBjaGFuZ2UoVHJhZmZpY0xpZ2h0IHRyYWZmaWNMaWdodCkgewogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiQ2hhbmdpbmcgZnJvbSBZZWxsb3cgdG8gUmVkLi4uIik7CiAgICAgICAgdHJhZmZpY0xpZ2h0LnNldFN0YXRlKG5ldyBSZWRTdGF0ZSgpKTsKICAgIH0KfQoKLy8gRXN0YXQgY29uY3JldDogR3JlZW4KY2xhc3MgR3JlZW5TdGF0ZSBpbXBsZW1lbnRzIFRyYWZmaWNMaWdodFN0YXRlIHsKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgY2hhbmdlKFRyYWZmaWNMaWdodCB0cmFmZmljTGlnaHQpIHsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkNoYW5naW5nIGZyb20gR3JlZW4gdG8gWWVsbG93Li4uIik7CiAgICAgICAgdHJhZmZpY0xpZ2h0LnNldFN0YXRlKG5ldyBZZWxsb3dTdGF0ZSgpKTsKICAgIH0KfQoKLy8gQ29udGV4dDogVHJhZmZpY0xpZ2h0CmNsYXNzIFRyYWZmaWNMaWdodCB7CiAgICBwcml2YXRlIFRyYWZmaWNMaWdodFN0YXRlIHN0YXRlOwoKICAgIHB1YmxpYyBUcmFmZmljTGlnaHQoKSB7CiAgICAgICAgc3RhdGUgPSBuZXcgUmVkU3RhdGUoKTsgLy8gSW5pdGlhbCBzdGF0ZQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFN0YXRlKFRyYWZmaWNMaWdodFN0YXRlIHN0YXRlKSB7CiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGNoYW5nZSgpIHsKICAgICAgICBzdGF0ZS5jaGFuZ2UodGhpcyk7CiAgICB9Cn0KCi8vIENsaWVudApwdWJsaWMgY2xhc3MgVHJhZmZpY0xpZ2h0RGVtbyB7CiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAgVHJhZmZpY0xpZ2h0IHRyYWZmaWNMaWdodCA9IG5ldyBUcmFmZmljTGlnaHQoKTsKCiAgICAgICAgdHJhZmZpY0xpZ2h0LmNoYW5nZSgpOyAvLyBDaGFuZ2luZyBmcm9tIFJlZCB0byBHcmVlbi4uLgogICAgICAgIHRyYWZmaWNMaWdodC5jaGFuZ2UoKTsgLy8gQ2hhbmdpbmcgZnJvbSBHcmVlbiB0byBZZWxsb3cuLi4KICAgICAgICB0cmFmZmljTGlnaHQuY2hhbmdlKCk7IC8vIENoYW5naW5nIGZyb20gWWVsbG93IHRvIFJlZC4uLgogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Interf&iacute;cie State
interface TrafficLightState {
    void change(TrafficLight trafficLight);
}

// Estat concret: Red
class RedState implements TrafficLightState {
    @Override
    public void change(TrafficLight trafficLight) {
        System.out.println(&quot;Changing from Red to Green...&quot;);
        trafficLight.setState(new GreenState());
    }
}

// Estat concret: Yellow
class YellowState implements TrafficLightState {
    @Override
    public void change(TrafficLight trafficLight) {
        System.out.println(&quot;Changing from Yellow to Red...&quot;);
        trafficLight.setState(new RedState());
    }
}

// Estat concret: Green
class GreenState implements TrafficLightState {
    @Override
    public void change(TrafficLight trafficLight) {
        System.out.println(&quot;Changing from Green to Yellow...&quot;);
        trafficLight.setState(new YellowState());
    }
}

// Context: TrafficLight
class TrafficLight {
    private TrafficLightState state;

    public TrafficLight() {
        state = new RedState(); // Initial state
    }

    public void setState(TrafficLightState state) {
        this.state = state;
    }

    public void change() {
        state.change(this);
    }
}

// Client
public class TrafficLightDemo {
    public static void main(String[] args) {
        TrafficLight trafficLight = new TrafficLight();

        trafficLight.change(); // Changing from Red to Green...
        trafficLight.change(); // Changing from Green to Yellow...
        trafficLight.change(); // Changing from Yellow to Red...
    }
}</pre></div><div class='content'></div><h2>Errors Comuns i Consells</h2>
<div class='content'><ul>
<li><strong>No encapsular l'estat</strong>: Assegura't que l'estat estigui encapsulat dins del context i que només es pugui canviar a través de mètodes definits.</li>
<li><strong>No definir comportaments específics en el context</strong>: Mantingues els comportaments específics dins de les classes d'estat concret per seguir el principi de responsabilitat única.</li>
<li><strong>No gestionar correctament les transicions d'estat</strong>: Assegura't que les transicions d'estat siguin clares i gestionades adequadament per evitar inconsistències.</li>
</ul>
</div><h1>Resum</h1>
<div class='content'><p>El patró State permet que un objecte canviï el seu comportament quan el seu estat intern canvia. Aquest patró és útil per gestionar comportaments complexos que depenen de l'estat de l'objecte. Hem vist un exemple pràctic amb una màquina de cafè i un exercici amb un sistema de semàfor. A més, hem destacat alguns errors comuns i consells per evitar-los.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-08-observer' title="Observer" class="py-2 px-3 btn btn-primary d-none d-md-inline">
				<i class="bi bi-caret-left-square-fill"></i> Anterior 
			</a>
			<a href='04-08-observer' title="Observer" class="py-2 px-3 btn btn-primary d-md-none">
				<i class="bi bi-caret-left-square-fill"></i>
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-10-strategy' title="Strategy" class="py-2 px-3 d-none d-md-inline btn btn-primary"
				data-read-mod="patrones_diseno" data-read-unit="04-09">
				Següent <i class="bi bi-caret-right-square-fill"></i>
			</a>
			<a href='04-10-strategy' title="Strategy" class="py-2 px-3 d-md-none btn btn-primary" 
				data-read-mod="patrones_diseno" data-read-unit="04-09">
				<i class="bi bi-caret-right-square-fill"></i>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

			
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curs de Patrons de Disseny de Programari</h1>
<h2>Mòdul 1: Introducció als Patrons de Disseny</h2>
<ul>
<li><a href="01-01-que-son-patrons">Què són els Patrons de Disseny?</a></li>
<li><a href="01-02-historia-origen">Història i Origen dels Patrons de Disseny</a></li>
<li><a href="01-03-classificacio-patrons">Classificació dels Patrons de Disseny</a></li>
<li><a href="01-04-avantatges-desavantatges">Avantatges i Desavantatges d'Usar Patrons de Disseny</a></li>
</ul>
<h2>Mòdul 2: Patrons Creacionals</h2>
<ul>
<li><a href="02-01-introduccio-creacionals">Introducció als Patrons Creacionals</a></li>
<li><a href="02-02-singleton">Singleton</a></li>
<li><a href="02-03-factory-method">Factory Method</a></li>
<li><a href="02-04-abstract-factory">Abstract Factory</a></li>
<li><a href="02-05-builder">Builder</a></li>
<li><a href="02-06-prototype">Prototype</a></li>
</ul>
<h2>Mòdul 3: Patrons Estructurals</h2>
<ul>
<li><a href="03-01-introduccio-estructurals">Introducció als Patrons Estructurals</a></li>
<li><a href="03-02-adapter">Adapter</a></li>
<li><a href="03-03-bridge">Bridge</a></li>
<li><a href="03-04-composite">Composite</a></li>
<li><a href="03-05-decorator">Decorator</a></li>
<li><a href="03-06-facade">Facade</a></li>
<li><a href="03-07-flyweight">Flyweight</a></li>
<li><a href="03-08-proxy">Proxy</a></li>
</ul>
<h2>Mòdul 4: Patrons de Comportament</h2>
<ul>
<li><a href="04-01-introduccio-comportament">Introducció als Patrons de Comportament</a></li>
<li><a href="04-02-chain-of-responsibility">Chain of Responsibility</a></li>
<li><a href="04-03-command">Command</a></li>
<li><a href="04-04-interpreter">Interpreter</a></li>
<li><a href="04-05-iterator">Iterator</a></li>
<li><a href="04-06-mediator">Mediator</a></li>
<li><a href="04-07-memento">Memento</a></li>
<li><a href="04-08-observer">Observer</a></li>
<li><a href="04-09-state">State</a></li>
<li><a href="04-10-strategy">Strategy</a></li>
<li><a href="04-11-template-method">Template Method</a></li>
<li><a href="04-12-visitor">Visitor</a></li>
</ul>
<h2>Mòdul 5: Aplicació de Patrons de Disseny</h2>
<ul>
<li><a href="05-01-seleccionar-patro">Com Seleccionar el Patró Adequat</a></li>
<li><a href="05-02-exemples-practics">Exemples Pràctics d'Ús de Patrons</a></li>
<li><a href="05-03-patrons-projectes-reals">Patrons de Disseny en Projectes Reals</a></li>
<li><a href="05-04-refactoritzacio-patrons">Refactorització Usant Patrons de Disseny</a></li>
</ul>
<h2>Mòdul 6: Patrons de Disseny Avançats</h2>
<ul>
<li><a href="06-01-patrons-arquitectures-modernes">Patrons de Disseny en Arquitectures Modernes</a></li>
<li><a href="06-02-patrons-microserveis">Patrons de Disseny en Microserveis</a></li>
<li><a href="06-03-patrons-sistemes-distribuits">Patrons de Disseny en Sistemes Distribuïts</a></li>
<li><a href="06-04-patrons-desenvolupament-agil">Patrons de Disseny en Desenvolupament Àgil</a></li>
</ul>
<h2>Mòdul 7: Recursos Addicionals i Conclusió</h2>
<ul>
<li><a href="07-01-llibres-recomanats">Llibres Recomanats</a></li>
<li><a href="07-02-cursos-tutorials">Cursos i Tutorials en Línia</a></li>
<li><a href="07-03-comunitats-forums">Comunitats i Fòrums</a></li>
<li><a href="07-04-conclusio">Conclusió del Curs</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuari no autentificat</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<p id="loginModalEmail"></p>
            	<div id="mensaje" class="error"></div>
            	<div id="mensaje_info" class="text-success"></div>
            	
				<div class="mt-4 d-none" id="forgotPasswordSection">
					<div class="mb-3">
    <label for="recovery-email" class="form-label">Correu electrònic</label>
    <input type="email" required class="form-control" id="recovery-email" placeholder="Introdueix el teu correu electrònic">
</div>
<button class="btn btn-primary" id="btnRecover">Enviar enllaç de recuperació</button>

				</div>
								
				<div class="mt-4 d-none" id="deleteUserSection">	
					<div class="mb-3 alert alert-danger">
	Atenció! Estàs a punt d'eliminar totes les dades de registre i progrés.<br><b>Aquesta acció no es pot desfer.</b>
</div>
<div class="mb-3">
    <input type="password" required class="form-control" id="delete-user-pwd" placeholder="Introdueix la teva contrasenya">
</div>
<button class="btn btn-primary" id="btnDeleteUser">Eliminar usuari</button>

				</div>
				
				<div class="mt-4 d-none" id="changePassordSection">
					<div class="mb-3 row">
	<div class="col col-12 my-2">
	    <input type="password" required class="form-control" id="change-pwd-actual" placeholder="Introdueix la contrasenya actual">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-1" placeholder="Introdueix la nova contrasenya">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-2" placeholder="Repeteix la nova contrasenya">
	</div>
</div>
<button class="btn btn-primary" id="btnChangePassword">Canviar la contrasenya</button>

				</div>
				
				<div class="mt-4 d-none alert alert-warning" id="verifyPasswordSection">
					<p><b>Falta verificar correu</b></p>
					<a id="btnVerifyEmail" href="#">Enviar enllaç de verificació</a>

				</div>
				
				<div class="mt-4 d-none" id="disconnectUserSection">
					<div class="mb-3">
    <button id="btnDisconnect" class="btn btn-primary">Desconnectar</button>
</div>

<hr>

<div class="mt-3">
    <button class="btn btn-outline-secondary" id="change-password-link">Canviar la contrasenya</button>
</div>

<div class="mt-3">
    <a href="#" id="delete-user-link">Eliminar usuari</a>
</div>

				</div>
            
            	<div class="mt-4 d-none" id="modalTabsSection">
            		<ul class="nav nav-tabs" id="authTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab" aria-controls="login" aria-selected="true">
        	Iniciar sessió
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" role="tab" aria-controls="register" aria-selected="false">
        	Registrar-se
        </button>
    </li>
</ul>

<div class="tab-content mt-3" id="authTabsContent">
    <div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
    	<div class="mb-3">
    <label for="login-username" class="form-label">Correu electrònic</label>
    <input type="email" required class="form-control" id="login-username" placeholder="Introdueix el teu correu electrònic">
</div>
<div class="mb-3">
    <label for="login-password" class="form-label">Contrasenya</label>
    <input type="password"  required class="form-control" id="login-password" placeholder="Introdueix la teva contrasenya">
</div>
<button class="btn btn-primary" id="btnLogin">Iniciar sessió</button>
<div class="mt-3">
    <a href="#" id="forgot-password-link">Has oblidat la teva contrasenya?</a>
</div>
    </div>

    <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
    	<div class="mb-3">
    <label for="register-email" class="form-label">Correu electrònic</label>
    <input type="email" class="form-control" id="register-email" required placeholder="Introdueix el teu correu electrònic">
</div>

<div class="mb-3">
    <label for="register-password" class="form-label">Contrasenya</label>
    <input type="password" class="form-control"  required id="register-password" placeholder="Introdueix la teva contrasenya">
</div>

<div class="mb-3">
    <label for="register-name" class="form-label">Nom</label>
    <input type="text" class="form-control"  required id="register-name" placeholder="Introdueix el teu nom">
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-conditions-reg">
    <label for="accept-conditions-reg" class="form-check-label">
        He llegit i accepto la <a href="/privacity" target="blank">Política de Privacitat</a> i els <a href="/licence" target="blank">Termes i Condicions d'Ús</a>.
    </label>
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-allow_comunications">
    <label for="accept-allow_comunications" class="form-check-label">
        Vull rebre notícies i actualitzacions sobre els cursos (opcional).
    </label>
</div>

<button id="btnRegister" class="btn btn-primary">Registrar-se</button>
    </div>
</div>
            	</div>
            </div>
        </div>
    </div>
</div>

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
