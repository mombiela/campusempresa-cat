<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proves unitàries</title>

    <link rel="alternate" href="https://campusempresa.com/mod/angular2/10-01-unit-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/angular2/10-01-unit-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/angular2/10-01-unit-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/angular2/10-01-unit-testing" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/angular2/10-01-unit-testing" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-04-ngrx-effects' title="NgRx Effects">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Proves unitàries</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='10-02-component-testing' title="Proves de components">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Les proves unitàries són una part essencial del desenvolupament de programari, ja que permeten verificar que les unitats individuals de codi funcionen correctament. En Angular, les proves unitàries es realitzen principalment amb el framework de proves Jasmine i l'executor de proves Karma.</p>
</div><h1>Objectius del Mòdul</h1>
<div class='content'><ul>
<li>Entendre la importància de les proves unitàries.</li>
<li>Aprendre a configurar l'entorn de proves en Angular.</li>
<li>Escriure i executar proves unitàries per components, serveis i altres unitats de codi.</li>
</ul>
</div><h1>Continguts</h1>
<div class='content'><ol>
<li><a href="#introducció-a-les-proves-unitàries">Introducció a les proves unitàries</a></li>
<li><a href="#configuració-de-l'entorn-de-proves">Configuració de l'entorn de proves</a></li>
<li><a href="#escriure-proves-unitàries">Escriure proves unitàries</a></li>
<li><a href="#executar-proves-unitàries">Executar proves unitàries</a></li>
<li><a href="#exemples-pràctics">Exemples pràctics</a></li>
<li><a href="#exercicis-pràctics">Exercicis pràctics</a></li>
</ol>
</div><h1>Introducció a les proves unitàries</h1>
<div class='content'><p>Les proves unitàries són proves automàtiques que verifiquen el comportament d'una unitat de codi, com ara una funció, un mètode o una classe. Aquestes proves ajuden a detectar errors en fases primerenques del desenvolupament i asseguren que el codi es comporti com s'espera.</p>
</div><h2>Beneficis de les proves unitàries</h2>
<div class='content'><ul>
<li><strong>Detecció primerenca d'errors:</strong> Les proves unitàries permeten detectar errors en fases primerenques del desenvolupament.</li>
<li><strong>Facilitat de manteniment:</strong> Les proves unitàries fan que el codi sigui més fàcil de mantenir, ja que qualsevol canvi que introdueixi errors serà detectat immediatament.</li>
<li><strong>Documentació:</strong> Les proves unitàries serveixen com a documentació del comportament esperat del codi.</li>
</ul>
</div><h1>Configuració de l'entorn de proves</h1>
<div class='content'><p>Angular ve amb una configuració de proves predefinida que utilitza Jasmine i Karma. Quan es crea un nou projecte Angular, l'entorn de proves ja està configurat.</p>
</div><h2>Fitxers clau</h2>
<div class='content'><ul>
<li><strong>karma.conf.js:</strong> Configuració de Karma.</li>
<li><strong>tsconfig.spec.json:</strong> Configuració TypeScript per a les proves.</li>
<li><strong>test.ts:</strong> Punt d'entrada per a les proves.</li>
</ul>
</div><h2>Instal·lació de dependències</h2>
<div class='content'><p>Assegura't que les dependències necessàries estiguin instal·lades:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgLS1zYXZlLWRldiBqYXNtaW5lLWNvcmUga2FybWEga2FybWEtY2hyb21lLWxhdW5jaGVyIGthcm1hLWphc21pbmUga2FybWEtamFzbWluZS1odG1sLXJlcG9ydGVy"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install --save-dev jasmine-core karma karma-chrome-launcher karma-jasmine karma-jasmine-html-reporter</pre></div><div class='content'></div><h1>Escriure proves unitàries</h1>
<div class='content'><p>Les proves unitàries en Angular es defineixen en fitxers amb l'extensió <code>.spec.ts</code>. Aquests fitxers contenen blocs de proves definits amb Jasmine.</p>
</div><h2>Estructura bàsica d'una prova</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVzY3JpYmUoJ05vbSBkZSBsYSB1bml0YXQgZGUgY29kaScsICgpID0+IHsKICBpdCgnaGF1cmlhIGRlIGZlciBhbGd1bmEgY29zYScsICgpID0+IHsKICAgIC8vIENvbmZpZ3VyYWNpw7MgZGUgbGEgcHJvdmEKICAgIGNvbnN0IHJlc3VsdGF0ID0gZnVuY2nDs0FUZXN0YXIoKTsKICAgIC8vIEV4cGVjdGF0aXZhCiAgICBleHBlY3QocmVzdWx0YXQpLnRvQmUodmFsb3JFc3BlcmF0KTsKICB9KTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>describe('Nom de la unitat de codi', () =&gt; {
  it('hauria de fer alguna cosa', () =&gt; {
    // Configuraci&oacute; de la prova
    const resultat = funci&oacute;ATestar();
    // Expectativa
    expect(resultat).toBe(valorEsperat);
  });
});</pre></div><div class='content'></div><h2>Exemple: Prova d'una funció simple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gZnVuY2lvbnMudHMKZXhwb3J0IGZ1bmN0aW9uIHN1bWEoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBudW1iZXIgewogIHJldHVybiBhICsgYjsKfQoKLy8gZnVuY2lvbnMuc3BlYy50cwppbXBvcnQgeyBzdW1hIH0gZnJvbSAnLi9mdW5jaW9ucyc7CgpkZXNjcmliZSgnRnVuY2nDsyBzdW1hJywgKCkgPT4gewogIGl0KCdoYXVyaWEgZGUgcmV0b3JuYXIgbGEgc3VtYSBkZSBkb3Mgbm9tYnJlcycsICgpID0+IHsKICAgIGNvbnN0IHJlc3VsdGF0ID0gc3VtYSgyLCAzKTsKICAgIGV4cGVjdChyZXN1bHRhdCkudG9CZSg1KTsKICB9KTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// funcions.ts
export function suma(a: number, b: number): number {
  return a + b;
}

// funcions.spec.ts
import { suma } from './funcions';

describe('Funci&oacute; suma', () =&gt; {
  it('hauria de retornar la suma de dos nombres', () =&gt; {
    const resultat = suma(2, 3);
    expect(resultat).toBe(5);
  });
});</pre></div><div class='content'></div><h1>Executar proves unitàries</h1>
<div class='content'><p>Per executar les proves unitàries, utilitza el següent comandament:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmcgdGVzdA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ng test</pre></div><div class='content'><p>Aquest comandament iniciarà Karma, que executarà les proves i mostrarà els resultats en temps real.</p>
</div><h1>Exemples pràctics</h1>
<h2>Prova d'un component</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gYXBwLmNvbXBvbmVudC50cwppbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnYXBwLXJvb3QnLAogIHRlbXBsYXRlOiAnPGgxPnt7dGl0bGV9fTwvaDE+Jwp9KQpleHBvcnQgY2xhc3MgQXBwQ29tcG9uZW50IHsKICB0aXRsZSA9ICdIb2xhLCBBbmd1bGFyISc7Cn0KCi8vIGFwcC5jb21wb25lbnQuc3BlYy50cwppbXBvcnQgeyBUZXN0QmVkLCBDb21wb25lbnRGaXh0dXJlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZS90ZXN0aW5nJzsKaW1wb3J0IHsgQXBwQ29tcG9uZW50IH0gZnJvbSAnLi9hcHAuY29tcG9uZW50JzsKCmRlc2NyaWJlKCdBcHBDb21wb25lbnQnLCAoKSA9PiB7CiAgbGV0IGNvbXBvbmVudDogQXBwQ29tcG9uZW50OwogIGxldCBmaXh0dXJlOiBDb21wb25lbnRGaXh0dXJlPEFwcENvbXBvbmVudD47CgogIGJlZm9yZUVhY2goKCkgPT4gewogICAgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgICAgZGVjbGFyYXRpb25zOiBbQXBwQ29tcG9uZW50XQogICAgfSk7CiAgICBmaXh0dXJlID0gVGVzdEJlZC5jcmVhdGVDb21wb25lbnQoQXBwQ29tcG9uZW50KTsKICAgIGNvbXBvbmVudCA9IGZpeHR1cmUuY29tcG9uZW50SW5zdGFuY2U7CiAgfSk7CgogIGl0KCdoYXVyaWEgZGUgY3JlYXIgZWwgY29tcG9uZW50JywgKCkgPT4gewogICAgZXhwZWN0KGNvbXBvbmVudCkudG9CZVRydXRoeSgpOwogIH0pOwoKICBpdCgnaGF1cmlhIGRlIHRlbmlyIGVsIHTDrXRvbCAiSG9sYSwgQW5ndWxhciEiJywgKCkgPT4gewogICAgZXhwZWN0KGNvbXBvbmVudC50aXRsZSkudG9CZSgnSG9sYSwgQW5ndWxhciEnKTsKICB9KTsKCiAgaXQoJ2hhdXJpYSBkZSBtb3N0cmFyIGVsIHTDrXRvbCBlbiB1biBoMScsICgpID0+IHsKICAgIGZpeHR1cmUuZGV0ZWN0Q2hhbmdlcygpOwogICAgY29uc3QgY29tcGlsZWQgPSBmaXh0dXJlLm5hdGl2ZUVsZW1lbnQ7CiAgICBleHBlY3QoY29tcGlsZWQucXVlcnlTZWxlY3RvcignaDEnKS50ZXh0Q29udGVudCkudG9Db250YWluKCdIb2xhLCBBbmd1bGFyIScpOwogIH0pOwp9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// app.component.ts
import { Component } from '@angular/core';

@Component({
  selector: 'app-root',
  template: '&lt;h1&gt;{{title}}&lt;/h1&gt;'
})
export class AppComponent {
  title = 'Hola, Angular!';
}

// app.component.spec.ts
import { TestBed, ComponentFixture } from '@angular/core/testing';
import { AppComponent } from './app.component';

describe('AppComponent', () =&gt; {
  let component: AppComponent;
  let fixture: ComponentFixture&lt;AppComponent&gt;;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({
      declarations: [AppComponent]
    });
    fixture = TestBed.createComponent(AppComponent);
    component = fixture.componentInstance;
  });

  it('hauria de crear el component', () =&gt; {
    expect(component).toBeTruthy();
  });

  it('hauria de tenir el t&iacute;tol &quot;Hola, Angular!&quot;', () =&gt; {
    expect(component.title).toBe('Hola, Angular!');
  });

  it('hauria de mostrar el t&iacute;tol en un h1', () =&gt; {
    fixture.detectChanges();
    const compiled = fixture.nativeElement;
    expect(compiled.querySelector('h1').textContent).toContain('Hola, Angular!');
  });
});</pre></div><div class='content'></div><h1>Exercicis pràctics</h1>
<h2>Exercici 1: Prova d'una funció</h2>
<div class='content'><p>Crea una funció que multipliqui dos nombres i escriu una prova unitària per verificar el seu comportament.</p>
<h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gZnVuY2lvbnMudHMKZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGxpY2EoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBudW1iZXIgewogIHJldHVybiBhICogYjsKfQoKLy8gZnVuY2lvbnMuc3BlYy50cwppbXBvcnQgeyBtdWx0aXBsaWNhIH0gZnJvbSAnLi9mdW5jaW9ucyc7CgpkZXNjcmliZSgnRnVuY2nDsyBtdWx0aXBsaWNhJywgKCkgPT4gewogIGl0KCdoYXVyaWEgZGUgcmV0b3JuYXIgZWwgcHJvZHVjdGUgZGUgZG9zIG5vbWJyZXMnLCAoKSA9PiB7CiAgICBjb25zdCByZXN1bHRhdCA9IG11bHRpcGxpY2EoMiwgMyk7CiAgICBleHBlY3QocmVzdWx0YXQpLnRvQmUoNik7CiAgfSk7Cn0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// funcions.ts
export function multiplica(a: number, b: number): number {
  return a * b;
}

// funcions.spec.ts
import { multiplica } from './funcions';

describe('Funci&oacute; multiplica', () =&gt; {
  it('hauria de retornar el producte de dos nombres', () =&gt; {
    const resultat = multiplica(2, 3);
    expect(resultat).toBe(6);
  });
});</pre></div><div class='content'></div><h2>Exercici 2: Prova d'un servei</h2>
<div class='content'><p>Crea un servei que retorni un missatge de benvinguda i escriu una prova unitària per verificar el seu comportament.</p>
<h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gYmVudmluZ3VkYS5zZXJ2aWNlLnRzCmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKCkBJbmplY3RhYmxlKHsKICBwcm92aWRlZEluOiAncm9vdCcKfSkKZXhwb3J0IGNsYXNzIEJlbnZpbmd1ZGFTZXJ2aWNlIHsKICBnZXRNaXNzYXRnZSgpOiBzdHJpbmcgewogICAgcmV0dXJuICdCZW52aW5ndXQgYSBBbmd1bGFyISc7CiAgfQp9CgovLyBiZW52aW5ndWRhLnNlcnZpY2Uuc3BlYy50cwppbXBvcnQgeyBUZXN0QmVkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZS90ZXN0aW5nJzsKaW1wb3J0IHsgQmVudmluZ3VkYVNlcnZpY2UgfSBmcm9tICcuL2JlbnZpbmd1ZGEuc2VydmljZSc7CgpkZXNjcmliZSgnQmVudmluZ3VkYVNlcnZpY2UnLCAoKSA9PiB7CiAgbGV0IHNlcnZpY2U6IEJlbnZpbmd1ZGFTZXJ2aWNlOwoKICBiZWZvcmVFYWNoKCgpID0+IHsKICAgIFRlc3RCZWQuY29uZmlndXJlVGVzdGluZ01vZHVsZSh7fSk7CiAgICBzZXJ2aWNlID0gVGVzdEJlZC5pbmplY3QoQmVudmluZ3VkYVNlcnZpY2UpOwogIH0pOwoKICBpdCgnaGF1cmlhIGRlIHNlciBjcmVhdCcsICgpID0+IHsKICAgIGV4cGVjdChzZXJ2aWNlKS50b0JlVHJ1dGh5KCk7CiAgfSk7CgogIGl0KCdoYXVyaWEgZGUgcmV0b3JuYXIgZWwgbWlzc2F0Z2UgZGUgYmVudmluZ3VkYScsICgpID0+IHsKICAgIGV4cGVjdChzZXJ2aWNlLmdldE1pc3NhdGdlKCkpLnRvQmUoJ0JlbnZpbmd1dCBhIEFuZ3VsYXIhJyk7CiAgfSk7Cn0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// benvinguda.service.ts
import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class BenvingudaService {
  getMissatge(): string {
    return 'Benvingut a Angular!';
  }
}

// benvinguda.service.spec.ts
import { TestBed } from '@angular/core/testing';
import { BenvingudaService } from './benvinguda.service';

describe('BenvingudaService', () =&gt; {
  let service: BenvingudaService;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({});
    service = TestBed.inject(BenvingudaService);
  });

  it('hauria de ser creat', () =&gt; {
    expect(service).toBeTruthy();
  });

  it('hauria de retornar el missatge de benvinguda', () =&gt; {
    expect(service.getMissatge()).toBe('Benvingut a Angular!');
  });
});</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Les proves unitàries són una eina poderosa per assegurar la qualitat del codi en aplicacions Angular. Amb Jasmine i Karma, és fàcil escriure i executar proves unitàries que verifiquin el comportament de components, serveis i altres unitats de codi. Practicar l'escriptura de proves unitàries millorarà la teva habilitat per detectar i corregir errors, fent que el teu codi sigui més robust i mantenible.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-04-ngrx-effects' title="NgRx Effects">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='10-02-component-testing' title="Proves de components">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
