<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backtracking</title>

    <link rel="alternate" href="https://campusempresa.com/mod/algoritmos/03-04-backtracking" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/algoritmos/03-04-backtracking" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/algoritmos/03-04-backtracking" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/algoritmos/03-04-backtracking" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/algoritmos/03-04-backtracking" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
<br>
			<cite>Construint la societat d'avui i del demà</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Contingut del curs</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competències tècniques</a>
				<a href="/all/conocimientos">Coneixements</a>
				<a href="/all/soft_skills">Competències socials</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-03-programacion-dinamica' title="Programació Dinàmica">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Backtracking</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-01-busqueda-binaria' title="Cerca Binària">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introducció al Backtracking</p>
</h1>
<div class='content'><p>El backtracking és una tècnica de disseny d'algorismes que es basa en la recursivitat per resoldre problemes de cerca i optimització. Aquesta tècnica explora totes les possibles solucions d'un problema de manera sistemàtica, retrocedint (backtracking) quan es troba amb una solució invàlida o no òptima.</p>
</div><h2><p>Conceptes Clau</p>
</h2>
<div class='content'><ol>
<li><strong>Recursivitat</strong>: El backtracking utilitza funcions recursives per explorar les possibles solucions.</li>
<li><strong>Exploració de l'Espai de Solucions</strong>: Es tracta d'explorar totes les possibles solucions del problema.</li>
<li><strong>Retrocedir</strong>: Quan es troba una solució invàlida, l'algorisme retrocedeix per explorar altres opcions.</li>
</ol>
</div><h2><p>Exemples de Problemes Resolts amb Backtracking</p>
</h2>
<div class='content'><ul>
<li>Problema de les N reines</li>
<li>Problema del Sudoku</li>
<li>Problema del cavall de l'escacs</li>
<li>Generació de combinacions i permutacions</li>
</ul>
</div><h1><p>Funcionament del Backtracking</p>
</h1>
<div class='content'><p>El backtracking es pot visualitzar com un arbre de decisions on cada node representa una decisió parcial cap a una solució completa. L'algorisme segueix aquests passos:</p>
<ol>
<li><strong>Explorar</strong>: Provar una possible solució.</li>
<li><strong>Validar</strong>: Comprovar si la solució parcial és vàlida.</li>
<li><strong>Recursió</strong>: Si és vàlida, continuar explorant més en profunditat.</li>
<li><strong>Retrocedir</strong>: Si no és vàlida, retrocedir i provar una altra opció.</li>
</ol>
</div><h2><p>Pseudocodi del Backtracking</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY2nDsyBiYWNrdHJhY2soc29sdWNpw7MpOgogICAgc2kgc29sdWNpw7Mgw6lzIGNvbXBsZXRhOgogICAgICAgIHByb2Nlc3Nhcihzb2x1Y2nDsykKICAgICAgICByZXRvcm5hcgogICAgcGVyIGEgY2FkYSBvcGNpw7MgZW4gb3BjaW9ucyBkaXNwb25pYmxlczoKICAgICAgICBzaSBvcGNpw7Mgw6lzIHbDoGxpZGE6CiAgICAgICAgICAgIGFmZWdpciBvcGNpw7MgYSBzb2x1Y2nDswogICAgICAgICAgICBiYWNrdHJhY2soc29sdWNpw7MpCiAgICAgICAgICAgIGVsaW1pbmFyIG9wY2nDsyBkZSBzb2x1Y2nDsw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>funci&oacute; backtrack(soluci&oacute;):
    si soluci&oacute; &eacute;s completa:
        processar(soluci&oacute;)
        retornar
    per a cada opci&oacute; en opcions disponibles:
        si opci&oacute; &eacute;s v&agrave;lida:
            afegir opci&oacute; a soluci&oacute;
            backtrack(soluci&oacute;)
            eliminar opci&oacute; de soluci&oacute;</pre></div><div class='content'></div><h1><p>Exemple Pràctic: Problema de les N Reines</p>
</h1>
<div class='content'><p>El problema de les N reines consisteix a col·locar N reines en un tauler de NxN de manera que cap reina pugui atacar una altra.</p>
</div><h2><p>Implementació en Python</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIGVzX3ZhbGlkKGJvYXJkLCByb3csIGNvbCk6CiAgICAjIENvbXByb3ZhciBsYSBjb2x1bW5hCiAgICBmb3IgaSBpbiByYW5nZShyb3cpOgogICAgICAgIGlmIGJvYXJkW2ldW2NvbF0gPT0gMToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgIyBDb21wcm92YXIgbGEgZGlhZ29uYWwgc3VwZXJpb3IgZXNxdWVycmEKICAgIGZvciBpLCBqIGluIHppcChyYW5nZShyb3csIC0xLCAtMSksIHJhbmdlKGNvbCwgLTEsIC0xKSk6CiAgICAgICAgaWYgYm9hcmRbaV1bal0gPT0gMToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgIyBDb21wcm92YXIgbGEgZGlhZ29uYWwgc3VwZXJpb3IgZHJldGEKICAgIGZvciBpLCBqIGluIHppcChyYW5nZShyb3csIC0xLCAtMSksIHJhbmdlKGNvbCwgbGVuKGJvYXJkKSkpOgogICAgICAgIGlmIGJvYXJkW2ldW2pdID09IDE6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIHJldHVybiBUcnVlCgpkZWYgY29swrdsb2Nhcl9yZWluZXMoYm9hcmQsIHJvdyk6CiAgICBpZiByb3cgPj0gbGVuKGJvYXJkKToKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGZvciBjb2wgaW4gcmFuZ2UobGVuKGJvYXJkKSk6CiAgICAgICAgaWYgZXNfdmFsaWQoYm9hcmQsIHJvdywgY29sKToKICAgICAgICAgICAgYm9hcmRbcm93XVtjb2xdID0gMQogICAgICAgICAgICBpZiBjb2zCt2xvY2FyX3JlaW5lcyhib2FyZCwgcm93ICsgMSk6CiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBib2FyZFtyb3ddW2NvbF0gPSAwCgogICAgcmV0dXJuIEZhbHNlCgpkZWYgaW1wcmltaXJfdGF1bGVyKGJvYXJkKToKICAgIGZvciByb3cgaW4gYm9hcmQ6CiAgICAgICAgcHJpbnQoIiAiLmpvaW4oc3RyKHgpIGZvciB4IGluIHJvdykpCgpkZWYgcHJvYmxlbWFfbl9yZWluZXMobik6CiAgICBib2FyZCA9IFtbMCBmb3IgXyBpbiByYW5nZShuKV0gZm9yIF8gaW4gcmFuZ2UobildCiAgICBpZiBjb2zCt2xvY2FyX3JlaW5lcyhib2FyZCwgMCk6CiAgICAgICAgaW1wcmltaXJfdGF1bGVyKGJvYXJkKQogICAgZWxzZToKICAgICAgICBwcmludCgiTm8gaGkgaGEgc29sdWNpw7MiKQoKIyBFeGVtcGxlIGQnw7pzCnByb2JsZW1hX25fcmVpbmVzKDQp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def es_valid(board, row, col):
    # Comprovar la columna
    for i in range(row):
        if board[i][col] == 1:
            return False

    # Comprovar la diagonal superior esquerra
    for i, j in zip(range(row, -1, -1), range(col, -1, -1)):
        if board[i][j] == 1:
            return False

    # Comprovar la diagonal superior dreta
    for i, j in zip(range(row, -1, -1), range(col, len(board))):
        if board[i][j] == 1:
            return False

    return True

def col&middot;locar_reines(board, row):
    if row &gt;= len(board):
        return True

    for col in range(len(board)):
        if es_valid(board, row, col):
            board[row][col] = 1
            if col&middot;locar_reines(board, row + 1):
                return True
            board[row][col] = 0

    return False

def imprimir_tauler(board):
    for row in board:
        print(&quot; &quot;.join(str(x) for x in row))

def problema_n_reines(n):
    board = [[0 for _ in range(n)] for _ in range(n)]
    if col&middot;locar_reines(board, 0):
        imprimir_tauler(board)
    else:
        print(&quot;No hi ha soluci&oacute;&quot;)

# Exemple d'&uacute;s
problema_n_reines(4)</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Funció <code>es_valid</code></strong>: Comprova si és segur col·locar una reina en una posició determinada.</li>
<li><strong>Funció <code>col·locar_reines</code></strong>: Utilitza la recursivitat per col·locar les reines al tauler.</li>
<li><strong>Funció <code>imprimir_tauler</code></strong>: Imprimeix el tauler amb les reines col·locades.</li>
<li><strong>Funció <code>problema_n_reines</code></strong>: Inicialitza el tauler i crida la funció recursiva per col·locar les reines.</li>
</ol>
</div><h1><p>Exercici Pràctic</p>
</h1>
<div class='content'></div><h2><p>Problema del Sudoku</p>
</h2>
<div class='content'><p>Implementa un algorisme de backtracking per resoldre un Sudoku. El Sudoku és un trencaclosques de 9x9 on l'objectiu és omplir la graella de manera que cada fila, cada columna i cada subgraella de 3x3 continguin tots els dígits del 1 al 9.</p>
</div><h2><p>Pautes</p>
</h2>
<div class='content'><ol>
<li><strong>Funció <code>es_valid_sudoku</code></strong>: Comprova si és segur col·locar un número en una posició determinada.</li>
<li><strong>Funció <code>resoldre_sudoku</code></strong>: Utilitza la recursivitat per resoldre el Sudoku.</li>
<li><strong>Funció <code>imprimir_sudoku</code></strong>: Imprimeix el Sudoku resolt.</li>
</ol>
</div><h2><p>Solució</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIGVzX3ZhbGlkX3N1ZG9rdShib2FyZCwgcm93LCBjb2wsIG51bSk6CiAgICAjIENvbXByb3ZhciBsYSBmaWxhCiAgICBmb3IgaSBpbiByYW5nZSg5KToKICAgICAgICBpZiBib2FyZFtyb3ddW2ldID09IG51bToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgIyBDb21wcm92YXIgbGEgY29sdW1uYQogICAgZm9yIGkgaW4gcmFuZ2UoOSk6CiAgICAgICAgaWYgYm9hcmRbaV1bY29sXSA9PSBudW06CiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgICMgQ29tcHJvdmFyIGxhIHN1YmdyYWVsbGEgZGUgM3gzCiAgICBzdGFydF9yb3csIHN0YXJ0X2NvbCA9IDMgKiAocm93IC8vIDMpLCAzICogKGNvbCAvLyAzKQogICAgZm9yIGkgaW4gcmFuZ2UoMyk6CiAgICAgICAgZm9yIGogaW4gcmFuZ2UoMyk6CiAgICAgICAgICAgIGlmIGJvYXJkW3N0YXJ0X3JvdyArIGldW3N0YXJ0X2NvbCArIGpdID09IG51bToKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIHJldHVybiBUcnVlCgpkZWYgcmVzb2xkcmVfc3Vkb2t1KGJvYXJkKToKICAgIGZvciByb3cgaW4gcmFuZ2UoOSk6CiAgICAgICAgZm9yIGNvbCBpbiByYW5nZSg5KToKICAgICAgICAgICAgaWYgYm9hcmRbcm93XVtjb2xdID09IDA6CiAgICAgICAgICAgICAgICBmb3IgbnVtIGluIHJhbmdlKDEsIDEwKToKICAgICAgICAgICAgICAgICAgICBpZiBlc192YWxpZF9zdWRva3UoYm9hcmQsIHJvdywgY29sLCBudW0pOgogICAgICAgICAgICAgICAgICAgICAgICBib2FyZFtyb3ddW2NvbF0gPSBudW0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgcmVzb2xkcmVfc3Vkb2t1KGJvYXJkKToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGJvYXJkW3Jvd11bY29sXSA9IDAKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgcmV0dXJuIFRydWUKCmRlZiBpbXByaW1pcl9zdWRva3UoYm9hcmQpOgogICAgZm9yIHJvdyBpbiBib2FyZDoKICAgICAgICBwcmludCgiICIuam9pbihzdHIoeCkgZm9yIHggaW4gcm93KSkKCiMgRXhlbXBsZSBkZSBTdWRva3UgYSByZXNvbGRyZQpzdWRva3UgPSBbCiAgICBbNSwgMywgMCwgMCwgNywgMCwgMCwgMCwgMF0sCiAgICBbNiwgMCwgMCwgMSwgOSwgNSwgMCwgMCwgMF0sCiAgICBbMCwgOSwgOCwgMCwgMCwgMCwgMCwgNiwgMF0sCiAgICBbOCwgMCwgMCwgMCwgNiwgMCwgMCwgMCwgM10sCiAgICBbNCwgMCwgMCwgOCwgMCwgMywgMCwgMCwgMV0sCiAgICBbNywgMCwgMCwgMCwgMiwgMCwgMCwgMCwgNl0sCiAgICBbMCwgNiwgMCwgMCwgMCwgMCwgMiwgOCwgMF0sCiAgICBbMCwgMCwgMCwgNCwgMSwgOSwgMCwgMCwgNV0sCiAgICBbMCwgMCwgMCwgMCwgOCwgMCwgMCwgNywgOV0KXQoKaWYgcmVzb2xkcmVfc3Vkb2t1KHN1ZG9rdSk6CiAgICBpbXByaW1pcl9zdWRva3Uoc3Vkb2t1KQplbHNlOgogICAgcHJpbnQoIk5vIGhpIGhhIHNvbHVjacOzIik="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def es_valid_sudoku(board, row, col, num):
    # Comprovar la fila
    for i in range(9):
        if board[row][i] == num:
            return False

    # Comprovar la columna
    for i in range(9):
        if board[i][col] == num:
            return False

    # Comprovar la subgraella de 3x3
    start_row, start_col = 3 * (row // 3), 3 * (col // 3)
    for i in range(3):
        for j in range(3):
            if board[start_row + i][start_col + j] == num:
                return False

    return True

def resoldre_sudoku(board):
    for row in range(9):
        for col in range(9):
            if board[row][col] == 0:
                for num in range(1, 10):
                    if es_valid_sudoku(board, row, col, num):
                        board[row][col] = num
                        if resoldre_sudoku(board):
                            return True
                        board[row][col] = 0
                return False
    return True

def imprimir_sudoku(board):
    for row in board:
        print(&quot; &quot;.join(str(x) for x in row))

# Exemple de Sudoku a resoldre
sudoku = [
    [5, 3, 0, 0, 7, 0, 0, 0, 0],
    [6, 0, 0, 1, 9, 5, 0, 0, 0],
    [0, 9, 8, 0, 0, 0, 0, 6, 0],
    [8, 0, 0, 0, 6, 0, 0, 0, 3],
    [4, 0, 0, 8, 0, 3, 0, 0, 1],
    [7, 0, 0, 0, 2, 0, 0, 0, 6],
    [0, 6, 0, 0, 0, 0, 2, 8, 0],
    [0, 0, 0, 4, 1, 9, 0, 0, 5],
    [0, 0, 0, 0, 8, 0, 0, 7, 9]
]

if resoldre_sudoku(sudoku):
    imprimir_sudoku(sudoku)
else:
    print(&quot;No hi ha soluci&oacute;&quot;)</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Funció <code>es_valid_sudoku</code></strong>: Comprova si és segur col·locar un número en una posició determinada del Sudoku.</li>
<li><strong>Funció <code>resoldre_sudoku</code></strong>: Utilitza la recursivitat per resoldre el Sudoku.</li>
<li><strong>Funció <code>imprimir_sudoku</code></strong>: Imprimeix el Sudoku resolt.</li>
</ol>
</div><h1><p>Resum</p>
</h1>
<div class='content'><p>El backtracking és una tècnica poderosa per resoldre problemes de cerca i optimització. Mitjançant la recursivitat i la validació de solucions parcials, aquesta tècnica permet explorar totes les possibles solucions d'un problema de manera eficient. Els exemples pràctics com el problema de les N reines i el Sudoku demostren la seva aplicabilitat en una àmplia varietat de problemes.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-03-programacion-dinamica' title="Programació Dinàmica">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-01-busqueda-binaria' title="Cerca Binària">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
