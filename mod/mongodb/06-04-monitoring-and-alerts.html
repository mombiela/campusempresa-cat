<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitorització i Alertes</title>

    <link rel="alternate" href="https://campusempresa.com/mod/mongodb/06-04-monitoring-and-alerts" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/mongodb/06-04-monitoring-and-alerts" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/mongodb/06-04-monitoring-and-alerts" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/mongodb/06-04-monitoring-and-alerts" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/mongodb/06-04-monitoring-and-alerts" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-03-security-best-practices' title="Millors Pràctiques de Seguretat">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Monitorització i Alertes</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-mongodb-with-javascript' title="MongoDB amb JavaScript (Node.js)">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La monitorització i les alertes són components essencials per mantenir la salut i el rendiment d'una base de dades MongoDB. Aquest tema cobreix les eines i les tècniques per monitoritzar MongoDB, així com la configuració d'alertes per detectar i respondre a problemes potencials.</p>
</div><h1>1. Importància de la Monitorització</h1>
<div class='content'><p>Monitoritzar MongoDB és crucial per:</p>
<ul>
<li><strong>Detectar Problemes de Rendiment:</strong> Identificar colls d'ampolla i altres problemes de rendiment.</li>
<li><strong>Assegurar la Disponibilitat:</strong> Garantir que la base de dades estigui disponible i funcioni correctament.</li>
<li><strong>Planificar la Capacitat:</strong> Preveure necessitats futures de recursos.</li>
<li><strong>Seguretat:</strong> Detectar accessos no autoritzats o activitats sospitoses.</li>
</ul>
</div><h1>2. Eines de Monitorització</h1>
<div class='content'></div><h2>2.1. MongoDB Atlas</h2>
<div class='content'><p>MongoDB Atlas és una plataforma de base de dades com a servei (DBaaS) que inclou eines de monitorització integrades. Proporciona:</p>
<ul>
<li><strong>Panell de Control:</strong> Visualització en temps real de mètriques clau.</li>
<li><strong>Alertes:</strong> Configuració d'alertes basades en llindars definits per l'usuari.</li>
<li><strong>Historial de Mètriques:</strong> Accés a dades històriques per a l'anàlisi de tendències.</li>
</ul>
</div><h2>2.2. MongoDB Ops Manager</h2>
<div class='content'><p>MongoDB Ops Manager és una eina de gestió per a instal·lacions on-premise que ofereix:</p>
<ul>
<li><strong>Monitorització en Temps Real:</strong> Visualització de mètriques de rendiment.</li>
<li><strong>Automatització:</strong> Gestió automatitzada de còpies de seguretat, restauracions i actualitzacions.</li>
<li><strong>Alertes Personalitzades:</strong> Configuració d'alertes per a diversos esdeveniments i condicions.</li>
</ul>
</div><h2>2.3. Prometheus i Grafana</h2>
<div class='content'><p>Prometheus és una eina de monitorització de codi obert que es pot integrar amb MongoDB. Grafana és una plataforma de visualització que es pot utilitzar amb Prometheus per crear panells de control personalitzats.</p>
<h4>Exemple de Configuració amb Prometheus i Grafana</h4>
<ol>
<li>
<p><strong>Instal·lar Prometheus:</strong></p>
<pre><code class="language-bash">sudo apt-get update
sudo apt-get install prometheus
</code></pre>
</li>
<li>
<p><strong>Configurar Prometheus per Monitoritzar MongoDB:</strong>
Afegir el següent al fitxer de configuració de Prometheus (<code>prometheus.yml</code>):</p>
<pre><code class="language-yaml">scrape_configs:
  - job_name: 'mongodb'
    static_configs:
      - targets: ['localhost:9216']
</code></pre>
</li>
<li>
<p><strong>Instal·lar i Configurar Grafana:</strong></p>
<pre><code class="language-bash">sudo apt-get install -y software-properties-common
sudo add-apt-repository &quot;deb https://packages.grafana.com/oss/deb stable main&quot;
sudo apt-get update
sudo apt-get install grafana
sudo systemctl start grafana-server
sudo systemctl enable grafana-server
</code></pre>
</li>
<li>
<p><strong>Crear un Panell de Control a Grafana:</strong></p>
<ul>
<li>Iniciar sessió a Grafana (<code>http://localhost:3000</code>).</li>
<li>Afegir Prometheus com a font de dades.</li>
<li>Crear un nou panell de control i afegir gràfics per a les mètriques de MongoDB.</li>
</ul>
</li>
</ol>
</div><h1>3. Configuració d'Alertes</h1>
<div class='content'></div><h2>3.1. Alertes a MongoDB Atlas</h2>
<div class='content'><ol>
<li>
<p><strong>Accedir a la Secció d'Alertes:</strong></p>
<ul>
<li>Navegar a la secció d'alertes del clúster a MongoDB Atlas.</li>
</ul>
</li>
<li>
<p><strong>Crear una Nova Alerta:</strong></p>
<ul>
<li>Seleccionar &quot;Create Alert&quot;.</li>
<li>Definir les condicions de l'alerta (per exemple, ús de CPU superior al 80%).</li>
</ul>
</li>
<li>
<p><strong>Configurar les Accions de l'Alerta:</strong></p>
<ul>
<li>Definir les accions a prendre quan es compleixin les condicions (per exemple, enviar un correu electrònic).</li>
</ul>
</li>
</ol>
</div><h2>3.2. Alertes a Prometheus</h2>
<div class='content'><ol>
<li>
<p><strong>Configurar les Regles d'Alertes:</strong>
Afegir regles d'alertes al fitxer de configuració de Prometheus (<code>alert.rules</code>):</p>
<pre><code class="language-yaml">groups:
  - name: mongodb_alerts
    rules:
      - alert: HighCPUUsage
        expr: rate(process_cpu_seconds_total[1m]) &gt; 0.8
        for: 1m
        labels:
          severity: warning
        annotations:
          summary: &quot;High CPU usage detected&quot;
          description: &quot;CPU usage is above 80% for more than 1 minute.&quot;
</code></pre>
</li>
<li>
<p><strong>Configurar Alertmanager:</strong>
Configurar Alertmanager per gestionar les alertes de Prometheus:</p>
<pre><code class="language-yaml">global:
  resolve_timeout: 5m
route:
  receiver: 'email'
receivers:
  - name: 'email'
    email_configs:
      - to: 'admin@example.com'
        from: 'alertmanager@example.com'
        smarthost: 'smtp.example.com:587'
        auth_username: 'alertmanager'
        auth_password: 'password'
</code></pre>
</li>
</ol>
</div><h1>4. Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Configurar una Alerta a MongoDB Atlas</h2>
<div class='content'><ol>
<li>Accedeix al teu compte de MongoDB Atlas.</li>
<li>Navega a la secció d'alertes del teu clúster.</li>
<li>Crea una alerta per notificar-te quan l'ús de la memòria superi el 75%.</li>
<li>Configura l'alerta per enviar un correu electrònic a la teva adreça.</li>
</ol>
</div><h2>Exercici 2: Monitoritzar MongoDB amb Prometheus i Grafana</h2>
<div class='content'><ol>
<li>Instal·la Prometheus i Grafana al teu sistema.</li>
<li>Configura Prometheus per monitoritzar MongoDB.</li>
<li>Crea un panell de control a Grafana per visualitzar les mètriques de MongoDB.</li>
<li>Configura una alerta a Prometheus per notificar-te quan l'ús de la CPU superi el 80%.</li>
</ol>
</div><h1>5. Resum</h1>
<div class='content'><p>En aquesta secció, hem après la importància de la monitorització i les alertes a MongoDB. Hem explorat diverses eines de monitorització com MongoDB Atlas, Ops Manager, Prometheus i Grafana. També hem vist com configurar alertes per detectar problemes potencials i respondre-hi de manera proactiva. La monitorització i les alertes són fonamentals per mantenir la salut i el rendiment de la teva base de dades MongoDB, assegurant que estigui sempre disponible i funcionant de manera òptima.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-03-security-best-practices' title="Millors Pràctiques de Seguretat">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-mongodb-with-javascript' title="MongoDB amb JavaScript (Node.js)">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
