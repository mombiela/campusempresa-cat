<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapatge de Textures</title>

    <link rel="alternate" href="https://campusempresa.com/mod/direct_x/04-01-texture-mapping" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/direct_x/04-01-texture-mapping" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/direct_x/04-01-texture-mapping" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/direct_x/04-01-texture-mapping" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/direct_x/04-01-texture-mapping" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Contingut del curs</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competències tècniques</a>
				<a href="/all/conocimientos">Coneixements</a>
				<a href="/all/soft_skills">Competències socials</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-compiling-using-shaders' title="Compilar i Utilitzar Shaders">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Mapatge de Textures</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-02-lighting-and-materials' title="Il·luminació i Materials">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>El mapatge de textures és una tècnica fonamental en la renderització 3D que permet aplicar imatges (textures) a superfícies geomètriques per donar-los un aspecte més detallat i realista. En aquest tema, aprendrem com carregar, aplicar i gestionar textures en DirectX.</p>
</div><h1><p>Objectius del Tema</p>
</h1>
<div class='content'><ul>
<li>Comprendre què és una textura i com s'utilitza en la renderització 3D.</li>
<li>Aprendre a carregar textures des d'arxius.</li>
<li>Aplicar textures a objectes 3D.</li>
<li>Gestionar coordenades de textura (UV mapping).</li>
</ul>
</div><h1><p>Què és una Textura?</p>
</h1>
<div class='content'><p>Una textura és una imatge 2D que es mapeja sobre una superfície 3D per donar-li detalls visuals. Les textures poden representar qualsevol cosa, des de colors simples fins a imatges complexes com fusta, metall, o pell.</p>
</div><h1><p>Carregar Textures</p>
</h1>
<div class='content'><p>Per carregar una textura en DirectX, necessitem utilitzar la biblioteca DirectX Tool Kit (DirectXTK), que proporciona funcions útils per treballar amb textures.</p>
</div><h2><p>Exemple de Codi: Carregar una Textura</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGQzZDExLmg+CiNpbmNsdWRlIDxEaXJlY3RYVEsvV0lDVGV4dHVyZUxvYWRlci5oPgoKLy8gVmFyaWFibGVzIGdsb2JhbHMKSUQzRDExU2hhZGVyUmVzb3VyY2VWaWV3KiBnX3BUZXh0dXJlUlYgPSBudWxscHRyOwoKLy8gRnVuY2nDsyBwZXIgY2FycmVnYXIgdW5hIHRleHR1cmEKSFJFU1VMVCBMb2FkVGV4dHVyZShJRDNEMTFEZXZpY2UqIHBkM2REZXZpY2UsIGNvbnN0IHdjaGFyX3QqIHN6RmlsZU5hbWUpCnsKICAgIEhSRVNVTFQgaHIgPSBEaXJlY3RYOjpDcmVhdGVXSUNUZXh0dXJlRnJvbUZpbGUocGQzZERldmljZSwgc3pGaWxlTmFtZSwgbnVsbHB0ciwgJmdfcFRleHR1cmVSVik7CiAgICBpZiAoRkFJTEVEKGhyKSkKICAgIHsKICAgICAgICByZXR1cm4gaHI7CiAgICB9CiAgICByZXR1cm4gU19PSzsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;d3d11.h&gt;
#include &lt;DirectXTK/WICTextureLoader.h&gt;

// Variables globals
ID3D11ShaderResourceView* g_pTextureRV = nullptr;

// Funci&oacute; per carregar una textura
HRESULT LoadTexture(ID3D11Device* pd3dDevice, const wchar_t* szFileName)
{
    HRESULT hr = DirectX::CreateWICTextureFromFile(pd3dDevice, szFileName, nullptr, &amp;g_pTextureRV);
    if (FAILED(hr))
    {
        return hr;
    }
    return S_OK;
}</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Incloure les Llibreries Necessàries</strong>: Incloem les llibreries de Direct3D i DirectXTK.</li>
<li><strong>Declarar Variables Globals</strong>: Declarem una variable global per emmagatzemar la vista de recursos de la textura.</li>
<li><strong>Funció <code>LoadTexture</code></strong>: Aquesta funció carrega una textura des d'un arxiu utilitzant <code>CreateWICTextureFromFile</code> de DirectXTK.</li>
</ol>
</div><h1><p>Aplicar Textures a Objectes 3D</p>
</h1>
<div class='content'><p>Un cop carregada la textura, hem d'aplicar-la als nostres objectes 3D. Això implica configurar els shaders per utilitzar la textura durant la fase de renderització.</p>
</div><h2><p>Exemple de Codi: Aplicar una Textura</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ29uZmlndXJhciBlbCBzaGFkZXIgcGVyIHV0aWxpdHphciBsYSB0ZXh0dXJhCnZvaWQgU2V0VGV4dHVyZShJRDNEMTFEZXZpY2VDb250ZXh0KiBwQ29udGV4dCkKewogICAgcENvbnRleHQtPlBTU2V0U2hhZGVyUmVzb3VyY2VzKDAsIDEsICZnX3BUZXh0dXJlUlYpOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Configurar el shader per utilitzar la textura
void SetTexture(ID3D11DeviceContext* pContext)
{
    pContext-&gt;PSSetShaderResources(0, 1, &amp;g_pTextureRV);
}</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Funció <code>SetTexture</code></strong>: Aquesta funció configura el context del dispositiu per utilitzar la textura en el pixel shader.</li>
</ol>
</div><h1><p>Gestionar Coordenades de Textura (UV Mapping)</p>
</h1>
<div class='content'><p>Les coordenades de textura (UV) determinen com es mapeja la textura sobre la superfície de l'objecte. Cada vèrtex de l'objecte té associades coordenades UV que indiquen quina part de la textura s'aplica a aquest vèrtex.</p>
</div><h2><p>Exemple de Codi: Definir Coordenades UV</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RydWN0IFZlcnRleAp7CiAgICBEaXJlY3RYOjpYTUZMT0FUMyBQb3M7CiAgICBEaXJlY3RYOjpYTUZMT0FUMiBUZXg7Cn07CgovLyBEZWZpbmlyIHbDqHJ0ZXhzIGFtYiBjb29yZGVuYWRlcyBVVgpWZXJ0ZXggdmVydGljZXNbXSA9CnsKICAgIHsgRGlyZWN0WDo6WE1GTE9BVDMoLTEuMGYsIC0xLjBmLCAwLjBmKSwgRGlyZWN0WDo6WE1GTE9BVDIoMC4wZiwgMS4wZikgfSwKICAgIHsgRGlyZWN0WDo6WE1GTE9BVDMoMS4wZiwgLTEuMGYsIDAuMGYpLCBEaXJlY3RYOjpYTUZMT0FUMigxLjBmLCAxLjBmKSB9LAogICAgeyBEaXJlY3RYOjpYTUZMT0FUMygxLjBmLCAxLjBmLCAwLjBmKSwgRGlyZWN0WDo6WE1GTE9BVDIoMS4wZiwgMC4wZikgfSwKICAgIHsgRGlyZWN0WDo6WE1GTE9BVDMoLTEuMGYsIDEuMGYsIDAuMGYpLCBEaXJlY3RYOjpYTUZMT0FUMigwLjBmLCAwLjBmKSB9LAp9Ow=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>struct Vertex
{
    DirectX::XMFLOAT3 Pos;
    DirectX::XMFLOAT2 Tex;
};

// Definir v&egrave;rtexs amb coordenades UV
Vertex vertices[] =
{
    { DirectX::XMFLOAT3(-1.0f, -1.0f, 0.0f), DirectX::XMFLOAT2(0.0f, 1.0f) },
    { DirectX::XMFLOAT3(1.0f, -1.0f, 0.0f), DirectX::XMFLOAT2(1.0f, 1.0f) },
    { DirectX::XMFLOAT3(1.0f, 1.0f, 0.0f), DirectX::XMFLOAT2(1.0f, 0.0f) },
    { DirectX::XMFLOAT3(-1.0f, 1.0f, 0.0f), DirectX::XMFLOAT2(0.0f, 0.0f) },
};</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>Estructura <code>Vertex</code></strong>: Definim una estructura de vèrtex que inclou posició i coordenades de textura.</li>
<li><strong>Definir Vèrtexs</strong>: Creem un array de vèrtexs amb coordenades UV que mapejaran la textura correctament sobre un quadrat.</li>
</ol>
</div><h1><p>Exercici Pràctic</p>
</h1>
<div class='content'></div><h2><p>Exercici</p>
</h2>
<div class='content'><ol>
<li>Carrega una textura des d'un arxiu.</li>
<li>Aplica la textura a un quadrat 3D.</li>
<li>Renderitza el quadrat amb la textura aplicada.</li>
</ol>
</div><h2><p>Solució</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5jbG91cmUgbGVzIGxsaWJyZXJpZXMgbmVjZXNzw6ByaWVzCiNpbmNsdWRlIDxkM2QxMS5oPgojaW5jbHVkZSA8RGlyZWN0WFRLL1dJQ1RleHR1cmVMb2FkZXIuaD4KCi8vIFZhcmlhYmxlcyBnbG9iYWxzCklEM0QxMVNoYWRlclJlc291cmNlVmlldyogZ19wVGV4dHVyZVJWID0gbnVsbHB0cjsKCi8vIEZ1bmNpw7MgcGVyIGNhcnJlZ2FyIHVuYSB0ZXh0dXJhCkhSRVNVTFQgTG9hZFRleHR1cmUoSUQzRDExRGV2aWNlKiBwZDNkRGV2aWNlLCBjb25zdCB3Y2hhcl90KiBzekZpbGVOYW1lKQp7CiAgICBIUkVTVUxUIGhyID0gRGlyZWN0WDo6Q3JlYXRlV0lDVGV4dHVyZUZyb21GaWxlKHBkM2REZXZpY2UsIHN6RmlsZU5hbWUsIG51bGxwdHIsICZnX3BUZXh0dXJlUlYpOwogICAgaWYgKEZBSUxFRChocikpCiAgICB7CiAgICAgICAgcmV0dXJuIGhyOwogICAgfQogICAgcmV0dXJuIFNfT0s7Cn0KCi8vIENvbmZpZ3VyYXIgZWwgc2hhZGVyIHBlciB1dGlsaXR6YXIgbGEgdGV4dHVyYQp2b2lkIFNldFRleHR1cmUoSUQzRDExRGV2aWNlQ29udGV4dCogcENvbnRleHQpCnsKICAgIHBDb250ZXh0LT5QU1NldFNoYWRlclJlc291cmNlcygwLCAxLCAmZ19wVGV4dHVyZVJWKTsKfQoKLy8gRXN0cnVjdHVyYSBkZSB2w6hydGV4CnN0cnVjdCBWZXJ0ZXgKewogICAgRGlyZWN0WDo6WE1GTE9BVDMgUG9zOwogICAgRGlyZWN0WDo6WE1GTE9BVDIgVGV4Owp9OwoKLy8gRGVmaW5pciB2w6hydGV4cyBhbWIgY29vcmRlbmFkZXMgVVYKVmVydGV4IHZlcnRpY2VzW10gPQp7CiAgICB7IERpcmVjdFg6OlhNRkxPQVQzKC0xLjBmLCAtMS4wZiwgMC4wZiksIERpcmVjdFg6OlhNRkxPQVQyKDAuMGYsIDEuMGYpIH0sCiAgICB7IERpcmVjdFg6OlhNRkxPQVQzKDEuMGYsIC0xLjBmLCAwLjBmKSwgRGlyZWN0WDo6WE1GTE9BVDIoMS4wZiwgMS4wZikgfSwKICAgIHsgRGlyZWN0WDo6WE1GTE9BVDMoMS4wZiwgMS4wZiwgMC4wZiksIERpcmVjdFg6OlhNRkxPQVQyKDEuMGYsIDAuMGYpIH0sCiAgICB7IERpcmVjdFg6OlhNRkxPQVQzKC0xLjBmLCAxLjBmLCAwLjBmKSwgRGlyZWN0WDo6WE1GTE9BVDIoMC4wZiwgMC4wZikgfSwKfTsKCi8vIEZ1bmNpw7MgcHJpbmNpcGFsCmludCBtYWluKCkKewogICAgLy8gSW5pY2lhbGl0emFyIERpcmVjdDNELCBjYXJyZWdhciBsYSB0ZXh0dXJhIGkgY29uZmlndXJhciBlbCBzaGFkZXIKICAgIC8vIChDb2RpIGQnaW5pY2lhbGl0emFjacOzIGRlIERpcmVjdDNEIG9tw6hzIHBlciBicmV2ZXRhdCkKICAgIAogICAgLy8gQ2FycmVnYXIgbGEgdGV4dHVyYQogICAgTG9hZFRleHR1cmUocGQzZERldmljZSwgTCJ0ZXh0dXJlLmpwZyIpOwogICAgCiAgICAvLyBDb25maWd1cmFyIGVsIHNoYWRlciBwZXIgdXRpbGl0emFyIGxhIHRleHR1cmEKICAgIFNldFRleHR1cmUocENvbnRleHQpOwogICAgCiAgICAvLyBSZW5kZXJpdHphciBlbCBxdWFkcmF0IGFtYiBsYSB0ZXh0dXJhIGFwbGljYWRhCiAgICAvLyAoQ29kaSBkZSByZW5kZXJpdHphY2nDsyBvbcOocyBwZXIgYnJldmV0YXQpCiAgICAKICAgIHJldHVybiAwOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Incloure les llibreries necess&agrave;ries
#include &lt;d3d11.h&gt;
#include &lt;DirectXTK/WICTextureLoader.h&gt;

// Variables globals
ID3D11ShaderResourceView* g_pTextureRV = nullptr;

// Funci&oacute; per carregar una textura
HRESULT LoadTexture(ID3D11Device* pd3dDevice, const wchar_t* szFileName)
{
    HRESULT hr = DirectX::CreateWICTextureFromFile(pd3dDevice, szFileName, nullptr, &amp;g_pTextureRV);
    if (FAILED(hr))
    {
        return hr;
    }
    return S_OK;
}

// Configurar el shader per utilitzar la textura
void SetTexture(ID3D11DeviceContext* pContext)
{
    pContext-&gt;PSSetShaderResources(0, 1, &amp;g_pTextureRV);
}

// Estructura de v&egrave;rtex
struct Vertex
{
    DirectX::XMFLOAT3 Pos;
    DirectX::XMFLOAT2 Tex;
};

// Definir v&egrave;rtexs amb coordenades UV
Vertex vertices[] =
{
    { DirectX::XMFLOAT3(-1.0f, -1.0f, 0.0f), DirectX::XMFLOAT2(0.0f, 1.0f) },
    { DirectX::XMFLOAT3(1.0f, -1.0f, 0.0f), DirectX::XMFLOAT2(1.0f, 1.0f) },
    { DirectX::XMFLOAT3(1.0f, 1.0f, 0.0f), DirectX::XMFLOAT2(1.0f, 0.0f) },
    { DirectX::XMFLOAT3(-1.0f, 1.0f, 0.0f), DirectX::XMFLOAT2(0.0f, 0.0f) },
};

// Funci&oacute; principal
int main()
{
    // Inicialitzar Direct3D, carregar la textura i configurar el shader
    // (Codi d'inicialitzaci&oacute; de Direct3D om&egrave;s per brevetat)
    
    // Carregar la textura
    LoadTexture(pd3dDevice, L&quot;texture.jpg&quot;);
    
    // Configurar el shader per utilitzar la textura
    SetTexture(pContext);
    
    // Renderitzar el quadrat amb la textura aplicada
    // (Codi de renderitzaci&oacute; om&egrave;s per brevetat)
    
    return 0;
}</pre></div><div class='content'></div><h1><p>Resum</p>
</h1>
<div class='content'><p>En aquest tema, hem après què són les textures i com carregar-les, aplicar-les i gestionar les coordenades de textura en DirectX. Aquestes habilitats són essencials per crear aplicacions 3D realistes i detallades. En el proper tema, explorarem tècniques avançades d'il·luminació per millorar encara més la qualitat visual de les nostres aplicacions.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-compiling-using-shaders' title="Compilar i Utilitzar Shaders">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-02-lighting-and-materials' title="Il·luminació i Materials">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
