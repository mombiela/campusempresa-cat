<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Condicionals i Bucles</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ansible/03-05-conditionals-and-loops" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ansible/03-05-conditionals-and-loops" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ansible/03-05-conditionals-and-loops" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/ansible/03-05-conditionals-and-loops" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/ansible/03-05-conditionals-and-loops" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
<br>
			<cite>Construint la societat d'avui i del demà</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Contingut del curs</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competències tècniques</a>
				<a href="/all/conocimientos">Coneixements</a>
				<a href="/all/soft_skills">Competències socials</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-variables-and-facts' title="Variables i Fets">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Condicionals i Bucles</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-01-introduction-to-roles' title="Introducció als Rols">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com utilitzar condicionals i bucles en els Playbooks d'Ansible per fer-los més dinàmics i flexibles. Els condicionals ens permeten executar tasques basades en certes condicions, mentre que els bucles ens permeten repetir tasques múltiples vegades amb diferents dades.</p>
</div><h1><p>Condicionals</p>
</h1>
<div class='content'><p>Els condicionals en Ansible es defineixen utilitzant l'atribut <code>when</code>. Aquest atribut permet especificar una condició que ha de complir-se perquè una tasca s'executi.</p>
</div><h2><p>Sintaxi Bàsica</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBJbnN0YWzCt2xhciBBcGFjaGUgZW4gc2lzdGVtZXMgRGViaWFuCiAgYXB0OgogICAgbmFtZTogYXBhY2hlMgogICAgc3RhdGU6IHByZXNlbnQKICB3aGVuOiBhbnNpYmxlX29zX2ZhbWlseSA9PSAiRGViaWFuIg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Instal&middot;lar Apache en sistemes Debian
  apt:
    name: apache2
    state: present
  when: ansible_os_family == &quot;Debian&quot;</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>name</strong>: Descripció de la tasca.</li>
<li><strong>apt</strong>: Mòdul d'Ansible per gestionar paquets en sistemes basats en Debian.</li>
<li><strong>when</strong>: Condició que ha de complir-se perquè la tasca s'executi. En aquest cas, la tasca només s'executarà si la família del sistema operatiu és &quot;Debian&quot;.</li>
</ol>
</div><h2><p>Condicionals Complexos</p>
</h2>
<div class='content'><p>Pots utilitzar operadors lògics per crear condicionals més complexos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBJbnN0YWzCt2xhciBBcGFjaGUgZW4gc2lzdGVtZXMgRGViaWFuIG8gUmVkSGF0CiAgeXVtOgogICAgbmFtZTogaHR0cGQKICAgIHN0YXRlOiBwcmVzZW50CiAgd2hlbjogYW5zaWJsZV9vc19mYW1pbHkgPT0gIlJlZEhhdCIgb3IgYW5zaWJsZV9vc19mYW1pbHkgPT0gIkRlYmlhbiI="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Instal&middot;lar Apache en sistemes Debian o RedHat
  yum:
    name: httpd
    state: present
  when: ansible_os_family == &quot;RedHat&quot; or ansible_os_family == &quot;Debian&quot;</pre></div><div class='content'></div><h2><p>Exercici Pràctic</p>
</h2>
<div class='content'><p><strong>Objectiu</strong>: Escriu un Playbook que instal·li <code>nginx</code> només si el sistema operatiu és Ubuntu.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogSW5zdGFswrdsYXIgbmdpbnggZW4gVWJ1bnR1CiAgaG9zdHM6IGFsbAogIHRhc2tzOgogICAgLSBuYW1lOiBJbnN0YWzCt2xhciBuZ2lueAogICAgICBhcHQ6CiAgICAgICAgbmFtZTogbmdpbngKICAgICAgICBzdGF0ZTogcHJlc2VudAogICAgICB3aGVuOiBhbnNpYmxlX2Rpc3RyaWJ1dGlvbiA9PSAiVWJ1bnR1Ig=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Instal&middot;lar nginx en Ubuntu
  hosts: all
  tasks:
    - name: Instal&middot;lar nginx
      apt:
        name: nginx
        state: present
      when: ansible_distribution == &quot;Ubuntu&quot;</pre></div><div class='content'><p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogSW5zdGFswrdsYXIgbmdpbnggZW4gVWJ1bnR1CiAgaG9zdHM6IGFsbAogIHRhc2tzOgogICAgLSBuYW1lOiBJbnN0YWzCt2xhciBuZ2lueAogICAgICBhcHQ6CiAgICAgICAgbmFtZTogbmdpbngKICAgICAgICBzdGF0ZTogcHJlc2VudAogICAgICB3aGVuOiBhbnNpYmxlX2Rpc3RyaWJ1dGlvbiA9PSAiVWJ1bnR1Ig=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Instal&middot;lar nginx en Ubuntu
  hosts: all
  tasks:
    - name: Instal&middot;lar nginx
      apt:
        name: nginx
        state: present
      when: ansible_distribution == &quot;Ubuntu&quot;</pre></div><div class='content'></div><h1><p>Bucles</p>
</h1>
<div class='content'><p>Els bucles en Ansible es defineixen utilitzant l'atribut <code>loop</code>. Aquest atribut permet repetir una tasca per a cada element d'una llista.</p>
</div><h2><p>Sintaxi Bàsica</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBDcmVhciB1c3VhcmlzCiAgdXNlcjoKICAgIG5hbWU6ICJ7eyBpdGVtIH19IgogICAgc3RhdGU6IHByZXNlbnQKICBsb29wOgogICAgLSBhbGljZQogICAgLSBib2IKICAgIC0gY2hhcmxpZQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Crear usuaris
  user:
    name: &quot;{{ item }}&quot;
    state: present
  loop:
    - alice
    - bob
    - charlie</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>name</strong>: Descripció de la tasca.</li>
<li><strong>user</strong>: Mòdul d'Ansible per gestionar usuaris.</li>
<li><strong>name</strong>: Nom de l'usuari a crear, utilitzant la variable <code>item</code>.</li>
<li><strong>loop</strong>: Llista d'usuaris a crear.</li>
</ol>
</div><h2><p>Bucles amb Diccionaris</p>
</h2>
<div class='content'><p>Pots utilitzar diccionaris per passar múltiples valors a cada iteració del bucle.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBDcmVhciB1c3VhcmlzIGFtYiBwcm9waWV0YXRzCiAgdXNlcjoKICAgIG5hbWU6ICJ7eyBpdGVtLm5hbWUgfX0iCiAgICBzdGF0ZTogcHJlc2VudAogICAgc2hlbGw6ICJ7eyBpdGVtLnNoZWxsIH19IgogIGxvb3A6CiAgICAtIHsgbmFtZTogJ2FsaWNlJywgc2hlbGw6ICcvYmluL2Jhc2gnIH0KICAgIC0geyBuYW1lOiAnYm9iJywgc2hlbGw6ICcvYmluL3pzaCcgfQogICAgLSB7IG5hbWU6ICdjaGFybGllJywgc2hlbGw6ICcvYmluL3NoJyB9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Crear usuaris amb propietats
  user:
    name: &quot;{{ item.name }}&quot;
    state: present
    shell: &quot;{{ item.shell }}&quot;
  loop:
    - { name: 'alice', shell: '/bin/bash' }
    - { name: 'bob', shell: '/bin/zsh' }
    - { name: 'charlie', shell: '/bin/sh' }</pre></div><div class='content'></div><h2><p>Exercici Pràctic</p>
</h2>
<div class='content'><p><strong>Objectiu</strong>: Escriu un Playbook que instal·li una llista de paquets en un sistema Ubuntu.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogSW5zdGFswrdsYXIgcGFxdWV0cyBlbiBVYnVudHUKICBob3N0czogYWxsCiAgdGFza3M6CiAgICAtIG5hbWU6IEluc3RhbMK3bGFyIHBhcXVldHMKICAgICAgYXB0OgogICAgICAgIG5hbWU6ICJ7eyBpdGVtIH19IgogICAgICAgIHN0YXRlOiBwcmVzZW50CiAgICAgIGxvb3A6CiAgICAgICAgLSBnaXQKICAgICAgICAtIGN1cmwKICAgICAgICAtIHZpbQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Instal&middot;lar paquets en Ubuntu
  hosts: all
  tasks:
    - name: Instal&middot;lar paquets
      apt:
        name: &quot;{{ item }}&quot;
        state: present
      loop:
        - git
        - curl
        - vim</pre></div><div class='content'><p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogSW5zdGFswrdsYXIgcGFxdWV0cyBlbiBVYnVudHUKICBob3N0czogYWxsCiAgdGFza3M6CiAgICAtIG5hbWU6IEluc3RhbMK3bGFyIHBhcXVldHMKICAgICAgYXB0OgogICAgICAgIG5hbWU6ICJ7eyBpdGVtIH19IgogICAgICAgIHN0YXRlOiBwcmVzZW50CiAgICAgIGxvb3A6CiAgICAgICAgLSBnaXQKICAgICAgICAtIGN1cmwKICAgICAgICAtIHZpbQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Instal&middot;lar paquets en Ubuntu
  hosts: all
  tasks:
    - name: Instal&middot;lar paquets
      apt:
        name: &quot;{{ item }}&quot;
        state: present
      loop:
        - git
        - curl
        - vim</pre></div><div class='content'></div><h1><p>Resum</p>
</h1>
<div class='content'><p>En aquesta secció, hem après com utilitzar condicionals i bucles en els Playbooks d'Ansible per fer-los més dinàmics i flexibles. Els condicionals ens permeten executar tasques basades en certes condicions, mentre que els bucles ens permeten repetir tasques múltiples vegades amb diferents dades. Aquests conceptes són fonamentals per escriure Playbooks eficients i reutilitzables.</p>
<p>En el següent mòdul, explorarem els rols en Ansible, que ens permetran organitzar i reutilitzar el nostre codi de manera més eficient.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-variables-and-facts' title="Variables i Fets">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-01-introduction-to-roles' title="Introducció als Rols">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
