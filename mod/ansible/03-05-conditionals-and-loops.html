<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Condicionals i Bucles</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ansible/03-05-conditionals-and-loops" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ansible/03-05-conditionals-and-loops" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ansible/03-05-conditionals-and-loops" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>var DEVELOP = window.location.href.indexOf("localhost")!=-1 && true;</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/mod/ansible/03-05-conditionals-and-loops" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/ansible/03-05-conditionals-and-loops" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Tot el coneixement al teu abast</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col" id="left_menu">
					<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Contingut del curs
	</a>

			</div>
		</div>
	</div>
</div>

<!--  
<div class="top-bar container-fluid">
	<div class="container-xxl">
		<nav class="navbar navbar-expand-md p-0">
			<div class="container-fluid">
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				
				<div class="collapse navbar-collapse" id="navbarNav">
					<div class="navbar-nav me-auto">
							<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Contingut del curs
	</a>

					</div>
				</div>			
							</div>
		</nav>
	</div>
</div>
 -->				<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-variables-and-facts' title="Variables i Fets">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<h2 style="text-decoration:underline">Condicionals i Bucles</h2>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-01-introduction-to-roles' title="Introducció als Rols">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com utilitzar condicionals i bucles en els Playbooks d'Ansible per fer-los més dinàmics i flexibles. Els condicionals ens permeten executar tasques basades en certes condicions, mentre que els bucles ens permeten repetir tasques múltiples vegades amb diferents dades.</p>
</div><h1>Condicionals</h1>
<div class='content'><p>Els condicionals en Ansible es defineixen utilitzant l'atribut <code>when</code>. Aquest atribut permet especificar una condició que ha de complir-se perquè una tasca s'executi.</p>
</div><h2>Sintaxi Bàsica</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBJbnN0YWzCt2xhciBBcGFjaGUgZW4gc2lzdGVtZXMgRGViaWFuCiAgYXB0OgogICAgbmFtZTogYXBhY2hlMgogICAgc3RhdGU6IHByZXNlbnQKICB3aGVuOiBhbnNpYmxlX29zX2ZhbWlseSA9PSAiRGViaWFuIg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Instal&middot;lar Apache en sistemes Debian
  apt:
    name: apache2
    state: present
  when: ansible_os_family == &quot;Debian&quot;</pre></div><div class='content'></div><h2>Explicació del Codi</h2>
<div class='content'><ol>
<li><strong>name</strong>: Descripció de la tasca.</li>
<li><strong>apt</strong>: Mòdul d'Ansible per gestionar paquets en sistemes basats en Debian.</li>
<li><strong>when</strong>: Condició que ha de complir-se perquè la tasca s'executi. En aquest cas, la tasca només s'executarà si la família del sistema operatiu és &quot;Debian&quot;.</li>
</ol>
</div><h2>Condicionals Complexos</h2>
<div class='content'><p>Pots utilitzar operadors lògics per crear condicionals més complexos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBJbnN0YWzCt2xhciBBcGFjaGUgZW4gc2lzdGVtZXMgRGViaWFuIG8gUmVkSGF0CiAgeXVtOgogICAgbmFtZTogaHR0cGQKICAgIHN0YXRlOiBwcmVzZW50CiAgd2hlbjogYW5zaWJsZV9vc19mYW1pbHkgPT0gIlJlZEhhdCIgb3IgYW5zaWJsZV9vc19mYW1pbHkgPT0gIkRlYmlhbiI="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Instal&middot;lar Apache en sistemes Debian o RedHat
  yum:
    name: httpd
    state: present
  when: ansible_os_family == &quot;RedHat&quot; or ansible_os_family == &quot;Debian&quot;</pre></div><div class='content'></div><h2>Exercici Pràctic</h2>
<div class='content'><p><strong>Objectiu</strong>: Escriu un Playbook que instal·li <code>nginx</code> només si el sistema operatiu és Ubuntu.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogSW5zdGFswrdsYXIgbmdpbnggZW4gVWJ1bnR1CiAgaG9zdHM6IGFsbAogIHRhc2tzOgogICAgLSBuYW1lOiBJbnN0YWzCt2xhciBuZ2lueAogICAgICBhcHQ6CiAgICAgICAgbmFtZTogbmdpbngKICAgICAgICBzdGF0ZTogcHJlc2VudAogICAgICB3aGVuOiBhbnNpYmxlX2Rpc3RyaWJ1dGlvbiA9PSAiVWJ1bnR1Ig=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Instal&middot;lar nginx en Ubuntu
  hosts: all
  tasks:
    - name: Instal&middot;lar nginx
      apt:
        name: nginx
        state: present
      when: ansible_distribution == &quot;Ubuntu&quot;</pre></div><div class='content'><p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogSW5zdGFswrdsYXIgbmdpbnggZW4gVWJ1bnR1CiAgaG9zdHM6IGFsbAogIHRhc2tzOgogICAgLSBuYW1lOiBJbnN0YWzCt2xhciBuZ2lueAogICAgICBhcHQ6CiAgICAgICAgbmFtZTogbmdpbngKICAgICAgICBzdGF0ZTogcHJlc2VudAogICAgICB3aGVuOiBhbnNpYmxlX2Rpc3RyaWJ1dGlvbiA9PSAiVWJ1bnR1Ig=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Instal&middot;lar nginx en Ubuntu
  hosts: all
  tasks:
    - name: Instal&middot;lar nginx
      apt:
        name: nginx
        state: present
      when: ansible_distribution == &quot;Ubuntu&quot;</pre></div><div class='content'></div><h1>Bucles</h1>
<div class='content'><p>Els bucles en Ansible es defineixen utilitzant l'atribut <code>loop</code>. Aquest atribut permet repetir una tasca per a cada element d'una llista.</p>
</div><h2>Sintaxi Bàsica</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBDcmVhciB1c3VhcmlzCiAgdXNlcjoKICAgIG5hbWU6ICJ7eyBpdGVtIH19IgogICAgc3RhdGU6IHByZXNlbnQKICBsb29wOgogICAgLSBhbGljZQogICAgLSBib2IKICAgIC0gY2hhcmxpZQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Crear usuaris
  user:
    name: &quot;{{ item }}&quot;
    state: present
  loop:
    - alice
    - bob
    - charlie</pre></div><div class='content'></div><h2>Explicació del Codi</h2>
<div class='content'><ol>
<li><strong>name</strong>: Descripció de la tasca.</li>
<li><strong>user</strong>: Mòdul d'Ansible per gestionar usuaris.</li>
<li><strong>name</strong>: Nom de l'usuari a crear, utilitzant la variable <code>item</code>.</li>
<li><strong>loop</strong>: Llista d'usuaris a crear.</li>
</ol>
</div><h2>Bucles amb Diccionaris</h2>
<div class='content'><p>Pots utilitzar diccionaris per passar múltiples valors a cada iteració del bucle.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBDcmVhciB1c3VhcmlzIGFtYiBwcm9waWV0YXRzCiAgdXNlcjoKICAgIG5hbWU6ICJ7eyBpdGVtLm5hbWUgfX0iCiAgICBzdGF0ZTogcHJlc2VudAogICAgc2hlbGw6ICJ7eyBpdGVtLnNoZWxsIH19IgogIGxvb3A6CiAgICAtIHsgbmFtZTogJ2FsaWNlJywgc2hlbGw6ICcvYmluL2Jhc2gnIH0KICAgIC0geyBuYW1lOiAnYm9iJywgc2hlbGw6ICcvYmluL3pzaCcgfQogICAgLSB7IG5hbWU6ICdjaGFybGllJywgc2hlbGw6ICcvYmluL3NoJyB9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Crear usuaris amb propietats
  user:
    name: &quot;{{ item.name }}&quot;
    state: present
    shell: &quot;{{ item.shell }}&quot;
  loop:
    - { name: 'alice', shell: '/bin/bash' }
    - { name: 'bob', shell: '/bin/zsh' }
    - { name: 'charlie', shell: '/bin/sh' }</pre></div><div class='content'></div><h2>Exercici Pràctic</h2>
<div class='content'><p><strong>Objectiu</strong>: Escriu un Playbook que instal·li una llista de paquets en un sistema Ubuntu.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogSW5zdGFswrdsYXIgcGFxdWV0cyBlbiBVYnVudHUKICBob3N0czogYWxsCiAgdGFza3M6CiAgICAtIG5hbWU6IEluc3RhbMK3bGFyIHBhcXVldHMKICAgICAgYXB0OgogICAgICAgIG5hbWU6ICJ7eyBpdGVtIH19IgogICAgICAgIHN0YXRlOiBwcmVzZW50CiAgICAgIGxvb3A6CiAgICAgICAgLSBnaXQKICAgICAgICAtIGN1cmwKICAgICAgICAtIHZpbQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Instal&middot;lar paquets en Ubuntu
  hosts: all
  tasks:
    - name: Instal&middot;lar paquets
      apt:
        name: &quot;{{ item }}&quot;
        state: present
      loop:
        - git
        - curl
        - vim</pre></div><div class='content'><p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogSW5zdGFswrdsYXIgcGFxdWV0cyBlbiBVYnVudHUKICBob3N0czogYWxsCiAgdGFza3M6CiAgICAtIG5hbWU6IEluc3RhbMK3bGFyIHBhcXVldHMKICAgICAgYXB0OgogICAgICAgIG5hbWU6ICJ7eyBpdGVtIH19IgogICAgICAgIHN0YXRlOiBwcmVzZW50CiAgICAgIGxvb3A6CiAgICAgICAgLSBnaXQKICAgICAgICAtIGN1cmwKICAgICAgICAtIHZpbQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Instal&middot;lar paquets en Ubuntu
  hosts: all
  tasks:
    - name: Instal&middot;lar paquets
      apt:
        name: &quot;{{ item }}&quot;
        state: present
      loop:
        - git
        - curl
        - vim</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>En aquesta secció, hem après com utilitzar condicionals i bucles en els Playbooks d'Ansible per fer-los més dinàmics i flexibles. Els condicionals ens permeten executar tasques basades en certes condicions, mentre que els bucles ens permeten repetir tasques múltiples vegades amb diferents dades. Aquests conceptes són fonamentals per escriure Playbooks eficients i reutilitzables.</p>
<p>En el següent mòdul, explorarem els rols en Ansible, que ens permetran organitzar i reutilitzar el nostre codi de manera més eficient.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-variables-and-facts' title="Variables i Fets">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-01-introduction-to-roles' title="Introducció als Rols">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
				<!-- 
	<h1>Publicitat</h1>
	<p>Aquest espai està destinat a publicitat.</p>
	<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
	<p>Gràcies per col·laborar!</p>
	 -->
			
	<div class="container mt-2 d-none d-md-block index">
		<h1>Ansible: De Principiant a Avançat</h1>
<h2>Mòdul 1: Introducció a Ansible</h2>
<ul>
<li><a href="01-01-what-is-ansible">Què és Ansible?</a></li>
<li><a href="01-02-installing-ansible">Instal·lant Ansible</a></li>
<li><a href="01-03-ansible-architecture">Arquitectura d'Ansible</a></li>
<li><a href="01-04-basic-ansible-commands">Comandes bàsiques d'Ansible</a></li>
</ul>
<h2>Mòdul 2: Conceptes bàsics d'Ansible</h2>
<ul>
<li><a href="02-01-inventory-files">Fitxers d'inventari</a></li>
<li><a href="02-02-ansible-configuration">Configuració d'Ansible</a></li>
<li><a href="02-03-ad-hoc-commands">Comandes ad-hoc</a></li>
<li><a href="02-04-ansible-modules">Mòduls d'Ansible</a></li>
</ul>
<h2>Mòdul 3: Playbooks</h2>
<ul>
<li><a href="03-01-introduction-to-playbooks">Introducció als Playbooks</a></li>
<li><a href="03-02-writing-your-first-playbook">Escrivint el teu primer Playbook</a></li>
<li><a href="03-03-playbook-structure">Estructura del Playbook</a></li>
<li><a href="03-04-variables-and-facts">Variables i Fets</a></li>
<li><a href="03-05-conditionals-and-loops">Condicionals i Bucles</a></li>
</ul>
<h2>Mòdul 4: Rols</h2>
<ul>
<li><a href="04-01-introduction-to-roles">Introducció als Rols</a></li>
<li><a href="04-02-creating-roles">Creant Rols</a></li>
<li><a href="04-03-role-directory-structure">Estructura del Directori de Rols</a></li>
<li><a href="04-04-using-roles-in-playbooks">Utilitzant Rols en Playbooks</a></li>
</ul>
<h2>Mòdul 5: Tècniques Avançades de Playbook</h2>
<ul>
<li><a href="05-01-handlers">Handlers</a></li>
<li><a href="05-02-templates">Plantilles</a></li>
<li><a href="05-03-ansible-vault">Ansible Vault</a></li>
<li><a href="05-04-error-handling">Gestió d'Errors</a></li>
<li><a href="05-05-optimizing-playbooks">Optimitzant Playbooks</a></li>
</ul>
<h2>Mòdul 6: Ansible Galaxy</h2>
<ul>
<li><a href="06-01-what-is-ansible-galaxy">Què és Ansible Galaxy?</a></li>
<li><a href="06-02-using-ansible-galaxy">Utilitzant Ansible Galaxy</a></li>
<li><a href="06-03-creating-and-sharing-roles">Creant i Compartint Rols</a></li>
</ul>
<h2>Mòdul 7: Ansible Tower</h2>
<ul>
<li><a href="07-01-introduction-to-ansible-tower">Introducció a Ansible Tower</a></li>
<li><a href="07-02-installing-ansible-tower">Instal·lant Ansible Tower</a></li>
<li><a href="07-03-using-ansible-tower">Utilitzant Ansible Tower</a></li>
<li><a href="07-04-managing-projects-and-inventories">Gestionant Projectes i Inventaris</a></li>
</ul>
<h2>Mòdul 8: Ansible per a DevOps</h2>
<ul>
<li><a href="08-01-ansible-and-docker">Ansible i Docker</a></li>
<li><a href="08-02-ansible-and-kubernetes">Ansible i Kubernetes</a></li>
<li><a href="08-03-ci-cd-with-ansible">CI/CD amb Ansible</a></li>
<li><a href="08-04-ansible-in-cloud-environments">Ansible en Entorns Cloud</a></li>
</ul>
<h2>Mòdul 9: Millors Pràctiques d'Ansible</h2>
<ul>
<li><a href="09-01-code-organization">Organització del Codi</a></li>
<li><a href="09-02-security-best-practices">Millors Pràctiques de Seguretat</a></li>
<li><a href="09-03-performance-tuning">Ajust de Rendiment</a></li>
<li><a href="09-04-testing-ansible-code">Provar el Codi d'Ansible</a></li>
</ul>
<h2>Mòdul 10: Temes Avançats d'Ansible</h2>
<ul>
<li><a href="10-01-custom-modules">Mòduls Personalitzats</a></li>
<li><a href="10-02-dynamic-inventory">Inventari Dinàmic</a></li>
<li><a href="10-03-ansible-plugins">Plugins d'Ansible</a></li>
<li><a href="10-04-ansible-api">API d'Ansible</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
