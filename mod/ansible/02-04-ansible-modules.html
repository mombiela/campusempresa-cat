<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mòduls d'Ansible</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ansible/02-04-ansible-modules" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ansible/02-04-ansible-modules" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ansible/02-04-ansible-modules" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/ansible/02-04-ansible-modules" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/ansible/02-04-ansible-modules" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='02-03-ad-hoc-commands' title="Comandes ad-hoc">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Mòduls d'Ansible</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='03-01-introduction-to-playbooks' title="Introducció als Playbooks">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Els mòduls són una part fonamental d'Ansible, ja que són les unitats de treball que Ansible executa en els nodes gestionats. En aquest tema, aprendrem què són els mòduls, com utilitzar-los i veurem alguns exemples pràctics.</p>
</div><h1><p>Què són els Mòduls d'Ansible?</p>
</h1>
<div class='content'><p>Els mòduls d'Ansible són petits programes que Ansible envia als nodes gestionats per executar tasques específiques. Cada mòdul està dissenyat per realitzar una tasca concreta, com ara gestionar usuaris, instal·lar paquets, copiar fitxers, etc.</p>
</div><h2><p>Característiques dels Mòduls:</p>
</h2>
<div class='content'><ul>
<li><strong>Idempotència</strong>: Els mòduls estan dissenyats per ser idempotents, és a dir, executar-los múltiples vegades no canviarà l'estat del sistema si ja està en l'estat desitjat.</li>
<li><strong>Portabilitat</strong>: Els mòduls són portables i poden executar-se en diferents sistemes operatius.</li>
<li><strong>Extensibilitat</strong>: Ansible permet crear mòduls personalitzats per a tasques específiques.</li>
</ul>
</div><h1><p>Tipus de Mòduls</p>
</h1>
<div class='content'><p>Ansible inclou una àmplia varietat de mòduls que es poden classificar en diferents categories:</p>
<table>
<thead>
<tr>
<th>Categoria</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>System</strong></td>
<td>Gestió d'usuaris, grups, serveis, etc.</td>
</tr>
<tr>
<td><strong>Files</strong></td>
<td>Gestió de fitxers i directoris.</td>
</tr>
<tr>
<td><strong>Network</strong></td>
<td>Configuració de dispositius de xarxa.</td>
</tr>
<tr>
<td><strong>Cloud</strong></td>
<td>Gestió de recursos en plataformes de núvol com AWS, Azure, GCP, etc.</td>
</tr>
<tr>
<td><strong>Database</strong></td>
<td>Gestió de bases de dades com MySQL, PostgreSQL, etc.</td>
</tr>
<tr>
<td><strong>Packaging</strong></td>
<td>Instal·lació i gestió de paquets de programari.</td>
</tr>
<tr>
<td><strong>Commands</strong></td>
<td>Execució de comandes en els nodes gestionats.</td>
</tr>
</tbody>
</table>
</div><h1><p>Utilitzant Mòduls en Comandes Ad-hoc</p>
</h1>
<div class='content'><p>Els mòduls es poden utilitzar directament en comandes ad-hoc per executar tasques ràpides. A continuació, es mostra un exemple d'ús del mòdul <code>ping</code> per verificar la connectivitat amb els nodes gestionats:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZSBhbGwgLW0gcGluZw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible all -m ping</pre></div><div class='content'></div><h2><p>Explicació:</p>
</h2>
<div class='content'><ul>
<li><code>all</code>: Indica que la comanda s'executarà en tots els nodes definits en l'inventari.</li>
<li><code>-m ping</code>: Utilitza el mòdul <code>ping</code> per verificar la connectivitat.</li>
</ul>
</div><h1><p>Utilitzant Mòduls en Playbooks</p>
</h1>
<div class='content'><p>Els mòduls també es poden utilitzar dins dels playbooks per definir tasques més complexes. A continuació, es mostra un exemple d'un playbook que utilitza el mòdul <code>user</code> per crear un nou usuari:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogQ3JlYXIgdW4gbm91IHVzdWFyaQogIGhvc3RzOiBhbGwKICB0YXNrczoKICAgIC0gbmFtZTogQ3JlYXIgbCd1c3VhcmkgJ2pvaG5kb2UnCiAgICAgIHVzZXI6CiAgICAgICAgbmFtZTogam9obmRvZQogICAgICAgIHN0YXRlOiBwcmVzZW50CiAgICAgICAgZ3JvdXBzOiBzdWRv"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Crear un nou usuari
  hosts: all
  tasks:
    - name: Crear l'usuari 'johndoe'
      user:
        name: johndoe
        state: present
        groups: sudo</pre></div><div class='content'></div><h2><p>Explicació:</p>
</h2>
<div class='content'><ul>
<li><code>name</code>: Nom del playbook.</li>
<li><code>hosts</code>: Defineix els nodes on s'executarà el playbook.</li>
<li><code>tasks</code>: Llista de tasques a executar.</li>
<li><code>user</code>: Mòdul utilitzat per gestionar usuaris.
<ul>
<li><code>name</code>: Nom de l'usuari a crear.</li>
<li><code>state</code>: Estat desitjat de l'usuari (<code>present</code> per crear-lo).</li>
<li><code>groups</code>: Grups als quals pertany l'usuari.</li>
</ul>
</li>
</ul>
</div><h1><p>Exercicis Pràctics</p>
</h1>
<div class='content'></div><h2><p>Exercici 1: Utilitzar el Mòdul <code>file</code> per Crear un Fitxer</p>
</h2>
<div class='content'><p><strong>Objectiu</strong>: Crear un fitxer anomenat <code>example.txt</code> en el directori <code>/tmp</code> en tots els nodes gestionats.</p>
<p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZSBhbGwgLW0gZmlsZSAtYSAicGF0aD0vdG1wL2V4YW1wbGUudHh0IHN0YXRlPXRvdWNoIg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible all -m file -a &quot;path=/tmp/example.txt state=touch&quot;</pre></div><div class='content'></div><h2><p>Exercici 2: Utilitzar el Mòdul <code>yum</code> per Instal·lar un Paquet</p>
</h2>
<div class='content'><p><strong>Objectiu</strong>: Instal·lar el paquet <code>httpd</code> en tots els nodes gestionats que utilitzen el gestor de paquets <code>yum</code>.</p>
<p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZSBhbGwgLW0geXVtIC1hICJuYW1lPWh0dHBkIHN0YXRlPXByZXNlbnQi"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible all -m yum -a &quot;name=httpd state=present&quot;</pre></div><div class='content'></div><h2><p>Exercici 3: Crear un Playbook per Gestionar Serveis</p>
</h2>
<div class='content'><p><strong>Objectiu</strong>: Escriure un playbook que instal·li el servei <code>nginx</code> i asseguri que estigui en execució.</p>
<p><strong>Solució</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogR2VzdGlvbmFyIGVsIHNlcnZlaSBuZ2lueAogIGhvc3RzOiBhbGwKICB0YXNrczoKICAgIC0gbmFtZTogSW5zdGFswrdsYXIgbmdpbngKICAgICAgeXVtOgogICAgICAgIG5hbWU6IG5naW54CiAgICAgICAgc3RhdGU6IHByZXNlbnQKCiAgICAtIG5hbWU6IEFzc2VndXJhciBxdWUgbmdpbnggZXN0w6AgZW4gZXhlY3VjacOzCiAgICAgIHNlcnZpY2U6CiAgICAgICAgbmFtZTogbmdpbngKICAgICAgICBzdGF0ZTogc3RhcnRlZAogICAgICAgIGVuYWJsZWQ6IHllcw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Gestionar el servei nginx
  hosts: all
  tasks:
    - name: Instal&middot;lar nginx
      yum:
        name: nginx
        state: present

    - name: Assegurar que nginx est&agrave; en execuci&oacute;
      service:
        name: nginx
        state: started
        enabled: yes</pre></div><div class='content'></div><h1><p>Errors Comuns i Consells</p>
</h1>
<div class='content'><ul>
<li>
<p><strong>Error</strong>: &quot;Mòdul no trobat&quot;.</p>
<ul>
<li><strong>Solució</strong>: Assegura't que el mòdul que estàs intentant utilitzar està instal·lat i disponible en el sistema.</li>
</ul>
</li>
<li>
<p><strong>Error</strong>: &quot;Permisos insuficients&quot;.</p>
<ul>
<li><strong>Solució</strong>: Alguns mòduls requereixen permisos d'administrador. Utilitza l'opció <code>--become</code> per executar la comanda amb privilegis elevats.</li>
</ul>
</li>
<li>
<p><strong>Consell</strong>: Utilitza l'opció <code>-vvv</code> per obtenir més informació de depuració si una comanda no funciona com s'esperava.</p>
</li>
</ul>
</div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>En aquesta secció, hem après què són els mòduls d'Ansible, com utilitzar-los en comandes ad-hoc i playbooks, i hem vist alguns exemples pràctics. Els mòduls són una eina poderosa que permet automatitzar una àmplia varietat de tasques en els nodes gestionats. En el següent mòdul, explorarem com escriure i estructurar playbooks per gestionar configuracions més complexes.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='02-03-ad-hoc-commands' title="Comandes ad-hoc">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='03-01-introduction-to-playbooks' title="Introducció als Playbooks">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
