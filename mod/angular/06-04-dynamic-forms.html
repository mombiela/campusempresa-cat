<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formularis dinàmics</title>

    <link rel="alternate" href="https://campusempresa.com/mod/angular/06-04-dynamic-forms" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/angular/06-04-dynamic-forms" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/angular/06-04-dynamic-forms" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/angular/06-04-dynamic-forms" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/angular/06-04-dynamic-forms" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-03-form-validation' title="Validació de formularis">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Formularis dinàmics</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-introduction-http-client' title="Introducció al client HTTP">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Els formularis dinàmics a Angular permeten crear i gestionar formularis que poden canviar la seva estructura en temps d'execució. Això és especialment útil quan la configuració del formulari depèn de dades que es reben de manera dinàmica, com ara respostes d'API o interaccions de l'usuari.</p>
</div><h1>Objectius d'aquest tema</h1>
<div class='content'><ul>
<li>Comprendre què són els formularis dinàmics.</li>
<li>Aprendre a crear formularis dinàmics utilitzant el mòdul <code>ReactiveFormsModule</code>.</li>
<li>Gestionar la validació de formularis dinàmics.</li>
<li>Implementar exemples pràctics de formularis dinàmics.</li>
</ul>
</div><h1>Conceptes clau</h1>
<div class='content'></div><h2>1. Què són els formularis dinàmics?</h2>
<div class='content'><p>Els formularis dinàmics són formularis que es poden modificar en temps d'execució. Això vol dir que es poden afegir, eliminar o modificar camps del formulari basant-se en dades dinàmiques o interaccions de l'usuari.</p>
</div><h2>2. Configuració inicial</h2>
<div class='content'><p>Per treballar amb formularis dinàmics, necessitem importar el mòdul <code>ReactiveFormsModule</code> al nostre mòdul principal.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgUmVhY3RpdmVGb3Jtc01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJzsKCkBOZ01vZHVsZSh7CiAgaW1wb3J0czogWwogICAgLy8gYWx0cmVzIGltcG9ydHMKICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUKICBdLAogIC8vIGFsdHJlcyBjb25maWd1cmFjaW9ucwp9KQpleHBvcnQgY2xhc3MgQXBwTW9kdWxlIHsgfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ReactiveFormsModule } from '@angular/forms';

@NgModule({
  imports: [
    // altres imports
    ReactiveFormsModule
  ],
  // altres configuracions
})
export class AppModule { }</pre></div><div class='content'></div><h2>3. Crear un formulari dinàmic</h2>
<div class='content'><p>A continuació, veurem com crear un formulari dinàmic utilitzant <code>FormGroup</code> i <code>FormArray</code>.</p>
<h4>Pas 1: Definir el formulari en el component TypeScript</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKaW1wb3J0IHsgRm9ybUJ1aWxkZXIsIEZvcm1Hcm91cCwgRm9ybUFycmF5LCBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnOwoKQENvbXBvbmVudCh7CiAgc2VsZWN0b3I6ICdhcHAtZHluYW1pYy1mb3JtJywKICB0ZW1wbGF0ZVVybDogJy4vZHluYW1pYy1mb3JtLmNvbXBvbmVudC5odG1sJwp9KQpleHBvcnQgY2xhc3MgRHluYW1pY0Zvcm1Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQgewogIGR5bmFtaWNGb3JtOiBGb3JtR3JvdXA7CgogIGNvbnN0cnVjdG9yKHByaXZhdGUgZmI6IEZvcm1CdWlsZGVyKSB7fQoKICBuZ09uSW5pdCgpIHsKICAgIHRoaXMuZHluYW1pY0Zvcm0gPSB0aGlzLmZiLmdyb3VwKHsKICAgICAgbmFtZTogWycnLCBWYWxpZGF0b3JzLnJlcXVpcmVkXSwKICAgICAgYWRkcmVzc2VzOiB0aGlzLmZiLmFycmF5KFtdKQogICAgfSk7CiAgfQoKICBnZXQgYWRkcmVzc2VzKCkgewogICAgcmV0dXJuIHRoaXMuZHluYW1pY0Zvcm0uZ2V0KCdhZGRyZXNzZXMnKSBhcyBGb3JtQXJyYXk7CiAgfQoKICBhZGRBZGRyZXNzKCkgewogICAgY29uc3QgYWRkcmVzc0Zvcm0gPSB0aGlzLmZiLmdyb3VwKHsKICAgICAgc3RyZWV0OiBbJycsIFZhbGlkYXRvcnMucmVxdWlyZWRdLAogICAgICBjaXR5OiBbJycsIFZhbGlkYXRvcnMucmVxdWlyZWRdLAogICAgICBzdGF0ZTogWycnLCBWYWxpZGF0b3JzLnJlcXVpcmVkXSwKICAgICAgemlwOiBbJycsIFZhbGlkYXRvcnMucmVxdWlyZWRdCiAgICB9KTsKCiAgICB0aGlzLmFkZHJlc3Nlcy5wdXNoKGFkZHJlc3NGb3JtKTsKICB9CgogIHJlbW92ZUFkZHJlc3MoaW5kZXg6IG51bWJlcikgewogICAgdGhpcy5hZGRyZXNzZXMucmVtb3ZlQXQoaW5kZXgpOwogIH0KCiAgb25TdWJtaXQoKSB7CiAgICBjb25zb2xlLmxvZyh0aGlzLmR5bmFtaWNGb3JtLnZhbHVlKTsKICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Component, OnInit } from '@angular/core';
import { FormBuilder, FormGroup, FormArray, Validators } from '@angular/forms';

@Component({
  selector: 'app-dynamic-form',
  templateUrl: './dynamic-form.component.html'
})
export class DynamicFormComponent implements OnInit {
  dynamicForm: FormGroup;

  constructor(private fb: FormBuilder) {}

  ngOnInit() {
    this.dynamicForm = this.fb.group({
      name: ['', Validators.required],
      addresses: this.fb.array([])
    });
  }

  get addresses() {
    return this.dynamicForm.get('addresses') as FormArray;
  }

  addAddress() {
    const addressForm = this.fb.group({
      street: ['', Validators.required],
      city: ['', Validators.required],
      state: ['', Validators.required],
      zip: ['', Validators.required]
    });

    this.addresses.push(addressForm);
  }

  removeAddress(index: number) {
    this.addresses.removeAt(index);
  }

  onSubmit() {
    console.log(this.dynamicForm.value);
  }
}</pre></div><div class='content'><h4>Pas 2: Definir la plantilla HTML</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGZvcm0gW2Zvcm1Hcm91cF09ImR5bmFtaWNGb3JtIiAobmdTdWJtaXQpPSJvblN1Ym1pdCgpIj4KICA8ZGl2PgogICAgPGxhYmVsIGZvcj0ibmFtZSI+TmFtZTwvbGFiZWw+CiAgICA8aW5wdXQgaWQ9Im5hbWUiIGZvcm1Db250cm9sTmFtZT0ibmFtZSI+CiAgPC9kaXY+CgogIDxkaXYgZm9ybUFycmF5TmFtZT0iYWRkcmVzc2VzIj4KICAgIDxkaXYgKm5nRm9yPSJsZXQgYWRkcmVzcyBvZiBhZGRyZXNzZXMuY29udHJvbHM7IGxldCBpPWluZGV4IiBbZm9ybUdyb3VwTmFtZV09ImkiPgogICAgICA8bGFiZWwgZm9yPSJzdHJlZXQiPlN0cmVldDwvbGFiZWw+CiAgICAgIDxpbnB1dCBpZD0ic3RyZWV0IiBmb3JtQ29udHJvbE5hbWU9InN0cmVldCI+CgogICAgICA8bGFiZWwgZm9yPSJjaXR5Ij5DaXR5PC9sYWJlbD4KICAgICAgPGlucHV0IGlkPSJjaXR5IiBmb3JtQ29udHJvbE5hbWU9ImNpdHkiPgoKICAgICAgPGxhYmVsIGZvcj0ic3RhdGUiPlN0YXRlPC9sYWJlbD4KICAgICAgPGlucHV0IGlkPSJzdGF0ZSIgZm9ybUNvbnRyb2xOYW1lPSJzdGF0ZSI+CgogICAgICA8bGFiZWwgZm9yPSJ6aXAiPlppcDwvbGFiZWw+CiAgICAgIDxpbnB1dCBpZD0iemlwIiBmb3JtQ29udHJvbE5hbWU9InppcCI+CgogICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgKGNsaWNrKT0icmVtb3ZlQWRkcmVzcyhpKSI+UmVtb3ZlIEFkZHJlc3M8L2J1dHRvbj4KICAgIDwvZGl2PgogIDwvZGl2PgoKICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgKGNsaWNrKT0iYWRkQWRkcmVzcygpIj5BZGQgQWRkcmVzczwvYnV0dG9uPgogIDxidXR0b24gdHlwZT0ic3VibWl0Ij5TdWJtaXQ8L2J1dHRvbj4KPC9mb3JtPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;form [formGroup]=&quot;dynamicForm&quot; (ngSubmit)=&quot;onSubmit()&quot;&gt;
  &lt;div&gt;
    &lt;label for=&quot;name&quot;&gt;Name&lt;/label&gt;
    &lt;input id=&quot;name&quot; formControlName=&quot;name&quot;&gt;
  &lt;/div&gt;

  &lt;div formArrayName=&quot;addresses&quot;&gt;
    &lt;div *ngFor=&quot;let address of addresses.controls; let i=index&quot; [formGroupName]=&quot;i&quot;&gt;
      &lt;label for=&quot;street&quot;&gt;Street&lt;/label&gt;
      &lt;input id=&quot;street&quot; formControlName=&quot;street&quot;&gt;

      &lt;label for=&quot;city&quot;&gt;City&lt;/label&gt;
      &lt;input id=&quot;city&quot; formControlName=&quot;city&quot;&gt;

      &lt;label for=&quot;state&quot;&gt;State&lt;/label&gt;
      &lt;input id=&quot;state&quot; formControlName=&quot;state&quot;&gt;

      &lt;label for=&quot;zip&quot;&gt;Zip&lt;/label&gt;
      &lt;input id=&quot;zip&quot; formControlName=&quot;zip&quot;&gt;

      &lt;button type=&quot;button&quot; (click)=&quot;removeAddress(i)&quot;&gt;Remove Address&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;button type=&quot;button&quot; (click)=&quot;addAddress()&quot;&gt;Add Address&lt;/button&gt;
  &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;
&lt;/form&gt;</pre></div><div class='content'></div><h2>4. Validació de formularis dinàmics</h2>
<div class='content'><p>La validació en formularis dinàmics es gestiona de la mateixa manera que en formularis reactius estàtics. Utilitzem <code>Validators</code> per definir les regles de validació.</p>
</div><h2>5. Exemples pràctics</h2>
<div class='content'><h4>Exemple 1: Formulari de registre amb camps dinàmics</h4>
<p>Suposem que volem crear un formulari de registre on l'usuari pugui afegir múltiples números de telèfon.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ29tcG9uZW50IFR5cGVTY3JpcHQKaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKaW1wb3J0IHsgRm9ybUJ1aWxkZXIsIEZvcm1Hcm91cCwgRm9ybUFycmF5LCBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnOwoKQENvbXBvbmVudCh7CiAgc2VsZWN0b3I6ICdhcHAtcmVnaXN0cmF0aW9uLWZvcm0nLAogIHRlbXBsYXRlVXJsOiAnLi9yZWdpc3RyYXRpb24tZm9ybS5jb21wb25lbnQuaHRtbCcKfSkKZXhwb3J0IGNsYXNzIFJlZ2lzdHJhdGlvbkZvcm1Db21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQgewogIHJlZ2lzdHJhdGlvbkZvcm06IEZvcm1Hcm91cDsKCiAgY29uc3RydWN0b3IocHJpdmF0ZSBmYjogRm9ybUJ1aWxkZXIpIHt9CgogIG5nT25Jbml0KCkgewogICAgdGhpcy5yZWdpc3RyYXRpb25Gb3JtID0gdGhpcy5mYi5ncm91cCh7CiAgICAgIHVzZXJuYW1lOiBbJycsIFZhbGlkYXRvcnMucmVxdWlyZWRdLAogICAgICBwaG9uZXM6IHRoaXMuZmIuYXJyYXkoW3RoaXMuY3JlYXRlUGhvbmUoKV0pCiAgICB9KTsKICB9CgogIGdldCBwaG9uZXMoKSB7CiAgICByZXR1cm4gdGhpcy5yZWdpc3RyYXRpb25Gb3JtLmdldCgncGhvbmVzJykgYXMgRm9ybUFycmF5OwogIH0KCiAgY3JlYXRlUGhvbmUoKTogRm9ybUdyb3VwIHsKICAgIHJldHVybiB0aGlzLmZiLmdyb3VwKHsKICAgICAgcGhvbmU6IFsnJywgVmFsaWRhdG9ycy5yZXF1aXJlZF0KICAgIH0pOwogIH0KCiAgYWRkUGhvbmUoKSB7CiAgICB0aGlzLnBob25lcy5wdXNoKHRoaXMuY3JlYXRlUGhvbmUoKSk7CiAgfQoKICByZW1vdmVQaG9uZShpbmRleDogbnVtYmVyKSB7CiAgICB0aGlzLnBob25lcy5yZW1vdmVBdChpbmRleCk7CiAgfQoKICBvblN1Ym1pdCgpIHsKICAgIGNvbnNvbGUubG9nKHRoaXMucmVnaXN0cmF0aW9uRm9ybS52YWx1ZSk7CiAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Component TypeScript
import { Component, OnInit } from '@angular/core';
import { FormBuilder, FormGroup, FormArray, Validators } from '@angular/forms';

@Component({
  selector: 'app-registration-form',
  templateUrl: './registration-form.component.html'
})
export class RegistrationFormComponent implements OnInit {
  registrationForm: FormGroup;

  constructor(private fb: FormBuilder) {}

  ngOnInit() {
    this.registrationForm = this.fb.group({
      username: ['', Validators.required],
      phones: this.fb.array([this.createPhone()])
    });
  }

  get phones() {
    return this.registrationForm.get('phones') as FormArray;
  }

  createPhone(): FormGroup {
    return this.fb.group({
      phone: ['', Validators.required]
    });
  }

  addPhone() {
    this.phones.push(this.createPhone());
  }

  removePhone(index: number) {
    this.phones.removeAt(index);
  }

  onSubmit() {
    console.log(this.registrationForm.value);
  }
}</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSBQbGFudGlsbGEgSFRNTCAtLT4KPGZvcm0gW2Zvcm1Hcm91cF09InJlZ2lzdHJhdGlvbkZvcm0iIChuZ1N1Ym1pdCk9Im9uU3VibWl0KCkiPgogIDxkaXY+CiAgICA8bGFiZWwgZm9yPSJ1c2VybmFtZSI+VXNlcm5hbWU8L2xhYmVsPgogICAgPGlucHV0IGlkPSJ1c2VybmFtZSIgZm9ybUNvbnRyb2xOYW1lPSJ1c2VybmFtZSI+CiAgPC9kaXY+CgogIDxkaXYgZm9ybUFycmF5TmFtZT0icGhvbmVzIj4KICAgIDxkaXYgKm5nRm9yPSJsZXQgcGhvbmUgb2YgcGhvbmVzLmNvbnRyb2xzOyBsZXQgaT1pbmRleCIgW2Zvcm1Hcm91cE5hbWVdPSJpIj4KICAgICAgPGxhYmVsIGZvcj0icGhvbmUiPlBob25lPC9sYWJlbD4KICAgICAgPGlucHV0IGlkPSJwaG9uZSIgZm9ybUNvbnRyb2xOYW1lPSJwaG9uZSI+CiAgICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiAoY2xpY2spPSJyZW1vdmVQaG9uZShpKSI+UmVtb3ZlIFBob25lPC9idXR0b24+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCiAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIChjbGljayk9ImFkZFBob25lKCkiPkFkZCBQaG9uZTwvYnV0dG9uPgogIDxidXR0b24gdHlwZT0ic3VibWl0Ij5TdWJtaXQ8L2J1dHRvbj4KPC9mb3JtPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- Plantilla HTML --&gt;
&lt;form [formGroup]=&quot;registrationForm&quot; (ngSubmit)=&quot;onSubmit()&quot;&gt;
  &lt;div&gt;
    &lt;label for=&quot;username&quot;&gt;Username&lt;/label&gt;
    &lt;input id=&quot;username&quot; formControlName=&quot;username&quot;&gt;
  &lt;/div&gt;

  &lt;div formArrayName=&quot;phones&quot;&gt;
    &lt;div *ngFor=&quot;let phone of phones.controls; let i=index&quot; [formGroupName]=&quot;i&quot;&gt;
      &lt;label for=&quot;phone&quot;&gt;Phone&lt;/label&gt;
      &lt;input id=&quot;phone&quot; formControlName=&quot;phone&quot;&gt;
      &lt;button type=&quot;button&quot; (click)=&quot;removePhone(i)&quot;&gt;Remove Phone&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;button type=&quot;button&quot; (click)=&quot;addPhone()&quot;&gt;Add Phone&lt;/button&gt;
  &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;
&lt;/form&gt;</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>En aquest tema, hem après a crear formularis dinàmics a Angular utilitzant <code>ReactiveFormsModule</code>. Hem vist com afegir i eliminar camps de formulari dinàmicament, així com gestionar la validació d'aquests formularis. Els formularis dinàmics són una eina poderosa per crear aplicacions flexibles i adaptables a les necessitats dels usuaris.</p>
<p>En el següent mòdul, explorarem com treballar amb el client HTTP i observables a Angular.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-03-form-validation' title="Validació de formularis">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-introduction-http-client' title="Introducció al client HTTP">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
