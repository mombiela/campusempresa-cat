<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Millors pràctiques de seguretat</title>

    <link rel="alternate" href="https://campusempresa.com/mod/angular/11-04-security-best-practices" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/angular/11-04-security-best-practices" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/angular/11-04-security-best-practices" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/angular/11-04-security-best-practices" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/angular/11-04-security-best-practices" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='11-03-code-quality-best-practices' title="Qualitat del codi i millors pràctiques">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Millors pràctiques de seguretat</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='11-05-maintaining-angular-applications' title="Manteniment d'aplicacions Angular">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest tema, explorarem les millors pràctiques de seguretat per a aplicacions Angular. La seguretat és un aspecte crític en el desenvolupament de qualsevol aplicació web, i Angular proporciona diverses eines i tècniques per ajudar a protegir les teves aplicacions contra vulnerabilitats comunes.</p>
</div><h1><p>Continguts</p>
</h1>
<div class='content'><ol>
<li><a href="#introducció-a-la-seguretat-en-angular">Introducció a la seguretat en Angular</a></li>
<li><a href="#protecció-contra-cross-site-scripting-xss">Protecció contra Cross-Site Scripting (XSS)</a></li>
<li><a href="#autenticació-i-autorització">Autenticació i autorització</a></li>
<li><a href="#protecció-contra-cross-site-request-forgery-csrf">Protecció contra Cross-Site Request Forgery (CSRF)</a></li>
<li><a href="#gestió-de-dades-sensibles">Gestió de dades sensibles</a></li>
<li><a href="#millors-pràctiques-de-configuració">Millors pràctiques de configuració</a></li>
<li><a href="#exercicis-pràctics">Exercicis pràctics</a></li>
</ol>
</div><h1><p>Introducció a la seguretat en Angular</p>
</h1>
<div class='content'><p>Angular proporciona diverses eines i mecanismes per ajudar a protegir les aplicacions web. Algunes de les vulnerabilitats més comunes que cal tenir en compte són:</p>
<ul>
<li><strong>Cross-Site Scripting (XSS)</strong></li>
<li><strong>Cross-Site Request Forgery (CSRF)</strong></li>
<li><strong>Injecció de codi</strong></li>
<li><strong>Fugida de dades sensibles</strong></li>
</ul>
</div><h1><p>Protecció contra Cross-Site Scripting (XSS)</p>
</h1>
<div class='content'><p>El XSS és una de les vulnerabilitats més comunes en aplicacions web. Angular té mecanismes integrats per prevenir XSS, com ara la sanitització automàtica de dades.</p>
</div><h2><p>Exemples pràctics</p>
</h2>
<div class='content'><h4>Interpolació segura</h4>
<p>Angular sanititza automàticament les dades interpolades per prevenir XSS.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PHA+e3sgdXNlcklucHV0IH19PC9wPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;p&gt;{{ userInput }}&lt;/p&gt;</pre></div><div class='content'><h4>Enllaç de propietats</h4>
<p>L'enllaç de propietats també és segur per defecte.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGltZyBbc3JjXT0idXNlckltYWdlVXJsIj4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;img [src]=&quot;userImageUrl&quot;&gt;</pre></div><div class='content'></div><h2><p>Consells addicionals</p>
</h2>
<div class='content'><ul>
<li>Evita utilitzar <code>innerHTML</code> directament. Si és necessari, utilitza el servei <code>DomSanitizer</code> per sanititzar el contingut.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgRG9tU2FuaXRpemVyLCBTYWZlSHRtbCB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInOwoKY29uc3RydWN0b3IocHJpdmF0ZSBzYW5pdGl6ZXI6IERvbVNhbml0aXplcikge30KCmdldFNhbml0aXplZEh0bWwoaHRtbDogc3RyaW5nKTogU2FmZUh0bWwgewogIHJldHVybiB0aGlzLnNhbml0aXplci5ieXBhc3NTZWN1cml0eVRydXN0SHRtbChodG1sKTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { DomSanitizer, SafeHtml } from '@angular/platform-browser';

constructor(private sanitizer: DomSanitizer) {}

getSanitizedHtml(html: string): SafeHtml {
  return this.sanitizer.bypassSecurityTrustHtml(html);
}</pre></div><div class='content'></div><h1><p>Autenticació i autorització</p>
</h1>
<div class='content'><p>L'autenticació i l'autorització són fonamentals per assegurar que només els usuaris autoritzats puguin accedir a certes parts de l'aplicació.</p>
</div><h2><p>Implementació d'autenticació</p>
</h2>
<div class='content'><p>Utilitza serveis per gestionar l'estat d'autenticació.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwppbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInOwoKQEluamVjdGFibGUoewogIHByb3ZpZGVkSW46ICdyb290Jwp9KQpleHBvcnQgY2xhc3MgQXV0aFNlcnZpY2UgewogIHByaXZhdGUgaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7CgogIGNvbnN0cnVjdG9yKHByaXZhdGUgcm91dGVyOiBSb3V0ZXIpIHt9CgogIGxvZ2luKHVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpOiBib29sZWFuIHsKICAgIC8vIEltcGxlbWVudGEgbGEgbMOyZ2ljYSBkJ2F1dGVudGljYWNpw7MKICAgIHRoaXMuaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTsKICAgIHJldHVybiB0aGlzLmlzQXV0aGVudGljYXRlZDsKICB9CgogIGxvZ291dCgpOiB2b2lkIHsKICAgIHRoaXMuaXNBdXRoZW50aWNhdGVkID0gZmFsc2U7CiAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJy9sb2dpbiddKTsKICB9CgogIGlzTG9nZ2VkSW4oKTogYm9vbGVhbiB7CiAgICByZXR1cm4gdGhpcy5pc0F1dGhlbnRpY2F0ZWQ7CiAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Injectable } from '@angular/core';
import { Router } from '@angular/router';

@Injectable({
  providedIn: 'root'
})
export class AuthService {
  private isAuthenticated = false;

  constructor(private router: Router) {}

  login(username: string, password: string): boolean {
    // Implementa la l&ograve;gica d'autenticaci&oacute;
    this.isAuthenticated = true;
    return this.isAuthenticated;
  }

  logout(): void {
    this.isAuthenticated = false;
    this.router.navigate(['/login']);
  }

  isLoggedIn(): boolean {
    return this.isAuthenticated;
  }
}</pre></div><div class='content'></div><h2><p>Protecció de rutes</p>
</h2>
<div class='content'><p>Utilitza guàrdies de rutes per protegir les rutes que requereixen autenticació.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwppbXBvcnQgeyBDYW5BY3RpdmF0ZSwgUm91dGVyIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJzsKaW1wb3J0IHsgQXV0aFNlcnZpY2UgfSBmcm9tICcuL2F1dGguc2VydmljZSc7CgpASW5qZWN0YWJsZSh7CiAgcHJvdmlkZWRJbjogJ3Jvb3QnCn0pCmV4cG9ydCBjbGFzcyBBdXRoR3VhcmQgaW1wbGVtZW50cyBDYW5BY3RpdmF0ZSB7CgogIGNvbnN0cnVjdG9yKHByaXZhdGUgYXV0aFNlcnZpY2U6IEF1dGhTZXJ2aWNlLCBwcml2YXRlIHJvdXRlcjogUm91dGVyKSB7fQoKICBjYW5BY3RpdmF0ZSgpOiBib29sZWFuIHsKICAgIGlmICh0aGlzLmF1dGhTZXJ2aWNlLmlzTG9nZ2VkSW4oKSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFsnL2xvZ2luJ10pOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Injectable } from '@angular/core';
import { CanActivate, Router } from '@angular/router';
import { AuthService } from './auth.service';

@Injectable({
  providedIn: 'root'
})
export class AuthGuard implements CanActivate {

  constructor(private authService: AuthService, private router: Router) {}

  canActivate(): boolean {
    if (this.authService.isLoggedIn()) {
      return true;
    } else {
      this.router.navigate(['/login']);
      return false;
    }
  }
}</pre></div><div class='content'></div><h1><p>Protecció contra Cross-Site Request Forgery (CSRF)</p>
</h1>
<div class='content'><p>El CSRF és un atac que força a un usuari autenticat a executar accions no desitjades en una aplicació web en la qual està autenticat.</p>
</div><h2><p>Implementació de protecció CSRF</p>
</h2>
<div class='content'><p>Angular no proporciona protecció CSRF per defecte, però pots implementar-la al servidor i assegurar-te que el client Angular envia els tokens CSRF correctament.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7Cgpjb25zdHJ1Y3Rvcihwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQpIHt9CgpzZW5kUG9zdFJlcXVlc3QoZGF0YTogYW55KSB7CiAgY29uc3QgaGVhZGVycyA9IG5ldyBIdHRwSGVhZGVycyh7CiAgICAnWC1DU1JGLVRva2VuJzogJ3Rva2VuLXZhbHVlJwogIH0pOwoKICByZXR1cm4gdGhpcy5odHRwLnBvc3QoJy9hcGkvZGF0YScsIGRhdGEsIHsgaGVhZGVycyB9KTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { HttpClient, HttpHeaders } from '@angular/common/http';

constructor(private http: HttpClient) {}

sendPostRequest(data: any) {
  const headers = new HttpHeaders({
    'X-CSRF-Token': 'token-value'
  });

  return this.http.post('/api/data', data, { headers });
}</pre></div><div class='content'></div><h1><p>Gestió de dades sensibles</p>
</h1>
<div class='content'><p>És important gestionar les dades sensibles amb cura per evitar fugides d'informació.</p>
</div><h2><p>Consells per gestionar dades sensibles</p>
</h2>
<div class='content'><ul>
<li>No emmagatzemis dades sensibles en el client (per exemple, en localStorage).</li>
<li>Utilitza HTTPS per encriptar les dades en trànsit.</li>
<li>Sanititza totes les dades d'entrada i sortida.</li>
</ul>
</div><h1><p>Millors pràctiques de configuració</p>
</h1>
<div class='content'><p>Configura l'aplicació Angular per millorar la seguretat.</p>
</div><h2><p>Deshabilitar el mode de desenvolupament</p>
</h2>
<div class='content'><p>Assegura't de deshabilitar el mode de desenvolupament en producció.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgZW5hYmxlUHJvZE1vZGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKCmlmIChlbnZpcm9ubWVudC5wcm9kdWN0aW9uKSB7CiAgZW5hYmxlUHJvZE1vZGUoKTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { enableProdMode } from '@angular/core';

if (environment.production) {
  enableProdMode();
}</pre></div><div class='content'></div><h2><p>Configurar el Content Security Policy (CSP)</p>
</h2>
<div class='content'><p>Configura el CSP per prevenir atacs XSS i altres vulnerabilitats.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PG1ldGEgaHR0cC1lcXVpdj0iQ29udGVudC1TZWN1cml0eS1Qb2xpY3kiIGNvbnRlbnQ9ImRlZmF1bHQtc3JjICdzZWxmJzsgc2NyaXB0LXNyYyAnc2VsZicgJ3Vuc2FmZS1pbmxpbmUnOyBzdHlsZS1zcmMgJ3NlbGYnICd1bnNhZmUtaW5saW5lJzsiPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';&quot;&gt;</pre></div><div class='content'></div><h1><p>Exercicis pràctics</p>
</h1>
<div class='content'></div><h2><p>Exercici 1: Implementar autenticació bàsica</p>
</h2>
<div class='content'><ol>
<li>Crea un servei d'autenticació que gestioni l'estat d'autenticació.</li>
<li>Implementa una guàrdia de rutes per protegir les rutes que requereixen autenticació.</li>
<li>Crea un formulari de login i connecta'l amb el servei d'autenticació.</li>
</ol>
</div><h2><p>Exercici 2: Protegir una aplicació contra XSS</p>
</h2>
<div class='content'><ol>
<li>Identifica les parts de l'aplicació on es mostren dades d'usuari.</li>
<li>Assegura't que totes les dades d'usuari es mostren de manera segura utilitzant interpolació i enllaç de propietats.</li>
</ol>
</div><h2><p>Exercici 3: Configurar CSP</p>
</h2>
<div class='content'><ol>
<li>Configura el Content Security Policy (CSP) per a la teva aplicació Angular.</li>
<li>Prova l'aplicació per assegurar-te que el CSP no trenca cap funcionalitat.</li>
</ol>
</div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>En aquesta secció, hem explorat diverses tècniques i millors pràctiques per assegurar les aplicacions Angular. Hem après a protegir-nos contra vulnerabilitats comunes com XSS i CSRF, a implementar autenticació i autorització, i a gestionar dades sensibles de manera segura. A més, hem vist com configurar l'aplicació per millorar la seguretat. Seguint aquestes pràctiques, podràs desenvolupar aplicacions Angular més segures i robustes.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='11-03-code-quality-best-practices' title="Qualitat del codi i millors pràctiques">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='11-05-maintaining-angular-applications' title="Manteniment d'aplicacions Angular">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
