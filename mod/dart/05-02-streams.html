<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streams</title>

    <link rel="alternate" href="https://campusempresa.com/mod/dart/05-02-streams" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/dart/05-02-streams" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/dart/05-02-streams" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=2" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/dart/05-02-streams" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/dart/05-02-streams" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
<br>
			<cite>Construint la societat d'avui i del demà</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Llenguatges de Programació</a>
				 					<a href="/categ/frameworks">Frameworks i Llibreries</a>
				 					<a href="/categ/tech-tools">Eines Tècniques</a>
				 					<a href="/categ/foundations">Fonaments Teòrics</a>
				 					<a href="/categ/soft-skills">Habilitats Socials</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-01-asynchronous-programming' title="Programació Asíncrona">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Streams</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-03-generators' title="Generadors">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Els streams són una característica poderosa de Dart que permet treballar amb seqüències d'esdeveniments asíncrons. Són especialment útils per gestionar fluxos de dades que arriben de manera contínua, com ara dades de xarxa, esdeveniments d'usuari o fitxers.</p>
</div><h1><p>Conceptes Clau</p>
</h1>
<div class='content'></div><h2><p>Què és un Stream?</p>
</h2>
<div class='content'><p>Un stream és una seqüència d'esdeveniments asíncrons. Cada esdeveniment pot ser un valor, un error o una notificació de finalització. Els streams són similars a les futures, però en lloc de representar un únic valor asíncron, representen una seqüència de valors.</p>
</div><h2><p>Tipus de Streams</p>
</h2>
<div class='content'><p>Hi ha dos tipus principals de streams en Dart:</p>
<ol>
<li><strong>Single-subscription streams</strong>: Aquests streams permeten un únic oient. Són útils per a seqüències d'esdeveniments que només necessiten ser escoltades una vegada.</li>
<li><strong>Broadcast streams</strong>: Aquests streams permeten múltiples oients. Són útils per a esdeveniments que poden ser escoltats per diversos oients simultàniament.</li>
</ol>
</div><h1><p>Creació de Streams</p>
</h1>
<div class='content'></div><h2><p>Single-subscription Stream</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdkYXJ0OmFzeW5jJzsKCnZvaWQgbWFpbigpIHsKICAvLyBDcmVhY2nDsyBkJ3VuIHNpbmdsZS1zdWJzY3JpcHRpb24gc3RyZWFtCiAgU3RyZWFtPGludD4gc3RyZWFtID0gU3RyZWFtPGludD4ucGVyaW9kaWMoRHVyYXRpb24oc2Vjb25kczogMSksIChjb3VudCkgPT4gY291bnQpLnRha2UoNSk7CgogIC8vIEVzY29sdGFyIGVsIHN0cmVhbQogIHN0cmVhbS5saXN0ZW4oKGRhdGEpIHsKICAgIHByaW50KCdEYXRhOiAkZGF0YScpOwogIH0pOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'dart:async';

void main() {
  // Creaci&oacute; d'un single-subscription stream
  Stream&lt;int&gt; stream = Stream&lt;int&gt;.periodic(Duration(seconds: 1), (count) =&gt; count).take(5);

  // Escoltar el stream
  stream.listen((data) {
    print('Data: $data');
  });
}</pre></div><div class='content'><p><strong>Explicació:</strong></p>
<ul>
<li><code>Stream&lt;int&gt;.periodic</code>: Crea un stream que emet un valor cada segon.</li>
<li><code>take(5)</code>: Limita el stream a 5 esdeveniments.</li>
<li><code>listen</code>: Escolta els esdeveniments del stream.</li>
</ul>
</div><h2><p>Broadcast Stream</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdkYXJ0OmFzeW5jJzsKCnZvaWQgbWFpbigpIHsKICAvLyBDcmVhY2nDsyBkJ3VuIGJyb2FkY2FzdCBzdHJlYW0KICBTdHJlYW1Db250cm9sbGVyPGludD4gY29udHJvbGxlciA9IFN0cmVhbUNvbnRyb2xsZXI8aW50Pi5icm9hZGNhc3QoKTsKCiAgLy8gRXNjb2x0YXIgZWwgc3RyZWFtCiAgY29udHJvbGxlci5zdHJlYW0ubGlzdGVuKChkYXRhKSB7CiAgICBwcmludCgnTGlzdGVuZXIgMTogJGRhdGEnKTsKICB9KTsKCiAgY29udHJvbGxlci5zdHJlYW0ubGlzdGVuKChkYXRhKSB7CiAgICBwcmludCgnTGlzdGVuZXIgMjogJGRhdGEnKTsKICB9KTsKCiAgLy8gRW1pc3Npw7MgZCdlc2RldmVuaW1lbnRzCiAgZm9yIChpbnQgaSA9IDA7IGkgPCA1OyBpKyspIHsKICAgIGNvbnRyb2xsZXIuYWRkKGkpOwogIH0KCiAgLy8gVGFuY2FyIGVsIGNvbnRyb2xhZG9yCiAgY29udHJvbGxlci5jbG9zZSgpOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'dart:async';

void main() {
  // Creaci&oacute; d'un broadcast stream
  StreamController&lt;int&gt; controller = StreamController&lt;int&gt;.broadcast();

  // Escoltar el stream
  controller.stream.listen((data) {
    print('Listener 1: $data');
  });

  controller.stream.listen((data) {
    print('Listener 2: $data');
  });

  // Emissi&oacute; d'esdeveniments
  for (int i = 0; i &lt; 5; i++) {
    controller.add(i);
  }

  // Tancar el controlador
  controller.close();
}</pre></div><div class='content'><p><strong>Explicació:</strong></p>
<ul>
<li><code>StreamController&lt;int&gt;.broadcast()</code>: Crea un controlador de stream de tipus broadcast.</li>
<li><code>controller.stream.listen</code>: Afegeix múltiples oients al stream.</li>
<li><code>controller.add</code>: Emissió d'esdeveniments al stream.</li>
<li><code>controller.close()</code>: Tanca el controlador del stream.</li>
</ul>
</div><h1><p>Manipulació de Streams</p>
</h1>
<div class='content'></div><h2><p>Transformació de Streams</p>
</h2>
<div class='content'><p>Els streams poden ser transformats utilitzant diverses operacions com <code>map</code>, <code>where</code>, <code>expand</code>, etc.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdkYXJ0OmFzeW5jJzsKCnZvaWQgbWFpbigpIHsKICBTdHJlYW08aW50PiBzdHJlYW0gPSBTdHJlYW08aW50Pi5wZXJpb2RpYyhEdXJhdGlvbihzZWNvbmRzOiAxKSwgKGNvdW50KSA9PiBjb3VudCkudGFrZSg1KTsKCiAgLy8gVHJhbnNmb3JtYWNpw7MgZGVsIHN0cmVhbQogIFN0cmVhbTxTdHJpbmc+IHRyYW5zZm9ybWVkU3RyZWFtID0gc3RyZWFtLm1hcCgoZGF0YSkgPT4gJ1ZhbHVlOiAkZGF0YScpOwoKICB0cmFuc2Zvcm1lZFN0cmVhbS5saXN0ZW4oKGRhdGEpIHsKICAgIHByaW50KGRhdGEpOwogIH0pOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'dart:async';

void main() {
  Stream&lt;int&gt; stream = Stream&lt;int&gt;.periodic(Duration(seconds: 1), (count) =&gt; count).take(5);

  // Transformaci&oacute; del stream
  Stream&lt;String&gt; transformedStream = stream.map((data) =&gt; 'Value: $data');

  transformedStream.listen((data) {
    print(data);
  });
}</pre></div><div class='content'><p><strong>Explicació:</strong></p>
<ul>
<li><code>map</code>: Transforma cada esdeveniment del stream original en un nou valor.</li>
</ul>
</div><h2><p>Gestió d'Errors</p>
</h2>
<div class='content'><p>Els streams poden gestionar errors utilitzant el paràmetre <code>onError</code> en el mètode <code>listen</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdkYXJ0OmFzeW5jJzsKCnZvaWQgbWFpbigpIHsKICBTdHJlYW08aW50PiBzdHJlYW0gPSBTdHJlYW08aW50Pi5wZXJpb2RpYyhEdXJhdGlvbihzZWNvbmRzOiAxKSwgKGNvdW50KSB7CiAgICBpZiAoY291bnQgPT0gMykgewogICAgICB0aHJvdyBFeGNlcHRpb24oJ0Vycm9yIGFsIHZhbG9yIDMnKTsKICAgIH0KICAgIHJldHVybiBjb3VudDsKICB9KS50YWtlKDUpOwoKICBzdHJlYW0ubGlzdGVuKAogICAgKGRhdGEpIHsKICAgICAgcHJpbnQoJ0RhdGE6ICRkYXRhJyk7CiAgICB9LAogICAgb25FcnJvcjogKGVycm9yKSB7CiAgICAgIHByaW50KCdFcnJvcjogJGVycm9yJyk7CiAgICB9LAogICAgb25Eb25lOiAoKSB7CiAgICAgIHByaW50KCdTdHJlYW0gY29tcGxldGF0Jyk7CiAgICB9LAogICk7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'dart:async';

void main() {
  Stream&lt;int&gt; stream = Stream&lt;int&gt;.periodic(Duration(seconds: 1), (count) {
    if (count == 3) {
      throw Exception('Error al valor 3');
    }
    return count;
  }).take(5);

  stream.listen(
    (data) {
      print('Data: $data');
    },
    onError: (error) {
      print('Error: $error');
    },
    onDone: () {
      print('Stream completat');
    },
  );
}</pre></div><div class='content'><p><strong>Explicació:</strong></p>
<ul>
<li><code>onError</code>: Gestió d'errors en el stream.</li>
<li><code>onDone</code>: Notificació quan el stream ha completat l'emissió d'esdeveniments.</li>
</ul>
</div><h1><p>Exercicis Pràctics</p>
</h1>
<div class='content'></div><h2><p>Exercici 1: Creació d'un Stream de Nombres Parells</p>
</h2>
<div class='content'><p>Crea un stream que emeti els primers 10 nombres parells i imprimeixi cada valor.</p>
<p><strong>Solució:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdkYXJ0OmFzeW5jJzsKCnZvaWQgbWFpbigpIHsKICBTdHJlYW08aW50PiBldmVuU3RyZWFtID0gU3RyZWFtPGludD4ucGVyaW9kaWMoRHVyYXRpb24oc2Vjb25kczogMSksIChjb3VudCkgPT4gY291bnQgKiAyKS50YWtlKDEwKTsKCiAgZXZlblN0cmVhbS5saXN0ZW4oKGRhdGEpIHsKICAgIHByaW50KCdFdmVuIG51bWJlcjogJGRhdGEnKTsKICB9KTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'dart:async';

void main() {
  Stream&lt;int&gt; evenStream = Stream&lt;int&gt;.periodic(Duration(seconds: 1), (count) =&gt; count * 2).take(10);

  evenStream.listen((data) {
    print('Even number: $data');
  });
}</pre></div><div class='content'></div><h2><p>Exercici 2: Gestió d'Errors en un Stream</p>
</h2>
<div class='content'><p>Crea un stream que emeti valors de 0 a 4, però llanci un error quan el valor sigui 2. Gestiona l'error i imprimeix un missatge d'error.</p>
<p><strong>Solució:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdkYXJ0OmFzeW5jJzsKCnZvaWQgbWFpbigpIHsKICBTdHJlYW08aW50PiBlcnJvclN0cmVhbSA9IFN0cmVhbTxpbnQ+LnBlcmlvZGljKER1cmF0aW9uKHNlY29uZHM6IDEpLCAoY291bnQpIHsKICAgIGlmIChjb3VudCA9PSAyKSB7CiAgICAgIHRocm93IEV4Y2VwdGlvbignRXJyb3IgYWwgdmFsb3IgMicpOwogICAgfQogICAgcmV0dXJuIGNvdW50OwogIH0pLnRha2UoNSk7CgogIGVycm9yU3RyZWFtLmxpc3RlbigKICAgIChkYXRhKSB7CiAgICAgIHByaW50KCdEYXRhOiAkZGF0YScpOwogICAgfSwKICAgIG9uRXJyb3I6IChlcnJvcikgewogICAgICBwcmludCgnRXJyb3I6ICRlcnJvcicpOwogICAgfSwKICAgIG9uRG9uZTogKCkgewogICAgICBwcmludCgnU3RyZWFtIGNvbXBsZXRhdCcpOwogICAgfSwKICApOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'dart:async';

void main() {
  Stream&lt;int&gt; errorStream = Stream&lt;int&gt;.periodic(Duration(seconds: 1), (count) {
    if (count == 2) {
      throw Exception('Error al valor 2');
    }
    return count;
  }).take(5);

  errorStream.listen(
    (data) {
      print('Data: $data');
    },
    onError: (error) {
      print('Error: $error');
    },
    onDone: () {
      print('Stream completat');
    },
  );
}</pre></div><div class='content'></div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>Els streams són una eina poderosa per gestionar seqüències d'esdeveniments asíncrons en Dart. Amb els coneixements adquirits en aquesta secció, ara pots crear, transformar i gestionar errors en streams. Aquests conceptes són fonamentals per treballar amb dades asíncrones de manera eficient i efectiva.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-01-asynchronous-programming' title="Programació Asíncrona">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-03-generators' title="Generadors">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Publicitat</h1>
<p>Aquest espai està destinat a publicitat.</p>
<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Gràcies per col·laborar!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
