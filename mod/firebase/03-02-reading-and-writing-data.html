<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lectura i escriptura de dades</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/03-02-reading-and-writing-data" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/03-02-reading-and-writing-data" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/03-02-reading-and-writing-data" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/firebase/03-02-reading-and-writing-data" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/firebase/03-02-reading-and-writing-data" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='03-01-introduction-to-realtime-database' title="Introducció a la base de dades en temps real">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Lectura i escriptura de dades</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='03-03-data-structure-and-security-rules' title="Estructura de dades i regles de seguretat">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com llegir i escriure dades a la base de dades en temps real de Firebase. Aquest és un aspecte fonamental per a qualsevol aplicació que necessiti emmagatzemar i recuperar informació de manera dinàmica.</p>
</div><h1>Objectius del tema</h1>
<div class='content'><ul>
<li>Comprendre com estructurar les dades a la base de dades en temps real de Firebase.</li>
<li>Aprendre a escriure dades a la base de dades.</li>
<li>Aprendre a llegir dades de la base de dades.</li>
<li>Conèixer les operacions bàsiques de CRUD (Crear, Llegir, Actualitzar, Esborrar).</li>
</ul>
</div><h1>Estructura de les dades</h1>
<div class='content'><p>La base de dades en temps real de Firebase és una base de dades NoSQL que emmagatzema dades en un format JSON. Les dades es representen com un arbre de nodes, on cada node pot tenir múltiples fills.</p>
</div><h2>Exemple d'estructura de dades</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJ1c2VycyI6IHsKICAgICJ1c2VyMSI6IHsKICAgICAgIm5hbWUiOiAiSm9obiBEb2UiLAogICAgICAiZW1haWwiOiAiam9obi5kb2VAZXhhbXBsZS5jb20iCiAgICB9LAogICAgInVzZXIyIjogewogICAgICAibmFtZSI6ICJKYW5lIFNtaXRoIiwKICAgICAgImVtYWlsIjogImphbmUuc21pdGhAZXhhbXBsZS5jb20iCiAgICB9CiAgfSwKICAicG9zdHMiOiB7CiAgICAicG9zdDEiOiB7CiAgICAgICJ0aXRsZSI6ICJNeSBGaXJzdCBQb3N0IiwKICAgICAgImNvbnRlbnQiOiAiVGhpcyBpcyB0aGUgY29udGVudCBvZiBteSBmaXJzdCBwb3N0LiIsCiAgICAgICJhdXRob3IiOiAidXNlcjEiCiAgICB9LAogICAgInBvc3QyIjogewogICAgICAidGl0bGUiOiAiQW5vdGhlciBQb3N0IiwKICAgICAgImNvbnRlbnQiOiAiVGhpcyBpcyBzb21lIG90aGVyIGNvbnRlbnQuIiwKICAgICAgImF1dGhvciI6ICJ1c2VyMiIKICAgIH0KICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;users&quot;: {
    &quot;user1&quot;: {
      &quot;name&quot;: &quot;John Doe&quot;,
      &quot;email&quot;: &quot;john.doe@example.com&quot;
    },
    &quot;user2&quot;: {
      &quot;name&quot;: &quot;Jane Smith&quot;,
      &quot;email&quot;: &quot;jane.smith@example.com&quot;
    }
  },
  &quot;posts&quot;: {
    &quot;post1&quot;: {
      &quot;title&quot;: &quot;My First Post&quot;,
      &quot;content&quot;: &quot;This is the content of my first post.&quot;,
      &quot;author&quot;: &quot;user1&quot;
    },
    &quot;post2&quot;: {
      &quot;title&quot;: &quot;Another Post&quot;,
      &quot;content&quot;: &quot;This is some other content.&quot;,
      &quot;author&quot;: &quot;user2&quot;
    }
  }
}</pre></div><div class='content'></div><h1>Escriure dades</h1>
<div class='content'><p>Per escriure dades a la base de dades en temps real de Firebase, utilitzarem el mètode <code>set()</code> o <code>update()</code>.</p>
</div><h2>Exemple: Escriure dades amb `set()`</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUmVmZXLDqG5jaWEgYSBsYSBiYXNlIGRlIGRhZGVzCnZhciBkYXRhYmFzZSA9IGZpcmViYXNlLmRhdGFiYXNlKCk7CgovLyBFc2NyaXVyZSBkYWRlcyBhIGxhIHJlZmVyw6huY2lhICd1c2Vycy91c2VyMScKZGF0YWJhc2UucmVmKCd1c2Vycy91c2VyMScpLnNldCh7CiAgbmFtZTogJ0pvaG4gRG9lJywKICBlbWFpbDogJ2pvaG4uZG9lQGV4YW1wbGUuY29tJwp9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Refer&egrave;ncia a la base de dades
var database = firebase.database();

// Escriure dades a la refer&egrave;ncia 'users/user1'
database.ref('users/user1').set({
  name: 'John Doe',
  email: 'john.doe@example.com'
});</pre></div><div class='content'></div><h2>Exemple: Escriure dades amb `update()`</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUmVmZXLDqG5jaWEgYSBsYSBiYXNlIGRlIGRhZGVzCnZhciBkYXRhYmFzZSA9IGZpcmViYXNlLmRhdGFiYXNlKCk7CgovLyBBY3R1YWxpdHphciBkYWRlcyBhIGxhIHJlZmVyw6huY2lhICd1c2Vycy91c2VyMScKZGF0YWJhc2UucmVmKCd1c2Vycy91c2VyMScpLnVwZGF0ZSh7CiAgZW1haWw6ICdqb2huLm5ld2VtYWlsQGV4YW1wbGUuY29tJwp9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Refer&egrave;ncia a la base de dades
var database = firebase.database();

// Actualitzar dades a la refer&egrave;ncia 'users/user1'
database.ref('users/user1').update({
  email: 'john.newemail@example.com'
});</pre></div><div class='content'></div><h1>Llegir dades</h1>
<div class='content'><p>Per llegir dades de la base de dades en temps real de Firebase, utilitzarem el mètode <code>once()</code> o <code>on()</code>.</p>
</div><h2>Exemple: Llegir dades amb `once()`</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUmVmZXLDqG5jaWEgYSBsYSBiYXNlIGRlIGRhZGVzCnZhciBkYXRhYmFzZSA9IGZpcmViYXNlLmRhdGFiYXNlKCk7CgovLyBMbGVnaXIgZGFkZXMgdW5hIHZlZ2FkYSBkZSBsYSByZWZlcsOobmNpYSAndXNlcnMvdXNlcjEnCmRhdGFiYXNlLnJlZigndXNlcnMvdXNlcjEnKS5vbmNlKCd2YWx1ZScpLnRoZW4oZnVuY3Rpb24oc25hcHNob3QpIHsKICB2YXIgdXNlckRhdGEgPSBzbmFwc2hvdC52YWwoKTsKICBjb25zb2xlLmxvZyh1c2VyRGF0YSk7Cn0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Refer&egrave;ncia a la base de dades
var database = firebase.database();

// Llegir dades una vegada de la refer&egrave;ncia 'users/user1'
database.ref('users/user1').once('value').then(function(snapshot) {
  var userData = snapshot.val();
  console.log(userData);
});</pre></div><div class='content'></div><h2>Exemple: Llegir dades amb `on()`</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUmVmZXLDqG5jaWEgYSBsYSBiYXNlIGRlIGRhZGVzCnZhciBkYXRhYmFzZSA9IGZpcmViYXNlLmRhdGFiYXNlKCk7CgovLyBFc2NvbHRhciBjYW52aXMgYSBsYSByZWZlcsOobmNpYSAndXNlcnMvdXNlcjEnCmRhdGFiYXNlLnJlZigndXNlcnMvdXNlcjEnKS5vbigndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkgewogIHZhciB1c2VyRGF0YSA9IHNuYXBzaG90LnZhbCgpOwogIGNvbnNvbGUubG9nKHVzZXJEYXRhKTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Refer&egrave;ncia a la base de dades
var database = firebase.database();

// Escoltar canvis a la refer&egrave;ncia 'users/user1'
database.ref('users/user1').on('value', function(snapshot) {
  var userData = snapshot.val();
  console.log(userData);
});</pre></div><div class='content'></div><h1>Operacions CRUD</h1>
<div class='content'></div><h2>Crear</h2>
<div class='content'><p>Utilitzem <code>set()</code> o <code>push()</code> per crear noves dades.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ3JlYXIgdW4gbm91IHVzdWFyaSBhbWIgJ3NldCgpJwpkYXRhYmFzZS5yZWYoJ3VzZXJzL3VzZXIzJykuc2V0KHsKICBuYW1lOiAnQWxpY2UgSm9obnNvbicsCiAgZW1haWw6ICdhbGljZS5qb2huc29uQGV4YW1wbGUuY29tJwp9KTsKCi8vIENyZWFyIHVuIG5vdSBwb3N0IGFtYiAncHVzaCgpJwp2YXIgbmV3UG9zdFJlZiA9IGRhdGFiYXNlLnJlZigncG9zdHMnKS5wdXNoKCk7Cm5ld1Bvc3RSZWYuc2V0KHsKICB0aXRsZTogJ05ldyBQb3N0JywKICBjb250ZW50OiAnVGhpcyBpcyBhIG5ldyBwb3N0LicsCiAgYXV0aG9yOiAndXNlcjMnCn0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Crear un nou usuari amb 'set()'
database.ref('users/user3').set({
  name: 'Alice Johnson',
  email: 'alice.johnson@example.com'
});

// Crear un nou post amb 'push()'
var newPostRef = database.ref('posts').push();
newPostRef.set({
  title: 'New Post',
  content: 'This is a new post.',
  author: 'user3'
});</pre></div><div class='content'></div><h2>Llegir</h2>
<div class='content'><p>Utilitzem <code>once()</code> o <code>on()</code> per llegir dades.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gTGxlZ2lyIGRhZGVzIHVuYSB2ZWdhZGEKZGF0YWJhc2UucmVmKCd1c2Vycy91c2VyMycpLm9uY2UoJ3ZhbHVlJykudGhlbihmdW5jdGlvbihzbmFwc2hvdCkgewogIHZhciB1c2VyRGF0YSA9IHNuYXBzaG90LnZhbCgpOwogIGNvbnNvbGUubG9nKHVzZXJEYXRhKTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Llegir dades una vegada
database.ref('users/user3').once('value').then(function(snapshot) {
  var userData = snapshot.val();
  console.log(userData);
});</pre></div><div class='content'></div><h2>Actualitzar</h2>
<div class='content'><p>Utilitzem <code>update()</code> per actualitzar dades existents.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQWN0dWFsaXR6YXIgbCdlbWFpbCBkJ3VuIHVzdWFyaQpkYXRhYmFzZS5yZWYoJ3VzZXJzL3VzZXIzJykudXBkYXRlKHsKICBlbWFpbDogJ2FsaWNlLm5ld2VtYWlsQGV4YW1wbGUuY29tJwp9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Actualitzar l'email d'un usuari
database.ref('users/user3').update({
  email: 'alice.newemail@example.com'
});</pre></div><div class='content'></div><h2>Esborrar</h2>
<div class='content'><p>Utilitzem <code>remove()</code> per esborrar dades.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRXNib3JyYXIgdW4gdXN1YXJpCmRhdGFiYXNlLnJlZigndXNlcnMvdXNlcjMnKS5yZW1vdmUoKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Esborrar un usuari
database.ref('users/user3').remove();</pre></div><div class='content'></div><h1>Exercicis pràctics</h1>
<div class='content'></div><h2>Exercici 1: Crear un nou usuari</h2>
<div class='content'><ol>
<li>Escriu un codi per crear un nou usuari amb el nom &quot;Bob Brown&quot; i l'email &quot;bob.brown@example.com&quot;.</li>
</ol>
</div><h2>Solució</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGF0YWJhc2UucmVmKCd1c2Vycy91c2VyNCcpLnNldCh7CiAgbmFtZTogJ0JvYiBCcm93bicsCiAgZW1haWw6ICdib2IuYnJvd25AZXhhbXBsZS5jb20nCn0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>database.ref('users/user4').set({
  name: 'Bob Brown',
  email: 'bob.brown@example.com'
});</pre></div><div class='content'></div><h2>Exercici 2: Llegir dades d'un usuari</h2>
<div class='content'><ol>
<li>Escriu un codi per llegir les dades de l'usuari amb ID &quot;user4&quot; i mostrar-les a la consola.</li>
</ol>
</div><h2>Solució</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGF0YWJhc2UucmVmKCd1c2Vycy91c2VyNCcpLm9uY2UoJ3ZhbHVlJykudGhlbihmdW5jdGlvbihzbmFwc2hvdCkgewogIHZhciB1c2VyRGF0YSA9IHNuYXBzaG90LnZhbCgpOwogIGNvbnNvbGUubG9nKHVzZXJEYXRhKTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>database.ref('users/user4').once('value').then(function(snapshot) {
  var userData = snapshot.val();
  console.log(userData);
});</pre></div><div class='content'></div><h2>Exercici 3: Actualitzar l'email d'un usuari</h2>
<div class='content'><ol>
<li>Escriu un codi per actualitzar l'email de l'usuari amb ID &quot;user4&quot; a &quot;bob.newemail@example.com&quot;.</li>
</ol>
</div><h2>Solució</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGF0YWJhc2UucmVmKCd1c2Vycy91c2VyNCcpLnVwZGF0ZSh7CiAgZW1haWw6ICdib2IubmV3ZW1haWxAZXhhbXBsZS5jb20nCn0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>database.ref('users/user4').update({
  email: 'bob.newemail@example.com'
});</pre></div><div class='content'></div><h2>Exercici 4: Esborrar un usuari</h2>
<div class='content'><ol>
<li>Escriu un codi per esborrar l'usuari amb ID &quot;user4&quot;.</li>
</ol>
</div><h2>Solució</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGF0YWJhc2UucmVmKCd1c2Vycy91c2VyNCcpLnJlbW92ZSgpOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>database.ref('users/user4').remove();</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>En aquest tema, hem après com estructurar, escriure, llegir, actualitzar i esborrar dades a la base de dades en temps real de Firebase. Aquestes operacions són fonamentals per a la majoria d'aplicacions que necessiten gestionar dades de manera dinàmica. En el proper tema, explorarem les regles de seguretat i com protegir les nostres dades.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='03-01-introduction-to-realtime-database' title="Introducció a la base de dades en temps real">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='03-03-data-structure-and-security-rules' title="Estructura de dades i regles de seguretat">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
