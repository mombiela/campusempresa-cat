<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>Macros i Assembly Condicional</title>

    <link rel="alternate" href="https://campusempresa.com/mod/assembly/05-02-macros-conditional" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/assembly/05-02-macros-conditional" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/assembly/05-02-macros-conditional" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.ea63f62b9e.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "ca";
  		var CATEGORY = "languages";
  		var MOD_NAME = "assembly";
  		var TEMA_NAME = "5-2";
  		var TYPE = "mod";
  		var PATH = "mod/assembly/05-02-macros-conditional";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.86da6c742a.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/mod/assembly/05-02-macros-conditional" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/assembly/05-02-macros-conditional" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Tot el coneixement al teu abast</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my_modules" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Els meus cursos</b></i>
</a>
<a href="/end_modules" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalitzats             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="assembly">
		<a  href="#" class="text-secondary d-none" data-read-mod="assembly" data-read-unit="5-2" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar com a llegit
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="assembly" data-unread-unit="5-2" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar com a no llegit
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contingut del curs
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-01-interrupts-system-calls' title="Interrupcions i Crides de Sistema" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-01-interrupts-system-calls' title="Interrupcions i Crides de Sistema" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Macros i Assembly Condicional</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-03-inline-assembly' title="Assembly Inline en Llenguatges d'Alt Nivell" class="py-2 px-3 btn btn-primary"
				data-read-mod="assembly" data-read-unit="5-2">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-03-inline-assembly' title="Assembly Inline en Llenguatges d'Alt Nivell" class="py-2 px-3 btn btn-primary" 
				data-read-mod="assembly" data-read-unit="5-2">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, explorarem les macros i l'ús de condicions en el llenguatge Assembly. Les macros són una eina poderosa que permet als programadors escriure codi més eficient i llegible, mentre que l'assembly condicional permet la generació de codi dinàmicament en funció de certes condicions.</p>
</div><h1>Què són les Macros?</h1>
<div class='content'><p>Les macros són seqüències de codi que es poden definir una vegada i reutilitzar múltiples vegades al llarg del programa. Són similars a les funcions en altres llenguatges de programació, però es diferencien en què el codi de la macro es substitueix directament en el lloc on es crida, en lloc de fer una crida a una funció.</p>
</div><h2>Definició de Macros</h2>
<div class='content'><p>Una macro es defineix utilitzant la directiva <code>macro</code> i es tanca amb la directiva <code>endm</code>. Aquí teniu un exemple bàsic:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBEZWZpbmljacOzIGQndW5hIG1hY3JvIHNpbXBsZQpteV9tYWNybyBtYWNybwogICAgbW92IGF4LCBieAogICAgYWRkIGF4LCBjeAplbmRtCgo7IMOacyBkZSBsYSBtYWNybwpteV9tYWNybw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Definici&oacute; d'una macro simple
my_macro macro
    mov ax, bx
    add ax, cx
endm

; &Uacute;s de la macro
my_macro</pre></div><div class='content'><p>En aquest exemple, la macro <code>my_macro</code> conté dues instruccions: moure el valor de <code>bx</code> a <code>ax</code> i sumar el valor de <code>cx</code> a <code>ax</code>. Quan es crida <code>my_macro</code>, aquestes instruccions es substitueixen directament en el codi.</p>
</div><h2>Macros amb Paràmetres</h2>
<div class='content'><p>Les macros també poden acceptar paràmetres, permetent una major flexibilitat i reutilització del codi. Aquí teniu un exemple:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBEZWZpbmljacOzIGQndW5hIG1hY3JvIGFtYiBwYXLDoG1ldHJlcwphZGRfdmFsdWVzIG1hY3JvIHJlZzEsIHJlZzIKICAgIGFkZCByZWcxLCByZWcyCmVuZG0KCjsgw5pzIGRlIGxhIG1hY3JvIGFtYiBwYXLDoG1ldHJlcwphZGRfdmFsdWVzIGF4LCBieAphZGRfdmFsdWVzIGN4LCBkeA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Definici&oacute; d'una macro amb par&agrave;metres
add_values macro reg1, reg2
    add reg1, reg2
endm

; &Uacute;s de la macro amb par&agrave;metres
add_values ax, bx
add_values cx, dx</pre></div><div class='content'><p>En aquest cas, la macro <code>add_values</code> accepta dos paràmetres (<code>reg1</code> i <code>reg2</code>) i suma el valor del segon registre al primer.</p>
</div><h1>Assembly Condicional</h1>
<div class='content'><p>L'assembly condicional permet incloure o excloure parts del codi en funció de certes condicions. Això és útil per a la compilació condicional, on diferents parts del codi es compilen en funció de les configuracions o entorns.</p>
</div><h2>Directives Condicionals</h2>
<div class='content'><p>Les directives condicionals més comunes són <code>IF</code>, <code>ELSE</code>, <code>ENDIF</code>, <code>IFDEF</code>, i <code>IFNDEF</code>.</p>
<h4>Exemple d'ús de <code>IF</code>, <code>ELSE</code>, i <code>ENDIF</code></h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBEZWZpbmljacOzIGQndW5hIGNvbnN0YW50Ck1ZX0NPTlNUQU5UIGVxdSAxCgo7IMOacyBkZSBkaXJlY3RpdmVzIGNvbmRpY2lvbmFscwpJRiBNWV9DT05TVEFOVCA9PSAxCiAgICBtb3YgYXgsIDEKRUxTRQogICAgbW92IGF4LCAwCkVORElG"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Definici&oacute; d'una constant
MY_CONSTANT equ 1

; &Uacute;s de directives condicionals
IF MY_CONSTANT == 1
    mov ax, 1
ELSE
    mov ax, 0
ENDIF</pre></div><div class='content'><p>En aquest exemple, si <code>MY_CONSTANT</code> és igual a 1, es mou el valor 1 a <code>ax</code>. En cas contrari, es mou el valor 0 a <code>ax</code>.</p>
<h4>Exemple d'ús de <code>IFDEF</code> i <code>IFNDEF</code></h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBEZWZpbmljacOzIGQndW5hIGNvbnN0YW50Ck1ZX0NPTlNUQU5UIGVxdSAxCgo7IMOacyBkZSBkaXJlY3RpdmVzIGNvbmRpY2lvbmFscwpJRkRFRiBNWV9DT05TVEFOVAogICAgbW92IGF4LCAxCkVORElGCgpJRk5ERUYgTVlfT1RIRVJfQ09OU1RBTlQKICAgIG1vdiBieCwgMApFTkRJRg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Definici&oacute; d'una constant
MY_CONSTANT equ 1

; &Uacute;s de directives condicionals
IFDEF MY_CONSTANT
    mov ax, 1
ENDIF

IFNDEF MY_OTHER_CONSTANT
    mov bx, 0
ENDIF</pre></div><div class='content'><p>En aquest exemple, si <code>MY_CONSTANT</code> està definit, es mou el valor 1 a <code>ax</code>. Si <code>MY_OTHER_CONSTANT</code> no està definit, es mou el valor 0 a <code>bx</code>.</p>
</div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Definició i Ús de Macros</h2>
<div class='content'><p><strong>Objectiu:</strong> Definir una macro que multipliqui dos registres i utilitzar-la en un programa.</p>
<p><strong>Instruccions:</strong></p>
<ol>
<li>Defineix una macro anomenada <code>multiply</code> que accepti dos registres com a paràmetres i multipliqui els seus valors.</li>
<li>Utilitza la macro per multiplicar els valors de <code>ax</code> i <code>bx</code>, i emmagatzema el resultat en <code>ax</code>.</li>
</ol>
<p><strong>Solució:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBEZWZpbmljacOzIGRlIGxhIG1hY3JvIG11bHRpcGx5Cm11bHRpcGx5IG1hY3JvIHJlZzEsIHJlZzIKICAgIGltdWwgcmVnMSwgcmVnMgplbmRtCgo7IMOacyBkZSBsYSBtYWNybyBtdWx0aXBseQptb3YgYXgsIDUKbW92IGJ4LCAzCm11bHRpcGx5IGF4LCBieCA7IGF4ID0gYXggKiBieA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Definici&oacute; de la macro multiply
multiply macro reg1, reg2
    imul reg1, reg2
endm

; &Uacute;s de la macro multiply
mov ax, 5
mov bx, 3
multiply ax, bx ; ax = ax * bx</pre></div><div class='content'></div><h2>Exercici 2: Ús de Directives Condicionals</h2>
<div class='content'><p><strong>Objectiu:</strong> Utilitzar directives condicionals per incloure o excloure codi en funció d'una constant.</p>
<p><strong>Instruccions:</strong></p>
<ol>
<li>Defineix una constant anomenada <code>DEBUG</code> amb el valor 1.</li>
<li>Utilitza directives condicionals per moure el valor 1 a <code>ax</code> si <code>DEBUG</code> és igual a 1, i moure el valor 0 a <code>ax</code> en cas contrari.</li>
</ol>
<p><strong>Solució:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBEZWZpbmljacOzIGRlIGxhIGNvbnN0YW50IERFQlVHCkRFQlVHIGVxdSAxCgo7IMOacyBkZSBkaXJlY3RpdmVzIGNvbmRpY2lvbmFscwpJRiBERUJVRyA9PSAxCiAgICBtb3YgYXgsIDEKRUxTRQogICAgbW92IGF4LCAwCkVORElG"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Definici&oacute; de la constant DEBUG
DEBUG equ 1

; &Uacute;s de directives condicionals
IF DEBUG == 1
    mov ax, 1
ELSE
    mov ax, 0
ENDIF</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>En aquest tema, hem après sobre les macros i l'assembly condicional en el llenguatge Assembly. Les macros permeten definir seqüències de codi reutilitzables, mentre que les directives condicionals permeten incloure o excloure codi en funció de certes condicions. Aquests conceptes són fonamentals per escriure codi Assembly eficient i flexible.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-01-interrupts-system-calls' title="Interrupcions i Crides de Sistema" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-01-interrupts-system-calls' title="Interrupcions i Crides de Sistema" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-03-inline-assembly' title="Assembly Inline en Llenguatges d'Alt Nivell" class="py-2 px-3 btn btn-primary"
				data-read-mod="assembly" data-read-unit="5-2">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-03-inline-assembly' title="Assembly Inline en Llenguatges d'Alt Nivell" class="py-2 px-3 btn btn-primary" 
				data-read-mod="assembly" data-read-unit="5-2">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curs de Programació en Assembly</h1>
<h2>Mòdul 1: Introducció al Llenguatge Assembly</h2>
<ul>
<li><a href="01-01-what-is-assembly">Què és el Llenguatge Assembly?</a></li>
<li><a href="01-02-history-evolution">Història i Evolució de l'Assembly</a></li>
<li><a href="01-03-basic-concepts">Conceptes Bàsics i Terminologia</a></li>
<li><a href="01-04-setup-environment">Configuració de l'Entorn de Desenvolupament</a></li>
</ul>
<h2>Mòdul 2: Fonaments del Llenguatge Assembly</h2>
<ul>
<li><a href="02-01-cpu-memory">Comprensió de la CPU i la Memòria</a></li>
<li><a href="02-02-registers-functions">Registres i les Seves Funcions</a></li>
<li><a href="02-03-basic-syntax">Sintaxi i Estructura Bàsiques</a></li>
<li><a href="02-04-first-program">Escrivint el Teu Primer Programa en Assembly</a></li>
</ul>
<h2>Mòdul 3: Representació de Dades i Instruccions</h2>
<ul>
<li><a href="03-01-binary-hexadecimal">Sistemes Binari i Hexadecimal</a></li>
<li><a href="03-02-data-types">Tipus de Dades i Mides</a></li>
<li><a href="03-03-arithmetic-instructions">Instruccions Aritmètiques</a></li>
<li><a href="03-04-logical-instructions">Instruccions Lògiques</a></li>
</ul>
<h2>Mòdul 4: Flux de Control</h2>
<ul>
<li><a href="04-01-conditional-statements">Declaracions Condicionals</a></li>
<li><a href="04-02-loops-iteration">Bucles i Iteració</a></li>
<li><a href="04-03-subroutines-procedures">Subrutines i Procediments</a></li>
<li><a href="04-04-stack-operations">Operacions amb la Pila</a></li>
</ul>
<h2>Mòdul 5: Conceptes Avançats d'Assembly</h2>
<ul>
<li><a href="05-01-interrupts-system-calls">Interrupcions i Crides de Sistema</a></li>
<li><a href="05-02-macros-conditional">Macros i Assembly Condicional</a></li>
<li><a href="05-03-inline-assembly">Assembly Inline en Llenguatges d'Alt Nivell</a></li>
<li><a href="05-04-optimizing-code">Optimització del Codi Assembly</a></li>
</ul>
<h2>Mòdul 6: Assembly per a Diferents Arquitectures</h2>
<ul>
<li><a href="06-01-x86-assembly">Llenguatge Assembly x86</a></li>
<li><a href="06-02-arm-assembly">Llenguatge Assembly ARM</a></li>
<li><a href="06-03-mips-assembly">Llenguatge Assembly MIPS</a></li>
<li><a href="06-04-riscv-assembly">Llenguatge Assembly RISC-V</a></li>
</ul>
<h2>Mòdul 7: Aplicacions Pràctiques i Projectes</h2>
<ul>
<li><a href="07-01-simple-bootloader">Escrivint un Bootloader Simple</a></li>
<li><a href="07-02-basic-os-kernel">Creant un Nucli Bàsic de Sistema Operatiu</a></li>
<li><a href="07-03-interfacing-hardware">Interfície amb el Maquinari</a></li>
<li><a href="07-04-debugging-profiling">Depuració i Perfilat del Codi Assembly</a></li>
</ul>
<h2>Mòdul 8: Projecte Final i Revisió</h2>
<ul>
<li><a href="08-01-project-proposal">Proposta i Planificació del Projecte</a></li>
<li><a href="08-02-implementation-testing">Implementació i Proves</a></li>
<li><a href="08-03-code-review">Revisió i Optimització del Codi</a></li>
<li><a href="08-04-final-presentation">Presentació Final i Documentació</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuari no autentificat</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<p id="loginModalEmail"></p>
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
