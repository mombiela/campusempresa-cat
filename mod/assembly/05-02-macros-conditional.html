<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Macros i Assembly Condicional</title>

    <link rel="alternate" href="https://campusempresa.com/mod/assembly/05-02-macros-conditional" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/assembly/05-02-macros-conditional" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/assembly/05-02-macros-conditional" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=2" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/assembly/05-02-macros-conditional" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/assembly/05-02-macros-conditional" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
<br>
			<cite>Construint la societat d'avui i del demà</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Llenguatges de Programació</a>
				 					<a href="/categ/frameworks">Frameworks i Llibreries</a>
				 					<a href="/categ/tech-tools">Eines Tècniques</a>
				 					<a href="/categ/foundations">Fonaments Teòrics</a>
				 					<a href="/categ/soft-skills">Habilitats Socials</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-01-interrupts-system-calls' title="Interrupcions i Crides de Sistema">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Macros i Assembly Condicional</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-03-inline-assembly' title="Assembly Inline en Llenguatges d'Alt Nivell">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, explorarem les macros i l'ús de condicions en el llenguatge Assembly. Les macros són una eina poderosa que permet als programadors escriure codi més eficient i llegible, mentre que l'assembly condicional permet la generació de codi dinàmicament en funció de certes condicions.</p>
</div><h1><p>Què són les Macros?</p>
</h1>
<div class='content'><p>Les macros són seqüències de codi que es poden definir una vegada i reutilitzar múltiples vegades al llarg del programa. Són similars a les funcions en altres llenguatges de programació, però es diferencien en què el codi de la macro es substitueix directament en el lloc on es crida, en lloc de fer una crida a una funció.</p>
</div><h2><p>Definició de Macros</p>
</h2>
<div class='content'><p>Una macro es defineix utilitzant la directiva <code>macro</code> i es tanca amb la directiva <code>endm</code>. Aquí teniu un exemple bàsic:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBEZWZpbmljacOzIGQndW5hIG1hY3JvIHNpbXBsZQpteV9tYWNybyBtYWNybwogICAgbW92IGF4LCBieAogICAgYWRkIGF4LCBjeAplbmRtCgo7IMOacyBkZSBsYSBtYWNybwpteV9tYWNybw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Definici&oacute; d'una macro simple
my_macro macro
    mov ax, bx
    add ax, cx
endm

; &Uacute;s de la macro
my_macro</pre></div><div class='content'><p>En aquest exemple, la macro <code>my_macro</code> conté dues instruccions: moure el valor de <code>bx</code> a <code>ax</code> i sumar el valor de <code>cx</code> a <code>ax</code>. Quan es crida <code>my_macro</code>, aquestes instruccions es substitueixen directament en el codi.</p>
</div><h2><p>Macros amb Paràmetres</p>
</h2>
<div class='content'><p>Les macros també poden acceptar paràmetres, permetent una major flexibilitat i reutilització del codi. Aquí teniu un exemple:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBEZWZpbmljacOzIGQndW5hIG1hY3JvIGFtYiBwYXLDoG1ldHJlcwphZGRfdmFsdWVzIG1hY3JvIHJlZzEsIHJlZzIKICAgIGFkZCByZWcxLCByZWcyCmVuZG0KCjsgw5pzIGRlIGxhIG1hY3JvIGFtYiBwYXLDoG1ldHJlcwphZGRfdmFsdWVzIGF4LCBieAphZGRfdmFsdWVzIGN4LCBkeA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Definici&oacute; d'una macro amb par&agrave;metres
add_values macro reg1, reg2
    add reg1, reg2
endm

; &Uacute;s de la macro amb par&agrave;metres
add_values ax, bx
add_values cx, dx</pre></div><div class='content'><p>En aquest cas, la macro <code>add_values</code> accepta dos paràmetres (<code>reg1</code> i <code>reg2</code>) i suma el valor del segon registre al primer.</p>
</div><h1><p>Assembly Condicional</p>
</h1>
<div class='content'><p>L'assembly condicional permet incloure o excloure parts del codi en funció de certes condicions. Això és útil per a la compilació condicional, on diferents parts del codi es compilen en funció de les configuracions o entorns.</p>
</div><h2><p>Directives Condicionals</p>
</h2>
<div class='content'><p>Les directives condicionals més comunes són <code>IF</code>, <code>ELSE</code>, <code>ENDIF</code>, <code>IFDEF</code>, i <code>IFNDEF</code>.</p>
<h4>Exemple d'ús de <code>IF</code>, <code>ELSE</code>, i <code>ENDIF</code></h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBEZWZpbmljacOzIGQndW5hIGNvbnN0YW50Ck1ZX0NPTlNUQU5UIGVxdSAxCgo7IMOacyBkZSBkaXJlY3RpdmVzIGNvbmRpY2lvbmFscwpJRiBNWV9DT05TVEFOVCA9PSAxCiAgICBtb3YgYXgsIDEKRUxTRQogICAgbW92IGF4LCAwCkVORElG"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Definici&oacute; d'una constant
MY_CONSTANT equ 1

; &Uacute;s de directives condicionals
IF MY_CONSTANT == 1
    mov ax, 1
ELSE
    mov ax, 0
ENDIF</pre></div><div class='content'><p>En aquest exemple, si <code>MY_CONSTANT</code> és igual a 1, es mou el valor 1 a <code>ax</code>. En cas contrari, es mou el valor 0 a <code>ax</code>.</p>
<h4>Exemple d'ús de <code>IFDEF</code> i <code>IFNDEF</code></h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBEZWZpbmljacOzIGQndW5hIGNvbnN0YW50Ck1ZX0NPTlNUQU5UIGVxdSAxCgo7IMOacyBkZSBkaXJlY3RpdmVzIGNvbmRpY2lvbmFscwpJRkRFRiBNWV9DT05TVEFOVAogICAgbW92IGF4LCAxCkVORElGCgpJRk5ERUYgTVlfT1RIRVJfQ09OU1RBTlQKICAgIG1vdiBieCwgMApFTkRJRg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Definici&oacute; d'una constant
MY_CONSTANT equ 1

; &Uacute;s de directives condicionals
IFDEF MY_CONSTANT
    mov ax, 1
ENDIF

IFNDEF MY_OTHER_CONSTANT
    mov bx, 0
ENDIF</pre></div><div class='content'><p>En aquest exemple, si <code>MY_CONSTANT</code> està definit, es mou el valor 1 a <code>ax</code>. Si <code>MY_OTHER_CONSTANT</code> no està definit, es mou el valor 0 a <code>bx</code>.</p>
</div><h1><p>Exercicis Pràctics</p>
</h1>
<div class='content'></div><h2><p>Exercici 1: Definició i Ús de Macros</p>
</h2>
<div class='content'><p><strong>Objectiu:</strong> Definir una macro que multipliqui dos registres i utilitzar-la en un programa.</p>
<p><strong>Instruccions:</strong></p>
<ol>
<li>Defineix una macro anomenada <code>multiply</code> que accepti dos registres com a paràmetres i multipliqui els seus valors.</li>
<li>Utilitza la macro per multiplicar els valors de <code>ax</code> i <code>bx</code>, i emmagatzema el resultat en <code>ax</code>.</li>
</ol>
<p><strong>Solució:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBEZWZpbmljacOzIGRlIGxhIG1hY3JvIG11bHRpcGx5Cm11bHRpcGx5IG1hY3JvIHJlZzEsIHJlZzIKICAgIGltdWwgcmVnMSwgcmVnMgplbmRtCgo7IMOacyBkZSBsYSBtYWNybyBtdWx0aXBseQptb3YgYXgsIDUKbW92IGJ4LCAzCm11bHRpcGx5IGF4LCBieCA7IGF4ID0gYXggKiBieA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Definici&oacute; de la macro multiply
multiply macro reg1, reg2
    imul reg1, reg2
endm

; &Uacute;s de la macro multiply
mov ax, 5
mov bx, 3
multiply ax, bx ; ax = ax * bx</pre></div><div class='content'></div><h2><p>Exercici 2: Ús de Directives Condicionals</p>
</h2>
<div class='content'><p><strong>Objectiu:</strong> Utilitzar directives condicionals per incloure o excloure codi en funció d'una constant.</p>
<p><strong>Instruccions:</strong></p>
<ol>
<li>Defineix una constant anomenada <code>DEBUG</code> amb el valor 1.</li>
<li>Utilitza directives condicionals per moure el valor 1 a <code>ax</code> si <code>DEBUG</code> és igual a 1, i moure el valor 0 a <code>ax</code> en cas contrari.</li>
</ol>
<p><strong>Solució:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBEZWZpbmljacOzIGRlIGxhIGNvbnN0YW50IERFQlVHCkRFQlVHIGVxdSAxCgo7IMOacyBkZSBkaXJlY3RpdmVzIGNvbmRpY2lvbmFscwpJRiBERUJVRyA9PSAxCiAgICBtb3YgYXgsIDEKRUxTRQogICAgbW92IGF4LCAwCkVORElG"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Definici&oacute; de la constant DEBUG
DEBUG equ 1

; &Uacute;s de directives condicionals
IF DEBUG == 1
    mov ax, 1
ELSE
    mov ax, 0
ENDIF</pre></div><div class='content'></div><h1><p>Resum</p>
</h1>
<div class='content'><p>En aquest tema, hem après sobre les macros i l'assembly condicional en el llenguatge Assembly. Les macros permeten definir seqüències de codi reutilitzables, mentre que les directives condicionals permeten incloure o excloure codi en funció de certes condicions. Aquests conceptes són fonamentals per escriure codi Assembly eficient i flexible.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-01-interrupts-system-calls' title="Interrupcions i Crides de Sistema">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-03-inline-assembly' title="Assembly Inline en Llenguatges d'Alt Nivell">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Publicitat</h1>
<p>Aquest espai està destinat a publicitat.</p>
<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Gràcies per col·laborar!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
