<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jenkins com a Codi amb Jenkinsfile</title>

    <link rel="alternate" href="https://campusempresa.com/mod/jenkins/08-03-jenkins-as-code-with-jenkinsfile" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/jenkins/08-03-jenkins-as-code-with-jenkinsfile" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/jenkins/08-03-jenkins-as-code-with-jenkinsfile" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/jenkins/08-03-jenkins-as-code-with-jenkinsfile" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/jenkins/08-03-jenkins-as-code-with-jenkinsfile" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='08-02-jenkins-and-kubernetes' title="Jenkins i Kubernetes">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Jenkins com a Codi amb Jenkinsfile</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='08-04-scaling-jenkins' title="Escalant Jenkins">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest tema, explorarem com utilitzar Jenkins com a codi mitjançant Jenkinsfile. Jenkinsfile és un fitxer de text que conté la definició d'una pipeline de Jenkins i permet gestionar les pipelines com a codi, facilitant la seva mantenibilitat i versionat.</p>
</div><h1><p>Què és un Jenkinsfile?</p>
</h1>
<div class='content'><p>Un Jenkinsfile és un fitxer de text que defineix una pipeline de Jenkins utilitzant la sintaxi de pipeline de Jenkins. Aquest fitxer es pot versionar juntament amb el codi de l'aplicació, permetent una integració contínua més robusta i repetible.</p>
</div><h2><p>Avantatges de Jenkinsfile</p>
</h2>
<div class='content'><ul>
<li><strong>Versionat</strong>: Es pot versionar juntament amb el codi de l'aplicació.</li>
<li><strong>Repetibilitat</strong>: Les pipelines es poden reproduir fàcilment en diferents entorns.</li>
<li><strong>Mantenibilitat</strong>: Facilita la gestió i actualització de les pipelines.</li>
<li><strong>Col·laboració</strong>: Permet que diferents membres de l'equip col·laborin en la definició de les pipelines.</li>
</ul>
</div><h1><p>Tipus de Pipelines en Jenkinsfile</p>
</h1>
<div class='content'><p>Hi ha dos tipus principals de pipelines que es poden definir en un Jenkinsfile:</p>
<ol>
<li><strong>Pipeline Declarativa</strong>: Utilitza una sintaxi més estructurada i fàcil de llegir.</li>
<li><strong>Pipeline Scriptada</strong>: Utilitza una sintaxi més flexible i potent, però també més complexa.</li>
</ol>
</div><h2><p>Exemples de Pipelines</p>
</h2>
<div class='content'><h4>Pipeline Declarativa</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwZWxpbmUgewogICAgYWdlbnQgYW55CgogICAgc3RhZ2VzIHsKICAgICAgICBzdGFnZSgnQnVpbGQnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGVjaG8gJ0J1aWxkaW5nLi4uJwogICAgICAgICAgICAgICAgLy8gQ29tYW5kZXMgcGVyIGNvbXBpbGFyIGVsIHByb2plY3RlCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc3RhZ2UoJ1Rlc3QnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGVjaG8gJ1Rlc3RpbmcuLi4nCiAgICAgICAgICAgICAgICAvLyBDb21hbmRlcyBwZXIgZXhlY3V0YXIgbGVzIHByb3ZlcwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHN0YWdlKCdEZXBsb3knKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGVjaG8gJ0RlcGxveWluZy4uLicKICAgICAgICAgICAgICAgIC8vIENvbWFuZGVzIHBlciBkZXNwbGVnYXIgbCdhcGxpY2FjacOzCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                echo 'Building...'
                // Comandes per compilar el projecte
            }
        }
        stage('Test') {
            steps {
                echo 'Testing...'
                // Comandes per executar les proves
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying...'
                // Comandes per desplegar l'aplicaci&oacute;
            }
        }
    }
}</pre></div><div class='content'><h4>Pipeline Scriptada</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bm9kZSB7CiAgICBzdGFnZSgnQnVpbGQnKSB7CiAgICAgICAgZWNobyAnQnVpbGRpbmcuLi4nCiAgICAgICAgLy8gQ29tYW5kZXMgcGVyIGNvbXBpbGFyIGVsIHByb2plY3RlCiAgICB9CiAgICBzdGFnZSgnVGVzdCcpIHsKICAgICAgICBlY2hvICdUZXN0aW5nLi4uJwogICAgICAgIC8vIENvbWFuZGVzIHBlciBleGVjdXRhciBsZXMgcHJvdmVzCiAgICB9CiAgICBzdGFnZSgnRGVwbG95JykgewogICAgICAgIGVjaG8gJ0RlcGxveWluZy4uLicKICAgICAgICAvLyBDb21hbmRlcyBwZXIgZGVzcGxlZ2FyIGwnYXBsaWNhY2nDswogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>node {
    stage('Build') {
        echo 'Building...'
        // Comandes per compilar el projecte
    }
    stage('Test') {
        echo 'Testing...'
        // Comandes per executar les proves
    }
    stage('Deploy') {
        echo 'Deploying...'
        // Comandes per desplegar l'aplicaci&oacute;
    }
}</pre></div><div class='content'></div><h1><p>Creant un Jenkinsfile</p>
</h1>
<div class='content'></div><h2><p>Pas 1: Crear el Fitxer</p>
</h2>
<div class='content'><p>Crea un fitxer anomenat <code>Jenkinsfile</code> a l'arrel del teu projecte.</p>
</div><h2><p>Pas 2: Definir la Pipeline</p>
</h2>
<div class='content'><p>Utilitza la sintaxi de pipeline per definir les etapes i passos de la teva pipeline. Aquí tens un exemple bàsic d'una pipeline declarativa:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwZWxpbmUgewogICAgYWdlbnQgYW55CgogICAgc3RhZ2VzIHsKICAgICAgICBzdGFnZSgnQnVpbGQnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGVjaG8gJ0J1aWxkaW5nLi4uJwogICAgICAgICAgICAgICAgLy8gQ29tYW5kZXMgcGVyIGNvbXBpbGFyIGVsIHByb2plY3RlCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc3RhZ2UoJ1Rlc3QnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGVjaG8gJ1Rlc3RpbmcuLi4nCiAgICAgICAgICAgICAgICAvLyBDb21hbmRlcyBwZXIgZXhlY3V0YXIgbGVzIHByb3ZlcwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHN0YWdlKCdEZXBsb3knKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGVjaG8gJ0RlcGxveWluZy4uLicKICAgICAgICAgICAgICAgIC8vIENvbWFuZGVzIHBlciBkZXNwbGVnYXIgbCdhcGxpY2FjacOzCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                echo 'Building...'
                // Comandes per compilar el projecte
            }
        }
        stage('Test') {
            steps {
                echo 'Testing...'
                // Comandes per executar les proves
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying...'
                // Comandes per desplegar l'aplicaci&oacute;
            }
        }
    }
}</pre></div><div class='content'></div><h2><p>Pas 3: Commit i Push</p>
</h2>
<div class='content'><p>Commit i push del <code>Jenkinsfile</code> al teu repositori de control de versions.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2l0IGFkZCBKZW5raW5zZmlsZQpnaXQgY29tbWl0IC1tICJBZGQgSmVua2luc2ZpbGUiCmdpdCBwdXNoIG9yaWdpbiBtYWlu"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>git add Jenkinsfile
git commit -m &quot;Add Jenkinsfile&quot;
git push origin main</pre></div><div class='content'></div><h1><p>Executant el Jenkinsfile</p>
</h1>
<div class='content'></div><h2><p>Configurant el Projecte a Jenkins</p>
</h2>
<div class='content'><ol>
<li><strong>Crear un Nou Projecte</strong>: A la interfície de Jenkins, crea un nou projecte de tipus &quot;Pipeline&quot;.</li>
<li><strong>Configurar el Repositori</strong>: Configura el repositori de control de versions on es troba el <code>Jenkinsfile</code>.</li>
<li><strong>Definir la Pipeline</strong>: Selecciona l'opció &quot;Pipeline script from SCM&quot; i especifica la ubicació del <code>Jenkinsfile</code>.</li>
</ol>
</div><h2><p>Executar la Pipeline</p>
</h2>
<div class='content'><p>Un cop configurat el projecte, Jenkins detectarà el <code>Jenkinsfile</code> i executarà la pipeline definida. Pots veure els logs i l'estat de cada etapa a la interfície de Jenkins.</p>
</div><h1><p>Exercici Pràctic</p>
</h1>
<div class='content'></div><h2><p>Objectiu</p>
</h2>
<div class='content'><p>Crear un <code>Jenkinsfile</code> que compili, provi i desplegui una aplicació simple.</p>
</div><h2><p>Passos</p>
</h2>
<div class='content'><ol>
<li><strong>Crear el Fitxer</strong>: Crea un fitxer <code>Jenkinsfile</code> a l'arrel del teu projecte.</li>
<li><strong>Definir la Pipeline</strong>: Utilitza la sintaxi de pipeline per definir les etapes de build, test i deploy.</li>
<li><strong>Commit i Push</strong>: Commit i push del <code>Jenkinsfile</code> al teu repositori.</li>
<li><strong>Configurar Jenkins</strong>: Configura un nou projecte a Jenkins per utilitzar el <code>Jenkinsfile</code>.</li>
<li><strong>Executar la Pipeline</strong>: Executa la pipeline i verifica que totes les etapes es completen correctament.</li>
</ol>
</div><h2><p>Solució</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwZWxpbmUgewogICAgYWdlbnQgYW55CgogICAgc3RhZ2VzIHsKICAgICAgICBzdGFnZSgnQnVpbGQnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGVjaG8gJ0J1aWxkaW5nLi4uJwogICAgICAgICAgICAgICAgLy8gQ29tYW5kZXMgcGVyIGNvbXBpbGFyIGVsIHByb2plY3RlCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc3RhZ2UoJ1Rlc3QnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGVjaG8gJ1Rlc3RpbmcuLi4nCiAgICAgICAgICAgICAgICAvLyBDb21hbmRlcyBwZXIgZXhlY3V0YXIgbGVzIHByb3ZlcwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHN0YWdlKCdEZXBsb3knKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGVjaG8gJ0RlcGxveWluZy4uLicKICAgICAgICAgICAgICAgIC8vIENvbWFuZGVzIHBlciBkZXNwbGVnYXIgbCdhcGxpY2FjacOzCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                echo 'Building...'
                // Comandes per compilar el projecte
            }
        }
        stage('Test') {
            steps {
                echo 'Testing...'
                // Comandes per executar les proves
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying...'
                // Comandes per desplegar l'aplicaci&oacute;
            }
        }
    }
}</pre></div><div class='content'></div><h1><p>Resum</p>
</h1>
<div class='content'><p>En aquest tema, hem après què és un Jenkinsfile i com utilitzar-lo per definir pipelines de Jenkins com a codi. Hem vist exemples de pipelines declaratives i scriptades, i hem creat un <code>Jenkinsfile</code> bàsic per compilar, provar i desplegar una aplicació. Utilitzar Jenkinsfile permet gestionar les pipelines de manera més eficient i col·laborativa, facilitant la integració contínua i el desplegament continu.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='08-02-jenkins-and-kubernetes' title="Jenkins i Kubernetes">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='08-04-scaling-jenkins' title="Escalant Jenkins">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
