<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Variables d'Entorn</title>

    <link rel="alternate" href="https://campusempresa.com/mod/nodejs/11-01-environment-variables" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/nodejs/11-01-environment-variables" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/nodejs/11-01-environment-variables" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/nodejs/11-01-environment-variables" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/nodejs/11-01-environment-variables" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='10-05-graphql-nodejs' title="GraphQL amb Node.js">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Variables d'Entorn</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='11-02-using-pm2' title="Utilitzar PM2 per a la Gestió de Processos">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Les variables d'entorn són una manera de configurar aplicacions sense haver de modificar el codi font. Aquestes variables es poden utilitzar per emmagatzemar informació sensible com ara claus d'API, cadenes de connexió a bases de dades, i altres configuracions que poden variar entre diferents entorns (desenvolupament, proves, producció).</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ol>
<li>
<p><strong>Què són les variables d'entorn?</strong></p>
<ul>
<li>Són variables externes al codi de l'aplicació que poden influir en el comportament del programa.</li>
<li>Es defineixen en el sistema operatiu o en fitxers de configuració.</li>
</ul>
</li>
<li>
<p><strong>Per què utilitzar variables d'entorn?</strong></p>
<ul>
<li><strong>Seguretat:</strong> Eviten que informació sensible estigui codificada directament en el codi font.</li>
<li><strong>Flexibilitat:</strong> Permeten canviar configuracions sense necessitat de modificar el codi.</li>
<li><strong>Portabilitat:</strong> Faciliten el desplegament de l'aplicació en diferents entorns amb configuracions específiques.</li>
</ul>
</li>
</ol>
</div><h1>Configuració de Variables d'Entorn</h1>
<div class='content'></div><h2>Definir Variables d'Entorn</h2>
<div class='content'><p>Les variables d'entorn es poden definir de diverses maneres, depenent del sistema operatiu i del context en què s'executa l'aplicació.</p>
<h4>En Linux/MacOS</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXhwb3J0IFBPUlQ9MzAwMApleHBvcnQgREJfSE9TVD1sb2NhbGhvc3QKZXhwb3J0IERCX1VTRVI9cm9vdApleHBvcnQgREJfUEFTUz1zZWNyZXQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>export PORT=3000
export DB_HOST=localhost
export DB_USER=root
export DB_PASS=secret</pre></div><div class='content'><h4>En Windows</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2V0IFBPUlQ9MzAwMApzZXQgREJfSE9TVD1sb2NhbGhvc3QKc2V0IERCX1VTRVI9cm9vdApzZXQgREJfUEFTUz1zZWNyZXQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>set PORT=3000
set DB_HOST=localhost
set DB_USER=root
set DB_PASS=secret</pre></div><div class='content'></div><h2>Accedir a Variables d'Entorn en Node.js</h2>
<div class='content'><p>En Node.js, les variables d'entorn es poden accedir a través de l'objecte <code>process.env</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgcG9ydCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMDsKY29uc3QgZGJIb3N0ID0gcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCAnbG9jYWxob3N0JzsKY29uc3QgZGJVc2VyID0gcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAncm9vdCc7CmNvbnN0IGRiUGFzcyA9IHByb2Nlc3MuZW52LkRCX1BBU1MgfHwgJ3NlY3JldCc7Cgpjb25zb2xlLmxvZyhgU2VydmVyIHJ1bm5pbmcgb24gcG9ydCAke3BvcnR9YCk7CmNvbnNvbGUubG9nKGBEYXRhYmFzZSBob3N0OiAke2RiSG9zdH1gKTsKY29uc29sZS5sb2coYERhdGFiYXNlIHVzZXI6ICR7ZGJVc2VyfWApOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const port = process.env.PORT || 3000;
const dbHost = process.env.DB_HOST || 'localhost';
const dbUser = process.env.DB_USER || 'root';
const dbPass = process.env.DB_PASS || 'secret';

console.log(`Server running on port ${port}`);
console.log(`Database host: ${dbHost}`);
console.log(`Database user: ${dbUser}`);</pre></div><div class='content'></div><h2>Utilitzar fitxers `.env`</h2>
<div class='content'><p>Una pràctica comuna és utilitzar un fitxer <code>.env</code> per definir les variables d'entorn. Aquest fitxer es carrega en l'entorn d'execució de l'aplicació utilitzant una biblioteca com <code>dotenv</code>.</p>
<h4>Instal·lació de <code>dotenv</code></h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgZG90ZW52"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install dotenv</pre></div><div class='content'><h4>Crear un fitxer <code>.env</code></h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9SVD0zMDAwCkRCX0hPU1Q9bG9jYWxob3N0CkRCX1VTRVI9cm9vdApEQl9QQVNTPXNlY3JldA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PORT=3000
DB_HOST=localhost
DB_USER=root
DB_PASS=secret</pre></div><div class='content'><h4>Carregar el fitxer <code>.env</code> en l'aplicació</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7Cgpjb25zdCBwb3J0ID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwOwpjb25zdCBkYkhvc3QgPSBwcm9jZXNzLmVudi5EQl9IT1NUIHx8ICdsb2NhbGhvc3QnOwpjb25zdCBkYlVzZXIgPSBwcm9jZXNzLmVudi5EQl9VU0VSIHx8ICdyb290JzsKY29uc3QgZGJQYXNzID0gcHJvY2Vzcy5lbnYuREJfUEFTUyB8fCAnc2VjcmV0JzsKCmNvbnNvbGUubG9nKGBTZXJ2ZXIgcnVubmluZyBvbiBwb3J0ICR7cG9ydH1gKTsKY29uc29sZS5sb2coYERhdGFiYXNlIGhvc3Q6ICR7ZGJIb3N0fWApOwpjb25zb2xlLmxvZyhgRGF0YWJhc2UgdXNlcjogJHtkYlVzZXJ9YCk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>require('dotenv').config();

const port = process.env.PORT || 3000;
const dbHost = process.env.DB_HOST || 'localhost';
const dbUser = process.env.DB_USER || 'root';
const dbPass = process.env.DB_PASS || 'secret';

console.log(`Server running on port ${port}`);
console.log(`Database host: ${dbHost}`);
console.log(`Database user: ${dbUser}`);</pre></div><div class='content'></div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Configurar i Accedir a Variables d'Entorn</h2>
<div class='content'><ol>
<li>
<p><strong>Crea un fitxer <code>.env</code></strong> amb les següents variables:</p>
<pre><code class="language-env">APP_NAME=MyNodeApp
APP_VERSION=1.0.0
</code></pre>
</li>
<li>
<p><strong>Instal·la la biblioteca <code>dotenv</code></strong> si no ho has fet ja:</p>
<pre><code class="language-sh">npm install dotenv
</code></pre>
</li>
<li>
<p><strong>Crea un fitxer <code>index.js</code></strong> i carrega les variables d'entorn:</p>
<pre><code class="language-javascript">require('dotenv').config();

const appName = process.env.APP_NAME;
const appVersion = process.env.APP_VERSION;

console.log(`Application Name: ${appName}`);
console.log(`Application Version: ${appVersion}`);
</code></pre>
</li>
<li>
<p><strong>Executa l'aplicació</strong>:</p>
<pre><code class="language-sh">node index.js
</code></pre>
</li>
</ol>
</div><h2>Exercici 2: Utilitzar Variables d'Entorn per Configurar un Servidor</h2>
<div class='content'><ol>
<li>
<p><strong>Crea un fitxer <code>.env</code></strong> amb les següents variables:</p>
<pre><code class="language-env">PORT=4000
</code></pre>
</li>
<li>
<p><strong>Crea un fitxer <code>server.js</code></strong> i configura un servidor HTTP utilitzant la variable d'entorn <code>PORT</code>:</p>
<pre><code class="language-javascript">require('dotenv').config();
const http = require('http');

const port = process.env.PORT || 3000;

const server = http.createServer((req, res) =&gt; {
    res.statusCode = 200;
    res.setHeader('Content-Type', 'text/plain');
    res.end('Hello, World!\n');
});

server.listen(port, () =&gt; {
    console.log(`Server running at http://localhost:${port}/`);
});
</code></pre>
</li>
<li>
<p><strong>Executa l'aplicació</strong>:</p>
<pre><code class="language-sh">node server.js
</code></pre>
</li>
</ol>
</div><h1>Errors Comuns i Consells</h1>
<div class='content'><ul>
<li><strong>Error: Variable d'entorn no definida</strong>: Assegura't que has carregat el fitxer <code>.env</code> correctament amb <code>dotenv.config()</code>.</li>
<li><strong>Error: Fitxer <code>.env</code> no trobat</strong>: Verifica que el fitxer <code>.env</code> es troba en el directori arrel del projecte.</li>
<li><strong>Consell</strong>: No incloguis el fitxer <code>.env</code> en el control de versions (afegiu-lo a <code>.gitignore</code>) per evitar exposar informació sensible.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Les variables d'entorn són una eina poderosa per gestionar configuracions sensibles i específiques d'entorn en aplicacions Node.js. Utilitzant biblioteques com <code>dotenv</code>, podem simplificar la gestió d'aquestes variables i assegurar-nos que la nostra aplicació sigui segura i fàcil de configurar en diferents entorns.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='10-05-graphql-nodejs' title="GraphQL amb Node.js">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='11-02-using-pm2' title="Utilitzar PM2 per a la Gestió de Processos">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
