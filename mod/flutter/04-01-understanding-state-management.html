<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprensió de la Gestió de l'Estat</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flutter/04-01-understanding-state-management" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flutter/04-01-understanding-state-management" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flutter/04-01-understanding-state-management" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=2" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/flutter/04-01-understanding-state-management" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/flutter/04-01-understanding-state-management" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
<br>
			<cite>Construint la societat d'avui i del demà</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Llenguatges de Programació</a>
				 					<a href="/categ/frameworks">Frameworks i Llibreries</a>
				 					<a href="/categ/tech-tools">Eines Tècniques</a>
				 					<a href="/categ/foundations">Fonaments Teòrics</a>
				 					<a href="/categ/soft-skills">Habilitats Socials</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-05-input-and-form-widgets' title="Widgets d'Entrada i Formulari">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Comprensió de la Gestió de l'Estat</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-02-setstate-and-inheritedwidget' title="setState i InheritedWidget">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>La gestió de l'estat és un dels conceptes més importants en el desenvolupament d'aplicacions amb Flutter. L'estat es refereix a qualsevol dada que pot canviar durant el cicle de vida de l'aplicació, com ara el text d'un camp de formulari, la selecció d'un element en una llista o la resposta d'una API.</p>
</div><h1><p>Objectius d'Aquesta Secció</p>
</h1>
<div class='content'><ul>
<li>Entendre què és l'estat en Flutter.</li>
<li>Conèixer les diferents maneres de gestionar l'estat.</li>
<li>Aprendre a utilitzar <code>setState</code> i <code>InheritedWidget</code> per a la gestió bàsica de l'estat.</li>
</ul>
</div><h1><p>Què és l'Estat?</p>
</h1>
<div class='content'><p>L'estat és qualsevol dada que pot canviar durant el cicle de vida de l'aplicació. En Flutter, hi ha dos tipus principals de widgets que gestionen l'estat:</p>
<ol>
<li><strong>Stateless Widgets</strong>: No mantenen cap estat intern. Són immutables i es tornen a construir cada vegada que es criden.</li>
<li><strong>Stateful Widgets</strong>: Mantenen un estat intern que pot canviar durant el cicle de vida del widget. Són mutables i poden actualitzar-se dinàmicament.</li>
</ol>
</div><h1><p>Maneres de Gestionar l'Estat</p>
</h1>
<div class='content'><p>Hi ha diverses maneres de gestionar l'estat en Flutter, cadascuna amb els seus avantatges i inconvenients. Les més comunes són:</p>
<ol>
<li><strong>setState</strong>: La manera més bàsica de gestionar l'estat en Flutter. S'utilitza per actualitzar l'estat d'un <code>StatefulWidget</code>.</li>
<li><strong>InheritedWidget</strong>: Permet compartir dades entre widgets sense necessitat de passar-les explícitament a través de constructors.</li>
<li><strong>Provider</strong>: Un paquet popular per a la gestió de l'estat que es basa en <code>InheritedWidget</code>.</li>
<li><strong>Riverpod</strong>: Una alternativa moderna a <code>Provider</code> amb una API més senzilla i funcionalitats avançades.</li>
<li><strong>Bloc (Business Logic Component)</strong>: Un patró que separa la lògica de negoci de la interfície d'usuari, facilitant la gestió de l'estat en aplicacions complexes.</li>
</ol>
</div><h1><p>Utilitzant <code>setState</code></p>
</h1>
<div class='content'><p><code>setState</code> és la manera més bàsica i directa de gestionar l'estat en Flutter. S'utilitza dins d'un <code>StatefulWidget</code> per notificar a Flutter que l'estat ha canviat i que el widget s'ha de reconstruir.</p>
</div><h2><p>Exemple Pràctic</p>
</h2>
<div class='content'><p>A continuació, es mostra un exemple senzill d'un <code>StatefulWidget</code> que utilitza <code>setState</code> per actualitzar un comptador:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7Cgp2b2lkIG1haW4oKSA9PiBydW5BcHAoTXlBcHAoKSk7CgpjbGFzcyBNeUFwcCBleHRlbmRzIFN0YXRlbGVzc1dpZGdldCB7CiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gTWF0ZXJpYWxBcHAoCiAgICAgIGhvbWU6IENvdW50ZXJTY3JlZW4oKSwKICAgICk7CiAgfQp9CgpjbGFzcyBDb3VudGVyU2NyZWVuIGV4dGVuZHMgU3RhdGVmdWxXaWRnZXQgewogIEBvdmVycmlkZQogIF9Db3VudGVyU2NyZWVuU3RhdGUgY3JlYXRlU3RhdGUoKSA9PiBfQ291bnRlclNjcmVlblN0YXRlKCk7Cn0KCmNsYXNzIF9Db3VudGVyU2NyZWVuU3RhdGUgZXh0ZW5kcyBTdGF0ZTxDb3VudGVyU2NyZWVuPiB7CiAgaW50IF9jb3VudGVyID0gMDsKCiAgdm9pZCBfaW5jcmVtZW50Q291bnRlcigpIHsKICAgIHNldFN0YXRlKCgpIHsKICAgICAgX2NvdW50ZXIrKzsKICAgIH0pOwogIH0KCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gU2NhZmZvbGQoCiAgICAgIGFwcEJhcjogQXBwQmFyKAogICAgICAgIHRpdGxlOiBUZXh0KCdHZXN0acOzIGRlIGxcJ0VzdGF0IGFtYiBzZXRTdGF0ZScpLAogICAgICApLAogICAgICBib2R5OiBDZW50ZXIoCiAgICAgICAgY2hpbGQ6IENvbHVtbigKICAgICAgICAgIG1haW5BeGlzQWxpZ25tZW50OiBNYWluQXhpc0FsaWdubWVudC5jZW50ZXIsCiAgICAgICAgICBjaGlsZHJlbjogPFdpZGdldD5bCiAgICAgICAgICAgIFRleHQoCiAgICAgICAgICAgICAgJ0hhcyBwcmVtdXQgZWwgYm90w7MgYXF1ZXN0IG5vbWJyZSBkZSB2ZWdhZGVzOicsCiAgICAgICAgICAgICksCiAgICAgICAgICAgIFRleHQoCiAgICAgICAgICAgICAgJyRfY291bnRlcicsCiAgICAgICAgICAgICAgc3R5bGU6IFRoZW1lLm9mKGNvbnRleHQpLnRleHRUaGVtZS5oZWFkbGluZTQsCiAgICAgICAgICAgICksCiAgICAgICAgICBdLAogICAgICAgICksCiAgICAgICksCiAgICAgIGZsb2F0aW5nQWN0aW9uQnV0dG9uOiBGbG9hdGluZ0FjdGlvbkJ1dHRvbigKICAgICAgICBvblByZXNzZWQ6IF9pbmNyZW1lbnRDb3VudGVyLAogICAgICAgIHRvb2x0aXA6ICdJbmNyZW1lbnQnLAogICAgICAgIGNoaWxkOiBJY29uKEljb25zLmFkZCksCiAgICAgICksCiAgICApOwogIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:flutter/material.dart';

void main() =&gt; runApp(MyApp());

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: CounterScreen(),
    );
  }
}

class CounterScreen extends StatefulWidget {
  @override
  _CounterScreenState createState() =&gt; _CounterScreenState();
}

class _CounterScreenState extends State&lt;CounterScreen&gt; {
  int _counter = 0;

  void _incrementCounter() {
    setState(() {
      _counter++;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Gesti&oacute; de l\'Estat amb setState'),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: &lt;Widget&gt;[
            Text(
              'Has premut el bot&oacute; aquest nombre de vegades:',
            ),
            Text(
              '$_counter',
              style: Theme.of(context).textTheme.headline4,
            ),
          ],
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: _incrementCounter,
        tooltip: 'Increment',
        child: Icon(Icons.add),
      ),
    );
  }
}</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>MyApp</strong>: És un <code>StatelessWidget</code> que defineix l'aplicació principal.</li>
<li><strong>CounterScreen</strong>: És un <code>StatefulWidget</code> que conté l'estat <code>_counter</code>.</li>
<li><strong>_CounterScreenState</strong>: La classe d'estat que manté el valor del comptador i defineix el mètode <code>_incrementCounter</code> per actualitzar l'estat.</li>
<li><strong>setState</strong>: Quan es crida <code>_incrementCounter</code>, <code>setState</code> notifica a Flutter que l'estat ha canviat, i el widget es reconstrueix amb el nou valor del comptador.</li>
</ol>
</div><h1><p>Utilitzant <code>InheritedWidget</code></p>
</h1>
<div class='content'><p><code>InheritedWidget</code> és una manera més avançada de compartir dades entre widgets sense necessitat de passar-les explícitament a través de constructors. És útil quan es necessita compartir dades entre molts widgets en diferents nivells de l'arbre de widgets.</p>
</div><h2><p>Exemple Pràctic</p>
</h2>
<div class='content'><p>A continuació, es mostra un exemple senzill d'un <code>InheritedWidget</code> que comparteix un comptador entre diversos widgets:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7Cgp2b2lkIG1haW4oKSA9PiBydW5BcHAoTXlBcHAoKSk7CgpjbGFzcyBNeUFwcCBleHRlbmRzIFN0YXRlbGVzc1dpZGdldCB7CiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gTWF0ZXJpYWxBcHAoCiAgICAgIGhvbWU6IENvdW50ZXJQcm92aWRlcigKICAgICAgICBjb3VudGVyOiAwLAogICAgICAgIGNoaWxkOiBDb3VudGVyU2NyZWVuKCksCiAgICAgICksCiAgICApOwogIH0KfQoKY2xhc3MgQ291bnRlclByb3ZpZGVyIGV4dGVuZHMgSW5oZXJpdGVkV2lkZ2V0IHsKICBmaW5hbCBpbnQgY291bnRlcjsKCiAgQ291bnRlclByb3ZpZGVyKHtLZXk/IGtleSwgcmVxdWlyZWQgdGhpcy5jb3VudGVyLCByZXF1aXJlZCBXaWRnZXQgY2hpbGR9KQogICAgICA6IHN1cGVyKGtleToga2V5LCBjaGlsZDogY2hpbGQpOwoKICBAb3ZlcnJpZGUKICBib29sIHVwZGF0ZVNob3VsZE5vdGlmeShDb3VudGVyUHJvdmlkZXIgb2xkV2lkZ2V0KSB7CiAgICByZXR1cm4gb2xkV2lkZ2V0LmNvdW50ZXIgIT0gY291bnRlcjsKICB9CgogIHN0YXRpYyBDb3VudGVyUHJvdmlkZXI/IG9mKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gY29udGV4dC5kZXBlbmRPbkluaGVyaXRlZFdpZGdldE9mRXhhY3RUeXBlPENvdW50ZXJQcm92aWRlcj4oKTsKICB9Cn0KCmNsYXNzIENvdW50ZXJTY3JlZW4gZXh0ZW5kcyBTdGF0ZWxlc3NXaWRnZXQgewogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgZmluYWwgY291bnRlciA9IENvdW50ZXJQcm92aWRlci5vZihjb250ZXh0KT8uY291bnRlciA/PyAwOwoKICAgIHJldHVybiBTY2FmZm9sZCgKICAgICAgYXBwQmFyOiBBcHBCYXIoCiAgICAgICAgdGl0bGU6IFRleHQoJ0dlc3Rpw7MgZGUgbFwnRXN0YXQgYW1iIEluaGVyaXRlZFdpZGdldCcpLAogICAgICApLAogICAgICBib2R5OiBDZW50ZXIoCiAgICAgICAgY2hpbGQ6IENvbHVtbigKICAgICAgICAgIG1haW5BeGlzQWxpZ25tZW50OiBNYWluQXhpc0FsaWdubWVudC5jZW50ZXIsCiAgICAgICAgICBjaGlsZHJlbjogPFdpZGdldD5bCiAgICAgICAgICAgIFRleHQoCiAgICAgICAgICAgICAgJ0hhcyBwcmVtdXQgZWwgYm90w7MgYXF1ZXN0IG5vbWJyZSBkZSB2ZWdhZGVzOicsCiAgICAgICAgICAgICksCiAgICAgICAgICAgIFRleHQoCiAgICAgICAgICAgICAgJyRjb3VudGVyJywKICAgICAgICAgICAgICBzdHlsZTogVGhlbWUub2YoY29udGV4dCkudGV4dFRoZW1lLmhlYWRsaW5lNCwKICAgICAgICAgICAgKSwKICAgICAgICAgIF0sCiAgICAgICAgKSwKICAgICAgKSwKICAgICk7CiAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:flutter/material.dart';

void main() =&gt; runApp(MyApp());

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: CounterProvider(
        counter: 0,
        child: CounterScreen(),
      ),
    );
  }
}

class CounterProvider extends InheritedWidget {
  final int counter;

  CounterProvider({Key? key, required this.counter, required Widget child})
      : super(key: key, child: child);

  @override
  bool updateShouldNotify(CounterProvider oldWidget) {
    return oldWidget.counter != counter;
  }

  static CounterProvider? of(BuildContext context) {
    return context.dependOnInheritedWidgetOfExactType&lt;CounterProvider&gt;();
  }
}

class CounterScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final counter = CounterProvider.of(context)?.counter ?? 0;

    return Scaffold(
      appBar: AppBar(
        title: Text('Gesti&oacute; de l\'Estat amb InheritedWidget'),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: &lt;Widget&gt;[
            Text(
              'Has premut el bot&oacute; aquest nombre de vegades:',
            ),
            Text(
              '$counter',
              style: Theme.of(context).textTheme.headline4,
            ),
          ],
        ),
      ),
    );
  }
}</pre></div><div class='content'></div><h2><p>Explicació del Codi</p>
</h2>
<div class='content'><ol>
<li><strong>CounterProvider</strong>: És un <code>InheritedWidget</code> que conté l'estat del comptador.</li>
<li><strong>updateShouldNotify</strong>: Defineix quan s'ha de notificar als widgets dependents que l'estat ha canviat.</li>
<li><strong>of</strong>: Un mètode estàtic que permet als widgets descendents accedir a l'estat del <code>CounterProvider</code>.</li>
<li><strong>CounterScreen</strong>: Un <code>StatelessWidget</code> que accedeix a l'estat del comptador a través del <code>CounterProvider</code>.</li>
</ol>
</div><h1><p>Exercicis Pràctics</p>
</h1>
<div class='content'></div><h2><p>Exercici 1: Incrementar i Decrementar el Comptador</p>
</h2>
<div class='content'><p>Modifica l'exemple de <code>setState</code> per afegir un botó que decrementi el valor del comptador.</p>
</div><h2><p>Solució</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7Cgp2b2lkIG1haW4oKSA9PiBydW5BcHAoTXlBcHAoKSk7CgpjbGFzcyBNeUFwcCBleHRlbmRzIFN0YXRlbGVzc1dpZGdldCB7CiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gTWF0ZXJpYWxBcHAoCiAgICAgIGhvbWU6IENvdW50ZXJTY3JlZW4oKSwKICAgICk7CiAgfQp9CgpjbGFzcyBDb3VudGVyU2NyZWVuIGV4dGVuZHMgU3RhdGVmdWxXaWRnZXQgewogIEBvdmVycmlkZQogIF9Db3VudGVyU2NyZWVuU3RhdGUgY3JlYXRlU3RhdGUoKSA9PiBfQ291bnRlclNjcmVlblN0YXRlKCk7Cn0KCmNsYXNzIF9Db3VudGVyU2NyZWVuU3RhdGUgZXh0ZW5kcyBTdGF0ZTxDb3VudGVyU2NyZWVuPiB7CiAgaW50IF9jb3VudGVyID0gMDsKCiAgdm9pZCBfaW5jcmVtZW50Q291bnRlcigpIHsKICAgIHNldFN0YXRlKCgpIHsKICAgICAgX2NvdW50ZXIrKzsKICAgIH0pOwogIH0KCiAgdm9pZCBfZGVjcmVtZW50Q291bnRlcigpIHsKICAgIHNldFN0YXRlKCgpIHsKICAgICAgX2NvdW50ZXItLTsKICAgIH0pOwogIH0KCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gU2NhZmZvbGQoCiAgICAgIGFwcEJhcjogQXBwQmFyKAogICAgICAgIHRpdGxlOiBUZXh0KCdHZXN0acOzIGRlIGxcJ0VzdGF0IGFtYiBzZXRTdGF0ZScpLAogICAgICApLAogICAgICBib2R5OiBDZW50ZXIoCiAgICAgICAgY2hpbGQ6IENvbHVtbigKICAgICAgICAgIG1haW5BeGlzQWxpZ25tZW50OiBNYWluQXhpc0FsaWdubWVudC5jZW50ZXIsCiAgICAgICAgICBjaGlsZHJlbjogPFdpZGdldD5bCiAgICAgICAgICAgIFRleHQoCiAgICAgICAgICAgICAgJ0hhcyBwcmVtdXQgZWwgYm90w7MgYXF1ZXN0IG5vbWJyZSBkZSB2ZWdhZGVzOicsCiAgICAgICAgICAgICksCiAgICAgICAgICAgIFRleHQoCiAgICAgICAgICAgICAgJyRfY291bnRlcicsCiAgICAgICAgICAgICAgc3R5bGU6IFRoZW1lLm9mKGNvbnRleHQpLnRleHRUaGVtZS5oZWFkbGluZTQsCiAgICAgICAgICAgICksCiAgICAgICAgICBdLAogICAgICAgICksCiAgICAgICksCiAgICAgIGZsb2F0aW5nQWN0aW9uQnV0dG9uOiBDb2x1bW4oCiAgICAgICAgbWFpbkF4aXNBbGlnbm1lbnQ6IE1haW5BeGlzQWxpZ25tZW50LmVuZCwKICAgICAgICBjaGlsZHJlbjogPFdpZGdldD5bCiAgICAgICAgICBGbG9hdGluZ0FjdGlvbkJ1dHRvbigKICAgICAgICAgICAgb25QcmVzc2VkOiBfaW5jcmVtZW50Q291bnRlciwKICAgICAgICAgICAgdG9vbHRpcDogJ0luY3JlbWVudCcsCiAgICAgICAgICAgIGNoaWxkOiBJY29uKEljb25zLmFkZCksCiAgICAgICAgICApLAogICAgICAgICAgU2l6ZWRCb3goaGVpZ2h0OiAxMCksCiAgICAgICAgICBGbG9hdGluZ0FjdGlvbkJ1dHRvbigKICAgICAgICAgICAgb25QcmVzc2VkOiBfZGVjcmVtZW50Q291bnRlciwKICAgICAgICAgICAgdG9vbHRpcDogJ0RlY3JlbWVudCcsCiAgICAgICAgICAgIGNoaWxkOiBJY29uKEljb25zLnJlbW92ZSksCiAgICAgICAgICApLAogICAgICAgIF0sCiAgICAgICksCiAgICApOwogIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:flutter/material.dart';

void main() =&gt; runApp(MyApp());

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: CounterScreen(),
    );
  }
}

class CounterScreen extends StatefulWidget {
  @override
  _CounterScreenState createState() =&gt; _CounterScreenState();
}

class _CounterScreenState extends State&lt;CounterScreen&gt; {
  int _counter = 0;

  void _incrementCounter() {
    setState(() {
      _counter++;
    });
  }

  void _decrementCounter() {
    setState(() {
      _counter--;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Gesti&oacute; de l\'Estat amb setState'),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: &lt;Widget&gt;[
            Text(
              'Has premut el bot&oacute; aquest nombre de vegades:',
            ),
            Text(
              '$_counter',
              style: Theme.of(context).textTheme.headline4,
            ),
          ],
        ),
      ),
      floatingActionButton: Column(
        mainAxisAlignment: MainAxisAlignment.end,
        children: &lt;Widget&gt;[
          FloatingActionButton(
            onPressed: _incrementCounter,
            tooltip: 'Increment',
            child: Icon(Icons.add),
          ),
          SizedBox(height: 10),
          FloatingActionButton(
            onPressed: _decrementCounter,
            tooltip: 'Decrement',
            child: Icon(Icons.remove),
          ),
        ],
      ),
    );
  }
}</pre></div><div class='content'></div><h2><p>Exercici 2: Compartir Estat amb <code>InheritedWidget</code></p>
</h2>
<div class='content'><p>Modifica l'exemple de <code>InheritedWidget</code> per permetre incrementar el comptador des de diferents widgets.</p>
</div><h2><p>Solució</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7Cgp2b2lkIG1haW4oKSA9PiBydW5BcHAoTXlBcHAoKSk7CgpjbGFzcyBNeUFwcCBleHRlbmRzIFN0YXRlZnVsV2lkZ2V0IHsKICBAb3ZlcnJpZGUKICBfTXlBcHBTdGF0ZSBjcmVhdGVTdGF0ZSgpID0+IF9NeUFwcFN0YXRlKCk7Cn0KCmNsYXNzIF9NeUFwcFN0YXRlIGV4dGVuZHMgU3RhdGU8TXlBcHA+IHsKICBpbnQgX2NvdW50ZXIgPSAwOwoKICB2b2lkIF9pbmNyZW1lbnRDb3VudGVyKCkgewogICAgc2V0U3RhdGUoKCkgewogICAgICBfY291bnRlcisrOwogICAgfSk7CiAgfQoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIHJldHVybiBDb3VudGVyUHJvdmlkZXIoCiAgICAgIGNvdW50ZXI6IF9jb3VudGVyLAogICAgICBpbmNyZW1lbnRDb3VudGVyOiBfaW5jcmVtZW50Q291bnRlciwKICAgICAgY2hpbGQ6IE1hdGVyaWFsQXBwKAogICAgICAgIGhvbWU6IENvdW50ZXJTY3JlZW4oKSwKICAgICAgKSwKICAgICk7CiAgfQp9CgpjbGFzcyBDb3VudGVyUHJvdmlkZXIgZXh0ZW5kcyBJbmhlcml0ZWRXaWRnZXQgewogIGZpbmFsIGludCBjb3VudGVyOwogIGZpbmFsIFZvaWRDYWxsYmFjayBpbmNyZW1lbnRDb3VudGVyOwoKICBDb3VudGVyUHJvdmlkZXIoewogICAgS2V5PyBrZXksCiAgICByZXF1aXJlZCB0aGlzLmNvdW50ZXIsCiAgICByZXF1aXJlZCB0aGlzLmluY3JlbWVudENvdW50ZXIsCiAgICByZXF1aXJlZCBXaWRnZXQgY2hpbGQsCiAgfSkgOiBzdXBlcihrZXk6IGtleSwgY2hpbGQ6IGNoaWxkKTsKCiAgQG92ZXJyaWRlCiAgYm9vbCB1cGRhdGVTaG91bGROb3RpZnkoQ291bnRlclByb3ZpZGVyIG9sZFdpZGdldCkgewogICAgcmV0dXJuIG9sZFdpZGdldC5jb3VudGVyICE9IGNvdW50ZXI7CiAgfQoKICBzdGF0aWMgQ291bnRlclByb3ZpZGVyPyBvZihCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgcmV0dXJuIGNvbnRleHQuZGVwZW5kT25Jbmhlcml0ZWRXaWRnZXRPZkV4YWN0VHlwZTxDb3VudGVyUHJvdmlkZXI+KCk7CiAgfQp9CgpjbGFzcyBDb3VudGVyU2NyZWVuIGV4dGVuZHMgU3RhdGVsZXNzV2lkZ2V0IHsKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIGZpbmFsIGNvdW50ZXJQcm92aWRlciA9IENvdW50ZXJQcm92aWRlci5vZihjb250ZXh0KTsKCiAgICByZXR1cm4gU2NhZmZvbGQoCiAgICAgIGFwcEJhcjogQXBwQmFyKAogICAgICAgIHRpdGxlOiBUZXh0KCdHZXN0acOzIGRlIGxcJ0VzdGF0IGFtYiBJbmhlcml0ZWRXaWRnZXQnKSwKICAgICAgKSwKICAgICAgYm9keTogQ2VudGVyKAogICAgICAgIGNoaWxkOiBDb2x1bW4oCiAgICAgICAgICBtYWluQXhpc0FsaWdubWVudDogTWFpbkF4aXNBbGlnbm1lbnQuY2VudGVyLAogICAgICAgICAgY2hpbGRyZW46IDxXaWRnZXQ+WwogICAgICAgICAgICBUZXh0KAogICAgICAgICAgICAgICdIYXMgcHJlbXV0IGVsIGJvdMOzIGFxdWVzdCBub21icmUgZGUgdmVnYWRlczonLAogICAgICAgICAgICApLAogICAgICAgICAgICBUZXh0KAogICAgICAgICAgICAgICcke2NvdW50ZXJQcm92aWRlcj8uY291bnRlciA/PyAwfScsCiAgICAgICAgICAgICAgc3R5bGU6IFRoZW1lLm9mKGNvbnRleHQpLnRleHRUaGVtZS5oZWFkbGluZTQsCiAgICAgICAgICAgICksCiAgICAgICAgICAgIEVsZXZhdGVkQnV0dG9uKAogICAgICAgICAgICAgIG9uUHJlc3NlZDogY291bnRlclByb3ZpZGVyPy5pbmNyZW1lbnRDb3VudGVyLAogICAgICAgICAgICAgIGNoaWxkOiBUZXh0KCdJbmNyZW1lbnRhciBDb21wdGFkb3InKSwKICAgICAgICAgICAgKSwKICAgICAgICAgIF0sCiAgICAgICAgKSwKICAgICAgKSwKICAgICk7CiAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:flutter/material.dart';

void main() =&gt; runApp(MyApp());

class MyApp extends StatefulWidget {
  @override
  _MyAppState createState() =&gt; _MyAppState();
}

class _MyAppState extends State&lt;MyApp&gt; {
  int _counter = 0;

  void _incrementCounter() {
    setState(() {
      _counter++;
    });
  }

  @override
  Widget build(BuildContext context) {
    return CounterProvider(
      counter: _counter,
      incrementCounter: _incrementCounter,
      child: MaterialApp(
        home: CounterScreen(),
      ),
    );
  }
}

class CounterProvider extends InheritedWidget {
  final int counter;
  final VoidCallback incrementCounter;

  CounterProvider({
    Key? key,
    required this.counter,
    required this.incrementCounter,
    required Widget child,
  }) : super(key: key, child: child);

  @override
  bool updateShouldNotify(CounterProvider oldWidget) {
    return oldWidget.counter != counter;
  }

  static CounterProvider? of(BuildContext context) {
    return context.dependOnInheritedWidgetOfExactType&lt;CounterProvider&gt;();
  }
}

class CounterScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final counterProvider = CounterProvider.of(context);

    return Scaffold(
      appBar: AppBar(
        title: Text('Gesti&oacute; de l\'Estat amb InheritedWidget'),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: &lt;Widget&gt;[
            Text(
              'Has premut el bot&oacute; aquest nombre de vegades:',
            ),
            Text(
              '${counterProvider?.counter ?? 0}',
              style: Theme.of(context).textTheme.headline4,
            ),
            ElevatedButton(
              onPressed: counterProvider?.incrementCounter,
              child: Text('Incrementar Comptador'),
            ),
          ],
        ),
      ),
    );
  }
}</pre></div><div class='content'></div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>En aquesta secció, hem après què és l'estat en Flutter i com gestionar-lo utilitzant <code>setState</code> i <code>InheritedWidget</code>. Hem vist exemples pràctics i hem realitzat exercicis per reforçar els conceptes apresos. En la següent secció, explorarem el paquet <code>Provider</code> per a una gestió de l'estat més avançada i escalable.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-05-input-and-form-widgets' title="Widgets d'Entrada i Formulari">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-02-setstate-and-inheritedwidget' title="setState i InheritedWidget">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Publicitat</h1>
<p>Aquest espai està destinat a publicitat.</p>
<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Gràcies per col·laborar!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
