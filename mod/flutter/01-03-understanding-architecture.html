<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprensió de l'Arquitectura de Flutter</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flutter/01-03-understanding-architecture" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flutter/01-03-understanding-architecture" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flutter/01-03-understanding-architecture" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/flutter/01-03-understanding-architecture" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/flutter/01-03-understanding-architecture" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='01-02-setting-up-environment' title="Configuració de l'Entorn de Desenvolupament">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Comprensió de l'Arquitectura de Flutter</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='01-04-creating-first-app' title="Creació de la Teva Primera Aplicació Flutter">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest tema, explorarem l'arquitectura de Flutter per entendre com funciona aquest framework i com es construeixen les aplicacions. Aquesta comprensió és fonamental per desenvolupar aplicacions eficients i escalables.</p>
</div><h1>Objectius d'Aprenentatge</h1>
<div class='content'><ul>
<li>Comprendre els components clau de l'arquitectura de Flutter.</li>
<li>Aprendre com Flutter renderitza la interfície d'usuari.</li>
<li>Entendre el cicle de vida d'una aplicació Flutter.</li>
</ul>
</div><h1>Components Clau de l'Arquitectura de Flutter</h1>
<div class='content'><p>Flutter es basa en una arquitectura de tres capes principals:</p>
<ol>
<li>
<p><strong>Framework</strong>: Aquesta és la capa més alta i està escrita en Dart. Inclou:</p>
<ul>
<li><strong>Widgets</strong>: Els blocs de construcció bàsics de la interfície d'usuari.</li>
<li><strong>Render</strong>: Gestiona el layout i el dibuix dels widgets.</li>
<li><strong>Gestió d'Estat</strong>: Controla l'estat de l'aplicació i els canvis en la interfície d'usuari.</li>
</ul>
</li>
<li>
<p><strong>Engine</strong>: Aquesta capa està escrita en C++ i proporciona serveis de baix nivell com:</p>
<ul>
<li><strong>Skia</strong>: Una biblioteca gràfica 2D que renderitza la interfície d'usuari.</li>
<li><strong>Motor de Text</strong>: Per al renderitzat de text.</li>
<li><strong>Gestió d'Entrades</strong>: Per gestionar els esdeveniments d'entrada com tocs i gestos.</li>
</ul>
</li>
<li>
<p><strong>Embedder</strong>: Aquesta capa permet que Flutter s'executi en diferents plataformes (iOS, Android, web, escriptori). Inclou:</p>
<ul>
<li><strong>Plataforma Nativa</strong>: Integració amb les API natives de la plataforma.</li>
<li><strong>Canals de Plataforma</strong>: Permet la comunicació entre el codi Dart i el codi natiu.</li>
</ul>
</li>
</ol>
</div><h1>Renderització de la Interfície d'Usuari</h1>
<div class='content'><p>Flutter utilitza un motor de renderització basat en Skia per dibuixar la interfície d'usuari. A diferència d'altres frameworks que utilitzen components natius, Flutter dibuixa tot des de zero, la qual cosa permet una gran flexibilitat i control sobre l'aparença i el comportament de l'aplicació.</p>
</div><h2>Cicle de Renderització</h2>
<div class='content'><ol>
<li><strong>Construcció del Widget Tree</strong>: Quan es crea o actualitza un widget, es construeix un arbre de widgets.</li>
<li><strong>Layout</strong>: Flutter calcula la mida i la posició de cada widget.</li>
<li><strong>Pintura</strong>: Els widgets es dibuixen a la pantalla utilitzant Skia.</li>
<li><strong>Composició</strong>: Les diferents capes de la interfície d'usuari es combinen per formar la pantalla final.</li>
</ol>
</div><h1>Cicle de Vida d'una Aplicació Flutter</h1>
<div class='content'><p>Entendre el cicle de vida d'una aplicació Flutter és crucial per gestionar correctament els recursos i l'estat de l'aplicació.</p>
</div><h2>Fases del Cicle de Vida</h2>
<div class='content'><ol>
<li><strong>Inici</strong>: L'aplicació es carrega i es mostra la pantalla inicial.</li>
<li><strong>Execució</strong>: L'aplicació està activa i interactuant amb l'usuari.</li>
<li><strong>Pausa</strong>: L'aplicació està en segon pla però no ha estat tancada.</li>
<li><strong>Reprendre</strong>: L'aplicació torna a estar activa després d'estar en segon pla.</li>
<li><strong>Tancament</strong>: L'aplicació es tanca i es netegen els recursos.</li>
</ol>
</div><h2>Exemple de Codi: Gestió del Cicle de Vida</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7Cgp2b2lkIG1haW4oKSB7CiAgcnVuQXBwKE15QXBwKCkpOwp9CgpjbGFzcyBNeUFwcCBleHRlbmRzIFN0YXRlbGVzc1dpZGdldCB7CiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gTWF0ZXJpYWxBcHAoCiAgICAgIGhvbWU6IE15SG9tZVBhZ2UoKSwKICAgICk7CiAgfQp9CgpjbGFzcyBNeUhvbWVQYWdlIGV4dGVuZHMgU3RhdGVmdWxXaWRnZXQgewogIEBvdmVycmlkZQogIF9NeUhvbWVQYWdlU3RhdGUgY3JlYXRlU3RhdGUoKSA9PiBfTXlIb21lUGFnZVN0YXRlKCk7Cn0KCmNsYXNzIF9NeUhvbWVQYWdlU3RhdGUgZXh0ZW5kcyBTdGF0ZTxNeUhvbWVQYWdlPiB3aXRoIFdpZGdldHNCaW5kaW5nT2JzZXJ2ZXIgewogIEBvdmVycmlkZQogIHZvaWQgaW5pdFN0YXRlKCkgewogICAgc3VwZXIuaW5pdFN0YXRlKCk7CiAgICBXaWRnZXRzQmluZGluZy5pbnN0YW5jZS5hZGRPYnNlcnZlcih0aGlzKTsKICB9CgogIEBvdmVycmlkZQogIHZvaWQgZGlzcG9zZSgpIHsKICAgIFdpZGdldHNCaW5kaW5nLmluc3RhbmNlLnJlbW92ZU9ic2VydmVyKHRoaXMpOwogICAgc3VwZXIuZGlzcG9zZSgpOwogIH0KCiAgQG92ZXJyaWRlCiAgdm9pZCBkaWRDaGFuZ2VBcHBMaWZlY3ljbGVTdGF0ZShBcHBMaWZlY3ljbGVTdGF0ZSBzdGF0ZSkgewogICAgc3VwZXIuZGlkQ2hhbmdlQXBwTGlmZWN5Y2xlU3RhdGUoc3RhdGUpOwogICAgaWYgKHN0YXRlID09IEFwcExpZmVjeWNsZVN0YXRlLnBhdXNlZCkgewogICAgICBwcmludCgnQXBwIGlzIGluIGJhY2tncm91bmQnKTsKICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gQXBwTGlmZWN5Y2xlU3RhdGUucmVzdW1lZCkgewogICAgICBwcmludCgnQXBwIGlzIGluIGZvcmVncm91bmQnKTsKICAgIH0KICB9CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgcmV0dXJuIFNjYWZmb2xkKAogICAgICBhcHBCYXI6IEFwcEJhcigKICAgICAgICB0aXRsZTogVGV4dCgnRmx1dHRlciBMaWZlY3ljbGUgRXhhbXBsZScpLAogICAgICApLAogICAgICBib2R5OiBDZW50ZXIoCiAgICAgICAgY2hpbGQ6IFRleHQoJ09ic2VydmUgdGhlIGNvbnNvbGUgZm9yIGxpZmVjeWNsZSBjaGFuZ2VzLicpLAogICAgICApLAogICAgKTsKICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: MyHomePage(),
    );
  }
}

class MyHomePage extends StatefulWidget {
  @override
  _MyHomePageState createState() =&gt; _MyHomePageState();
}

class _MyHomePageState extends State&lt;MyHomePage&gt; with WidgetsBindingObserver {
  @override
  void initState() {
    super.initState();
    WidgetsBinding.instance.addObserver(this);
  }

  @override
  void dispose() {
    WidgetsBinding.instance.removeObserver(this);
    super.dispose();
  }

  @override
  void didChangeAppLifecycleState(AppLifecycleState state) {
    super.didChangeAppLifecycleState(state);
    if (state == AppLifecycleState.paused) {
      print('App is in background');
    } else if (state == AppLifecycleState.resumed) {
      print('App is in foreground');
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Flutter Lifecycle Example'),
      ),
      body: Center(
        child: Text('Observe the console for lifecycle changes.'),
      ),
    );
  }
}</pre></div><div class='content'></div><h1>Exercici Pràctic</h1>
<div class='content'></div><h2>Objectiu</h2>
<div class='content'><p>Crear una aplicació Flutter que mostri un missatge diferent segons l'estat del cicle de vida de l'aplicació.</p>
</div><h2>Passos</h2>
<div class='content'><ol>
<li>Crea un nou projecte Flutter.</li>
<li>Implementa la classe <code>WidgetsBindingObserver</code> per observar els canvis en el cicle de vida.</li>
<li>Mostra un <code>SnackBar</code> amb un missatge diferent per a cada estat del cicle de vida (inici, pausa, reprendre, tancament).</li>
</ol>
</div><h2>Solució</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7Cgp2b2lkIG1haW4oKSB7CiAgcnVuQXBwKE15QXBwKCkpOwp9CgpjbGFzcyBNeUFwcCBleHRlbmRzIFN0YXRlbGVzc1dpZGdldCB7CiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gTWF0ZXJpYWxBcHAoCiAgICAgIGhvbWU6IE15SG9tZVBhZ2UoKSwKICAgICk7CiAgfQp9CgpjbGFzcyBNeUhvbWVQYWdlIGV4dGVuZHMgU3RhdGVmdWxXaWRnZXQgewogIEBvdmVycmlkZQogIF9NeUhvbWVQYWdlU3RhdGUgY3JlYXRlU3RhdGUoKSA9PiBfTXlIb21lUGFnZVN0YXRlKCk7Cn0KCmNsYXNzIF9NeUhvbWVQYWdlU3RhdGUgZXh0ZW5kcyBTdGF0ZTxNeUhvbWVQYWdlPiB3aXRoIFdpZGdldHNCaW5kaW5nT2JzZXJ2ZXIgewogIEBvdmVycmlkZQogIHZvaWQgaW5pdFN0YXRlKCkgewogICAgc3VwZXIuaW5pdFN0YXRlKCk7CiAgICBXaWRnZXRzQmluZGluZy5pbnN0YW5jZS5hZGRPYnNlcnZlcih0aGlzKTsKICB9CgogIEBvdmVycmlkZQogIHZvaWQgZGlzcG9zZSgpIHsKICAgIFdpZGdldHNCaW5kaW5nLmluc3RhbmNlLnJlbW92ZU9ic2VydmVyKHRoaXMpOwogICAgc3VwZXIuZGlzcG9zZSgpOwogIH0KCiAgQG92ZXJyaWRlCiAgdm9pZCBkaWRDaGFuZ2VBcHBMaWZlY3ljbGVTdGF0ZShBcHBMaWZlY3ljbGVTdGF0ZSBzdGF0ZSkgewogICAgc3VwZXIuZGlkQ2hhbmdlQXBwTGlmZWN5Y2xlU3RhdGUoc3RhdGUpOwogICAgU3RyaW5nIG1lc3NhZ2U7CiAgICBpZiAoc3RhdGUgPT0gQXBwTGlmZWN5Y2xlU3RhdGUucGF1c2VkKSB7CiAgICAgIG1lc3NhZ2UgPSAnQXBwIGlzIGluIGJhY2tncm91bmQnOwogICAgfSBlbHNlIGlmIChzdGF0ZSA9PSBBcHBMaWZlY3ljbGVTdGF0ZS5yZXN1bWVkKSB7CiAgICAgIG1lc3NhZ2UgPSAnQXBwIGlzIGluIGZvcmVncm91bmQnOwogICAgfSBlbHNlIGlmIChzdGF0ZSA9PSBBcHBMaWZlY3ljbGVTdGF0ZS5pbmFjdGl2ZSkgewogICAgICBtZXNzYWdlID0gJ0FwcCBpcyBpbmFjdGl2ZSc7CiAgICB9IGVsc2UgaWYgKHN0YXRlID09IEFwcExpZmVjeWNsZVN0YXRlLmRldGFjaGVkKSB7CiAgICAgIG1lc3NhZ2UgPSAnQXBwIGlzIGRldGFjaGVkJzsKICAgIH0KICAgIFNjYWZmb2xkTWVzc2VuZ2VyLm9mKGNvbnRleHQpLnNob3dTbmFja0JhcihTbmFja0Jhcihjb250ZW50OiBUZXh0KG1lc3NhZ2UpKSk7CiAgfQoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIHJldHVybiBTY2FmZm9sZCgKICAgICAgYXBwQmFyOiBBcHBCYXIoCiAgICAgICAgdGl0bGU6IFRleHQoJ0ZsdXR0ZXIgTGlmZWN5Y2xlIEV4YW1wbGUnKSwKICAgICAgKSwKICAgICAgYm9keTogQ2VudGVyKAogICAgICAgIGNoaWxkOiBUZXh0KCdPYnNlcnZlIHRoZSBjb25zb2xlIGZvciBsaWZlY3ljbGUgY2hhbmdlcy4nKSwKICAgICAgKSwKICAgICk7CiAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: MyHomePage(),
    );
  }
}

class MyHomePage extends StatefulWidget {
  @override
  _MyHomePageState createState() =&gt; _MyHomePageState();
}

class _MyHomePageState extends State&lt;MyHomePage&gt; with WidgetsBindingObserver {
  @override
  void initState() {
    super.initState();
    WidgetsBinding.instance.addObserver(this);
  }

  @override
  void dispose() {
    WidgetsBinding.instance.removeObserver(this);
    super.dispose();
  }

  @override
  void didChangeAppLifecycleState(AppLifecycleState state) {
    super.didChangeAppLifecycleState(state);
    String message;
    if (state == AppLifecycleState.paused) {
      message = 'App is in background';
    } else if (state == AppLifecycleState.resumed) {
      message = 'App is in foreground';
    } else if (state == AppLifecycleState.inactive) {
      message = 'App is inactive';
    } else if (state == AppLifecycleState.detached) {
      message = 'App is detached';
    }
    ScaffoldMessenger.of(context).showSnackBar(SnackBar(content: Text(message)));
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Flutter Lifecycle Example'),
      ),
      body: Center(
        child: Text('Observe the console for lifecycle changes.'),
      ),
    );
  }
}</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>En aquesta secció, hem après sobre l'arquitectura de Flutter, incloent-hi els components clau com el framework, l'engine i l'embedder. També hem explorat com Flutter renderitza la interfície d'usuari i el cicle de vida d'una aplicació Flutter. Aquesta comprensió és essencial per desenvolupar aplicacions robustes i eficients.</p>
<p>En el següent tema, ens endinsarem en la creació de la teva primera aplicació Flutter, aplicant els conceptes apresos fins ara.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='01-02-setting-up-environment' title="Configuració de l'Entorn de Desenvolupament">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='01-04-creating-first-app' title="Creació de la Teva Primera Aplicació Flutter">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
