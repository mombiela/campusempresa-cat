<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Construir un Joc Simple</title>

    <link rel="alternate" href="https://campusempresa.com/mod/open_gl/08-01-building-simple-game" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/open_gl/08-01-building-simple-game" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/open_gl/08-01-building-simple-game" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/open_gl/08-01-building-simple-game" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/open_gl/08-01-building-simple-game" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-04-opengl-extensions' title="Extensions d'OpenGL">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Construir un Joc Simple</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='08-02-3d-model-viewer' title="Crear un Visualitzador de Models 3D">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem a construir un joc simple utilitzant OpenGL. Aquest projecte ens permetrà aplicar molts dels conceptes apresos en els mòduls anteriors, com ara la renderització de formes, textures, il·luminació i més. El joc que crearem serà un senzill joc de &quot;pong&quot;, on dos jugadors controlen pales per colpejar una pilota.</p>
</div><h1><p>Objectius del Tema</p>
</h1>
<div class='content'><ul>
<li>Aplicar conceptes bàsics i avançats d'OpenGL en un projecte pràctic.</li>
<li>Aprendre a estructurar un projecte de joc.</li>
<li>Implementar la lògica del joc i la interacció amb l'usuari.</li>
<li>Gestionar la renderització i l'actualització de l'estat del joc.</li>
</ul>
</div><h1><p>Requisits Previs</p>
</h1>
<div class='content'><ul>
<li>Coneixements bàsics d'OpenGL.</li>
<li>Familiaritat amb la programació en C++ (o el llenguatge que estiguis utilitzant).</li>
<li>Entorn de desenvolupament configurat per a OpenGL.</li>
</ul>
</div><h1><p>Passos per Construir el Joc</p>
</h1>
<div class='content'></div><h2><ol>
<li>Configuració del Projecte</li>
</ol>
</h2>
<div class='content'><p>Abans de començar a codificar, assegura't que el teu entorn de desenvolupament estigui configurat correctament per a OpenGL. Si no ho has fet, revisa el mòdul &quot;Configurar el Teu Entorn de Desenvolupament&quot;.</p>
</div><h2><ol start="2">
<li>Estructura del Projecte</li>
</ol>
</h2>
<div class='content'><p>Organitzarem el nostre projecte en diversos fitxers per mantenir el codi net i manejable.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("L3BvbmcKICDilJzilIDilIAgc3JjCiAg4pSCICAg4pSc4pSA4pSAIG1haW4uY3BwCiAg4pSCICAg4pSc4pSA4pSAIGdhbWUuY3BwCiAg4pSCICAg4pSc4pSA4pSAIGdhbWUuaAogIOKUgiAgIOKUnOKUgOKUgCBwYWRkbGUuY3BwCiAg4pSCICAg4pSc4pSA4pSAIHBhZGRsZS5oCiAg4pSCICAg4pSc4pSA4pSAIGJhbGwuY3BwCiAg4pSCICAg4pSc4pSA4pSAIGJhbGwuaAogIOKUnOKUgOKUgCBzaGFkZXJzCiAg4pSCICAg4pSc4pSA4pSAIHZlcnRleF9zaGFkZXIuZ2xzbAogIOKUgiAgIOKUnOKUgOKUgCBmcmFnbWVudF9zaGFkZXIuZ2xzbAogIOKUnOKUgOKUgCB0ZXh0dXJlcwogIOKUgiAgIOKUnOKUgOKUgCBwYWRkbGUucG5nCiAg4pSCICAg4pSc4pSA4pSAIGJhbGwucG5nCiAg4pSc4pSA4pSAIENNYWtlTGlzdHMudHh0"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>/pong
  ├── src
  │   ├── main.cpp
  │   ├── game.cpp
  │   ├── game.h
  │   ├── paddle.cpp
  │   ├── paddle.h
  │   ├── ball.cpp
  │   ├── ball.h
  ├── shaders
  │   ├── vertex_shader.glsl
  │   ├── fragment_shader.glsl
  ├── textures
  │   ├── paddle.png
  │   ├── ball.png
  ├── CMakeLists.txt</pre></div><div class='content'></div><h2><ol start="3">
<li>Implementació del Joc</li>
</ol>
</h2>
<div class='content'><h4>3.1. <code>main.cpp</code></h4>
<p>Aquest fitxer contindrà el punt d'entrada del nostre programa i la configuració inicial d'OpenGL.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPEdML2dsZXcuaD4KI2luY2x1ZGUgPEdMRlcvZ2xmdzMuaD4KI2luY2x1ZGUgImdhbWUuaCIKCmludCBtYWluKCkgewogICAgLy8gSW5pY2lhbGl0emFyIEdMRlcKICAgIGlmICghZ2xmd0luaXQoKSkgewogICAgICAgIHJldHVybiAtMTsKICAgIH0KCiAgICAvLyBDcmVhciB1bmEgZmluZXN0cmEKICAgIEdMRld3aW5kb3cqIHdpbmRvdyA9IGdsZndDcmVhdGVXaW5kb3coODAwLCA2MDAsICJQb25nIiwgTlVMTCwgTlVMTCk7CiAgICBpZiAoIXdpbmRvdykgewogICAgICAgIGdsZndUZXJtaW5hdGUoKTsKICAgICAgICByZXR1cm4gLTE7CiAgICB9CgogICAgLy8gRXN0YWJsaXIgZWwgY29udGV4dCBkJ09wZW5HTAogICAgZ2xmd01ha2VDb250ZXh0Q3VycmVudCh3aW5kb3cpOwoKICAgIC8vIEluaWNpYWxpdHphciBHTEVXCiAgICBpZiAoZ2xld0luaXQoKSAhPSBHTEVXX09LKSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgfQoKICAgIC8vIENvbmZpZ3VyYXIgZWwgam9jCiAgICBHYW1lIGdhbWU7CiAgICBnYW1lLmluaXQoKTsKCiAgICAvLyBCdWNsZSBwcmluY2lwYWwKICAgIHdoaWxlICghZ2xmd1dpbmRvd1Nob3VsZENsb3NlKHdpbmRvdykpIHsKICAgICAgICAvLyBBY3R1YWxpdHphciBsJ2VzdGF0IGRlbCBqb2MKICAgICAgICBnYW1lLnVwZGF0ZSgpOwoKICAgICAgICAvLyBSZW5kZXJpdHphciBlbCBqb2MKICAgICAgICBnYW1lLnJlbmRlcigpOwoKICAgICAgICAvLyBJbnRlcmNhbnZpYXIgZWxzIGJ1ZmZlcnMKICAgICAgICBnbGZ3U3dhcEJ1ZmZlcnMod2luZG93KTsKCiAgICAgICAgLy8gUHJvY2Vzc2FyIGVscyBlc2RldmVuaW1lbnRzCiAgICAgICAgZ2xmd1BvbGxFdmVudHMoKTsKICAgIH0KCiAgICAvLyBBbGxpYmVyYXIgcmVjdXJzb3MKICAgIGdsZndUZXJtaW5hdGUoKTsKICAgIHJldHVybiAwOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;GL/glew.h&gt;
#include &lt;GLFW/glfw3.h&gt;
#include &quot;game.h&quot;

int main() {
    // Inicialitzar GLFW
    if (!glfwInit()) {
        return -1;
    }

    // Crear una finestra
    GLFWwindow* window = glfwCreateWindow(800, 600, &quot;Pong&quot;, NULL, NULL);
    if (!window) {
        glfwTerminate();
        return -1;
    }

    // Establir el context d'OpenGL
    glfwMakeContextCurrent(window);

    // Inicialitzar GLEW
    if (glewInit() != GLEW_OK) {
        return -1;
    }

    // Configurar el joc
    Game game;
    game.init();

    // Bucle principal
    while (!glfwWindowShouldClose(window)) {
        // Actualitzar l'estat del joc
        game.update();

        // Renderitzar el joc
        game.render();

        // Intercanviar els buffers
        glfwSwapBuffers(window);

        // Processar els esdeveniments
        glfwPollEvents();
    }

    // Alliberar recursos
    glfwTerminate();
    return 0;
}</pre></div><div class='content'><h4>3.2. <code>game.h</code> i <code>game.cpp</code></h4>
<p>Aquestes classes gestionaran la lògica principal del joc.</p>
<p><strong><code>game.h</code></strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2lmbmRlZiBHQU1FX0gKI2RlZmluZSBHQU1FX0gKCmNsYXNzIEdhbWUgewpwdWJsaWM6CiAgICB2b2lkIGluaXQoKTsKICAgIHZvaWQgdXBkYXRlKCk7CiAgICB2b2lkIHJlbmRlcigpOwp9OwoKI2VuZGlm"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#ifndef GAME_H
#define GAME_H

class Game {
public:
    void init();
    void update();
    void render();
};

#endif</pre></div><div class='content'><p><strong><code>game.cpp</code></strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgImdhbWUuaCIKI2luY2x1ZGUgInBhZGRsZS5oIgojaW5jbHVkZSAiYmFsbC5oIgoKLy8gT2JqZWN0ZXMgZGVsIGpvYwpQYWRkbGUgcGxheWVyMSwgcGxheWVyMjsKQmFsbCBiYWxsOwoKdm9pZCBHYW1lOjppbml0KCkgewogICAgLy8gSW5pY2lhbGl0emFyIG9iamVjdGVzIGRlbCBqb2MKICAgIHBsYXllcjEuaW5pdCg1MCwgMzAwKTsKICAgIHBsYXllcjIuaW5pdCg3NTAsIDMwMCk7CiAgICBiYWxsLmluaXQoNDAwLCAzMDApOwp9Cgp2b2lkIEdhbWU6OnVwZGF0ZSgpIHsKICAgIC8vIEFjdHVhbGl0emFyIGwnZXN0YXQgZGVsIGpvYwogICAgcGxheWVyMS51cGRhdGUoKTsKICAgIHBsYXllcjIudXBkYXRlKCk7CiAgICBiYWxsLnVwZGF0ZSgpOwp9Cgp2b2lkIEdhbWU6OnJlbmRlcigpIHsKICAgIC8vIEVzYm9ycmFyIGxhIHBhbnRhbGxhCiAgICBnbENsZWFyKEdMX0NPTE9SX0JVRkZFUl9CSVQpOwoKICAgIC8vIFJlbmRlcml0emFyIG9iamVjdGVzIGRlbCBqb2MKICAgIHBsYXllcjEucmVuZGVyKCk7CiAgICBwbGF5ZXIyLnJlbmRlcigpOwogICAgYmFsbC5yZW5kZXIoKTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &quot;game.h&quot;
#include &quot;paddle.h&quot;
#include &quot;ball.h&quot;

// Objectes del joc
Paddle player1, player2;
Ball ball;

void Game::init() {
    // Inicialitzar objectes del joc
    player1.init(50, 300);
    player2.init(750, 300);
    ball.init(400, 300);
}

void Game::update() {
    // Actualitzar l'estat del joc
    player1.update();
    player2.update();
    ball.update();
}

void Game::render() {
    // Esborrar la pantalla
    glClear(GL_COLOR_BUFFER_BIT);

    // Renderitzar objectes del joc
    player1.render();
    player2.render();
    ball.render();
}</pre></div><div class='content'><h4>3.3. <code>paddle.h</code> i <code>paddle.cpp</code></h4>
<p>Aquestes classes gestionaran les pales del joc.</p>
<p><strong><code>paddle.h</code></strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2lmbmRlZiBQQURETEVfSAojZGVmaW5lIFBBRERMRV9ICgpjbGFzcyBQYWRkbGUgewpwdWJsaWM6CiAgICB2b2lkIGluaXQoZmxvYXQgeCwgZmxvYXQgeSk7CiAgICB2b2lkIHVwZGF0ZSgpOwogICAgdm9pZCByZW5kZXIoKTsKcHJpdmF0ZToKICAgIGZsb2F0IHgsIHk7Cn07CgojZW5kaWY="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#ifndef PADDLE_H
#define PADDLE_H

class Paddle {
public:
    void init(float x, float y);
    void update();
    void render();
private:
    float x, y;
};

#endif</pre></div><div class='content'><p><strong><code>paddle.cpp</code></strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgInBhZGRsZS5oIgojaW5jbHVkZSA8R0wvZ2xldy5oPgoKdm9pZCBQYWRkbGU6OmluaXQoZmxvYXQgeCwgZmxvYXQgeSkgewogICAgdGhpcy0+eCA9IHg7CiAgICB0aGlzLT55ID0geTsKfQoKdm9pZCBQYWRkbGU6OnVwZGF0ZSgpIHsKICAgIC8vIEFjdHVhbGl0emFyIGxhIHBvc2ljacOzIGRlIGxhIHBhbGEKICAgIC8vIChBZmVnZWl4IGxhIGzDsmdpY2EgZGUgbW92aW1lbnQgYXF1w60pCn0KCnZvaWQgUGFkZGxlOjpyZW5kZXIoKSB7CiAgICAvLyBSZW5kZXJpdHphciBsYSBwYWxhCiAgICBnbEJlZ2luKEdMX1FVQURTKTsKICAgIGdsVmVydGV4MmYoeCAtIDEwLCB5IC0gNTApOwogICAgZ2xWZXJ0ZXgyZih4ICsgMTAsIHkgLSA1MCk7CiAgICBnbFZlcnRleDJmKHggKyAxMCwgeSArIDUwKTsKICAgIGdsVmVydGV4MmYoeCAtIDEwLCB5ICsgNTApOwogICAgZ2xFbmQoKTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &quot;paddle.h&quot;
#include &lt;GL/glew.h&gt;

void Paddle::init(float x, float y) {
    this-&gt;x = x;
    this-&gt;y = y;
}

void Paddle::update() {
    // Actualitzar la posici&oacute; de la pala
    // (Afegeix la l&ograve;gica de moviment aqu&iacute;)
}

void Paddle::render() {
    // Renderitzar la pala
    glBegin(GL_QUADS);
    glVertex2f(x - 10, y - 50);
    glVertex2f(x + 10, y - 50);
    glVertex2f(x + 10, y + 50);
    glVertex2f(x - 10, y + 50);
    glEnd();
}</pre></div><div class='content'><h4>3.4. <code>ball.h</code> i <code>ball.cpp</code></h4>
<p>Aquestes classes gestionaran la pilota del joc.</p>
<p><strong><code>ball.h</code></strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2lmbmRlZiBCQUxMX0gKI2RlZmluZSBCQUxMX0gKCmNsYXNzIEJhbGwgewpwdWJsaWM6CiAgICB2b2lkIGluaXQoZmxvYXQgeCwgZmxvYXQgeSk7CiAgICB2b2lkIHVwZGF0ZSgpOwogICAgdm9pZCByZW5kZXIoKTsKcHJpdmF0ZToKICAgIGZsb2F0IHgsIHk7CiAgICBmbG9hdCB2eCwgdnk7Cn07CgojZW5kaWY="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#ifndef BALL_H
#define BALL_H

class Ball {
public:
    void init(float x, float y);
    void update();
    void render();
private:
    float x, y;
    float vx, vy;
};

#endif</pre></div><div class='content'><p><strong><code>ball.cpp</code></strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgImJhbGwuaCIKI2luY2x1ZGUgPEdML2dsZXcuaD4KCnZvaWQgQmFsbDo6aW5pdChmbG9hdCB4LCBmbG9hdCB5KSB7CiAgICB0aGlzLT54ID0geDsKICAgIHRoaXMtPnkgPSB5OwogICAgdGhpcy0+dnggPSAwLjFmOwogICAgdGhpcy0+dnkgPSAwLjFmOwp9Cgp2b2lkIEJhbGw6OnVwZGF0ZSgpIHsKICAgIC8vIEFjdHVhbGl0emFyIGxhIHBvc2ljacOzIGRlIGxhIHBpbG90YQogICAgeCArPSB2eDsKICAgIHkgKz0gdnk7CgogICAgLy8gUmVib3RhciBlbiBsZXMgcGFyZXRzCiAgICBpZiAoeSA8PSAwIHx8IHkgPj0gNjAwKSB7CiAgICAgICAgdnkgPSAtdnk7CiAgICB9Cn0KCnZvaWQgQmFsbDo6cmVuZGVyKCkgewogICAgLy8gUmVuZGVyaXR6YXIgbGEgcGlsb3RhCiAgICBnbEJlZ2luKEdMX1FVQURTKTsKICAgIGdsVmVydGV4MmYoeCAtIDEwLCB5IC0gMTApOwogICAgZ2xWZXJ0ZXgyZih4ICsgMTAsIHkgLSAxMCk7CiAgICBnbFZlcnRleDJmKHggKyAxMCwgeSArIDEwKTsKICAgIGdsVmVydGV4MmYoeCAtIDEwLCB5ICsgMTApOwogICAgZ2xFbmQoKTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &quot;ball.h&quot;
#include &lt;GL/glew.h&gt;

void Ball::init(float x, float y) {
    this-&gt;x = x;
    this-&gt;y = y;
    this-&gt;vx = 0.1f;
    this-&gt;vy = 0.1f;
}

void Ball::update() {
    // Actualitzar la posici&oacute; de la pilota
    x += vx;
    y += vy;

    // Rebotar en les parets
    if (y &lt;= 0 || y &gt;= 600) {
        vy = -vy;
    }
}

void Ball::render() {
    // Renderitzar la pilota
    glBegin(GL_QUADS);
    glVertex2f(x - 10, y - 10);
    glVertex2f(x + 10, y - 10);
    glVertex2f(x + 10, y + 10);
    glVertex2f(x - 10, y + 10);
    glEnd();
}</pre></div><div class='content'></div><h2><ol start="4">
<li>Afegir Interacció amb l'Usuari</li>
</ol>
</h2>
<div class='content'><p>Per permetre als jugadors controlar les pales, afegirem la lògica de moviment en la funció <code>update</code> de la classe <code>Paddle</code>.</p>
<p><strong><code>paddle.cpp</code></strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgInBhZGRsZS5oIgojaW5jbHVkZSA8R0wvZ2xldy5oPgojaW5jbHVkZSA8R0xGVy9nbGZ3My5oPgoKdm9pZCBQYWRkbGU6OnVwZGF0ZSgpIHsKICAgIC8vIENvbnRyb2xhciBsYSBwYWxhIGFtYiBsZXMgdGVjbGVzCiAgICBpZiAoZ2xmd0dldEtleShnbGZ3R2V0Q3VycmVudENvbnRleHQoKSwgR0xGV19LRVlfVykgPT0gR0xGV19QUkVTUykgewogICAgICAgIHkgKz0gMC4xZjsKICAgIH0KICAgIGlmIChnbGZ3R2V0S2V5KGdsZndHZXRDdXJyZW50Q29udGV4dCgpLCBHTEZXX0tFWV9TKSA9PSBHTEZXX1BSRVNTKSB7CiAgICAgICAgeSAtPSAwLjFmOwogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &quot;paddle.h&quot;
#include &lt;GL/glew.h&gt;
#include &lt;GLFW/glfw3.h&gt;

void Paddle::update() {
    // Controlar la pala amb les tecles
    if (glfwGetKey(glfwGetCurrentContext(), GLFW_KEY_W) == GLFW_PRESS) {
        y += 0.1f;
    }
    if (glfwGetKey(glfwGetCurrentContext(), GLFW_KEY_S) == GLFW_PRESS) {
        y -= 0.1f;
    }
}</pre></div><div class='content'></div><h2><ol start="5">
<li>Afegir Col·lisions</li>
</ol>
</h2>
<div class='content'><p>Per fer el joc més interessant, afegirem col·lisions entre la pilota i les pales.</p>
<p><strong><code>ball.cpp</code></strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgImJhbGwuaCIKI2luY2x1ZGUgInBhZGRsZS5oIgojaW5jbHVkZSA8R0wvZ2xldy5oPgoKZXh0ZXJuIFBhZGRsZSBwbGF5ZXIxLCBwbGF5ZXIyOwoKdm9pZCBCYWxsOjp1cGRhdGUoKSB7CiAgICAvLyBBY3R1YWxpdHphciBsYSBwb3NpY2nDsyBkZSBsYSBwaWxvdGEKICAgIHggKz0gdng7CiAgICB5ICs9IHZ5OwoKICAgIC8vIFJlYm90YXIgZW4gbGVzIHBhcmV0cwogICAgaWYgKHkgPD0gMCB8fCB5ID49IDYwMCkgewogICAgICAgIHZ5ID0gLXZ5OwogICAgfQoKICAgIC8vIENvbMK3bGlzaW9ucyBhbWIgbGVzIHBhbGVzCiAgICBpZiAoKHggPD0gcGxheWVyMS54ICsgMTAgJiYgeSA+PSBwbGF5ZXIxLnkgLSA1MCAmJiB5IDw9IHBsYXllcjEueSArIDUwKSB8fAogICAgICAgICh4ID49IHBsYXllcjIueCAtIDEwICYmIHkgPj0gcGxheWVyMi55IC0gNTAgJiYgeSA8PSBwbGF5ZXIyLnkgKyA1MCkpIHsKICAgICAgICB2eCA9IC12eDsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &quot;ball.h&quot;
#include &quot;paddle.h&quot;
#include &lt;GL/glew.h&gt;

extern Paddle player1, player2;

void Ball::update() {
    // Actualitzar la posici&oacute; de la pilota
    x += vx;
    y += vy;

    // Rebotar en les parets
    if (y &lt;= 0 || y &gt;= 600) {
        vy = -vy;
    }

    // Col&middot;lisions amb les pales
    if ((x &lt;= player1.x + 10 &amp;&amp; y &gt;= player1.y - 50 &amp;&amp; y &lt;= player1.y + 50) ||
        (x &gt;= player2.x - 10 &amp;&amp; y &gt;= player2.y - 50 &amp;&amp; y &lt;= player2.y + 50)) {
        vx = -vx;
    }
}</pre></div><div class='content'></div><h2><ol start="6">
<li>Afegir Textures i Shaders</li>
</ol>
</h2>
<div class='content'><p>Per millorar l'aparença del joc, podem afegir textures i shaders. Això es pot fer seguint els passos descrits en els mòduls anteriors sobre textures i shaders.</p>
</div><h2><ol start="7">
<li>Conclusió</li>
</ol>
</h2>
<div class='content'><p>En aquest tema, hem creat un joc simple utilitzant OpenGL. Hem après a estructurar un projecte de joc, implementar la lògica del joc, gestionar la renderització i afegir interacció amb l'usuari. Aquest projecte ens ha permès aplicar molts dels conceptes apresos en els mòduls anteriors i ens ha proporcionat una base sòlida per a projectes més complexos en el futur.</p>
</div><h1><p>Exercicis Pràctics</p>
</h1>
<div class='content'><ol>
<li><strong>Afegir Puntuació</strong>: Implementa un sistema de puntuació que incrementi cada vegada que un jugador falla en colpejar la pilota.</li>
<li><strong>Millorar la Lògica de Moviment</strong>: Ajusta la velocitat de la pilota i les pales per fer el joc més equilibrat.</li>
<li><strong>Afegir Sons</strong>: Integra efectes de so per a col·lisions i punts utilitzant una llibreria d'àudio com OpenAL.</li>
</ol>
</div><h1><p>Solucions dels Exercicis</p>
</h1>
<h2><ol>
<li>Afegir Puntuació</li>
</ol>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gZ2FtZS5oCmNsYXNzIEdhbWUgewpwdWJsaWM6CiAgICB2b2lkIGluaXQoKTsKICAgIHZvaWQgdXBkYXRlKCk7CiAgICB2b2lkIHJlbmRlcigpOwpwcml2YXRlOgogICAgaW50IHNjb3JlMSwgc2NvcmUyOwp9OwoKLy8gZ2FtZS5jcHAKdm9pZCBHYW1lOjppbml0KCkgewogICAgc2NvcmUxID0gMDsKICAgIHNjb3JlMiA9IDA7CiAgICAvLyBJbmljaWFsaXR6YXIgb2JqZWN0ZXMgZGVsIGpvYwogICAgcGxheWVyMS5pbml0KDUwLCAzMDApOwogICAgcGxheWVyMi5pbml0KDc1MCwgMzAwKTsKICAgIGJhbGwuaW5pdCg0MDAsIDMwMCk7Cn0KCnZvaWQgR2FtZTo6dXBkYXRlKCkgewogICAgLy8gQWN0dWFsaXR6YXIgbCdlc3RhdCBkZWwgam9jCiAgICBwbGF5ZXIxLnVwZGF0ZSgpOwogICAgcGxheWVyMi51cGRhdGUoKTsKICAgIGJhbGwudXBkYXRlKCk7CgogICAgLy8gQ29tcHJvdmFyIHNpIGxhIHBpbG90YSBzdXJ0IGRlIGxhIHBhbnRhbGxhCiAgICBpZiAoYmFsbC54IDw9IDApIHsKICAgICAgICBzY29yZTIrKzsKICAgICAgICBiYWxsLmluaXQoNDAwLCAzMDApOwogICAgfSBlbHNlIGlmIChiYWxsLnggPj0gODAwKSB7CiAgICAgICAgc2NvcmUxKys7CiAgICAgICAgYmFsbC5pbml0KDQwMCwgMzAwKTsKICAgIH0KfQoKdm9pZCBHYW1lOjpyZW5kZXIoKSB7CiAgICAvLyBFc2JvcnJhciBsYSBwYW50YWxsYQogICAgZ2xDbGVhcihHTF9DT0xPUl9CVUZGRVJfQklUKTsKCiAgICAvLyBSZW5kZXJpdHphciBvYmplY3RlcyBkZWwgam9jCiAgICBwbGF5ZXIxLnJlbmRlcigpOwogICAgcGxheWVyMi5yZW5kZXIoKTsKICAgIGJhbGwucmVuZGVyKCk7CgogICAgLy8gUmVuZGVyaXR6YXIgbGEgcHVudHVhY2nDswogICAgLy8gKEFmZWdlaXggZWwgY29kaSBwZXIgcmVuZGVyaXR6YXIgZWwgdGV4dCBhcXXDrSkKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// game.h
class Game {
public:
    void init();
    void update();
    void render();
private:
    int score1, score2;
};

// game.cpp
void Game::init() {
    score1 = 0;
    score2 = 0;
    // Inicialitzar objectes del joc
    player1.init(50, 300);
    player2.init(750, 300);
    ball.init(400, 300);
}

void Game::update() {
    // Actualitzar l'estat del joc
    player1.update();
    player2.update();
    ball.update();

    // Comprovar si la pilota surt de la pantalla
    if (ball.x &lt;= 0) {
        score2++;
        ball.init(400, 300);
    } else if (ball.x &gt;= 800) {
        score1++;
        ball.init(400, 300);
    }
}

void Game::render() {
    // Esborrar la pantalla
    glClear(GL_COLOR_BUFFER_BIT);

    // Renderitzar objectes del joc
    player1.render();
    player2.render();
    ball.render();

    // Renderitzar la puntuaci&oacute;
    // (Afegeix el codi per renderitzar el text aqu&iacute;)
}</pre></div><div class='content'></div><h2><ol start="2">
<li>Millorar la Lògica de Moviment</li>
</ol>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gcGFkZGxlLmNwcAp2b2lkIFBhZGRsZTo6dXBkYXRlKCkgewogICAgLy8gQ29udHJvbGFyIGxhIHBhbGEgYW1iIGxlcyB0ZWNsZXMKICAgIGlmIChnbGZ3R2V0S2V5KGdsZndHZXRDdXJyZW50Q29udGV4dCgpLCBHTEZXX0tFWV9XKSA9PSBHTEZXX1BSRVNTKSB7CiAgICAgICAgeSArPSAwLjJmOwogICAgfQogICAgaWYgKGdsZndHZXRLZXkoZ2xmd0dldEN1cnJlbnRDb250ZXh0KCksIEdMRldfS0VZX1MpID09IEdMRldfUFJFU1MpIHsKICAgICAgICB5IC09IDAuMmY7CiAgICB9Cn0KCi8vIGJhbGwuY3BwCnZvaWQgQmFsbDo6aW5pdChmbG9hdCB4LCBmbG9hdCB5KSB7CiAgICB0aGlzLT54ID0geDsKICAgIHRoaXMtPnkgPSB5OwogICAgdGhpcy0+dnggPSAwLjE1ZjsKICAgIHRoaXMtPnZ5ID0gMC4xNWY7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// paddle.cpp
void Paddle::update() {
    // Controlar la pala amb les tecles
    if (glfwGetKey(glfwGetCurrentContext(), GLFW_KEY_W) == GLFW_PRESS) {
        y += 0.2f;
    }
    if (glfwGetKey(glfwGetCurrentContext(), GLFW_KEY_S) == GLFW_PRESS) {
        y -= 0.2f;
    }
}

// ball.cpp
void Ball::init(float x, float y) {
    this-&gt;x = x;
    this-&gt;y = y;
    this-&gt;vx = 0.15f;
    this-&gt;vy = 0.15f;
}</pre></div><div class='content'></div><h2><ol start="3">
<li>Afegir Sons</li>
</ol>
</h2>
<div class='content'><p>Per afegir sons, pots utilitzar una llibreria com OpenAL. Aquí tens un exemple bàsic de com integrar OpenAL per reproduir un so de col·lisió.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPEFML2FsLmg+CiNpbmNsdWRlIDxBTC9hbGMuaD4KCi8vIEluaWNpYWxpdHphciBPcGVuQUwKQUxDZGV2aWNlKiBkZXZpY2UgPSBhbGNPcGVuRGV2aWNlKE5VTEwpOwpBTENjb250ZXh0KiBjb250ZXh0ID0gYWxjQ3JlYXRlQ29udGV4dChkZXZpY2UsIE5VTEwpOwphbGNNYWtlQ29udGV4dEN1cnJlbnQoY29udGV4dCk7CgovLyBDYXJyZWdhciBlbCBzbwpBTHVpbnQgYnVmZmVyOwphbEdlbkJ1ZmZlcnMoMSwgJmJ1ZmZlcik7Ci8vIChDYXJyZWdhIGVsIGZpdHhlciBkZSBzbyBlbiBlbCBidWZmZXIgYXF1w60pCgovLyBDcmVhciB1bmEgZm9udCBkZSBzbwpBTHVpbnQgc291cmNlOwphbEdlblNvdXJjZXMoMSwgJnNvdXJjZSk7CmFsU291cmNlaShzb3VyY2UsIEFMX0JVRkZFUiwgYnVmZmVyKTsKCi8vIFJlcHJvZHVpciBlbCBzbyBlbiBjb2zCt2xpc2nDswppZiAoKHggPD0gcGxheWVyMS54ICsgMTAgJiYgeSA+PSBwbGF5ZXIxLnkgLSA1MCAmJiB5IDw9IHBsYXllcjEueSArIDUwKSB8fAogICAgKHggPj0gcGxheWVyMi54IC0gMTAgJiYgeSA+PSBwbGF5ZXIyLnkgLSA1MCAmJiB5IDw9IHBsYXllcjIueSArIDUwKSkgewogICAgdnggPSAtdng7CiAgICBhbFNvdXJjZVBsYXkoc291cmNlKTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;AL/al.h&gt;
#include &lt;AL/alc.h&gt;

// Inicialitzar OpenAL
ALCdevice* device = alcOpenDevice(NULL);
ALCcontext* context = alcCreateContext(device, NULL);
alcMakeContextCurrent(context);

// Carregar el so
ALuint buffer;
alGenBuffers(1, &amp;buffer);
// (Carrega el fitxer de so en el buffer aqu&iacute;)

// Crear una font de so
ALuint source;
alGenSources(1, &amp;source);
alSourcei(source, AL_BUFFER, buffer);

// Reproduir el so en col&middot;lisi&oacute;
if ((x &lt;= player1.x + 10 &amp;&amp; y &gt;= player1.y - 50 &amp;&amp; y &lt;= player1.y + 50) ||
    (x &gt;= player2.x - 10 &amp;&amp; y &gt;= player2.y - 50 &amp;&amp; y &lt;= player2.y + 50)) {
    vx = -vx;
    alSourcePlay(source);
}</pre></div><div class='content'><p>Amb aquests exercicis i solucions, hauràs millorat el teu joc de pong i hauràs après a aplicar conceptes avançats d'OpenGL en un projecte pràctic.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-04-opengl-extensions' title="Extensions d'OpenGL">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='08-02-3d-model-viewer' title="Crear un Visualitzador de Models 3D">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
