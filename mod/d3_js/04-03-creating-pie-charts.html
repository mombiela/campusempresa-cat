<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creant Gràfics de Pastís</title>

    <link rel="alternate" href="https://campusempresa.com/mod/d3_js/04-03-creating-pie-charts" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/d3_js/04-03-creating-pie-charts" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/d3_js/04-03-creating-pie-charts" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/d3_js/04-03-creating-pie-charts" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/d3_js/04-03-creating-pie-charts" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
<br>
			<cite>Construint la societat d'avui i del demà</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Llenguatges de Programació</a>
				 					<a href="/categ/frameworks">Frameworks i Llibreries</a>
				 					<a href="/categ/tech-tools">Eines Tècniques</a>
				 					<a href="/categ/foundations">Fonaments Teòrics</a>
				 					<a href="/categ/soft-skills">Habilitats Socials</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-02-creating-line-charts' title="Creant Gràfics de Línies">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Creant Gràfics de Pastís</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-04-creating-scatter-plots' title="Creant Gràfics de Dispersió">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem a crear gràfics de pastís utilitzant D3.js. Els gràfics de pastís són una manera visualment atractiva de mostrar dades categòriques en forma de sectors d'un cercle. Cada sector representa una categoria i la seva mida és proporcional al valor de la categoria.</p>
</div><h1><ol>
<li>Introducció als Gràfics de Pastís</li>
</ol>
</h1>
<div class='content'></div><h2><p>Què és un Gràfic de Pastís?</p>
</h2>
<div class='content'><p>Un gràfic de pastís és una representació circular de dades on cada sector del cercle representa una part del total. És útil per mostrar la proporció de diferents categories en un conjunt de dades.</p>
</div><h2><p>Components Clau:</p>
</h2>
<div class='content'><ul>
<li><strong>Arc</strong>: Cada sector del gràfic de pastís.</li>
<li><strong>Radi</strong>: La distància des del centre del cercle fins a la vora.</li>
<li><strong>Angles</strong>: Determinen la mida de cada sector.</li>
</ul>
</div><h1><ol start="2">
<li>Configurant l'Entorn</li>
</ol>
</h1>
<div class='content'><p>Abans de començar a crear el nostre gràfic de pastís, assegurem-nos que tenim el nostre entorn configurat correctament. Necessitarem un fitxer HTML amb un element <code>&lt;svg&gt;</code> on dibuixarem el nostre gràfic, i un fitxer JavaScript on escriurem el codi D3.js.</p>
</div><h2><p>Exemple de Fitxer HTML:</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImNhIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+R3LDoGZpYyBkZSBQYXN0w61zIGFtYiBEMy5qczwvdGl0bGU+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9kM2pzLm9yZy9kMy52Ny5taW4uanMiPjwvc2NyaXB0Pgo8L2hlYWQ+Cjxib2R5PgogICAgPHN2ZyB3aWR0aD0iNTAwIiBoZWlnaHQ9IjUwMCI+PC9zdmc+CiAgICA8c2NyaXB0IHNyYz0ic2NyaXB0LmpzIj48L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ca&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Gr&agrave;fic de Past&iacute;s amb D3.js&lt;/title&gt;
    &lt;script src=&quot;https://d3js.org/d3.v7.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;svg width=&quot;500&quot; height=&quot;500&quot;&gt;&lt;/svg&gt;
    &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h2><p>Exemple de Fitxer JavaScript (script.js):</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ29kaSBEMy5qcyBwZXIgY3JlYXIgZWwgZ3LDoGZpYyBkZSBwYXN0w61z"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Codi D3.js per crear el gr&agrave;fic de past&iacute;s</pre></div><div class='content'></div><h1><ol start="3">
<li>Preparant les Dades</li>
</ol>
</h1>
<div class='content'><p>Per crear un gràfic de pastís, necessitem un conjunt de dades. Les dades poden ser un array d'objectes on cada objecte representa una categoria i el seu valor.</p>
</div><h2><p>Exemple de Dades:</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZGFkZXMgPSBbCiAgICB7IGNhdGVnb3JpYTogJ0EnLCB2YWxvcjogMzAgfSwKICAgIHsgY2F0ZWdvcmlhOiAnQicsIHZhbG9yOiA3MCB9LAogICAgeyBjYXRlZ29yaWE6ICdDJywgdmFsb3I6IDQ1IH0sCiAgICB7IGNhdGVnb3JpYTogJ0QnLCB2YWxvcjogODUgfSwKICAgIHsgY2F0ZWdvcmlhOiAnRScsIHZhbG9yOiA1MCB9Cl07"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const dades = [
    { categoria: 'A', valor: 30 },
    { categoria: 'B', valor: 70 },
    { categoria: 'C', valor: 45 },
    { categoria: 'D', valor: 85 },
    { categoria: 'E', valor: 50 }
];</pre></div><div class='content'></div><h1><ol start="4">
<li>Creant el Gràfic de Pastís</li>
</ol>
</h1>
<div class='content'></div><h2><p>Passos per Crear el Gràfic:</p>
</h2>
<div class='content'><ol>
<li><strong>Definir les Dimensions i el Radi</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgYW1wbGFkYSA9IDUwMDsKY29uc3QgYWzDp2FkYSA9IDUwMDsKY29uc3QgcmFkaSA9IE1hdGgubWluKGFtcGxhZGEsIGFsw6dhZGEpIC8gMjs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const amplada = 500;
const al&ccedil;ada = 500;
const radi = Math.min(amplada, al&ccedil;ada) / 2;</pre></div><div class='content'><ol start="2">
<li><strong>Crear un Grup per al Gràfic de Pastís</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3Qgc3ZnID0gZDMuc2VsZWN0KCJzdmciKQogICAgLmF0dHIoIndpZHRoIiwgYW1wbGFkYSkKICAgIC5hdHRyKCJoZWlnaHQiLCBhbMOnYWRhKQogICAgLmFwcGVuZCgiZyIpCiAgICAuYXR0cigidHJhbnNmb3JtIiwgYHRyYW5zbGF0ZSgke2FtcGxhZGEgLyAyfSwgJHthbMOnYWRhIC8gMn0pYCk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const svg = d3.select(&quot;svg&quot;)
    .attr(&quot;width&quot;, amplada)
    .attr(&quot;height&quot;, al&ccedil;ada)
    .append(&quot;g&quot;)
    .attr(&quot;transform&quot;, `translate(${amplada / 2}, ${al&ccedil;ada / 2})`);</pre></div><div class='content'><ol start="3">
<li><strong>Crear una Escala de Colors</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgY29sb3IgPSBkMy5zY2FsZU9yZGluYWwoKQogICAgLmRvbWFpbihkYWRlcy5tYXAoZCA9PiBkLmNhdGVnb3JpYSkpCiAgICAucmFuZ2UoZDMuc2NoZW1lQ2F0ZWdvcnkxMCk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const color = d3.scaleOrdinal()
    .domain(dades.map(d =&gt; d.categoria))
    .range(d3.schemeCategory10);</pre></div><div class='content'><ol start="4">
<li><strong>Generar els Arcs</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgYXJjID0gZDMuYXJjKCkKICAgIC5pbm5lclJhZGl1cygwKQogICAgLm91dGVyUmFkaXVzKHJhZGkpOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const arc = d3.arc()
    .innerRadius(0)
    .outerRadius(radi);</pre></div><div class='content'><ol start="5">
<li><strong>Generar el Layout del Pastís</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgcGllID0gZDMucGllKCkKICAgIC52YWx1ZShkID0+IGQudmFsb3IpOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const pie = d3.pie()
    .value(d =&gt; d.valor);</pre></div><div class='content'><ol start="6">
<li><strong>Dibuixar els Arcs</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgYXJjcyA9IHN2Zy5zZWxlY3RBbGwoImFyYyIpCiAgICAuZGF0YShwaWUoZGFkZXMpKQogICAgLmVudGVyKCkKICAgIC5hcHBlbmQoImciKQogICAgLmF0dHIoImNsYXNzIiwgImFyYyIpOwoKYXJjcy5hcHBlbmQoInBhdGgiKQogICAgLmF0dHIoImQiLCBhcmMpCiAgICAuYXR0cigiZmlsbCIsIGQgPT4gY29sb3IoZC5kYXRhLmNhdGVnb3JpYSkpOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const arcs = svg.selectAll(&quot;arc&quot;)
    .data(pie(dades))
    .enter()
    .append(&quot;g&quot;)
    .attr(&quot;class&quot;, &quot;arc&quot;);

arcs.append(&quot;path&quot;)
    .attr(&quot;d&quot;, arc)
    .attr(&quot;fill&quot;, d =&gt; color(d.data.categoria));</pre></div><div class='content'></div><h2><p>Codi Complet:</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZGFkZXMgPSBbCiAgICB7IGNhdGVnb3JpYTogJ0EnLCB2YWxvcjogMzAgfSwKICAgIHsgY2F0ZWdvcmlhOiAnQicsIHZhbG9yOiA3MCB9LAogICAgeyBjYXRlZ29yaWE6ICdDJywgdmFsb3I6IDQ1IH0sCiAgICB7IGNhdGVnb3JpYTogJ0QnLCB2YWxvcjogODUgfSwKICAgIHsgY2F0ZWdvcmlhOiAnRScsIHZhbG9yOiA1MCB9Cl07Cgpjb25zdCBhbXBsYWRhID0gNTAwOwpjb25zdCBhbMOnYWRhID0gNTAwOwpjb25zdCByYWRpID0gTWF0aC5taW4oYW1wbGFkYSwgYWzDp2FkYSkgLyAyOwoKY29uc3Qgc3ZnID0gZDMuc2VsZWN0KCJzdmciKQogICAgLmF0dHIoIndpZHRoIiwgYW1wbGFkYSkKICAgIC5hdHRyKCJoZWlnaHQiLCBhbMOnYWRhKQogICAgLmFwcGVuZCgiZyIpCiAgICAuYXR0cigidHJhbnNmb3JtIiwgYHRyYW5zbGF0ZSgke2FtcGxhZGEgLyAyfSwgJHthbMOnYWRhIC8gMn0pYCk7Cgpjb25zdCBjb2xvciA9IGQzLnNjYWxlT3JkaW5hbCgpCiAgICAuZG9tYWluKGRhZGVzLm1hcChkID0+IGQuY2F0ZWdvcmlhKSkKICAgIC5yYW5nZShkMy5zY2hlbWVDYXRlZ29yeTEwKTsKCmNvbnN0IGFyYyA9IGQzLmFyYygpCiAgICAuaW5uZXJSYWRpdXMoMCkKICAgIC5vdXRlclJhZGl1cyhyYWRpKTsKCmNvbnN0IHBpZSA9IGQzLnBpZSgpCiAgICAudmFsdWUoZCA9PiBkLnZhbG9yKTsKCmNvbnN0IGFyY3MgPSBzdmcuc2VsZWN0QWxsKCJhcmMiKQogICAgLmRhdGEocGllKGRhZGVzKSkKICAgIC5lbnRlcigpCiAgICAuYXBwZW5kKCJnIikKICAgIC5hdHRyKCJjbGFzcyIsICJhcmMiKTsKCmFyY3MuYXBwZW5kKCJwYXRoIikKICAgIC5hdHRyKCJkIiwgYXJjKQogICAgLmF0dHIoImZpbGwiLCBkID0+IGNvbG9yKGQuZGF0YS5jYXRlZ29yaWEpKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const dades = [
    { categoria: 'A', valor: 30 },
    { categoria: 'B', valor: 70 },
    { categoria: 'C', valor: 45 },
    { categoria: 'D', valor: 85 },
    { categoria: 'E', valor: 50 }
];

const amplada = 500;
const al&ccedil;ada = 500;
const radi = Math.min(amplada, al&ccedil;ada) / 2;

const svg = d3.select(&quot;svg&quot;)
    .attr(&quot;width&quot;, amplada)
    .attr(&quot;height&quot;, al&ccedil;ada)
    .append(&quot;g&quot;)
    .attr(&quot;transform&quot;, `translate(${amplada / 2}, ${al&ccedil;ada / 2})`);

const color = d3.scaleOrdinal()
    .domain(dades.map(d =&gt; d.categoria))
    .range(d3.schemeCategory10);

const arc = d3.arc()
    .innerRadius(0)
    .outerRadius(radi);

const pie = d3.pie()
    .value(d =&gt; d.valor);

const arcs = svg.selectAll(&quot;arc&quot;)
    .data(pie(dades))
    .enter()
    .append(&quot;g&quot;)
    .attr(&quot;class&quot;, &quot;arc&quot;);

arcs.append(&quot;path&quot;)
    .attr(&quot;d&quot;, arc)
    .attr(&quot;fill&quot;, d =&gt; color(d.data.categoria));</pre></div><div class='content'></div><h1><ol start="5">
<li>Exercicis Pràctics</li>
</ol>
</h1>
<div class='content'></div><h2><p>Exercici 1:</p>
</h2>
<div class='content'><p>Modifica el codi per afegir etiquetes amb els noms de les categories a cada sector del gràfic de pastís.</p>
</div><h2><p>Solució:</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXJjcy5hcHBlbmQoInRleHQiKQogICAgLmF0dHIoInRyYW5zZm9ybSIsIGQgPT4gYHRyYW5zbGF0ZSgke2FyYy5jZW50cm9pZChkKX0pYCkKICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKQogICAgLnRleHQoZCA9PiBkLmRhdGEuY2F0ZWdvcmlhKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>arcs.append(&quot;text&quot;)
    .attr(&quot;transform&quot;, d =&gt; `translate(${arc.centroid(d)})`)
    .attr(&quot;text-anchor&quot;, &quot;middle&quot;)
    .text(d =&gt; d.data.categoria);</pre></div><div class='content'></div><h2><p>Exercici 2:</p>
</h2>
<div class='content'><p>Canvia els colors dels sectors utilitzant una escala de colors diferent.</p>
</div><h2><p>Solució:</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgY29sb3IgPSBkMy5zY2FsZU9yZGluYWwoKQogICAgLmRvbWFpbihkYWRlcy5tYXAoZCA9PiBkLmNhdGVnb3JpYSkpCiAgICAucmFuZ2UoZDMuc2NoZW1lU2V0Myk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const color = d3.scaleOrdinal()
    .domain(dades.map(d =&gt; d.categoria))
    .range(d3.schemeSet3);</pre></div><div class='content'></div><h1><ol start="6">
<li>Resum</li>
</ol>
</h1>
<div class='content'><p>En aquest tema, hem après a crear gràfics de pastís utilitzant D3.js. Hem cobert els passos des de la configuració de l'entorn fins a la creació i personalització del gràfic. Els gràfics de pastís són una eina poderosa per visualitzar dades categòriques i amb D3.js podem crear visualitzacions dinàmiques i interactives.</p>
<p>En el següent tema, explorarem com crear gràfics de dispersió amb D3.js.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-02-creating-line-charts' title="Creant Gràfics de Línies">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-04-creating-scatter-plots' title="Creant Gràfics de Dispersió">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
