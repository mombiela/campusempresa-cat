<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestió de la informació de la xarxa</title>

    <link rel="alternate" href="https://campusempresa.com/mod/apache_cordova/02-04-handling-network-information" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/apache_cordova/02-04-handling-network-information" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/apache_cordova/02-04-handling-network-information" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/apache_cordova/02-04-handling-network-information" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/apache_cordova/02-04-handling-network-information" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='02-03-accessing-device-storage' title="Accés a l'emmagatzematge del dispositiu">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Gestió de la informació de la xarxa</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='02-05-interacting-with-camera' title="Interacció amb la càmera">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com gestionar la informació de la xarxa en aplicacions desenvolupades amb Apache Cordova. Això inclou la detecció de l'estat de la connexió a Internet, la identificació del tipus de connexió i la gestió de canvis en l'estat de la xarxa.</p>
</div><h1><p>Objectius d'aprenentatge</p>
</h1>
<div class='content'><ul>
<li>Comprendre com utilitzar el plugin <code>cordova-plugin-network-information</code>.</li>
<li>Detectar l'estat de la connexió a Internet.</li>
<li>Identificar el tipus de connexió de xarxa.</li>
<li>Gestionar els canvis en l'estat de la xarxa.</li>
</ul>
</div><h1><ol>
<li>Instal·lació del plugin <code>cordova-plugin-network-information</code></li>
</ol>
</h1>
<div class='content'><p>Per començar, necessitem instal·lar el plugin <code>cordova-plugin-network-information</code>, que ens permetrà accedir a la informació de la xarxa del dispositiu.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29yZG92YSBwbHVnaW4gYWRkIGNvcmRvdmEtcGx1Z2luLW5ldHdvcmstaW5mb3JtYXRpb24="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>cordova plugin add cordova-plugin-network-information</pre></div><div class='content'></div><h1><ol start="2">
<li>Detectar l'estat de la connexió a Internet</li>
</ol>
</h1>
<div class='content'><p>El plugin <code>cordova-plugin-network-information</code> proporciona una manera senzilla de detectar si el dispositiu està connectat a Internet.</p>
</div><h2><p>Exemple de codi</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZGV2aWNlcmVhZHkiLCBvbkRldmljZVJlYWR5LCBmYWxzZSk7CgpmdW5jdGlvbiBvbkRldmljZVJlYWR5KCkgewogICAgdmFyIG5ldHdvcmtTdGF0ZSA9IG5hdmlnYXRvci5jb25uZWN0aW9uLnR5cGU7CgogICAgaWYgKG5ldHdvcmtTdGF0ZSA9PT0gQ29ubmVjdGlvbi5OT05FKSB7CiAgICAgICAgYWxlcnQoIk5vIGhpIGhhIGNvbm5leGnDsyBhIEludGVybmV0LiIpOwogICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgiRXN0w6BzIGNvbm5lY3RhdCBhIEludGVybmV0LiIpOwogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener(&quot;deviceready&quot;, onDeviceReady, false);

function onDeviceReady() {
    var networkState = navigator.connection.type;

    if (networkState === Connection.NONE) {
        alert(&quot;No hi ha connexi&oacute; a Internet.&quot;);
    } else {
        alert(&quot;Est&agrave;s connectat a Internet.&quot;);
    }
}</pre></div><div class='content'></div><h2><p>Explicació del codi</p>
</h2>
<div class='content'><ol>
<li><strong><code>document.addEventListener(&quot;deviceready&quot;, onDeviceReady, false);</code></strong>: Esperem que el dispositiu estigui llest abans d'executar el codi.</li>
<li><strong><code>navigator.connection.type</code></strong>: Obtenim el tipus de connexió de xarxa actual.</li>
<li><strong><code>if (networkState === Connection.NONE)</code></strong>: Comprovem si no hi ha connexió a Internet.</li>
<li><strong><code>alert(&quot;No hi ha connexió a Internet.&quot;);</code></strong>: Mostrem un missatge si no hi ha connexió.</li>
<li><strong><code>alert(&quot;Estàs connectat a Internet.&quot;);</code></strong>: Mostrem un missatge si hi ha connexió.</li>
</ol>
</div><h1><ol start="3">
<li>Identificar el tipus de connexió de xarxa</li>
</ol>
</h1>
<div class='content'><p>El plugin també ens permet identificar el tipus de connexió de xarxa, com ara Wi-Fi, 4G, 3G, etc.</p>
</div><h2><p>Exemple de codi</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZGV2aWNlcmVhZHkiLCBvbkRldmljZVJlYWR5LCBmYWxzZSk7CgpmdW5jdGlvbiBvbkRldmljZVJlYWR5KCkgewogICAgdmFyIG5ldHdvcmtTdGF0ZSA9IG5hdmlnYXRvci5jb25uZWN0aW9uLnR5cGU7CgogICAgdmFyIHN0YXRlcyA9IHt9OwogICAgc3RhdGVzW0Nvbm5lY3Rpb24uVU5LTk9XTl0gID0gJ0Nvbm5leGnDsyBkZXNjb25lZ3VkYSc7CiAgICBzdGF0ZXNbQ29ubmVjdGlvbi5FVEhFUk5FVF0gPSAnQ29ubmV4acOzIEV0aGVybmV0JzsKICAgIHN0YXRlc1tDb25uZWN0aW9uLldJRkldICAgICA9ICdDb25uZXhpw7MgV2lGaSc7CiAgICBzdGF0ZXNbQ29ubmVjdGlvbi5DRUxMXzJHXSAgPSAnQ29ubmV4acOzIDJHJzsKICAgIHN0YXRlc1tDb25uZWN0aW9uLkNFTExfM0ddICA9ICdDb25uZXhpw7MgM0cnOwogICAgc3RhdGVzW0Nvbm5lY3Rpb24uQ0VMTF80R10gID0gJ0Nvbm5leGnDsyA0Ryc7CiAgICBzdGF0ZXNbQ29ubmVjdGlvbi5DRUxMXSAgICAgPSAnQ29ubmV4acOzIGNlbMK3bHVsYXIgZ2Vuw6hyaWNhJzsKICAgIHN0YXRlc1tDb25uZWN0aW9uLk5PTkVdICAgICA9ICdTZW5zZSBjb25uZXhpw7MnOwoKICAgIGFsZXJ0KCdUaXB1cyBkZSBjb25uZXhpw7M6ICcgKyBzdGF0ZXNbbmV0d29ya1N0YXRlXSk7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener(&quot;deviceready&quot;, onDeviceReady, false);

function onDeviceReady() {
    var networkState = navigator.connection.type;

    var states = {};
    states[Connection.UNKNOWN]  = 'Connexi&oacute; desconeguda';
    states[Connection.ETHERNET] = 'Connexi&oacute; Ethernet';
    states[Connection.WIFI]     = 'Connexi&oacute; WiFi';
    states[Connection.CELL_2G]  = 'Connexi&oacute; 2G';
    states[Connection.CELL_3G]  = 'Connexi&oacute; 3G';
    states[Connection.CELL_4G]  = 'Connexi&oacute; 4G';
    states[Connection.CELL]     = 'Connexi&oacute; cel&middot;lular gen&egrave;rica';
    states[Connection.NONE]     = 'Sense connexi&oacute;';

    alert('Tipus de connexi&oacute;: ' + states[networkState]);
}</pre></div><div class='content'></div><h2><p>Explicació del codi</p>
</h2>
<div class='content'><ol>
<li><strong><code>var states = {};</code></strong>: Creem un objecte per mapar els tipus de connexió a descripcions humanes.</li>
<li><strong><code>states[Connection.WIFI] = 'Connexió WiFi';</code></strong>: Assignem una descripció per a cada tipus de connexió.</li>
<li><strong><code>alert('Tipus de connexió: ' + states[networkState]);</code></strong>: Mostrem el tipus de connexió actual.</li>
</ol>
</div><h1><ol start="4">
<li>Gestionar els canvis en l'estat de la xarxa</li>
</ol>
</h1>
<div class='content'><p>Podem escoltar els canvis en l'estat de la xarxa i respondre adequadament quan el dispositiu es connecta o desconnecta d'Internet.</p>
</div><h2><p>Exemple de codi</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZGV2aWNlcmVhZHkiLCBvbkRldmljZVJlYWR5LCBmYWxzZSk7CgpmdW5jdGlvbiBvbkRldmljZVJlYWR5KCkgewogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigib2ZmbGluZSIsIG9uT2ZmbGluZSwgZmFsc2UpOwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigib25saW5lIiwgb25PbmxpbmUsIGZhbHNlKTsKfQoKZnVuY3Rpb24gb25PZmZsaW5lKCkgewogICAgYWxlcnQoIkhhcyBwZXJkdXQgbGEgY29ubmV4acOzIGEgSW50ZXJuZXQuIik7Cn0KCmZ1bmN0aW9uIG9uT25saW5lKCkgewogICAgYWxlcnQoIkhhcyByZWN1cGVyYXQgbGEgY29ubmV4acOzIGEgSW50ZXJuZXQuIik7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener(&quot;deviceready&quot;, onDeviceReady, false);

function onDeviceReady() {
    document.addEventListener(&quot;offline&quot;, onOffline, false);
    document.addEventListener(&quot;online&quot;, onOnline, false);
}

function onOffline() {
    alert(&quot;Has perdut la connexi&oacute; a Internet.&quot;);
}

function onOnline() {
    alert(&quot;Has recuperat la connexi&oacute; a Internet.&quot;);
}</pre></div><div class='content'></div><h2><p>Explicació del codi</p>
</h2>
<div class='content'><ol>
<li><strong><code>document.addEventListener(&quot;offline&quot;, onOffline, false);</code></strong>: Escoltem l'esdeveniment <code>offline</code> per detectar quan el dispositiu perd la connexió a Internet.</li>
<li><strong><code>document.addEventListener(&quot;online&quot;, onOnline, false);</code></strong>: Escoltem l'esdeveniment <code>online</code> per detectar quan el dispositiu recupera la connexió a Internet.</li>
<li><strong><code>function onOffline() { alert(&quot;Has perdut la connexió a Internet.&quot;); }</code></strong>: Mostrem un missatge quan el dispositiu perd la connexió.</li>
<li><strong><code>function onOnline() { alert(&quot;Has recuperat la connexió a Internet.&quot;); }</code></strong>: Mostrem un missatge quan el dispositiu recupera la connexió.</li>
</ol>
</div><h1><p>Exercicis pràctics</p>
</h1>
<div class='content'></div><h2><p>Exercici 1: Comprovar la connexió a Internet</p>
</h2>
<div class='content'><p>Crea una aplicació Cordova que mostri un missatge indicant si el dispositiu està connectat a Internet o no quan l'aplicació s'inicia.</p>
</div><h2><p>Solució</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZGV2aWNlcmVhZHkiLCBvbkRldmljZVJlYWR5LCBmYWxzZSk7CgpmdW5jdGlvbiBvbkRldmljZVJlYWR5KCkgewogICAgdmFyIG5ldHdvcmtTdGF0ZSA9IG5hdmlnYXRvci5jb25uZWN0aW9uLnR5cGU7CgogICAgaWYgKG5ldHdvcmtTdGF0ZSA9PT0gQ29ubmVjdGlvbi5OT05FKSB7CiAgICAgICAgYWxlcnQoIk5vIGhpIGhhIGNvbm5leGnDsyBhIEludGVybmV0LiIpOwogICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgiRXN0w6BzIGNvbm5lY3RhdCBhIEludGVybmV0LiIpOwogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener(&quot;deviceready&quot;, onDeviceReady, false);

function onDeviceReady() {
    var networkState = navigator.connection.type;

    if (networkState === Connection.NONE) {
        alert(&quot;No hi ha connexi&oacute; a Internet.&quot;);
    } else {
        alert(&quot;Est&agrave;s connectat a Internet.&quot;);
    }
}</pre></div><div class='content'></div><h2><p>Exercici 2: Mostrar el tipus de connexió</p>
</h2>
<div class='content'><p>Modifica l'aplicació anterior per mostrar el tipus de connexió de xarxa (Wi-Fi, 4G, etc.) en lloc de només indicar si hi ha connexió o no.</p>
</div><h2><p>Solució</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZGV2aWNlcmVhZHkiLCBvbkRldmljZVJlYWR5LCBmYWxzZSk7CgpmdW5jdGlvbiBvbkRldmljZVJlYWR5KCkgewogICAgdmFyIG5ldHdvcmtTdGF0ZSA9IG5hdmlnYXRvci5jb25uZWN0aW9uLnR5cGU7CgogICAgdmFyIHN0YXRlcyA9IHt9OwogICAgc3RhdGVzW0Nvbm5lY3Rpb24uVU5LTk9XTl0gID0gJ0Nvbm5leGnDsyBkZXNjb25lZ3VkYSc7CiAgICBzdGF0ZXNbQ29ubmVjdGlvbi5FVEhFUk5FVF0gPSAnQ29ubmV4acOzIEV0aGVybmV0JzsKICAgIHN0YXRlc1tDb25uZWN0aW9uLldJRkldICAgICA9ICdDb25uZXhpw7MgV2lGaSc7CiAgICBzdGF0ZXNbQ29ubmVjdGlvbi5DRUxMXzJHXSAgPSAnQ29ubmV4acOzIDJHJzsKICAgIHN0YXRlc1tDb25uZWN0aW9uLkNFTExfM0ddICA9ICdDb25uZXhpw7MgM0cnOwogICAgc3RhdGVzW0Nvbm5lY3Rpb24uQ0VMTF80R10gID0gJ0Nvbm5leGnDsyA0Ryc7CiAgICBzdGF0ZXNbQ29ubmVjdGlvbi5DRUxMXSAgICAgPSAnQ29ubmV4acOzIGNlbMK3bHVsYXIgZ2Vuw6hyaWNhJzsKICAgIHN0YXRlc1tDb25uZWN0aW9uLk5PTkVdICAgICA9ICdTZW5zZSBjb25uZXhpw7MnOwoKICAgIGFsZXJ0KCdUaXB1cyBkZSBjb25uZXhpw7M6ICcgKyBzdGF0ZXNbbmV0d29ya1N0YXRlXSk7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener(&quot;deviceready&quot;, onDeviceReady, false);

function onDeviceReady() {
    var networkState = navigator.connection.type;

    var states = {};
    states[Connection.UNKNOWN]  = 'Connexi&oacute; desconeguda';
    states[Connection.ETHERNET] = 'Connexi&oacute; Ethernet';
    states[Connection.WIFI]     = 'Connexi&oacute; WiFi';
    states[Connection.CELL_2G]  = 'Connexi&oacute; 2G';
    states[Connection.CELL_3G]  = 'Connexi&oacute; 3G';
    states[Connection.CELL_4G]  = 'Connexi&oacute; 4G';
    states[Connection.CELL]     = 'Connexi&oacute; cel&middot;lular gen&egrave;rica';
    states[Connection.NONE]     = 'Sense connexi&oacute;';

    alert('Tipus de connexi&oacute;: ' + states[networkState]);
}</pre></div><div class='content'></div><h2><p>Exercici 3: Gestionar els canvis en l'estat de la xarxa</p>
</h2>
<div class='content'><p>Crea una aplicació Cordova que mostri un missatge quan el dispositiu es connecta o desconnecta d'Internet.</p>
</div><h2><p>Solució</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZGV2aWNlcmVhZHkiLCBvbkRldmljZVJlYWR5LCBmYWxzZSk7CgpmdW5jdGlvbiBvbkRldmljZVJlYWR5KCkgewogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigib2ZmbGluZSIsIG9uT2ZmbGluZSwgZmFsc2UpOwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigib25saW5lIiwgb25PbmxpbmUsIGZhbHNlKTsKfQoKZnVuY3Rpb24gb25PZmZsaW5lKCkgewogICAgYWxlcnQoIkhhcyBwZXJkdXQgbGEgY29ubmV4acOzIGEgSW50ZXJuZXQuIik7Cn0KCmZ1bmN0aW9uIG9uT25saW5lKCkgewogICAgYWxlcnQoIkhhcyByZWN1cGVyYXQgbGEgY29ubmV4acOzIGEgSW50ZXJuZXQuIik7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener(&quot;deviceready&quot;, onDeviceReady, false);

function onDeviceReady() {
    document.addEventListener(&quot;offline&quot;, onOffline, false);
    document.addEventListener(&quot;online&quot;, onOnline, false);
}

function onOffline() {
    alert(&quot;Has perdut la connexi&oacute; a Internet.&quot;);
}

function onOnline() {
    alert(&quot;Has recuperat la connexi&oacute; a Internet.&quot;);
}</pre></div><div class='content'></div><h1><p>Resum</p>
</h1>
<div class='content'><p>En aquest tema, hem après com gestionar la informació de la xarxa en aplicacions Cordova utilitzant el plugin <code>cordova-plugin-network-information</code>. Hem vist com detectar l'estat de la connexió a Internet, identificar el tipus de connexió i gestionar els canvis en l'estat de la xarxa. Aquests coneixements són essencials per crear aplicacions mòbils robustes que puguin gestionar adequadament la connectivitat de xarxa.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='02-03-accessing-device-storage' title="Accés a l'emmagatzematge del dispositiu">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='02-05-interacting-with-camera' title="Interacció amb la càmera">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
