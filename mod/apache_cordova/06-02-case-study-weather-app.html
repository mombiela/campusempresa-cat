<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudi de cas: Construcció d'una aplicació del temps</title>

    <link rel="alternate" href="https://campusempresa.com/mod/apache_cordova/06-02-case-study-weather-app" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/apache_cordova/06-02-case-study-weather-app" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/apache_cordova/06-02-case-study-weather-app" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/apache_cordova/06-02-case-study-weather-app" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/apache_cordova/06-02-case-study-weather-app" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-01-case-study-todo-app' title="Estudi de cas: Construcció d'una aplicació de llista de tasques">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Estudi de cas: Construcció d'una aplicació del temps</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-03-case-study-social-media-app' title="Estudi de cas: Construcció d'una aplicació de xarxes socials">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest estudi de cas, aprendrem a construir una aplicació del temps utilitzant Apache Cordova. Aquesta aplicació permetrà als usuaris veure la informació meteorològica actual de la seva ubicació. Explorarem com utilitzar APIs externes per obtenir dades meteorològiques i com mostrar aquestes dades a l'usuari de manera atractiva i funcional.</p>
</div><h1><p>Objectius del Mòdul</p>
</h1>
<div class='content'><ul>
<li>Integrar una API externa per obtenir dades meteorològiques.</li>
<li>Utilitzar plugins de Cordova per accedir a la ubicació del dispositiu.</li>
<li>Construir una interfície d'usuari responsiva per mostrar la informació del temps.</li>
<li>Implementar la gestió d'errors i la depuració.</li>
</ul>
</div><h1><p>Requisits Previs</p>
</h1>
<div class='content'><ul>
<li>Coneixements bàsics d'Apache Cordova.</li>
<li>Experiència amb HTML, CSS i JavaScript.</li>
<li>Familiaritat amb l'ús d'APIs RESTful.</li>
</ul>
</div><h1><p>Passos per Construir l'Aplicació del Temps</p>
</h1>
<div class='content'></div><h2><ol>
<li>Configuració del Projecte</li>
</ol>
</h2>
<div class='content'><h4>Creació del Projecte Cordova</h4>
<p>Primer, crearem un nou projecte Cordova:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29yZG92YSBjcmVhdGUgV2VhdGhlckFwcCBjb20uZXhhbXBsZS53ZWF0aGVyYXBwIFdlYXRoZXJBcHAKY2QgV2VhdGhlckFwcApjb3Jkb3ZhIHBsYXRmb3JtIGFkZCBhbmRyb2lkIGlvcw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>cordova create WeatherApp com.example.weatherapp WeatherApp
cd WeatherApp
cordova platform add android ios</pre></div><div class='content'><h4>Instal·lació de Plugins Necessaris</h4>
<p>Instal·larem els plugins necessaris per accedir a la ubicació del dispositiu i fer sol·licituds HTTP:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29yZG92YSBwbHVnaW4gYWRkIGNvcmRvdmEtcGx1Z2luLWdlb2xvY2F0aW9uCmNvcmRvdmEgcGx1Z2luIGFkZCBjb3Jkb3ZhLXBsdWdpbi13aGl0ZWxpc3Q="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>cordova plugin add cordova-plugin-geolocation
cordova plugin add cordova-plugin-whitelist</pre></div><div class='content'></div><h2><ol start="2">
<li>Obtenir la Ubicació del Dispositiu</li>
</ol>
</h2>
<div class='content'><p>Utilitzarem el plugin <code>cordova-plugin-geolocation</code> per obtenir la ubicació actual del dispositiu. Afegirem el següent codi a <code>index.html</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDx0aXRsZT5XZWF0aGVyIEFwcDwvdGl0bGU+CiAgICA8c2NyaXB0IHNyYz0iY29yZG92YS5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0ianMvaW5kZXguanMiPjwvc2NyaXB0Pgo8L2hlYWQ+Cjxib2R5PgogICAgPGRpdiBpZD0id2VhdGhlci1pbmZvIj4KICAgICAgICA8aDE+V2VhdGhlciBJbmZvcm1hdGlvbjwvaDE+CiAgICAgICAgPHAgaWQ9ImxvY2F0aW9uIj5GZXRjaGluZyBsb2NhdGlvbi4uLjwvcD4KICAgICAgICA8cCBpZD0idGVtcGVyYXR1cmUiPjwvcD4KICAgICAgICA8cCBpZD0iZGVzY3JpcHRpb24iPjwvcD4KICAgIDwvZGl2Pgo8L2JvZHk+CjwvaHRtbD4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Weather App&lt;/title&gt;
    &lt;script src=&quot;cordova.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;js/index.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id=&quot;weather-info&quot;&gt;
        &lt;h1&gt;Weather Information&lt;/h1&gt;
        &lt;p id=&quot;location&quot;&gt;Fetching location...&lt;/p&gt;
        &lt;p id=&quot;temperature&quot;&gt;&lt;/p&gt;
        &lt;p id=&quot;description&quot;&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'><p>I a <code>js/index.js</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlcmVhZHknLCBmdW5jdGlvbigpIHsKICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24ob25TdWNjZXNzLCBvbkVycm9yKTsKCiAgICBmdW5jdGlvbiBvblN1Y2Nlc3MocG9zaXRpb24pIHsKICAgICAgICB2YXIgbGF0ID0gcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlOwogICAgICAgIHZhciBsb24gPSBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhdGlvbicpLmlubmVySFRNTCA9ICdMYXRpdHVkZTogJyArIGxhdCArICc8YnI+TG9uZ2l0dWRlOiAnICsgbG9uOwogICAgICAgIGdldFdlYXRoZXIobGF0LCBsb24pOwogICAgfQoKICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyb3IpIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9jYXRpb24nKS5pbm5lckhUTUwgPSAnRXJyb3I6ICcgKyBlcnJvci5tZXNzYWdlOwogICAgfQp9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener('deviceready', function() {
    navigator.geolocation.getCurrentPosition(onSuccess, onError);

    function onSuccess(position) {
        var lat = position.coords.latitude;
        var lon = position.coords.longitude;
        document.getElementById('location').innerHTML = 'Latitude: ' + lat + '&lt;br&gt;Longitude: ' + lon;
        getWeather(lat, lon);
    }

    function onError(error) {
        document.getElementById('location').innerHTML = 'Error: ' + error.message;
    }
});</pre></div><div class='content'></div><h2><ol start="3">
<li>Integració amb l'API Meteorològica</li>
</ol>
</h2>
<div class='content'><p>Utilitzarem una API meteorològica com OpenWeatherMap per obtenir les dades del temps. Necessitarem una clau API, que podem obtenir registrant-nos a <a href="https://openweathermap.org/api">OpenWeatherMap</a>.</p>
<p>Afegirem una funció <code>getWeather</code> a <code>js/index.js</code> per fer la sol·licitud a l'API:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZ2V0V2VhdGhlcihsYXQsIGxvbikgewogICAgdmFyIGFwaUtleSA9ICdZT1VSX0FQSV9LRVknOwogICAgdmFyIHVybCA9IGBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvd2VhdGhlcj9sYXQ9JHtsYXR9Jmxvbj0ke2xvbn0mdW5pdHM9bWV0cmljJmFwcGlkPSR7YXBpS2V5fWA7CgogICAgZmV0Y2godXJsKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAudGhlbihkYXRhID0+IHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBlcmF0dXJlJykuaW5uZXJIVE1MID0gJ1RlbXBlcmF0dXJlOiAnICsgZGF0YS5tYWluLnRlbXAgKyAnwrBDJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uJykuaW5uZXJIVE1MID0gJ0Rlc2NyaXB0aW9uOiAnICsgZGF0YS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBlcmF0dXJlJykuaW5uZXJIVE1MID0gJ0Vycm9yIGZldGNoaW5nIHdlYXRoZXIgZGF0YSc7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTsKICAgICAgICB9KTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function getWeather(lat, lon) {
    var apiKey = 'YOUR_API_KEY';
    var url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&amp;lon=${lon}&amp;units=metric&amp;appid=${apiKey}`;

    fetch(url)
        .then(response =&gt; response.json())
        .then(data =&gt; {
            document.getElementById('temperature').innerHTML = 'Temperature: ' + data.main.temp + '&deg;C';
            document.getElementById('description').innerHTML = 'Description: ' + data.weather[0].description;
        })
        .catch(error =&gt; {
            document.getElementById('temperature').innerHTML = 'Error fetching weather data';
            console.error('Error:', error);
        });
}</pre></div><div class='content'></div><h2><ol start="4">
<li>Construcció d'una Interfície d'Usuari Responsiva</li>
</ol>
</h2>
<div class='content'><p>Afegirem estils CSS per fer que la nostra aplicació sigui visualment atractiva i responsiva:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ym9keSB7CiAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICBtYXJnaW46IDA7CiAgICBwYWRkaW5nOiAwOwogICAgYmFja2dyb3VuZDogI2YwZjBmMDsKfQoKI3dlYXRoZXItaW5mbyB7CiAgICBiYWNrZ3JvdW5kOiAjZmZmOwogICAgcGFkZGluZzogMjBweDsKICAgIG1hcmdpbjogNTBweCBhdXRvOwogICAgd2lkdGg6IDgwJTsKICAgIG1heC13aWR0aDogNDAwcHg7CiAgICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuMSk7Cn0KCmgxIHsKICAgIGZvbnQtc2l6ZTogMjRweDsKICAgIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0KCnAgewogICAgZm9udC1zaXplOiAxOHB4OwogICAgbWFyZ2luOiAxMHB4IDA7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>body {
    font-family: Arial, sans-serif;
    text-align: center;
    margin: 0;
    padding: 0;
    background: #f0f0f0;
}

#weather-info {
    background: #fff;
    padding: 20px;
    margin: 50px auto;
    width: 80%;
    max-width: 400px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

h1 {
    font-size: 24px;
    margin-bottom: 20px;
}

p {
    font-size: 18px;
    margin: 10px 0;
}</pre></div><div class='content'></div><h2><ol start="5">
<li>Gestió d'Errors i Depuració</li>
</ol>
</h2>
<div class='content'><p>És important gestionar els errors que poden sorgir durant l'obtenció de la ubicació o les dades meteorològiques. Ja hem afegit gestió d'errors bàsica a les funcions <code>onError</code> i <code>catch</code> de les promeses.</p>
</div><h2><p>Exercici Pràctic</p>
</h2>
<div class='content'><p><strong>Exercici:</strong> Millora l'aplicació per mostrar una icona del temps basada en la descripció meteorològica.</p>
<p><strong>Pista:</strong> OpenWeatherMap proporciona icones que es poden utilitzar. Pots obtenir la URL de la icona des de <code>data.weather[0].icon</code> i afegir-la a la interfície d'usuari.</p>
</div><h2><p>Solució de l'Exercici</p>
</h2>
<div class='content'><p>Afegirem un element <code>img</code> a <code>index.html</code> per mostrar la icona del temps:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PHAgaWQ9Imljb24iPjwvcD4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;p id=&quot;icon&quot;&gt;&lt;/p&gt;</pre></div><div class='content'><p>I modificarem la funció <code>getWeather</code> a <code>js/index.js</code> per actualitzar la icona:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZ2V0V2VhdGhlcihsYXQsIGxvbikgewogICAgdmFyIGFwaUtleSA9ICdZT1VSX0FQSV9LRVknOwogICAgdmFyIHVybCA9IGBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvd2VhdGhlcj9sYXQ9JHtsYXR9Jmxvbj0ke2xvbn0mdW5pdHM9bWV0cmljJmFwcGlkPSR7YXBpS2V5fWA7CgogICAgZmV0Y2godXJsKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAudGhlbihkYXRhID0+IHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RlbXBlcmF0dXJlJykuaW5uZXJIVE1MID0gJ1RlbXBlcmF0dXJlOiAnICsgZGF0YS5tYWluLnRlbXAgKyAnwrBDJzsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uJykuaW5uZXJIVE1MID0gJ0Rlc2NyaXB0aW9uOiAnICsgZGF0YS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uOwogICAgICAgICAgICB2YXIgaWNvblVybCA9IGBodHRwOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93LyR7ZGF0YS53ZWF0aGVyWzBdLmljb259LnBuZ2A7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpY29uJykuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSIke2ljb25Vcmx9IiBhbHQ9IldlYXRoZXIgaWNvbiI+YDsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZW1wZXJhdHVyZScpLmlubmVySFRNTCA9ICdFcnJvciBmZXRjaGluZyB3ZWF0aGVyIGRhdGEnOwogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7CiAgICAgICAgfSk7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function getWeather(lat, lon) {
    var apiKey = 'YOUR_API_KEY';
    var url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&amp;lon=${lon}&amp;units=metric&amp;appid=${apiKey}`;

    fetch(url)
        .then(response =&gt; response.json())
        .then(data =&gt; {
            document.getElementById('temperature').innerHTML = 'Temperature: ' + data.main.temp + '&deg;C';
            document.getElementById('description').innerHTML = 'Description: ' + data.weather[0].description;
            var iconUrl = `http://openweathermap.org/img/w/${data.weather[0].icon}.png`;
            document.getElementById('icon').innerHTML = `&lt;img src=&quot;${iconUrl}&quot; alt=&quot;Weather icon&quot;&gt;`;
        })
        .catch(error =&gt; {
            document.getElementById('temperature').innerHTML = 'Error fetching weather data';
            console.error('Error:', error);
        });
}</pre></div><div class='content'></div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>En aquest estudi de cas, hem après a construir una aplicació del temps utilitzant Apache Cordova. Hem integrat una API externa per obtenir dades meteorològiques, hem utilitzat plugins de Cordova per accedir a la ubicació del dispositiu i hem construït una interfície d'usuari responsiva. També hem implementat la gestió d'errors per assegurar-nos que l'aplicació funcioni correctament en diferents situacions.</p>
<p>Aquest projecte ens ha proporcionat una visió pràctica de com utilitzar Apache Cordova per desenvolupar aplicacions mòbils que interactuen amb serveis externs i utilitzen les capacitats del dispositiu.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-01-case-study-todo-app' title="Estudi de cas: Construcció d'una aplicació de llista de tasques">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-03-case-study-social-media-app' title="Estudi de cas: Construcció d'una aplicació de xarxes socials">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
