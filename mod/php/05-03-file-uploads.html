<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>Pujades de Fitxers</title>

    <link rel="alternate" href="https://campusempresa.com/mod/php/05-03-file-uploads" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/php/05-03-file-uploads" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/php/05-03-file-uploads" hreflang="en" />
    
	<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->
	<link href="/css/bootstrap/bootstrap.css?v=1" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.2b8e6213f8.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "ca";
  		var CATEGORY = "languages";
  		var MOD_NAME = "php";
  		var TEMA_NAME = "05-03";
  		var TYPE = "mod";
  		var PATH = "mod/php/05-03-file-uploads";
  		var IS_INDEX = false;
  		var DEVELOP = sessionStorage.getItem("DEVELOP") == "true";
  		  		var ALL_PAGES_MOD = ["01-01-what-is-php","01-02-setting-up-environment","01-03-first-php-script","01-04-php-syntax-variables","01-05-data-types","02-01-conditional-statements","02-02-loops","02-03-switch-statements","02-04-include-require","03-01-defining-calling-functions","03-02-function-parameters-return-values","03-03-variable-scope","03-04-anonymous-functions-closures","04-01-indexed-arrays","04-02-associative-arrays","04-03-multidimensional-arrays","04-04-array-functions","05-01-handling-form-data","05-02-form-validation","05-03-file-uploads","05-04-form-security","06-01-reading-writing-files","06-02-file-handling-functions","06-03-file-permissions","06-04-directory-functions","07-01-introduction-oop","07-02-classes-objects","07-03-properties-methods","07-04-inheritance","07-05-interfaces-abstract-classes","07-06-traits","08-01-introduction-databases","08-02-connecting-mysql","08-03-crud-operations","08-04-using-pdo","08-05-database-security","09-01-error-exception-handling","09-02-sessions-cookies","09-03-regular-expressions","09-04-json-xml","09-05-web-services","10-01-introduction-frameworks","10-02-getting-started-laravel","10-03-mvc-architecture","10-04-best-practices","10-05-testing-debugging","11-01-project-planning-setup","11-02-creating-ui","11-03-implementing-backend","11-04-integrating-database","11-05-testing-deployment"];
  		  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<!-- <script type="text/javascript" src="/js/main.js"></script> -->
  	<script type="module" src="/js/app.198aab099d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/mod/php/05-03-file-uploads" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/php/05-03-file-uploads" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Tot el coneixement al teu abast</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my_modules" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Els meus cursos</b></i>
</a>
<a href="/end_modules" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalitzats             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" style="display:none;" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="php">
		<a  href="#" class="text-secondary d-none" data-read-mod="php" data-read-unit="05-03" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar com a llegit
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="php" data-unread-unit="05-03" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar com a no llegit
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contingut del curs
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-02-form-validation' title="Validació de Formularis" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-02-form-validation' title="Validació de Formularis" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Pujades de Fitxers</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-04-form-security' title="Seguretat en Formularis" class="py-2 px-3 btn btn-primary"
				data-read-mod="php" data-read-unit="05-03">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-04-form-security' title="Seguretat en Formularis" class="py-2 px-3 btn btn-primary" 
				data-read-mod="php" data-read-unit="05-03">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com gestionar la pujada de fitxers en PHP. La pujada de fitxers és una funcionalitat comuna en moltes aplicacions web, com ara formularis de registre, aplicacions de gestió de continguts, etc. Veurem com configurar un formulari per pujar fitxers, com processar la pujada al servidor i com gestionar errors comuns.</p>
</div><h1><ol>
<li>Configuració del Formulari HTML</li>
</ol></h1>
<div class='content'><p>Per començar, necessitem un formulari HTML que permeti als usuaris seleccionar un fitxer per pujar. El formulari ha de tenir l'atribut <code>enctype</code> establert a <code>multipart/form-data</code> i utilitzar el mètode <code>POST</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImNhIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+UHVqYWRhIGRlIEZpdHhlcnM8L3RpdGxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGZvcm0gYWN0aW9uPSJ1cGxvYWQucGhwIiBtZXRob2Q9InBvc3QiIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiPgogICAgICAgIDxsYWJlbCBmb3I9ImZpbGUiPlNlbGVjY2lvbmEgdW4gZml0eGVyOjwvbGFiZWw+CiAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIG5hbWU9ImZpbGUiIGlkPSJmaWxlIj4KICAgICAgICA8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iUHVqYXIgRml0eGVyIj4KICAgIDwvZm9ybT4KPC9ib2R5Pgo8L2h0bWw+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ca&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Pujada de Fitxers&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action=&quot;upload.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
        &lt;label for=&quot;file&quot;&gt;Selecciona un fitxer:&lt;/label&gt;
        &lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot;&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Pujar Fitxer&quot;&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h1><ol start="2">
<li>Processament de la Pujada al Servidor</li>
</ol></h1>
<div class='content'><p>Quan l'usuari envia el formulari, el fitxer seleccionat es puja al servidor. PHP proporciona una superglobal anomenada <code>$_FILES</code> per accedir a la informació del fitxer pujat.</p>
</div><h2>Exemple de Codi PHP per Processar la Pujada</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09ICdQT1NUJykgewogICAgLy8gQ29tcHJvdmFyIHNpIGhpIGhhIGVycm9ycyBlbiBsYSBwdWphZGEKICAgIGlmICgkX0ZJTEVTWydmaWxlJ11bJ2Vycm9yJ10gPT0gVVBMT0FEX0VSUl9PSykgewogICAgICAgICR0YXJnZXRfZGlyID0gInVwbG9hZHMvIjsKICAgICAgICAkdGFyZ2V0X2ZpbGUgPSAkdGFyZ2V0X2RpciAuIGJhc2VuYW1lKCRfRklMRVNbImZpbGUiXVsibmFtZSJdKTsKICAgICAgICAKICAgICAgICAvLyBDb21wcm92YXIgc2kgZWwgZml0eGVyIGphIGV4aXN0ZWl4CiAgICAgICAgaWYgKGZpbGVfZXhpc3RzKCR0YXJnZXRfZmlsZSkpIHsKICAgICAgICAgICAgZWNobyAiSG8gc2VudGltLCBlbCBmaXR4ZXIgamEgZXhpc3RlaXguIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBJbnRlbnRhciBtb3VyZSBlbCBmaXR4ZXIgcHVqYXQgYSBsYSBjYXJwZXRhIGRlIGRlc3RpbmFjacOzCiAgICAgICAgICAgIGlmIChtb3ZlX3VwbG9hZGVkX2ZpbGUoJF9GSUxFU1siZmlsZSJdWyJ0bXBfbmFtZSJdLCAkdGFyZ2V0X2ZpbGUpKSB7CiAgICAgICAgICAgICAgICBlY2hvICJFbCBmaXR4ZXIgIiAuIGh0bWxzcGVjaWFsY2hhcnMoYmFzZW5hbWUoJF9GSUxFU1siZmlsZSJdWyJuYW1lIl0pKSAuICIgcydoYSBwdWphdCBjb3JyZWN0YW1lbnQuIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGVjaG8gIkhvIHNlbnRpbSwgaGkgaGEgaGFndXQgdW4gZXJyb3IgZW4gcHVqYXIgZWwgZml0eGVyLiI7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIGVjaG8gIkhvIHNlbnRpbSwgaGkgaGEgaGFndXQgdW4gZXJyb3IgZW4gcHVqYXIgZWwgZml0eGVyLiI7CiAgICB9Cn0KPz4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    // Comprovar si hi ha errors en la pujada
    if ($_FILES['file']['error'] == UPLOAD_ERR_OK) {
        $target_dir = &quot;uploads/&quot;;
        $target_file = $target_dir . basename($_FILES[&quot;file&quot;][&quot;name&quot;]);
        
        // Comprovar si el fitxer ja existeix
        if (file_exists($target_file)) {
            echo &quot;Ho sentim, el fitxer ja existeix.&quot;;
        } else {
            // Intentar moure el fitxer pujat a la carpeta de destinaci&oacute;
            if (move_uploaded_file($_FILES[&quot;file&quot;][&quot;tmp_name&quot;], $target_file)) {
                echo &quot;El fitxer &quot; . htmlspecialchars(basename($_FILES[&quot;file&quot;][&quot;name&quot;])) . &quot; s'ha pujat correctament.&quot;;
            } else {
                echo &quot;Ho sentim, hi ha hagut un error en pujar el fitxer.&quot;;
            }
        }
    } else {
        echo &quot;Ho sentim, hi ha hagut un error en pujar el fitxer.&quot;;
    }
}
?&gt;</pre></div><div class='content'></div><h2>Explicació del Codi</h2>
<div class='content'><ol>
<li><strong>Comprovació del Mètode de Sol·licitud</strong>: Primer, comprovem si el mètode de sol·licitud és <code>POST</code> per assegurar-nos que el formulari s'ha enviat.</li>
<li><strong>Comprovació d'Errors</strong>: Utilitzem <code>$_FILES['file']['error']</code> per comprovar si hi ha hagut algun error durant la pujada.</li>
<li><strong>Definició del Directori de Destinació</strong>: Definim el directori on es desarà el fitxer pujat.</li>
<li><strong>Comprovació de l'Existència del Fitxer</strong>: Comprovem si el fitxer ja existeix al directori de destinació.</li>
<li><strong>Moure el Fitxer</strong>: Utilitzem <code>move_uploaded_file</code> per moure el fitxer des de la ubicació temporal al directori de destinació.</li>
</ol>
</div><h1><ol start="3">
<li>Gestió d'Errors Comuns</li>
</ol></h1>
<div class='content'></div><h2>Errors de Pujada</h2>
<div class='content'><p>PHP defineix diverses constants per gestionar errors de pujada:</p>
<table>
<thead>
<tr>
<th>Constant</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>UPLOAD_ERR_OK</code></td>
<td>No hi ha hagut cap error, el fitxer s'ha pujat correctament.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_INI_SIZE</code></td>
<td>El fitxer pujat excedeix la directiva <code>upload_max_filesize</code> a <code>php.ini</code>.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_FORM_SIZE</code></td>
<td>El fitxer pujat excedeix la directiva <code>MAX_FILE_SIZE</code> especificada al formulari HTML.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_PARTIAL</code></td>
<td>El fitxer només s'ha pujat parcialment.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_NO_FILE</code></td>
<td>No s'ha pujat cap fitxer.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_NO_TMP_DIR</code></td>
<td>Falta una carpeta temporal.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_CANT_WRITE</code></td>
<td>No s'ha pogut escriure el fitxer al disc.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_EXTENSION</code></td>
<td>Una extensió de PHP ha aturat la pujada del fitxer.</td>
</tr>
</tbody>
</table>
</div><h2>Exemple de Gestió d'Errors</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09ICdQT1NUJykgewogICAgJGVycm9yID0gJF9GSUxFU1snZmlsZSddWydlcnJvciddOwogICAgaWYgKCRlcnJvciA9PSBVUExPQURfRVJSX09LKSB7CiAgICAgICAgLy8gUHJvY2Vzc2FyIGxhIHB1amFkYQogICAgfSBlbHNlIHsKICAgICAgICBzd2l0Y2ggKCRlcnJvcikgewogICAgICAgICAgICBjYXNlIFVQTE9BRF9FUlJfSU5JX1NJWkU6CiAgICAgICAgICAgIGNhc2UgVVBMT0FEX0VSUl9GT1JNX1NJWkU6CiAgICAgICAgICAgICAgICBlY2hvICJFbCBmaXR4ZXIgw6lzIG1hc3NhIGdyYW4uIjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIFVQTE9BRF9FUlJfUEFSVElBTDoKICAgICAgICAgICAgICAgIGVjaG8gIkVsIGZpdHhlciBub23DqXMgcydoYSBwdWphdCBwYXJjaWFsbWVudC4iOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgVVBMT0FEX0VSUl9OT19GSUxFOgogICAgICAgICAgICAgICAgZWNobyAiTm8gcydoYSBwdWphdCBjYXAgZml0eGVyLiI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBVUExPQURfRVJSX05PX1RNUF9ESVI6CiAgICAgICAgICAgICAgICBlY2hvICJGYWx0YSB1bmEgY2FycGV0YSB0ZW1wb3JhbC4iOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgVVBMT0FEX0VSUl9DQU5UX1dSSVRFOgogICAgICAgICAgICAgICAgZWNobyAiTm8gcydoYSBwb2d1dCBlc2NyaXVyZSBlbCBmaXR4ZXIgYWwgZGlzYy4iOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgVVBMT0FEX0VSUl9FWFRFTlNJT046CiAgICAgICAgICAgICAgICBlY2hvICJVbmEgZXh0ZW5zacOzIGRlIFBIUCBoYSBhdHVyYXQgbGEgcHVqYWRhIGRlbCBmaXR4ZXIuIjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgZWNobyAiRXJyb3IgZGVzY29uZWd1dC4iOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQp9Cj8+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $error = $_FILES['file']['error'];
    if ($error == UPLOAD_ERR_OK) {
        // Processar la pujada
    } else {
        switch ($error) {
            case UPLOAD_ERR_INI_SIZE:
            case UPLOAD_ERR_FORM_SIZE:
                echo &quot;El fitxer &eacute;s massa gran.&quot;;
                break;
            case UPLOAD_ERR_PARTIAL:
                echo &quot;El fitxer nom&eacute;s s'ha pujat parcialment.&quot;;
                break;
            case UPLOAD_ERR_NO_FILE:
                echo &quot;No s'ha pujat cap fitxer.&quot;;
                break;
            case UPLOAD_ERR_NO_TMP_DIR:
                echo &quot;Falta una carpeta temporal.&quot;;
                break;
            case UPLOAD_ERR_CANT_WRITE:
                echo &quot;No s'ha pogut escriure el fitxer al disc.&quot;;
                break;
            case UPLOAD_ERR_EXTENSION:
                echo &quot;Una extensi&oacute; de PHP ha aturat la pujada del fitxer.&quot;;
                break;
            default:
                echo &quot;Error desconegut.&quot;;
                break;
        }
    }
}
?&gt;</pre></div><div class='content'></div><h1><ol start="4">
<li>Exercici Pràctic</li>
</ol></h1>
<div class='content'></div><h2>Enunciat</h2>
<div class='content'><p>Crea un formulari HTML que permeti als usuaris pujar una imatge. El servidor ha de comprovar que el fitxer pujat és una imatge (per exemple, JPG, PNG o GIF) i desar-lo en una carpeta anomenada <code>images</code>. Si el fitxer no és una imatge, ha de mostrar un missatge d'error.</p>
</div><h2>Solució</h2>
<div class='content'><h4>Formulari HTML</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImNhIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+UHVqYWRhIGQnSW1hdGdlczwvdGl0bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8Zm9ybSBhY3Rpb249InVwbG9hZF9pbWFnZS5waHAiIG1ldGhvZD0icG9zdCIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSI+CiAgICAgICAgPGxhYmVsIGZvcj0iaW1hZ2UiPlNlbGVjY2lvbmEgdW5hIGltYXRnZTo8L2xhYmVsPgogICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBuYW1lPSJpbWFnZSIgaWQ9ImltYWdlIj4KICAgICAgICA8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iUHVqYXIgSW1hdGdlIj4KICAgIDwvZm9ybT4KPC9ib2R5Pgo8L2h0bWw+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ca&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Pujada d'Imatges&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action=&quot;upload_image.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
        &lt;label for=&quot;image&quot;&gt;Selecciona una imatge:&lt;/label&gt;
        &lt;input type=&quot;file&quot; name=&quot;image&quot; id=&quot;image&quot;&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Pujar Imatge&quot;&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'><h4>Codi PHP</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09ICdQT1NUJykgewogICAgJGVycm9yID0gJF9GSUxFU1snaW1hZ2UnXVsnZXJyb3InXTsKICAgIGlmICgkZXJyb3IgPT0gVVBMT0FEX0VSUl9PSykgewogICAgICAgICR0YXJnZXRfZGlyID0gImltYWdlcy8iOwogICAgICAgICR0YXJnZXRfZmlsZSA9ICR0YXJnZXRfZGlyIC4gYmFzZW5hbWUoJF9GSUxFU1siaW1hZ2UiXVsibmFtZSJdKTsKICAgICAgICAkaW1hZ2VGaWxlVHlwZSA9IHN0cnRvbG93ZXIocGF0aGluZm8oJHRhcmdldF9maWxlLCBQQVRISU5GT19FWFRFTlNJT04pKTsKCiAgICAgICAgLy8gQ29tcHJvdmFyIHNpIGVsIGZpdHhlciDDqXMgdW5hIGltYXRnZQogICAgICAgICRjaGVjayA9IGdldGltYWdlc2l6ZSgkX0ZJTEVTWyJpbWFnZSJdWyJ0bXBfbmFtZSJdKTsKICAgICAgICBpZiAoJGNoZWNrICE9PSBmYWxzZSkgewogICAgICAgICAgICAvLyBDb21wcm92YXIgc2kgZWwgZml0eGVyIGphIGV4aXN0ZWl4CiAgICAgICAgICAgIGlmIChmaWxlX2V4aXN0cygkdGFyZ2V0X2ZpbGUpKSB7CiAgICAgICAgICAgICAgICBlY2hvICJIbyBzZW50aW0sIGVsIGZpdHhlciBqYSBleGlzdGVpeC4iOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gSW50ZW50YXIgbW91cmUgZWwgZml0eGVyIHB1amF0IGEgbGEgY2FycGV0YSBkZSBkZXN0aW5hY2nDswogICAgICAgICAgICAgICAgaWYgKG1vdmVfdXBsb2FkZWRfZmlsZSgkX0ZJTEVTWyJpbWFnZSJdWyJ0bXBfbmFtZSJdLCAkdGFyZ2V0X2ZpbGUpKSB7CiAgICAgICAgICAgICAgICAgICAgZWNobyAiTGEgaW1hdGdlICIgLiBodG1sc3BlY2lhbGNoYXJzKGJhc2VuYW1lKCRfRklMRVNbImltYWdlIl1bIm5hbWUiXSkpIC4gIiBzJ2hhIHB1amF0IGNvcnJlY3RhbWVudC4iOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlY2hvICJIbyBzZW50aW0sIGhpIGhhIGhhZ3V0IHVuIGVycm9yIGVuIHB1amFyIGxhIGltYXRnZS4iOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZWNobyAiRWwgZml0eGVyIG5vIMOpcyB1bmEgaW1hdGdlLiI7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBlY2hvICJIbyBzZW50aW0sIGhpIGhhIGhhZ3V0IHVuIGVycm9yIGVuIHB1amFyIGxhIGltYXRnZS4iOwogICAgfQp9Cj8+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $error = $_FILES['image']['error'];
    if ($error == UPLOAD_ERR_OK) {
        $target_dir = &quot;images/&quot;;
        $target_file = $target_dir . basename($_FILES[&quot;image&quot;][&quot;name&quot;]);
        $imageFileType = strtolower(pathinfo($target_file, PATHINFO_EXTENSION));

        // Comprovar si el fitxer &eacute;s una imatge
        $check = getimagesize($_FILES[&quot;image&quot;][&quot;tmp_name&quot;]);
        if ($check !== false) {
            // Comprovar si el fitxer ja existeix
            if (file_exists($target_file)) {
                echo &quot;Ho sentim, el fitxer ja existeix.&quot;;
            } else {
                // Intentar moure el fitxer pujat a la carpeta de destinaci&oacute;
                if (move_uploaded_file($_FILES[&quot;image&quot;][&quot;tmp_name&quot;], $target_file)) {
                    echo &quot;La imatge &quot; . htmlspecialchars(basename($_FILES[&quot;image&quot;][&quot;name&quot;])) . &quot; s'ha pujat correctament.&quot;;
                } else {
                    echo &quot;Ho sentim, hi ha hagut un error en pujar la imatge.&quot;;
                }
            }
        } else {
            echo &quot;El fitxer no &eacute;s una imatge.&quot;;
        }
    } else {
        echo &quot;Ho sentim, hi ha hagut un error en pujar la imatge.&quot;;
    }
}
?&gt;</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>En aquesta secció, hem après com configurar un formulari HTML per pujar fitxers, com processar la pujada al servidor amb PHP i com gestionar errors comuns. També hem vist un exemple pràctic de com comprovar que el fitxer pujat és una imatge. Aquestes habilitats són fonamentals per a moltes aplicacions web que necessiten gestionar fitxers pujats pels usuaris.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-02-form-validation' title="Validació de Formularis" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-02-form-validation' title="Validació de Formularis" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-04-form-security' title="Seguretat en Formularis" class="py-2 px-3 btn btn-primary"
				data-read-mod="php" data-read-unit="05-03">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-04-form-security' title="Seguretat en Formularis" class="py-2 px-3 btn btn-primary" 
				data-read-mod="php" data-read-unit="05-03">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curs de Programació PHP</h1>
<h2>Mòdul 1: Introducció a PHP</h2>
<ul>
<li><a href="01-01-what-is-php">Què és PHP?</a></li>
<li><a href="01-02-setting-up-environment">Configuració de l'Entorn de Desenvolupament</a></li>
<li><a href="01-03-first-php-script">El teu Primer Script PHP</a></li>
<li><a href="01-04-php-syntax-variables">Sintaxi i Variables de PHP</a></li>
<li><a href="01-05-data-types">Tipus de Dades en PHP</a></li>
</ul>
<h2>Mòdul 2: Estructures de Control</h2>
<ul>
<li><a href="02-01-conditional-statements">Declaracions Condicionals</a></li>
<li><a href="02-02-loops">Bucles en PHP</a></li>
<li><a href="02-03-switch-statements">Declaracions Switch</a></li>
<li><a href="02-04-include-require">PHP Include i Require</a></li>
</ul>
<h2>Mòdul 3: Funcions</h2>
<ul>
<li><a href="03-01-defining-calling-functions">Definició i Crida de Funcions</a></li>
<li><a href="03-02-function-parameters-return-values">Paràmetres de Funció i Valors de Retorn</a></li>
<li><a href="03-03-variable-scope">Àmbit de Variables</a></li>
<li><a href="03-04-anonymous-functions-closures">Funcions Anònimes i Closures</a></li>
</ul>
<h2>Mòdul 4: Arrays</h2>
<ul>
<li><a href="04-01-indexed-arrays">Arrays Indexats</a></li>
<li><a href="04-02-associative-arrays">Arrays Associatius</a></li>
<li><a href="04-03-multidimensional-arrays">Arrays Multidimensionals</a></li>
<li><a href="04-04-array-functions">Funcions d'Array</a></li>
</ul>
<h2>Mòdul 5: Treballant amb Formularis</h2>
<ul>
<li><a href="05-01-handling-form-data">Gestió de Dades de Formulari</a></li>
<li><a href="05-02-form-validation">Validació de Formularis</a></li>
<li><a href="05-03-file-uploads">Pujades de Fitxers</a></li>
<li><a href="05-04-form-security">Seguretat en Formularis</a></li>
</ul>
<h2>Mòdul 6: Treballant amb Fitxers</h2>
<ul>
<li><a href="06-01-reading-writing-files">Lectura i Escriptura de Fitxers</a></li>
<li><a href="06-02-file-handling-functions">Funcions de Gestió de Fitxers</a></li>
<li><a href="06-03-file-permissions">Permisos de Fitxers</a></li>
<li><a href="06-04-directory-functions">Funcions de Directori</a></li>
</ul>
<h2>Mòdul 7: Programació Orientada a Objectes (OOP)</h2>
<ul>
<li><a href="07-01-introduction-oop">Introducció a OOP</a></li>
<li><a href="07-02-classes-objects">Classes i Objectes</a></li>
<li><a href="07-03-properties-methods">Propietats i Mètodes</a></li>
<li><a href="07-04-inheritance">Herència</a></li>
<li><a href="07-05-interfaces-abstract-classes">Interfícies i Classes Abstractes</a></li>
<li><a href="07-06-traits">Traits</a></li>
</ul>
<h2>Mòdul 8: Treballant amb Bases de Dades</h2>
<ul>
<li><a href="08-01-introduction-databases">Introducció a les Bases de Dades</a></li>
<li><a href="08-02-connecting-mysql">Connexió a una Base de Dades MySQL</a></li>
<li><a href="08-03-crud-operations">Realització d'Operacions CRUD</a></li>
<li><a href="08-04-using-pdo">Ús de PDO per a la Interacció amb Bases de Dades</a></li>
<li><a href="08-05-database-security">Seguretat en Bases de Dades</a></li>
</ul>
<h2>Mòdul 9: Tècniques Avançades de PHP</h2>
<ul>
<li><a href="09-01-error-exception-handling">Gestió d'Errors i Excepcions</a></li>
<li><a href="09-02-sessions-cookies">Sessions i Cookies</a></li>
<li><a href="09-03-regular-expressions">Expressions Regulars</a></li>
<li><a href="09-04-json-xml">Treballant amb JSON i XML</a></li>
<li><a href="09-05-web-services">PHP i Serveis Web</a></li>
</ul>
<h2>Mòdul 10: Frameworks PHP i Millors Pràctiques</h2>
<ul>
<li><a href="10-01-introduction-frameworks">Introducció als Frameworks PHP</a></li>
<li><a href="10-02-getting-started-laravel">Començant amb Laravel</a></li>
<li><a href="10-03-mvc-architecture">Arquitectura MVC</a></li>
<li><a href="10-04-best-practices">Millors Pràctiques en Desenvolupament PHP</a></li>
<li><a href="10-05-testing-debugging">Proves i Depuració</a></li>
</ul>
<h2>Mòdul 11: Projecte: Construint una Aplicació Web</h2>
<ul>
<li><a href="11-01-project-planning-setup">Planificació i Configuració del Projecte</a></li>
<li><a href="11-02-creating-ui">Creació de la Interfície d'Usuari</a></li>
<li><a href="11-03-implementing-backend">Implementació de la Lògica del Backend</a></li>
<li><a href="11-04-integrating-database">Integració amb una Base de Dades</a></li>
<li><a href="11-05-testing-deployment">Proves i Desplegament</a></li>
</ul>

	</div>










			<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuari no autentificat</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<p id="loginModalEmail"></p>
            	<div id="mensaje" class="d-none alert alert-danger"></div>
            	<div id="mensaje_info" class="d-none alert alert-success"></div>
            	
            	<div id="modal-body-main">
					<div class="mt-4 d-none" id="forgotPasswordSection">
						<div class="mb-3">
    <label for="recovery-email" class="form-label">Correu electrònic</label>
    <input type="email" required class="form-control" id="recovery-email" placeholder="Introdueix el teu correu electrònic">
</div>
<button class="btn btn-primary" id="btnRecover">Enviar enllaç de recuperació</button>

					</div>
									
					<div class="mt-4 d-none" id="deleteUserSection">	
						<div class="mb-3 alert alert-danger">
	Atenció! Estàs a punt d'eliminar totes les dades de registre i progrés.<br><b>Aquesta acció no es pot desfer.</b>
</div>
<div class="mb-3">
    <input type="password" required class="form-control" id="delete-user-pwd" placeholder="Introdueix la teva contrasenya">
</div>
<button class="btn btn-primary" id="btnDeleteUser">Eliminar usuari</button>

					</div>
					
					<div class="mt-4 d-none" id="changePassordSection">
						<div class="mb-3 row">
	<div class="col col-12 my-2">
	    <input type="password" required class="form-control" id="change-pwd-actual" placeholder="Introdueix la contrasenya actual">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-1" placeholder="Introdueix la nova contrasenya">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-2" placeholder="Repeteix la nova contrasenya">
	</div>
</div>
<button class="btn btn-primary" id="btnChangePassword">Canviar la contrasenya</button>

					</div>
					
					<div class="mt-4 d-none alert alert-warning" id="verifyPasswordSection">
						<p><b>Falta verificar correu</b></p>
						<a id="btnVerifyEmail" href="#">Enviar enllaç de verificació</a>

					</div>
					
					<div class="mt-4 d-none" id="disconnectUserSection">
						<div class="mb-3">
    <button id="btnDisconnect" class="btn btn-primary">Desconnectar</button>
</div>

<hr>

<div class="mt-3">
    <button class="btn btn-outline-secondary" id="change-password-link">Canviar la contrasenya</button>
</div>

<div class="mt-3">
    <a href="#" id="delete-user-link">Eliminar usuari</a>
</div>

					</div>
	            
	            	<div class="mt-4 d-none" id="modalTabsSection">
	            		<ul class="nav nav-tabs" id="authTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab" aria-controls="login" aria-selected="true">
        	Iniciar sessió
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" role="tab" aria-controls="register" aria-selected="false">
        	Registrar-se
        </button>
    </li>
</ul>

<div class="tab-content mt-3" id="authTabsContent">
    <div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
    	<div class="mb-3">
    <label for="login-username" class="form-label">Correu electrònic</label>
    <input type="email" required class="form-control" id="login-username" placeholder="Introdueix el teu correu electrònic">
</div>
<div class="mb-3">
    <label for="login-password" class="form-label">Contrasenya</label>
    <input type="password"  required class="form-control" id="login-password" placeholder="Introdueix la teva contrasenya">
</div>
<button class="btn btn-primary" id="btnLogin">Iniciar sessió</button>
<div class="mt-3">
    <a href="#" id="forgot-password-link">Has oblidat la teva contrasenya?</a>
</div>
    </div>

    <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
    	<div class="mb-3">
    <label for="register-email" class="form-label">Correu electrònic</label>
    <input type="email" class="form-control" id="register-email" required placeholder="Introdueix el teu correu electrònic">
</div>

<div class="mb-3">
    <label for="register-password" class="form-label">Contrasenya</label>
    <input type="password" class="form-control"  required id="register-password" placeholder="Introdueix la teva contrasenya">
</div>

<div class="mb-3">
    <label for="register-name" class="form-label">Nom</label>
    <input type="text" class="form-control"  required id="register-name" placeholder="Introdueix el teu nom">
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-conditions-reg">
    <label for="accept-conditions-reg" class="form-check-label">
        He llegit i accepto la <a href="/privacity" target="blank">Política de Privacitat</a> i els <a href="/licence" target="blank">Termes i Condicions d'Ús</a>.
    </label>
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-allow_comunications">
    <label for="accept-allow_comunications" class="form-check-label">
        Vull rebre notícies i actualitzacions sobre els cursos (opcional).
    </label>
</div>

<button id="btnRegister" class="btn btn-primary">Registrar-se</button>
    </div>
</div>
	            	</div>
            	</div>
            </div>
        </div>
    </div>
</div>

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
