<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pujades de Fitxers</title>

    <link rel="alternate" href="https://campusempresa.com/mod/php/05-03-file-uploads" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/php/05-03-file-uploads" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/php/05-03-file-uploads" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/php/05-03-file-uploads" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/php/05-03-file-uploads" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-02-form-validation' title="Validació de Formularis">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Pujades de Fitxers</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-04-form-security' title="Seguretat en Formularis">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com gestionar la pujada de fitxers en PHP. La pujada de fitxers és una funcionalitat comuna en moltes aplicacions web, com ara formularis de registre, aplicacions de gestió de continguts, etc. Veurem com configurar un formulari per pujar fitxers, com processar la pujada al servidor i com gestionar errors comuns.</p>
</div><h1>1. Configuració del Formulari HTML</h1>
<div class='content'><p>Per començar, necessitem un formulari HTML que permeti als usuaris seleccionar un fitxer per pujar. El formulari ha de tenir l'atribut <code>enctype</code> establert a <code>multipart/form-data</code> i utilitzar el mètode <code>POST</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImNhIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+UHVqYWRhIGRlIEZpdHhlcnM8L3RpdGxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGZvcm0gYWN0aW9uPSJ1cGxvYWQucGhwIiBtZXRob2Q9InBvc3QiIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiPgogICAgICAgIDxsYWJlbCBmb3I9ImZpbGUiPlNlbGVjY2lvbmEgdW4gZml0eGVyOjwvbGFiZWw+CiAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIG5hbWU9ImZpbGUiIGlkPSJmaWxlIj4KICAgICAgICA8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iUHVqYXIgRml0eGVyIj4KICAgIDwvZm9ybT4KPC9ib2R5Pgo8L2h0bWw+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ca&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Pujada de Fitxers&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action=&quot;upload.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
        &lt;label for=&quot;file&quot;&gt;Selecciona un fitxer:&lt;/label&gt;
        &lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot;&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Pujar Fitxer&quot;&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h1>2. Processament de la Pujada al Servidor</h1>
<div class='content'><p>Quan l'usuari envia el formulari, el fitxer seleccionat es puja al servidor. PHP proporciona una superglobal anomenada <code>$_FILES</code> per accedir a la informació del fitxer pujat.</p>
</div><h2>Exemple de Codi PHP per Processar la Pujada</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09ICdQT1NUJykgewogICAgLy8gQ29tcHJvdmFyIHNpIGhpIGhhIGVycm9ycyBlbiBsYSBwdWphZGEKICAgIGlmICgkX0ZJTEVTWydmaWxlJ11bJ2Vycm9yJ10gPT0gVVBMT0FEX0VSUl9PSykgewogICAgICAgICR0YXJnZXRfZGlyID0gInVwbG9hZHMvIjsKICAgICAgICAkdGFyZ2V0X2ZpbGUgPSAkdGFyZ2V0X2RpciAuIGJhc2VuYW1lKCRfRklMRVNbImZpbGUiXVsibmFtZSJdKTsKICAgICAgICAKICAgICAgICAvLyBDb21wcm92YXIgc2kgZWwgZml0eGVyIGphIGV4aXN0ZWl4CiAgICAgICAgaWYgKGZpbGVfZXhpc3RzKCR0YXJnZXRfZmlsZSkpIHsKICAgICAgICAgICAgZWNobyAiSG8gc2VudGltLCBlbCBmaXR4ZXIgamEgZXhpc3RlaXguIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBJbnRlbnRhciBtb3VyZSBlbCBmaXR4ZXIgcHVqYXQgYSBsYSBjYXJwZXRhIGRlIGRlc3RpbmFjacOzCiAgICAgICAgICAgIGlmIChtb3ZlX3VwbG9hZGVkX2ZpbGUoJF9GSUxFU1siZmlsZSJdWyJ0bXBfbmFtZSJdLCAkdGFyZ2V0X2ZpbGUpKSB7CiAgICAgICAgICAgICAgICBlY2hvICJFbCBmaXR4ZXIgIiAuIGh0bWxzcGVjaWFsY2hhcnMoYmFzZW5hbWUoJF9GSUxFU1siZmlsZSJdWyJuYW1lIl0pKSAuICIgcydoYSBwdWphdCBjb3JyZWN0YW1lbnQuIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGVjaG8gIkhvIHNlbnRpbSwgaGkgaGEgaGFndXQgdW4gZXJyb3IgZW4gcHVqYXIgZWwgZml0eGVyLiI7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIGVjaG8gIkhvIHNlbnRpbSwgaGkgaGEgaGFndXQgdW4gZXJyb3IgZW4gcHVqYXIgZWwgZml0eGVyLiI7CiAgICB9Cn0KPz4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    // Comprovar si hi ha errors en la pujada
    if ($_FILES['file']['error'] == UPLOAD_ERR_OK) {
        $target_dir = &quot;uploads/&quot;;
        $target_file = $target_dir . basename($_FILES[&quot;file&quot;][&quot;name&quot;]);
        
        // Comprovar si el fitxer ja existeix
        if (file_exists($target_file)) {
            echo &quot;Ho sentim, el fitxer ja existeix.&quot;;
        } else {
            // Intentar moure el fitxer pujat a la carpeta de destinaci&oacute;
            if (move_uploaded_file($_FILES[&quot;file&quot;][&quot;tmp_name&quot;], $target_file)) {
                echo &quot;El fitxer &quot; . htmlspecialchars(basename($_FILES[&quot;file&quot;][&quot;name&quot;])) . &quot; s'ha pujat correctament.&quot;;
            } else {
                echo &quot;Ho sentim, hi ha hagut un error en pujar el fitxer.&quot;;
            }
        }
    } else {
        echo &quot;Ho sentim, hi ha hagut un error en pujar el fitxer.&quot;;
    }
}
?&gt;</pre></div><div class='content'></div><h2>Explicació del Codi</h2>
<div class='content'><ol>
<li><strong>Comprovació del Mètode de Sol·licitud</strong>: Primer, comprovem si el mètode de sol·licitud és <code>POST</code> per assegurar-nos que el formulari s'ha enviat.</li>
<li><strong>Comprovació d'Errors</strong>: Utilitzem <code>$_FILES['file']['error']</code> per comprovar si hi ha hagut algun error durant la pujada.</li>
<li><strong>Definició del Directori de Destinació</strong>: Definim el directori on es desarà el fitxer pujat.</li>
<li><strong>Comprovació de l'Existència del Fitxer</strong>: Comprovem si el fitxer ja existeix al directori de destinació.</li>
<li><strong>Moure el Fitxer</strong>: Utilitzem <code>move_uploaded_file</code> per moure el fitxer des de la ubicació temporal al directori de destinació.</li>
</ol>
</div><h1>3. Gestió d'Errors Comuns</h1>
<div class='content'></div><h2>Errors de Pujada</h2>
<div class='content'><p>PHP defineix diverses constants per gestionar errors de pujada:</p>
<table>
<thead>
<tr>
<th>Constant</th>
<th>Descripció</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>UPLOAD_ERR_OK</code></td>
<td>No hi ha hagut cap error, el fitxer s'ha pujat correctament.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_INI_SIZE</code></td>
<td>El fitxer pujat excedeix la directiva <code>upload_max_filesize</code> a <code>php.ini</code>.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_FORM_SIZE</code></td>
<td>El fitxer pujat excedeix la directiva <code>MAX_FILE_SIZE</code> especificada al formulari HTML.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_PARTIAL</code></td>
<td>El fitxer només s'ha pujat parcialment.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_NO_FILE</code></td>
<td>No s'ha pujat cap fitxer.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_NO_TMP_DIR</code></td>
<td>Falta una carpeta temporal.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_CANT_WRITE</code></td>
<td>No s'ha pogut escriure el fitxer al disc.</td>
</tr>
<tr>
<td><code>UPLOAD_ERR_EXTENSION</code></td>
<td>Una extensió de PHP ha aturat la pujada del fitxer.</td>
</tr>
</tbody>
</table>
</div><h2>Exemple de Gestió d'Errors</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09ICdQT1NUJykgewogICAgJGVycm9yID0gJF9GSUxFU1snZmlsZSddWydlcnJvciddOwogICAgaWYgKCRlcnJvciA9PSBVUExPQURfRVJSX09LKSB7CiAgICAgICAgLy8gUHJvY2Vzc2FyIGxhIHB1amFkYQogICAgfSBlbHNlIHsKICAgICAgICBzd2l0Y2ggKCRlcnJvcikgewogICAgICAgICAgICBjYXNlIFVQTE9BRF9FUlJfSU5JX1NJWkU6CiAgICAgICAgICAgIGNhc2UgVVBMT0FEX0VSUl9GT1JNX1NJWkU6CiAgICAgICAgICAgICAgICBlY2hvICJFbCBmaXR4ZXIgw6lzIG1hc3NhIGdyYW4uIjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIFVQTE9BRF9FUlJfUEFSVElBTDoKICAgICAgICAgICAgICAgIGVjaG8gIkVsIGZpdHhlciBub23DqXMgcydoYSBwdWphdCBwYXJjaWFsbWVudC4iOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgVVBMT0FEX0VSUl9OT19GSUxFOgogICAgICAgICAgICAgICAgZWNobyAiTm8gcydoYSBwdWphdCBjYXAgZml0eGVyLiI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBVUExPQURfRVJSX05PX1RNUF9ESVI6CiAgICAgICAgICAgICAgICBlY2hvICJGYWx0YSB1bmEgY2FycGV0YSB0ZW1wb3JhbC4iOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgVVBMT0FEX0VSUl9DQU5UX1dSSVRFOgogICAgICAgICAgICAgICAgZWNobyAiTm8gcydoYSBwb2d1dCBlc2NyaXVyZSBlbCBmaXR4ZXIgYWwgZGlzYy4iOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgVVBMT0FEX0VSUl9FWFRFTlNJT046CiAgICAgICAgICAgICAgICBlY2hvICJVbmEgZXh0ZW5zacOzIGRlIFBIUCBoYSBhdHVyYXQgbGEgcHVqYWRhIGRlbCBmaXR4ZXIuIjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgZWNobyAiRXJyb3IgZGVzY29uZWd1dC4iOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQp9Cj8+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $error = $_FILES['file']['error'];
    if ($error == UPLOAD_ERR_OK) {
        // Processar la pujada
    } else {
        switch ($error) {
            case UPLOAD_ERR_INI_SIZE:
            case UPLOAD_ERR_FORM_SIZE:
                echo &quot;El fitxer &eacute;s massa gran.&quot;;
                break;
            case UPLOAD_ERR_PARTIAL:
                echo &quot;El fitxer nom&eacute;s s'ha pujat parcialment.&quot;;
                break;
            case UPLOAD_ERR_NO_FILE:
                echo &quot;No s'ha pujat cap fitxer.&quot;;
                break;
            case UPLOAD_ERR_NO_TMP_DIR:
                echo &quot;Falta una carpeta temporal.&quot;;
                break;
            case UPLOAD_ERR_CANT_WRITE:
                echo &quot;No s'ha pogut escriure el fitxer al disc.&quot;;
                break;
            case UPLOAD_ERR_EXTENSION:
                echo &quot;Una extensi&oacute; de PHP ha aturat la pujada del fitxer.&quot;;
                break;
            default:
                echo &quot;Error desconegut.&quot;;
                break;
        }
    }
}
?&gt;</pre></div><div class='content'></div><h1>4. Exercici Pràctic</h1>
<div class='content'></div><h2>Enunciat</h2>
<div class='content'><p>Crea un formulari HTML que permeti als usuaris pujar una imatge. El servidor ha de comprovar que el fitxer pujat és una imatge (per exemple, JPG, PNG o GIF) i desar-lo en una carpeta anomenada <code>images</code>. Si el fitxer no és una imatge, ha de mostrar un missatge d'error.</p>
</div><h2>Solució</h2>
<div class='content'><h4>Formulari HTML</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImNhIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+UHVqYWRhIGQnSW1hdGdlczwvdGl0bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8Zm9ybSBhY3Rpb249InVwbG9hZF9pbWFnZS5waHAiIG1ldGhvZD0icG9zdCIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSI+CiAgICAgICAgPGxhYmVsIGZvcj0iaW1hZ2UiPlNlbGVjY2lvbmEgdW5hIGltYXRnZTo8L2xhYmVsPgogICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBuYW1lPSJpbWFnZSIgaWQ9ImltYWdlIj4KICAgICAgICA8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iUHVqYXIgSW1hdGdlIj4KICAgIDwvZm9ybT4KPC9ib2R5Pgo8L2h0bWw+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;ca&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Pujada d'Imatges&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action=&quot;upload_image.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
        &lt;label for=&quot;image&quot;&gt;Selecciona una imatge:&lt;/label&gt;
        &lt;input type=&quot;file&quot; name=&quot;image&quot; id=&quot;image&quot;&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Pujar Imatge&quot;&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'><h4>Codi PHP</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09ICdQT1NUJykgewogICAgJGVycm9yID0gJF9GSUxFU1snaW1hZ2UnXVsnZXJyb3InXTsKICAgIGlmICgkZXJyb3IgPT0gVVBMT0FEX0VSUl9PSykgewogICAgICAgICR0YXJnZXRfZGlyID0gImltYWdlcy8iOwogICAgICAgICR0YXJnZXRfZmlsZSA9ICR0YXJnZXRfZGlyIC4gYmFzZW5hbWUoJF9GSUxFU1siaW1hZ2UiXVsibmFtZSJdKTsKICAgICAgICAkaW1hZ2VGaWxlVHlwZSA9IHN0cnRvbG93ZXIocGF0aGluZm8oJHRhcmdldF9maWxlLCBQQVRISU5GT19FWFRFTlNJT04pKTsKCiAgICAgICAgLy8gQ29tcHJvdmFyIHNpIGVsIGZpdHhlciDDqXMgdW5hIGltYXRnZQogICAgICAgICRjaGVjayA9IGdldGltYWdlc2l6ZSgkX0ZJTEVTWyJpbWFnZSJdWyJ0bXBfbmFtZSJdKTsKICAgICAgICBpZiAoJGNoZWNrICE9PSBmYWxzZSkgewogICAgICAgICAgICAvLyBDb21wcm92YXIgc2kgZWwgZml0eGVyIGphIGV4aXN0ZWl4CiAgICAgICAgICAgIGlmIChmaWxlX2V4aXN0cygkdGFyZ2V0X2ZpbGUpKSB7CiAgICAgICAgICAgICAgICBlY2hvICJIbyBzZW50aW0sIGVsIGZpdHhlciBqYSBleGlzdGVpeC4iOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gSW50ZW50YXIgbW91cmUgZWwgZml0eGVyIHB1amF0IGEgbGEgY2FycGV0YSBkZSBkZXN0aW5hY2nDswogICAgICAgICAgICAgICAgaWYgKG1vdmVfdXBsb2FkZWRfZmlsZSgkX0ZJTEVTWyJpbWFnZSJdWyJ0bXBfbmFtZSJdLCAkdGFyZ2V0X2ZpbGUpKSB7CiAgICAgICAgICAgICAgICAgICAgZWNobyAiTGEgaW1hdGdlICIgLiBodG1sc3BlY2lhbGNoYXJzKGJhc2VuYW1lKCRfRklMRVNbImltYWdlIl1bIm5hbWUiXSkpIC4gIiBzJ2hhIHB1amF0IGNvcnJlY3RhbWVudC4iOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlY2hvICJIbyBzZW50aW0sIGhpIGhhIGhhZ3V0IHVuIGVycm9yIGVuIHB1amFyIGxhIGltYXRnZS4iOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZWNobyAiRWwgZml0eGVyIG5vIMOpcyB1bmEgaW1hdGdlLiI7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBlY2hvICJIbyBzZW50aW0sIGhpIGhhIGhhZ3V0IHVuIGVycm9yIGVuIHB1amFyIGxhIGltYXRnZS4iOwogICAgfQp9Cj8+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $error = $_FILES['image']['error'];
    if ($error == UPLOAD_ERR_OK) {
        $target_dir = &quot;images/&quot;;
        $target_file = $target_dir . basename($_FILES[&quot;image&quot;][&quot;name&quot;]);
        $imageFileType = strtolower(pathinfo($target_file, PATHINFO_EXTENSION));

        // Comprovar si el fitxer &eacute;s una imatge
        $check = getimagesize($_FILES[&quot;image&quot;][&quot;tmp_name&quot;]);
        if ($check !== false) {
            // Comprovar si el fitxer ja existeix
            if (file_exists($target_file)) {
                echo &quot;Ho sentim, el fitxer ja existeix.&quot;;
            } else {
                // Intentar moure el fitxer pujat a la carpeta de destinaci&oacute;
                if (move_uploaded_file($_FILES[&quot;image&quot;][&quot;tmp_name&quot;], $target_file)) {
                    echo &quot;La imatge &quot; . htmlspecialchars(basename($_FILES[&quot;image&quot;][&quot;name&quot;])) . &quot; s'ha pujat correctament.&quot;;
                } else {
                    echo &quot;Ho sentim, hi ha hagut un error en pujar la imatge.&quot;;
                }
            }
        } else {
            echo &quot;El fitxer no &eacute;s una imatge.&quot;;
        }
    } else {
        echo &quot;Ho sentim, hi ha hagut un error en pujar la imatge.&quot;;
    }
}
?&gt;</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>En aquesta secció, hem après com configurar un formulari HTML per pujar fitxers, com processar la pujada al servidor amb PHP i com gestionar errors comuns. També hem vist un exemple pràctic de com comprovar que el fitxer pujat és una imatge. Aquestes habilitats són fonamentals per a moltes aplicacions web que necessiten gestionar fitxers pujats pels usuaris.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-02-form-validation' title="Validació de Formularis">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-04-form-security' title="Seguretat en Formularis">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
