<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionant mètodes HTTP</title>

    <link rel="alternate" href="https://campusempresa.com/mod/springboot/03-03-handling-http-methods" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/springboot/03-03-handling-http-methods" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/springboot/03-03-handling-http-methods" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/springboot/03-03-handling-http-methods" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/springboot/03-03-handling-http-methods" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='03-02-creating-rest-controllers' title="Creant controladors REST">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Gestionant mètodes HTTP</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='03-04-exception-handling-rest' title="Gestió d'excepcions en REST">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem com gestionar els diferents mètodes HTTP en una aplicació Spring Boot. Els mètodes HTTP són fonamentals per a la comunicació entre clients i servidors en aplicacions web. Els mètodes més comuns són GET, POST, PUT, DELETE, però n'hi ha d'altres com PATCH, OPTIONS, i HEAD.</p>
</div><h1><p>Objectius</p>
</h1>
<div class='content'><ul>
<li>Entendre els diferents mètodes HTTP i les seves funcions.</li>
<li>Aprendre a implementar aquests mètodes en controladors Spring Boot.</li>
<li>Veure exemples pràctics de cada mètode HTTP.</li>
<li>Realitzar exercicis per reforçar els conceptes apresos.</li>
</ul>
</div><h1><p>Mètodes HTTP comuns</p>
</h1>
<div class='content'></div><h2><p>GET</p>
</h2>
<div class='content'><p>El mètode GET s'utilitza per sol·licitar dades d'un servidor. És idempotent, el que significa que múltiples sol·licituds GET no haurien de tenir efectes col·laterals.</p>
</div><h2><p>POST</p>
</h2>
<div class='content'><p>El mètode POST s'utilitza per enviar dades al servidor per crear un nou recurs. No és idempotent, ja que enviar la mateixa sol·licitud POST diverses vegades pot crear múltiples recursos.</p>
</div><h2><p>PUT</p>
</h2>
<div class='content'><p>El mètode PUT s'utilitza per actualitzar un recurs existent o crear-lo si no existeix. És idempotent.</p>
</div><h2><p>DELETE</p>
</h2>
<div class='content'><p>El mètode DELETE s'utilitza per eliminar un recurs. És idempotent.</p>
</div><h2><p>PATCH</p>
</h2>
<div class='content'><p>El mètode PATCH s'utilitza per aplicar modificacions parcials a un recurs.</p>
</div><h2><p>OPTIONS</p>
</h2>
<div class='content'><p>El mètode OPTIONS s'utilitza per descriure les opcions de comunicació per al recurs de destinació.</p>
</div><h2><p>HEAD</p>
</h2>
<div class='content'><p>El mètode HEAD és similar a GET, però només retorna les capçaleres de la resposta sense el cos.</p>
</div><h1><p>Implementació en Spring Boot</p>
</h1>
<div class='content'></div><h2><p>Configuració del controlador</p>
</h2>
<div class='content'><p>A continuació, veurem com implementar aquests mètodes en un controlador Spring Boot.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qOwoKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCkBSZXN0Q29udHJvbGxlcgpAUmVxdWVzdE1hcHBpbmcoIi9hcGkvaXRlbXMiKQpwdWJsaWMgY2xhc3MgSXRlbUNvbnRyb2xsZXIgewoKICAgIHByaXZhdGUgTGlzdDxTdHJpbmc+IGl0ZW1zID0gbmV3IEFycmF5TGlzdDw+KCk7CgogICAgLy8gR0VUOiBPYnRlbmlyIHRvdHMgZWxzIMOtdGVtcwogICAgQEdldE1hcHBpbmcKICAgIHB1YmxpYyBMaXN0PFN0cmluZz4gZ2V0QWxsSXRlbXMoKSB7CiAgICAgICAgcmV0dXJuIGl0ZW1zOwogICAgfQoKICAgIC8vIFBPU1Q6IENyZWFyIHVuIG5vdSDDrXRlbQogICAgQFBvc3RNYXBwaW5nCiAgICBwdWJsaWMgU3RyaW5nIGNyZWF0ZUl0ZW0oQFJlcXVlc3RCb2R5IFN0cmluZyBpdGVtKSB7CiAgICAgICAgaXRlbXMuYWRkKGl0ZW0pOwogICAgICAgIHJldHVybiAiSXRlbSBjcmVhdDogIiArIGl0ZW07CiAgICB9CgogICAgLy8gUFVUOiBBY3R1YWxpdHphciB1biDDrXRlbSBleGlzdGVudAogICAgQFB1dE1hcHBpbmcoIi97aW5kZXh9IikKICAgIHB1YmxpYyBTdHJpbmcgdXBkYXRlSXRlbShAUGF0aFZhcmlhYmxlIGludCBpbmRleCwgQFJlcXVlc3RCb2R5IFN0cmluZyBpdGVtKSB7CiAgICAgICAgaWYgKGluZGV4ID49IDAgJiYgaW5kZXggPCBpdGVtcy5zaXplKCkpIHsKICAgICAgICAgICAgaXRlbXMuc2V0KGluZGV4LCBpdGVtKTsKICAgICAgICAgICAgcmV0dXJuICJJdGVtIGFjdHVhbGl0emF0OiAiICsgaXRlbTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gIsONdGVtIG5vIHRyb2JhdCI7CiAgICAgICAgfQogICAgfQoKICAgIC8vIERFTEVURTogRWxpbWluYXIgdW4gw610ZW0KICAgIEBEZWxldGVNYXBwaW5nKCIve2luZGV4fSIpCiAgICBwdWJsaWMgU3RyaW5nIGRlbGV0ZUl0ZW0oQFBhdGhWYXJpYWJsZSBpbnQgaW5kZXgpIHsKICAgICAgICBpZiAoaW5kZXggPj0gMCAmJiBpbmRleCA8IGl0ZW1zLnNpemUoKSkgewogICAgICAgICAgICBTdHJpbmcgcmVtb3ZlZEl0ZW0gPSBpdGVtcy5yZW1vdmUoaW5kZXgpOwogICAgICAgICAgICByZXR1cm4gIkl0ZW0gZWxpbWluYXQ6ICIgKyByZW1vdmVkSXRlbTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gIsONdGVtIG5vIHRyb2JhdCI7CiAgICAgICAgfQogICAgfQoKICAgIC8vIFBBVENIOiBNb2RpZmljYXIgcGFyY2lhbG1lbnQgdW4gw610ZW0KICAgIEBQYXRjaE1hcHBpbmcoIi97aW5kZXh9IikKICAgIHB1YmxpYyBTdHJpbmcgcGF0Y2hJdGVtKEBQYXRoVmFyaWFibGUgaW50IGluZGV4LCBAUmVxdWVzdEJvZHkgU3RyaW5nIGl0ZW0pIHsKICAgICAgICBpZiAoaW5kZXggPj0gMCAmJiBpbmRleCA8IGl0ZW1zLnNpemUoKSkgewogICAgICAgICAgICBTdHJpbmcgZXhpc3RpbmdJdGVtID0gaXRlbXMuZ2V0KGluZGV4KTsKICAgICAgICAgICAgU3RyaW5nIHVwZGF0ZWRJdGVtID0gZXhpc3RpbmdJdGVtICsgaXRlbTsgLy8gRXhlbXBsZSBkZSBtb2RpZmljYWNpw7MgcGFyY2lhbAogICAgICAgICAgICBpdGVtcy5zZXQoaW5kZXgsIHVwZGF0ZWRJdGVtKTsKICAgICAgICAgICAgcmV0dXJuICJJdGVtIG1vZGlmaWNhdDogIiArIHVwZGF0ZWRJdGVtOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAiw410ZW0gbm8gdHJvYmF0IjsKICAgICAgICB9CiAgICB9CgogICAgLy8gT1BUSU9OUzogRGVzY3JpdXJlIGxlcyBvcGNpb25zIGRlIGNvbXVuaWNhY2nDswogICAgQFJlcXVlc3RNYXBwaW5nKG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuT1BUSU9OUykKICAgIHB1YmxpYyBTdHJpbmcgb3B0aW9ucygpIHsKICAgICAgICByZXR1cm4gIkdFVCwgUE9TVCwgUFVULCBERUxFVEUsIFBBVENILCBPUFRJT05TIjsKICAgIH0KCiAgICAvLyBIRUFEOiBPYnRlbmlyIGxlcyBjYXDDp2FsZXJlcyBkZSBsYSByZXNwb3N0YQogICAgQFJlcXVlc3RNYXBwaW5nKG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuSEVBRCkKICAgIHB1YmxpYyB2b2lkIGhlYWQoKSB7CiAgICAgICAgLy8gTm8gY2FsIGltcGxlbWVudGFyIHJlcyBhcXXDrSwgU3ByaW5nIEJvb3QgZ2VzdGlvbmFyw6AgbGVzIGNhcMOnYWxlcmVzIGF1dG9tw6B0aWNhbWVudAogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.springframework.web.bind.annotation.*;

import java.util.ArrayList;
import java.util.List;

@RestController
@RequestMapping(&quot;/api/items&quot;)
public class ItemController {

    private List&lt;String&gt; items = new ArrayList&lt;&gt;();

    // GET: Obtenir tots els &iacute;tems
    @GetMapping
    public List&lt;String&gt; getAllItems() {
        return items;
    }

    // POST: Crear un nou &iacute;tem
    @PostMapping
    public String createItem(@RequestBody String item) {
        items.add(item);
        return &quot;Item creat: &quot; + item;
    }

    // PUT: Actualitzar un &iacute;tem existent
    @PutMapping(&quot;/{index}&quot;)
    public String updateItem(@PathVariable int index, @RequestBody String item) {
        if (index &gt;= 0 &amp;&amp; index &lt; items.size()) {
            items.set(index, item);
            return &quot;Item actualitzat: &quot; + item;
        } else {
            return &quot;&Iacute;tem no trobat&quot;;
        }
    }

    // DELETE: Eliminar un &iacute;tem
    @DeleteMapping(&quot;/{index}&quot;)
    public String deleteItem(@PathVariable int index) {
        if (index &gt;= 0 &amp;&amp; index &lt; items.size()) {
            String removedItem = items.remove(index);
            return &quot;Item eliminat: &quot; + removedItem;
        } else {
            return &quot;&Iacute;tem no trobat&quot;;
        }
    }

    // PATCH: Modificar parcialment un &iacute;tem
    @PatchMapping(&quot;/{index}&quot;)
    public String patchItem(@PathVariable int index, @RequestBody String item) {
        if (index &gt;= 0 &amp;&amp; index &lt; items.size()) {
            String existingItem = items.get(index);
            String updatedItem = existingItem + item; // Exemple de modificaci&oacute; parcial
            items.set(index, updatedItem);
            return &quot;Item modificat: &quot; + updatedItem;
        } else {
            return &quot;&Iacute;tem no trobat&quot;;
        }
    }

    // OPTIONS: Descriure les opcions de comunicaci&oacute;
    @RequestMapping(method = RequestMethod.OPTIONS)
    public String options() {
        return &quot;GET, POST, PUT, DELETE, PATCH, OPTIONS&quot;;
    }

    // HEAD: Obtenir les cap&ccedil;aleres de la resposta
    @RequestMapping(method = RequestMethod.HEAD)
    public void head() {
        // No cal implementar res aqu&iacute;, Spring Boot gestionar&agrave; les cap&ccedil;aleres autom&agrave;ticament
    }
}</pre></div><div class='content'></div><h2><p>Explicació del codi</p>
</h2>
<div class='content'><ul>
<li><strong>GET</strong>: El mètode <code>getAllItems</code> retorna tots els ítems de la llista.</li>
<li><strong>POST</strong>: El mètode <code>createItem</code> afegeix un nou ítem a la llista.</li>
<li><strong>PUT</strong>: El mètode <code>updateItem</code> actualitza un ítem existent a la llista.</li>
<li><strong>DELETE</strong>: El mètode <code>deleteItem</code> elimina un ítem de la llista.</li>
<li><strong>PATCH</strong>: El mètode <code>patchItem</code> modifica parcialment un ítem existent.</li>
<li><strong>OPTIONS</strong>: El mètode <code>options</code> retorna les opcions de comunicació disponibles.</li>
<li><strong>HEAD</strong>: El mètode <code>head</code> retorna les capçaleres de la resposta sense el cos.</li>
</ul>
</div><h1><p>Exercicis pràctics</p>
</h1>
<div class='content'></div><h2><p>Exercici 1: Implementar un controlador per gestionar usuaris</p>
</h2>
<div class='content'><p>Crea un controlador similar a <code>ItemController</code> per gestionar usuaris. Cada usuari ha de tenir un <code>id</code>, <code>nom</code> i <code>email</code>.</p>
<h4>Solució</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qOwoKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCmNsYXNzIFVzZXIgewogICAgcHJpdmF0ZSBpbnQgaWQ7CiAgICBwcml2YXRlIFN0cmluZyBuYW1lOwogICAgcHJpdmF0ZSBTdHJpbmcgZW1haWw7CgogICAgLy8gQ29uc3RydWN0b3JzLCBnZXR0ZXJzIGkgc2V0dGVycwogICAgcHVibGljIFVzZXIoaW50IGlkLCBTdHJpbmcgbmFtZSwgU3RyaW5nIGVtYWlsKSB7CiAgICAgICAgdGhpcy5pZCA9IGlkOwogICAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgICAgdGhpcy5lbWFpbCA9IGVtYWlsOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0SWQoKSB7CiAgICAgICAgcmV0dXJuIGlkOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldElkKGludCBpZCkgewogICAgICAgIHRoaXMuaWQgPSBpZDsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldE5hbWUoKSB7CiAgICAgICAgcmV0dXJuIG5hbWU7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TmFtZShTdHJpbmcgbmFtZSkgewogICAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRFbWFpbCgpIHsKICAgICAgICByZXR1cm4gZW1haWw7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0RW1haWwoU3RyaW5nIGVtYWlsKSB7CiAgICAgICAgdGhpcy5lbWFpbCA9IGVtYWlsOwogICAgfQp9CgpAUmVzdENvbnRyb2xsZXIKQFJlcXVlc3RNYXBwaW5nKCIvYXBpL3VzZXJzIikKcHVibGljIGNsYXNzIFVzZXJDb250cm9sbGVyIHsKCiAgICBwcml2YXRlIExpc3Q8VXNlcj4gdXNlcnMgPSBuZXcgQXJyYXlMaXN0PD4oKTsKCiAgICAvLyBHRVQ6IE9idGVuaXIgdG90cyBlbHMgdXN1YXJpcwogICAgQEdldE1hcHBpbmcKICAgIHB1YmxpYyBMaXN0PFVzZXI+IGdldEFsbFVzZXJzKCkgewogICAgICAgIHJldHVybiB1c2VyczsKICAgIH0KCiAgICAvLyBQT1NUOiBDcmVhciB1biBub3UgdXN1YXJpCiAgICBAUG9zdE1hcHBpbmcKICAgIHB1YmxpYyBTdHJpbmcgY3JlYXRlVXNlcihAUmVxdWVzdEJvZHkgVXNlciB1c2VyKSB7CiAgICAgICAgdXNlcnMuYWRkKHVzZXIpOwogICAgICAgIHJldHVybiAiVXN1YXJpIGNyZWF0OiAiICsgdXNlci5nZXROYW1lKCk7CiAgICB9CgogICAgLy8gUFVUOiBBY3R1YWxpdHphciB1biB1c3VhcmkgZXhpc3RlbnQKICAgIEBQdXRNYXBwaW5nKCIve2lkfSIpCiAgICBwdWJsaWMgU3RyaW5nIHVwZGF0ZVVzZXIoQFBhdGhWYXJpYWJsZSBpbnQgaWQsIEBSZXF1ZXN0Qm9keSBVc2VyIHVzZXIpIHsKICAgICAgICBmb3IgKFVzZXIgdSA6IHVzZXJzKSB7CiAgICAgICAgICAgIGlmICh1LmdldElkKCkgPT0gaWQpIHsKICAgICAgICAgICAgICAgIHUuc2V0TmFtZSh1c2VyLmdldE5hbWUoKSk7CiAgICAgICAgICAgICAgICB1LnNldEVtYWlsKHVzZXIuZ2V0RW1haWwoKSk7CiAgICAgICAgICAgICAgICByZXR1cm4gIlVzdWFyaSBhY3R1YWxpdHphdDogIiArIHVzZXIuZ2V0TmFtZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAiVXN1YXJpIG5vIHRyb2JhdCI7CiAgICB9CgogICAgLy8gREVMRVRFOiBFbGltaW5hciB1biB1c3VhcmkKICAgIEBEZWxldGVNYXBwaW5nKCIve2lkfSIpCiAgICBwdWJsaWMgU3RyaW5nIGRlbGV0ZVVzZXIoQFBhdGhWYXJpYWJsZSBpbnQgaWQpIHsKICAgICAgICBmb3IgKFVzZXIgdSA6IHVzZXJzKSB7CiAgICAgICAgICAgIGlmICh1LmdldElkKCkgPT0gaWQpIHsKICAgICAgICAgICAgICAgIHVzZXJzLnJlbW92ZSh1KTsKICAgICAgICAgICAgICAgIHJldHVybiAiVXN1YXJpIGVsaW1pbmF0OiAiICsgdS5nZXROYW1lKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuICJVc3Vhcmkgbm8gdHJvYmF0IjsKICAgIH0KCiAgICAvLyBQQVRDSDogTW9kaWZpY2FyIHBhcmNpYWxtZW50IHVuIHVzdWFyaQogICAgQFBhdGNoTWFwcGluZygiL3tpZH0iKQogICAgcHVibGljIFN0cmluZyBwYXRjaFVzZXIoQFBhdGhWYXJpYWJsZSBpbnQgaWQsIEBSZXF1ZXN0Qm9keSBVc2VyIHVzZXIpIHsKICAgICAgICBmb3IgKFVzZXIgdSA6IHVzZXJzKSB7CiAgICAgICAgICAgIGlmICh1LmdldElkKCkgPT0gaWQpIHsKICAgICAgICAgICAgICAgIGlmICh1c2VyLmdldE5hbWUoKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgdS5zZXROYW1lKHVzZXIuZ2V0TmFtZSgpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh1c2VyLmdldEVtYWlsKCkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHUuc2V0RW1haWwodXNlci5nZXRFbWFpbCgpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiAiVXN1YXJpIG1vZGlmaWNhdDogIiArIHUuZ2V0TmFtZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAiVXN1YXJpIG5vIHRyb2JhdCI7CiAgICB9CgogICAgLy8gT1BUSU9OUzogRGVzY3JpdXJlIGxlcyBvcGNpb25zIGRlIGNvbXVuaWNhY2nDswogICAgQFJlcXVlc3RNYXBwaW5nKG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuT1BUSU9OUykKICAgIHB1YmxpYyBTdHJpbmcgb3B0aW9ucygpIHsKICAgICAgICByZXR1cm4gIkdFVCwgUE9TVCwgUFVULCBERUxFVEUsIFBBVENILCBPUFRJT05TIjsKICAgIH0KCiAgICAvLyBIRUFEOiBPYnRlbmlyIGxlcyBjYXDDp2FsZXJlcyBkZSBsYSByZXNwb3N0YQogICAgQFJlcXVlc3RNYXBwaW5nKG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuSEVBRCkKICAgIHB1YmxpYyB2b2lkIGhlYWQoKSB7CiAgICAgICAgLy8gTm8gY2FsIGltcGxlbWVudGFyIHJlcyBhcXXDrSwgU3ByaW5nIEJvb3QgZ2VzdGlvbmFyw6AgbGVzIGNhcMOnYWxlcmVzIGF1dG9tw6B0aWNhbWVudAogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.springframework.web.bind.annotation.*;

import java.util.ArrayList;
import java.util.List;

class User {
    private int id;
    private String name;
    private String email;

    // Constructors, getters i setters
    public User(int id, String name, String email) {
        this.id = id;
        this.name = name;
        this.email = email;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }
}

@RestController
@RequestMapping(&quot;/api/users&quot;)
public class UserController {

    private List&lt;User&gt; users = new ArrayList&lt;&gt;();

    // GET: Obtenir tots els usuaris
    @GetMapping
    public List&lt;User&gt; getAllUsers() {
        return users;
    }

    // POST: Crear un nou usuari
    @PostMapping
    public String createUser(@RequestBody User user) {
        users.add(user);
        return &quot;Usuari creat: &quot; + user.getName();
    }

    // PUT: Actualitzar un usuari existent
    @PutMapping(&quot;/{id}&quot;)
    public String updateUser(@PathVariable int id, @RequestBody User user) {
        for (User u : users) {
            if (u.getId() == id) {
                u.setName(user.getName());
                u.setEmail(user.getEmail());
                return &quot;Usuari actualitzat: &quot; + user.getName();
            }
        }
        return &quot;Usuari no trobat&quot;;
    }

    // DELETE: Eliminar un usuari
    @DeleteMapping(&quot;/{id}&quot;)
    public String deleteUser(@PathVariable int id) {
        for (User u : users) {
            if (u.getId() == id) {
                users.remove(u);
                return &quot;Usuari eliminat: &quot; + u.getName();
            }
        }
        return &quot;Usuari no trobat&quot;;
    }

    // PATCH: Modificar parcialment un usuari
    @PatchMapping(&quot;/{id}&quot;)
    public String patchUser(@PathVariable int id, @RequestBody User user) {
        for (User u : users) {
            if (u.getId() == id) {
                if (user.getName() != null) {
                    u.setName(user.getName());
                }
                if (user.getEmail() != null) {
                    u.setEmail(user.getEmail());
                }
                return &quot;Usuari modificat: &quot; + u.getName();
            }
        }
        return &quot;Usuari no trobat&quot;;
    }

    // OPTIONS: Descriure les opcions de comunicaci&oacute;
    @RequestMapping(method = RequestMethod.OPTIONS)
    public String options() {
        return &quot;GET, POST, PUT, DELETE, PATCH, OPTIONS&quot;;
    }

    // HEAD: Obtenir les cap&ccedil;aleres de la resposta
    @RequestMapping(method = RequestMethod.HEAD)
    public void head() {
        // No cal implementar res aqu&iacute;, Spring Boot gestionar&agrave; les cap&ccedil;aleres autom&agrave;ticament
    }
}</pre></div><div class='content'></div><h2><p>Exercici 2: Provar els mètodes HTTP</p>
</h2>
<div class='content'><p>Utilitza una eina com Postman per provar els mètodes HTTP del controlador <code>UserController</code>. Crea, actualitza, elimina i modifica usuaris, i comprova que les respostes siguin les esperades.</p>
</div><h1><p>Resum</p>
</h1>
<div class='content'><p>En aquesta secció, hem après a gestionar els diferents mètodes HTTP en una aplicació Spring Boot. Hem vist com implementar aquests mètodes en un controlador i hem realitzat exercicis pràctics per reforçar els conceptes apresos. Ara estem preparats per avançar cap a la gestió d'excepcions en serveis RESTful.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='03-02-creating-rest-controllers' title="Creant controladors REST">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='03-04-exception-handling-rest' title="Gestió d'excepcions en REST">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
