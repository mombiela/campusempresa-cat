<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuració d'un Servidor Web</title>

    <link rel="alternate" href="https://campusempresa.com/mod/linux/08-01-setting-up-a-web-server" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/linux/08-01-configuracio-d-un-servidor-web" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/linux/08-01-setting-up-a-web-server" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/linux/08-01-setting-up-a-web-server" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/linux/08-01-setting-up-a-web-server" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-05-alta-disponibilitat-i-balanceig-de-carrega' title="Alta Disponibilitat i Balanceig de Càrrega">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Configuració d'un Servidor Web</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='08-02-configuracio-d-un-servidor-de-base-de-dades' title="Configuració d'un Servidor de Base de Dades">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquest tema, aprendrem a configurar un servidor web utilitzant Linux. Ens centrarem en l'ús d'Apache, un dels servidors web més populars i àmpliament utilitzats. Aquest procés inclou la instal·lació del servidor, la configuració bàsica, la gestió de llocs web virtuals i la seguretat bàsica.</p>
</div><h1><p>Objectius d'Aprenentatge</p>
</h1>
<div class='content'><ul>
<li>Instal·lar i configurar Apache en un sistema Linux.</li>
<li>Configurar llocs web virtuals.</li>
<li>Implementar mesures de seguretat bàsiques per protegir el servidor web.</li>
</ul>
</div><h1><p>Requisits Prèvis</p>
</h1>
<div class='content'><ul>
<li>Coneixements bàsics de la línia de comandes de Linux.</li>
<li>Accés a un sistema Linux amb privilegis d'administrador.</li>
</ul>
</div><h1><ol>
<li>Instal·lació d'Apache</li>
</ol>
</h1>
<div class='content'></div><h2><p>1.1 Instal·lació en Distribucions Basades en Debian (Ubuntu)</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBhcHQgdXBkYXRlCnN1ZG8gYXB0IGluc3RhbGwgYXBhY2hlMg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo apt update
sudo apt install apache2</pre></div><div class='content'></div><h2><p>1.2 Instal·lació en Distribucions Basades en Red Hat (CentOS, Fedora)</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyB5dW0gdXBkYXRlCnN1ZG8geXVtIGluc3RhbGwgaHR0cGQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo yum update
sudo yum install httpd</pre></div><div class='content'></div><h2><p>1.3 Verificació de la Instal·lació</p>
</h2>
<div class='content'><p>Després d'instal·lar Apache, podem verificar que el servei s'està executant correctament:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBzeXN0ZW1jdGwgc3RhdHVzIGFwYWNoZTIgICMgUGVyIGEgZGlzdHJpYnVjaW9ucyBiYXNhZGVzIGVuIERlYmlhbgpzdWRvIHN5c3RlbWN0bCBzdGF0dXMgaHR0cGQgICAgIyBQZXIgYSBkaXN0cmlidWNpb25zIGJhc2FkZXMgZW4gUmVkIEhhdA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo systemctl status apache2  # Per a distribucions basades en Debian
sudo systemctl status httpd    # Per a distribucions basades en Red Hat</pre></div><div class='content'><p>Si el servei no està en execució, podem iniciar-lo amb:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBzeXN0ZW1jdGwgc3RhcnQgYXBhY2hlMiAgIyBQZXIgYSBkaXN0cmlidWNpb25zIGJhc2FkZXMgZW4gRGViaWFuCnN1ZG8gc3lzdGVtY3RsIHN0YXJ0IGh0dHBkICAgICMgUGVyIGEgZGlzdHJpYnVjaW9ucyBiYXNhZGVzIGVuIFJlZCBIYXQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo systemctl start apache2  # Per a distribucions basades en Debian
sudo systemctl start httpd    # Per a distribucions basades en Red Hat</pre></div><div class='content'></div><h1><ol start="2">
<li>Configuració Bàsica d'Apache</li>
</ol>
</h1>
<div class='content'></div><h2><p>2.1 Arxius de Configuració</p>
</h2>
<div class='content'><p>Els arxius de configuració principals d'Apache es troben en els següents directoris:</p>
<ul>
<li><strong>Debian/Ubuntu</strong>: <code>/etc/apache2/</code></li>
<li><strong>CentOS/Fedora</strong>: <code>/etc/httpd/</code></li>
</ul>
</div><h2><p>2.2 Configuració del Port</p>
</h2>
<div class='content'><p>Per defecte, Apache escolta en el port 80 per a HTTP i en el port 443 per a HTTPS. Podem canviar aquests ports editant l'arxiu de configuració principal:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBuYW5vIC9ldGMvYXBhY2hlMi9wb3J0cy5jb25mICAjIERlYmlhbi9VYnVudHUKc3VkbyBuYW5vIC9ldGMvaHR0cGQvY29uZi9odHRwZC5jb25mICAjIENlbnRPUy9GZWRvcmE="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo nano /etc/apache2/ports.conf  # Debian/Ubuntu
sudo nano /etc/httpd/conf/httpd.conf  # CentOS/Fedora</pre></div><div class='content'><p>Afegim o modifiquem les línies següents per canviar el port:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TGlzdGVuIDgwODAgICMgRXhlbXBsZSBkZSBjYW52aSBkZSBwb3J0IGEgODA4MA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Listen 8080  # Exemple de canvi de port a 8080</pre></div><div class='content'></div><h2><p>2.3 Reiniciar Apache</p>
</h2>
<div class='content'><p>Després de fer canvis en la configuració, hem de reiniciar Apache perquè els canvis tinguin efecte:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBzeXN0ZW1jdGwgcmVzdGFydCBhcGFjaGUyICAjIERlYmlhbi9VYnVudHUKc3VkbyBzeXN0ZW1jdGwgcmVzdGFydCBodHRwZCAgICAjIENlbnRPUy9GZWRvcmE="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo systemctl restart apache2  # Debian/Ubuntu
sudo systemctl restart httpd    # CentOS/Fedora</pre></div><div class='content'></div><h1><ol start="3">
<li>Configuració de Llocs Web Virtuals</li>
</ol>
</h1>
<div class='content'></div><h2><p>3.1 Creació d'un Directori per al Lloc Web</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBta2RpciAtcCAvdmFyL3d3dy9ub21fZGVsX3RldV9sbG9jCnN1ZG8gY2hvd24gLVIgJFVTRVI6JFVTRVIgL3Zhci93d3cvbm9tX2RlbF90ZXVfbGxvYwpzdWRvIGNobW9kIC1SIDc1NSAvdmFyL3d3dy9ub21fZGVsX3RldV9sbG9j"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo mkdir -p /var/www/nom_del_teu_lloc
sudo chown -R $USER:$USER /var/www/nom_del_teu_lloc
sudo chmod -R 755 /var/www/nom_del_teu_lloc</pre></div><div class='content'></div><h2><p>3.2 Creació d'un Fitxer de Configuració per al Lloc Web</p>
</h2>
<div class='content'><h4>Debian/Ubuntu</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBuYW5vIC9ldGMvYXBhY2hlMi9zaXRlcy1hdmFpbGFibGUvbm9tX2RlbF90ZXVfbGxvYy5jb25m"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo nano /etc/apache2/sites-available/nom_del_teu_lloc.conf</pre></div><div class='content'><h4>CentOS/Fedora</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBuYW5vIC9ldGMvaHR0cGQvY29uZi5kL25vbV9kZWxfdGV1X2xsb2MuY29uZg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo nano /etc/httpd/conf.d/nom_del_teu_lloc.conf</pre></div><div class='content'></div><h2><p>3.3 Contingut del Fitxer de Configuració</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PFZpcnR1YWxIb3N0ICo6ODA+CiAgICBTZXJ2ZXJBZG1pbiBhZG1pbkBub21fZGVsX3RldV9sbG9jLmNvbQogICAgU2VydmVyTmFtZSBub21fZGVsX3RldV9sbG9jLmNvbQogICAgU2VydmVyQWxpYXMgd3d3Lm5vbV9kZWxfdGV1X2xsb2MuY29tCiAgICBEb2N1bWVudFJvb3QgL3Zhci93d3cvbm9tX2RlbF90ZXVfbGxvYwogICAgRXJyb3JMb2cgJHtBUEFDSEVfTE9HX0RJUn0vZXJyb3IubG9nCiAgICBDdXN0b21Mb2cgJHtBUEFDSEVfTE9HX0RJUn0vYWNjZXNzLmxvZyBjb21iaW5lZAo8L1ZpcnR1YWxIb3N0Pg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;VirtualHost *:80&gt;
    ServerAdmin admin@nom_del_teu_lloc.com
    ServerName nom_del_teu_lloc.com
    ServerAlias www.nom_del_teu_lloc.com
    DocumentRoot /var/www/nom_del_teu_lloc
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;</pre></div><div class='content'></div><h2><p>3.4 Habilitar el Lloc Web</p>
</h2>
<div class='content'><h4>Debian/Ubuntu</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBhMmVuc2l0ZSBub21fZGVsX3RldV9sbG9jLmNvbmYKc3VkbyBzeXN0ZW1jdGwgcmVsb2FkIGFwYWNoZTI="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo a2ensite nom_del_teu_lloc.conf
sudo systemctl reload apache2</pre></div><div class='content'><h4>CentOS/Fedora</h4>
<p>No cal habilitar llocs web explícitament, només cal reiniciar Apache:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBzeXN0ZW1jdGwgcmVzdGFydCBodHRwZA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo systemctl restart httpd</pre></div><div class='content'></div><h1><ol start="4">
<li>Seguretat Bàsica</li>
</ol>
</h1>
<div class='content'></div><h2><p>4.1 Deshabilitar la Llista de Directoris</p>
</h2>
<div class='content'><p>Per evitar que els usuaris vegin una llista de fitxers en els directoris, podem deshabilitar la llista de directoris:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PERpcmVjdG9yeSAvdmFyL3d3dy9ub21fZGVsX3RldV9sbG9jPgogICAgT3B0aW9ucyAtSW5kZXhlcwo8L0RpcmVjdG9yeT4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;Directory /var/www/nom_del_teu_lloc&gt;
    Options -Indexes
&lt;/Directory&gt;</pre></div><div class='content'></div><h2><p>4.2 Configurar el Tallafocs</p>
</h2>
<div class='content'><p>Assegurem-nos que el tallafocs permet el trànsit HTTP i HTTPS:</p>
<h4>Debian/Ubuntu</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyB1ZncgYWxsb3cgJ0FwYWNoZSBGdWxsJw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo ufw allow 'Apache Full'</pre></div><div class='content'><h4>CentOS/Fedora</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBmaXJld2FsbC1jbWQgLS1wZXJtYW5lbnQgLS1hZGQtc2VydmljZT1odHRwCnN1ZG8gZmlyZXdhbGwtY21kIC0tcGVybWFuZW50IC0tYWRkLXNlcnZpY2U9aHR0cHMKc3VkbyBmaXJld2FsbC1jbWQgLS1yZWxvYWQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload</pre></div><div class='content'></div><h1><p>Exercici Pràctic</p>
</h1>
<div class='content'></div><h2><p>Objectiu</p>
</h2>
<div class='content'><p>Configurar un servidor web Apache que serveixi un lloc web simple.</p>
</div><h2><p>Passos</p>
</h2>
<div class='content'><ol>
<li>Instal·la Apache.</li>
<li>Crea un directori per al lloc web.</li>
<li>Crea un fitxer HTML simple dins del directori del lloc web.</li>
<li>Configura un lloc web virtual per servir el fitxer HTML.</li>
<li>Verifica que el lloc web és accessible des del navegador.</li>
</ol>
</div><h2><p>Solució</p>
</h2>
<div class='content'><ol>
<li>
<p>Instal·lació d'Apache:</p>
<pre><code class="language-bash">sudo apt update
sudo apt install apache2
</code></pre>
</li>
<li>
<p>Creació del directori del lloc web:</p>
<pre><code class="language-bash">sudo mkdir -p /var/www/exemple
sudo chown -R $USER:$USER /var/www/exemple
sudo chmod -R 755 /var/www/exemple
</code></pre>
</li>
<li>
<p>Creació d'un fitxer HTML simple:</p>
<pre><code class="language-bash">echo &quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hola, món!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot; &gt; /var/www/exemple/index.html
</code></pre>
</li>
<li>
<p>Configuració del lloc web virtual:</p>
<pre><code class="language-bash">sudo nano /etc/apache2/sites-available/exemple.conf
</code></pre>
<p>Contingut del fitxer:</p>
<pre><code class="language-apache">&lt;VirtualHost *:80&gt;
    ServerAdmin admin@exemple.com
    ServerName exemple.com
    ServerAlias www.exemple.com
    DocumentRoot /var/www/exemple
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
&lt;/VirtualHost&gt;
</code></pre>
<p>Habilitar el lloc web:</p>
<pre><code class="language-bash">sudo a2ensite exemple.conf
sudo systemctl reload apache2
</code></pre>
</li>
<li>
<p>Verificació:</p>
<p>Obre un navegador web i visita <code>http://exemple.com</code> (o l'adreça IP del teu servidor).</p>
</li>
</ol>
</div><h1><p>Conclusió</p>
</h1>
<div class='content'><p>En aquest tema, hem après a instal·lar i configurar un servidor web Apache en un sistema Linux. Hem cobert la configuració bàsica, la creació de llocs web virtuals i algunes mesures de seguretat bàsiques. Aquestes habilitats són fonamentals per a qualsevol administrador de sistemes que desitgi gestionar servidors web de manera eficient i segura.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-05-alta-disponibilitat-i-balanceig-de-carrega' title="Alta Disponibilitat i Balanceig de Càrrega">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='08-02-configuracio-d-un-servidor-de-base-de-dades' title="Configuració d'un Servidor de Base de Dades">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
