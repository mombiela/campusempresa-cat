<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>Alta Disponibilitat i Balanceig de Càrrega</title>

    <link rel="alternate" href="https://campusempresa.com/mod/linux/07-05-high-availability-and-load-balancing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/linux/07-05-alta-disponibilitat-i-balanceig-de-carrega" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/linux/07-05-high-availability-and-load-balancing" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.ea63f62b9e.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "ca";
  		var CATEGORY = "tech-tools";
  		var MOD_NAME = "linux";
  		var TEMA_NAME = "7-5";
  		var TYPE = "mod";
  		var PATH = "mod/linux/07-05-alta-disponibilitat-i-balanceig-de-carrega";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.86da6c742a.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/mod/linux/07-05-high-availability-and-load-balancing" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/linux/07-05-high-availability-and-load-balancing" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Tot el coneixement al teu abast</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my_modules" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Els meus cursos</b></i>
</a>
<a href="/end_modules" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalitzats             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="linux">
		<a  href="#" class="text-secondary d-none" data-read-mod="linux" data-read-unit="7-5" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar com a llegit
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="linux" data-unread-unit="7-5" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar com a no llegit
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contingut del curs
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-04-optimitzacio-del-nucli-de-linux' title="Optimització del Nucli de Linux" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-04-optimitzacio-del-nucli-de-linux' title="Optimització del Nucli de Linux" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Alta Disponibilitat i Balanceig de Càrrega</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='08-01-configuracio-d-un-servidor-web' title="Configuració d'un Servidor Web" class="py-2 px-3 btn btn-primary"
				data-read-mod="linux" data-read-unit="7-5">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='08-01-configuracio-d-un-servidor-web' title="Configuració d'un Servidor Web" class="py-2 px-3 btn btn-primary" 
				data-read-mod="linux" data-read-unit="7-5">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'></div><h1>Introducció</h1>
<div class='content'><p>En aquest tema, explorarem els conceptes d'alta disponibilitat i balanceig de càrrega en sistemes Linux. Aquests conceptes són essencials per garantir que els serveis crítics estiguin sempre disponibles i que les càrregues de treball es distribueixin de manera eficient entre diversos servidors.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'></div><h2>Alta Disponibilitat (HA)</h2>
<div class='content'><ul>
<li><strong>Definició</strong>: L'alta disponibilitat es refereix a la capacitat d'un sistema per continuar operant durant un període prolongat de temps, fins i tot en cas de fallades de components.</li>
<li><strong>Objectiu</strong>: Minimitzar el temps d'inactivitat i assegurar que els serveis estiguin disponibles el màxim temps possible.</li>
<li><strong>Components</strong>:
<ul>
<li><strong>Clúster HA</strong>: Un grup de servidors que treballen junts per proporcionar alta disponibilitat.</li>
<li><strong>Failover</strong>: El procés de transferir automàticament la càrrega de treball d'un servidor fallit a un altre servidor en el clúster.</li>
</ul>
</li>
</ul>
</div><h2>Balanceig de Càrrega</h2>
<div class='content'><ul>
<li><strong>Definició</strong>: El balanceig de càrrega és la distribució de càrregues de treball entre diversos servidors per optimitzar l'ús dels recursos, maximitzar el rendiment i evitar la sobrecàrrega d'un sol servidor.</li>
<li><strong>Objectiu</strong>: Assegurar que cap servidor estigui sobrecarregat i que els recursos es facin servir de manera eficient.</li>
<li><strong>Components</strong>:
<ul>
<li><strong>Balancejador de Càrrega</strong>: Un dispositiu o programari que distribueix les sol·licituds entrants entre diversos servidors.</li>
<li><strong>Algoritmes de Balanceig</strong>: Mètodes utilitzats per determinar com es distribueixen les sol·licituds (per exemple, round-robin, least connections, IP hash).</li>
</ul>
</li>
</ul>
</div><h1>Implementació Pràctica</h1>
<div class='content'></div><h2>Configuració d'un Clúster HA amb Pacemaker i Corosync</h2>
<div class='content'><ol>
<li>
<p><strong>Instal·lació de Paquets Necessaris</strong>:</p>
<pre><code class="language-bash">sudo apt-get update
sudo apt-get install pacemaker corosync
</code></pre>
</li>
<li>
<p><strong>Configuració de Corosync</strong>:</p>
<ul>
<li>Editeu el fitxer de configuració de Corosync (<code>/etc/corosync/corosync.conf</code>):</li>
</ul>
<pre><code class="language-bash">sudo nano /etc/corosync/corosync.conf
</code></pre>
<ul>
<li>Exemple de configuració:</li>
</ul>
<pre><code class="language-plaintext">totem {
    version: 2
    secauth: on
    cluster_name: mycluster
    transport: udpu
}

nodelist {
    node {
        ring0_addr: node1
        nodeid: 1
    }
    node {
        ring0_addr: node2
        nodeid: 2
    }
}

quorum {
    provider: corosync_votequorum
}
</code></pre>
</li>
<li>
<p><strong>Inici del Servei</strong>:</p>
<pre><code class="language-bash">sudo systemctl start corosync
sudo systemctl start pacemaker
</code></pre>
</li>
<li>
<p><strong>Creació de Recursos i Conjunts de Recursos</strong>:</p>
<ul>
<li>Exemple de creació d'un recurs IP:</li>
</ul>
<pre><code class="language-bash">sudo crm configure primitive myIP ocf:heartbeat:IPaddr2 params ip=192.168.1.100 cidr_netmask=24 op monitor interval=30s
</code></pre>
</li>
</ol>
</div><h2>Configuració d'un Balancejador de Càrrega amb HAProxy</h2>
<div class='content'><ol>
<li>
<p><strong>Instal·lació de HAProxy</strong>:</p>
<pre><code class="language-bash">sudo apt-get update
sudo apt-get install haproxy
</code></pre>
</li>
<li>
<p><strong>Configuració de HAProxy</strong>:</p>
<ul>
<li>Editeu el fitxer de configuració de HAProxy (<code>/etc/haproxy/haproxy.cfg</code>):</li>
</ul>
<pre><code class="language-bash">sudo nano /etc/haproxy/haproxy.cfg
</code></pre>
<ul>
<li>Exemple de configuració:</li>
</ul>
<pre><code class="language-plaintext">global
    log /dev/log local0
    log /dev/log local1 notice
    chroot /var/lib/haproxy
    stats socket /run/haproxy/admin.sock mode 660 level admin
    stats timeout 30s
    user haproxy
    group haproxy
    daemon

defaults
    log global
    mode http
    option httplog
    option dontlognull
    timeout connect 5000
    timeout client  50000
    timeout server  50000

frontend http_front
    bind *:80
    stats uri /haproxy?stats
    default_backend http_back

backend http_back
    balance roundrobin
    server server1 192.168.1.101:80 check
    server server2 192.168.1.102:80 check
</code></pre>
</li>
<li>
<p><strong>Inici del Servei</strong>:</p>
<pre><code class="language-bash">sudo systemctl start haproxy
</code></pre>
</li>
</ol>
</div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Configuració d'un Clúster HA</h2>
<div class='content'><ol>
<li>Configureu un clúster HA amb Pacemaker i Corosync en dos servidors.</li>
<li>Creeu un recurs IP que es mogui automàticament en cas de fallada d'un dels servidors.</li>
</ol>
</div><h2>Exercici 2: Configuració d'un Balancejador de Càrrega</h2>
<div class='content'><ol>
<li>Configureu HAProxy per balancejar la càrrega entre dos servidors web.</li>
<li>Proveu diferents algoritmes de balanceig (round-robin, least connections) i observeu el comportament.</li>
</ol>
</div><h1>Solucions</h1>
<div class='content'></div><h2>Solució a l'Exercici 1</h2>
<div class='content'><ol>
<li>Seguiu els passos de la secció &quot;Configuració d'un Clúster HA amb Pacemaker i Corosync&quot;.</li>
<li>Verifiqueu que el recurs IP es mogui correctament en cas de fallada d'un servidor:
<pre><code class="language-bash">sudo crm_mon -1
</code></pre>
</li>
</ol>
</div><h2>Solució a l'Exercici 2</h2>
<div class='content'><ol>
<li>Seguiu els passos de la secció &quot;Configuració d'un Balancejador de Càrrega amb HAProxy&quot;.</li>
<li>Editeu el fitxer de configuració de HAProxy per provar diferents algoritmes:
<pre><code class="language-plaintext">backend http_back
    balance leastconn
    server server1 192.168.1.101:80 check
    server server2 192.168.1.102:80 check
</code></pre>
</li>
</ol>
</div><h1>Resum</h1>
<div class='content'><p>En aquest tema, hem après sobre els conceptes d'alta disponibilitat i balanceig de càrrega, així com la seva implementació pràctica utilitzant Pacemaker, Corosync i HAProxy. Aquests coneixements són essencials per garantir que els serveis crítics estiguin sempre disponibles i que les càrregues de treball es distribueixin de manera eficient.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-04-optimitzacio-del-nucli-de-linux' title="Optimització del Nucli de Linux" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-04-optimitzacio-del-nucli-de-linux' title="Optimització del Nucli de Linux" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='08-01-configuracio-d-un-servidor-web' title="Configuració d'un Servidor Web" class="py-2 px-3 btn btn-primary"
				data-read-mod="linux" data-read-unit="7-5">
				Següent &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='08-01-configuracio-d-un-servidor-web' title="Configuració d'un Servidor Web" class="py-2 px-3 btn btn-primary" 
				data-read-mod="linux" data-read-unit="7-5">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Domini de Linux: De Principiant a Avançat</h1>
<h2>Mòdul 1: Introducció a Linux</h2>
<ul>
<li><a href="01-01-que-es-linux">Què és Linux?</a></li>
<li><a href="01-02-historia-de-linux">Història de Linux</a></li>
<li><a href="01-03-distribucions-de-linux">Distribucions de Linux</a></li>
<li><a href="01-04-instal·lant-linux">Instal·lant Linux</a></li>
<li><a href="01-05-estructura-del-sistema-de-fitxers-de-linux">Estructura del Sistema de Fitxers de Linux</a></li>
</ul>
<h2>Mòdul 2: Comandes Bàsiques de Linux</h2>
<ul>
<li><a href="02-01-introduccio-a-la-linia-de-comandes">Introducció a la Línia de Comandes</a></li>
<li><a href="02-02-navegant-pel-sistema-de-fitxers">Navegant pel Sistema de Fitxers</a></li>
<li><a href="02-03-operacions-amb-fitxers-i-directoris">Operacions amb Fitxers i Directoris</a></li>
<li><a href="02-04-visualitzacio-i-edicio-de-fitxers">Visualització i Edició de Fitxers</a></li>
<li><a href="02-05-permisos-i-propietat-dels-fitxers">Permisos i Propietat dels Fitxers</a></li>
</ul>
<h2>Mòdul 3: Habilitats Avançades de la Línia de Comandes</h2>
<ul>
<li><a href="03-01-us-de-comodins-i-expressions-regulars">Ús de Comodins i Expressions Regulars</a></li>
<li><a href="03-02-piping-i-redireccio">Piping i Redirecció</a></li>
<li><a href="03-03-gestio-de-processos">Gestió de Processos</a></li>
<li><a href="03-04-programacio-de-tasques-amb-cron">Programació de Tasques amb Cron</a></li>
<li><a href="03-05-comandes-de-xarxa">Comandes de Xarxa</a></li>
</ul>
<h2>Mòdul 4: Scripting de Shell</h2>
<ul>
<li><a href="04-01-introduccio-al-scripting-de-shell">Introducció al Scripting de Shell</a></li>
<li><a href="04-02-variables-i-tipus-de-dades">Variables i Tipus de Dades</a></li>
<li><a href="04-03-estructures-de-control">Estructures de Control</a></li>
<li><a href="04-04-funcions-i-biblioteques">Funcions i Biblioteques</a></li>
<li><a href="04-05-depuracio-i-gestio-d-errors">Depuració i Gestió d'Errors</a></li>
</ul>
<h2>Mòdul 5: Administració del Sistema</h2>
<ul>
<li><a href="05-01-gestio-d-usuaris-i-grups">Gestió d'Usuaris i Grups</a></li>
<li><a href="05-02-gestio-de-discs">Gestió de Discs</a></li>
<li><a href="05-03-gestio-de-paquets">Gestió de Paquets</a></li>
<li><a href="05-04-monitoritzacio-del-sistema-i-optimitzacio-del-rendiment">Monitorització del Sistema i Optimització del Rendiment</a></li>
<li><a href="05-05-copia-de-seguretat-i-restauracio">Còpia de Seguretat i Restauració</a></li>
</ul>
<h2>Mòdul 6: Xarxes i Seguretat</h2>
<ul>
<li><a href="06-01-configuracio-de-xarxa">Configuració de Xarxa</a></li>
<li><a href="06-02-tallafocs-i-seguretat">Tallafocs i Seguretat</a></li>
<li><a href="06-03-ssh-i-acces-remot">SSH i Accés Remot</a></li>
<li><a href="06-04-sistemes-de-deteccio-d-intrusions">Sistemes de Detecció d'Intrusions</a></li>
<li><a href="06-05-assegurant-sistemes-linux">Assegurant Sistemes Linux</a></li>
</ul>
<h2>Mòdul 7: Temes Avançats</h2>
<ul>
<li><a href="07-01-virtualitzacio-amb-linux">Virtualització amb Linux</a></li>
<li><a href="07-02-contenidors-de-linux-i-docker">Contenidors de Linux i Docker</a></li>
<li><a href="07-03-automatitzacio-amb-ansible">Automatització amb Ansible</a></li>
<li><a href="07-04-optimitzacio-del-nucli-de-linux">Optimització del Nucli de Linux</a></li>
<li><a href="07-05-alta-disponibilitat-i-balanceig-de-carrega">Alta Disponibilitat i Balanceig de Càrrega</a></li>
</ul>
<h2>Mòdul 8: Projectes Pràctics</h2>
<ul>
<li><a href="08-01-configuracio-d-un-servidor-web">Configuració d'un Servidor Web</a></li>
<li><a href="08-02-configuracio-d-un-servidor-de-base-de-dades">Configuració d'un Servidor de Base de Dades</a></li>
<li><a href="08-03-construccio-d-un-servidor-de-mitjans-domestic">Construcció d'un Servidor de Mitjans Domèstic</a></li>
<li><a href="08-04-creacio-d-un-servidor-vpn">Creació d'un Servidor VPN</a></li>
<li><a href="08-05-desplegament-d-un-cluster-de-kubernetes">Desplegament d'un Clúster de Kubernetes</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuari no autentificat</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<p id="loginModalEmail"></p>
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
