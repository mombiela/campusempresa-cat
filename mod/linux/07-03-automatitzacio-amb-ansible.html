<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatització amb Ansible</title>

    <link rel="alternate" href="https://campusempresa.com/mod/linux/07-03-automating-with-ansible" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/linux/07-03-automatitzacio-amb-ansible" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/linux/07-03-automating-with-ansible" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
							<a href="https://enterprisecampus.net/mod/linux/07-03-automating-with-ansible" class="px-2">EN</a></b>
				|
				<a href="https://campusempresa.com/mod/linux/07-03-automating-with-ansible" class="px-2">ES</a></b>
				|
				<b class="px-2">CA</b>
											</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Projecte</a>
				<a href="/about">Sobre nosaltres</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donacions</a>
				<a href="/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-02-contenidors-de-linux-i-docker' title="Contenidors de Linux i Docker">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Automatització amb Ansible</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-04-optimitzacio-del-nucli-de-linux' title="Optimització del Nucli de Linux">Següent &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció</h1>
<div class='content'><p>Ansible és una eina de gestió de configuració i automatització de tasques que permet als administradors de sistemes gestionar grans quantitats de servidors de manera eficient. Utilitza un llenguatge de configuració senzill basat en YAML, anomenat Playbooks, per definir les tasques a realitzar.</p>
</div><h2>Objectius del Mòdul</h2>
<div class='content'><ul>
<li>Comprendre què és Ansible i com funciona.</li>
<li>Aprendre a instal·lar i configurar Ansible.</li>
<li>Crear i executar Playbooks bàsics.</li>
<li>Gestionar inventaris de servidors.</li>
<li>Automatitzar tasques comunes amb Ansible.</li>
</ul>
</div><h1>Què és Ansible?</h1>
<div class='content'><p>Ansible és una eina de codi obert que permet la gestió de configuracions, el desplegament d'aplicacions i l'automatització de tasques. A diferència d'altres eines de gestió de configuració, Ansible no requereix agents instal·lats en els nodes gestionats, ja que utilitza SSH per comunicar-se amb ells.</p>
</div><h2>Característiques Clau</h2>
<div class='content'><ul>
<li><strong>Sense agents</strong>: No cal instal·lar cap programari addicional en els nodes gestionats.</li>
<li><strong>Basat en SSH</strong>: Utilitza SSH per comunicar-se amb els nodes.</li>
<li><strong>Declaratiu</strong>: Els Playbooks descriuen l'estat desitjat del sistema.</li>
<li><strong>Idempotent</strong>: Les tasques es poden executar múltiples vegades sense canviar l'estat del sistema si ja està en l'estat desitjat.</li>
</ul>
</div><h1>Instal·lació d'Ansible</h1>
<div class='content'></div><h2>Requisits Previs</h2>
<div class='content'><ul>
<li>Un sistema Linux amb accés a internet.</li>
<li>Privilegis de superusuari (root) o sudo.</li>
</ul>
</div><h2>Passos d'Instal·lació</h2>
<div class='content'><ol>
<li>
<p><strong>Actualitzar el sistema:</strong></p>
<pre><code class="language-bash">sudo apt update
sudo apt upgrade
</code></pre>
</li>
<li>
<p><strong>Instal·lar Ansible:</strong></p>
<pre><code class="language-bash">sudo apt install ansible
</code></pre>
</li>
<li>
<p><strong>Verificar la instal·lació:</strong></p>
<pre><code class="language-bash">ansible --version
</code></pre>
</li>
</ol>
</div><h1>Configuració Bàsica</h1>
<div class='content'></div><h2>Inventari</h2>
<div class='content'><p>L'inventari és un fitxer que conté la llista de nodes que Ansible gestionarà. Per defecte, es troba a <code>/etc/ansible/hosts</code>.</p>
<h4>Exemple d'Inventari</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("W3dlYnNlcnZlcnNdCndlYjEuZXhhbXBsZS5jb20Kd2ViMi5leGFtcGxlLmNvbQoKW2Ric2VydmVyc10KZGIxLmV4YW1wbGUuY29tCmRiMi5leGFtcGxlLmNvbQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>[webservers]
web1.example.com
web2.example.com

[dbservers]
db1.example.com
db2.example.com</pre></div><div class='content'></div><h2>Playbooks</h2>
<div class='content'><p>Els Playbooks són fitxers YAML que defineixen les tasques a realitzar en els nodes.</p>
<h4>Exemple de Playbook</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogSW5zdGFswrdsYXIgaSBjb25maWd1cmFyIEFwYWNoZQogIGhvc3RzOiB3ZWJzZXJ2ZXJzCiAgYmVjb21lOiB5ZXMKICB0YXNrczoKICAgIC0gbmFtZTogSW5zdGFswrdsYXIgQXBhY2hlCiAgICAgIGFwdDoKICAgICAgICBuYW1lOiBhcGFjaGUyCiAgICAgICAgc3RhdGU6IHByZXNlbnQKCiAgICAtIG5hbWU6IEluaWNpYXIgZWwgc2VydmVpIEFwYWNoZQogICAgICBzZXJ2aWNlOgogICAgICAgIG5hbWU6IGFwYWNoZTIKICAgICAgICBzdGF0ZTogc3RhcnRlZAogICAgICAgIGVuYWJsZWQ6IHllcw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Instal&middot;lar i configurar Apache
  hosts: webservers
  become: yes
  tasks:
    - name: Instal&middot;lar Apache
      apt:
        name: apache2
        state: present

    - name: Iniciar el servei Apache
      service:
        name: apache2
        state: started
        enabled: yes</pre></div><div class='content'></div><h1>Executar Playbooks</h1>
<div class='content'><p>Per executar un Playbook, utilitza la comanda <code>ansible-playbook</code> seguida del nom del fitxer del Playbook.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS1wbGF5Ym9vayAtaSAvcGF0aC90by9pbnZlbnRvcnkgL3BhdGgvdG8vcGxheWJvb2sueW1s"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-playbook -i /path/to/inventory /path/to/playbook.yml</pre></div><div class='content'></div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Crear un Inventari</h2>
<div class='content'><ol>
<li>Crea un fitxer d'inventari anomenat <code>hosts</code> amb el següent contingut:
<pre><code class="language-ini">[webservers]
web1.example.com
web2.example.com

[dbservers]
db1.example.com
db2.example.com
</code></pre>
</li>
</ol>
</div><h2>Exercici 2: Escriure un Playbook</h2>
<div class='content'><ol>
<li>Escriu un Playbook anomenat <code>install_apache.yml</code> que faci el següent:
<ul>
<li>Instal·li el paquet <code>apache2</code>.</li>
<li>Iniciï el servei <code>apache2</code> i asseguri que s'iniciï automàticament en arrencar el sistema.</li>
</ul>
</li>
</ol>
</div><h2>Solucions</h2>
<div class='content'><h4>Solució de l'Exercici 1</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("W3dlYnNlcnZlcnNdCndlYjEuZXhhbXBsZS5jb20Kd2ViMi5leGFtcGxlLmNvbQoKW2Ric2VydmVyc10KZGIxLmV4YW1wbGUuY29tCmRiMi5leGFtcGxlLmNvbQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>[webservers]
web1.example.com
web2.example.com

[dbservers]
db1.example.com
db2.example.com</pre></div><div class='content'><h4>Solució de l'Exercici 2</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogSW5zdGFswrdsYXIgaSBjb25maWd1cmFyIEFwYWNoZQogIGhvc3RzOiB3ZWJzZXJ2ZXJzCiAgYmVjb21lOiB5ZXMKICB0YXNrczoKICAgIC0gbmFtZTogSW5zdGFswrdsYXIgQXBhY2hlCiAgICAgIGFwdDoKICAgICAgICBuYW1lOiBhcGFjaGUyCiAgICAgICAgc3RhdGU6IHByZXNlbnQKCiAgICAtIG5hbWU6IEluaWNpYXIgZWwgc2VydmVpIEFwYWNoZQogICAgICBzZXJ2aWNlOgogICAgICAgIG5hbWU6IGFwYWNoZTIKICAgICAgICBzdGF0ZTogc3RhcnRlZAogICAgICAgIGVuYWJsZWQ6IHllcw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Instal&middot;lar i configurar Apache
  hosts: webservers
  become: yes
  tasks:
    - name: Instal&middot;lar Apache
      apt:
        name: apache2
        state: present

    - name: Iniciar el servei Apache
      service:
        name: apache2
        state: started
        enabled: yes</pre></div><div class='content'></div><h1>Errors Comuns i Consells</h1>
<div class='content'></div><h2>Errors Comuns</h2>
<div class='content'><ul>
<li><strong>Error de sintaxi en YAML</strong>: Assegura't que la indentació és correcta.</li>
<li><strong>Problemes de connexió SSH</strong>: Verifica que els nodes són accessibles via SSH i que les claus SSH estan configurades correctament.</li>
</ul>
</div><h2>Consells</h2>
<div class='content'><ul>
<li>Utilitza el mode de prova (<code>--check</code>) per veure què farà el Playbook sense fer canvis reals.</li>
<li>Utilitza variables per fer els Playbooks més flexibles i reutilitzables.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>En aquest mòdul, hem après què és Ansible, com instal·lar-lo i configurar-lo, i com crear i executar Playbooks bàsics. Amb aquestes habilitats, pots començar a automatitzar tasques comunes en els teus servidors Linux, millorant l'eficiència i reduint errors humans. En els següents mòduls, explorarem temes més avançats d'Ansible i altres eines d'automatització.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-02-contenidors-de-linux-i-docker' title="Contenidors de Linux i Docker">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-04-optimitzacio-del-nucli-de-linux' title="Optimització del Nucli de Linux">Següent &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
