<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Persistència de Dades</title>

    <link rel="alternate" href="https://campusempresa.com/mod/xcode/04-03-data-persistence" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/xcode/04-03-data-persistence" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/xcode/04-03-data-persistence" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<a href="https://enterprisecampus.net/mod/xcode/04-03-data-persistence" class="px-2">EN</a></b>
	|
	<a href="https://campusempresa.com/mod/xcode/04-03-data-persistence" class="px-2">ES</a></b>
	|
	<b class="px-2">CA</b>
</span>
			<span class="d-none d-md-inline"><br><cite>Tot el coneixement al teu abast</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
					 				<a href="/"><i class="bi bi-house-fill"></i> HOME</a>
											</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-02-fetching-displaying-data' title="Recuperant i Mostrant Dades">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Persistència de Dades</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-04-networking-apis' title="Xarxes i APIs">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>La persistència de dades és un aspecte fonamental en el desenvolupament d'aplicacions, ja que permet emmagatzemar informació de manera permanent. En aquest tema, aprendrem com utilitzar Core Data per gestionar la persistència de dades en les nostres aplicacions iOS.</p>
</div><h1>Objectius del Tema</h1>
<div class='content'><ul>
<li>Entendre què és Core Data i per què és útil.</li>
<li>Aprendre a configurar Core Data en un projecte Xcode.</li>
<li>Crear models de dades i gestionar les entitats.</li>
<li>Guardar, recuperar i eliminar dades utilitzant Core Data.</li>
</ul>
</div><h1>Què és Core Data?</h1>
<div class='content'><p>Core Data és un framework d'Apple que proporciona una solució robusta per gestionar models d'objectes i persistència de dades. És molt més que una simple base de dades, ja que també ofereix funcionalitats com la gestió de gràfics d'objectes, la validació de dades i la migració de dades.</p>
</div><h2>Avantatges de Core Data</h2>
<div class='content'><ul>
<li><strong>Gestió Automàtica de la Persistència:</strong> Core Data s'encarrega de la major part del treball relacionat amb la persistència de dades.</li>
<li><strong>Optimització del Rendiment:</strong> Core Data està optimitzat per a un rendiment eficient, especialment en aplicacions amb grans volums de dades.</li>
<li><strong>Integració amb l'Entorn de Desenvolupament:</strong> Core Data està ben integrat amb Xcode, facilitant la creació i gestió de models de dades.</li>
</ul>
</div><h1>Configurant Core Data en un Projecte Xcode</h1>
<div class='content'></div><h2>Passos per Configurar Core Data</h2>
<div class='content'><ol>
<li>
<p><strong>Crear un Nou Projecte Xcode:</strong></p>
<ul>
<li>Obre Xcode i crea un nou projecte seleccionant &quot;App&quot; sota la secció &quot;iOS&quot;.</li>
<li>Assegura't de marcar l'opció &quot;Use Core Data&quot; durant la configuració del projecte.</li>
</ul>
</li>
<li>
<p><strong>Entendre els Fitxers Generats:</strong></p>
<ul>
<li><strong>Model de Dades (.xcdatamodeld):</strong> Aquest fitxer conté la definició del model de dades, incloent les entitats, atributs i relacions.</li>
<li><strong>Persistent Container:</strong> Aquest és l'objecte principal que gestiona el context de dades i la coordinació de la persistència.</li>
</ul>
</li>
</ol>
</div><h2>Exemple de Configuració</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IENvcmVEYXRhCgpjbGFzcyBBcHBEZWxlZ2F0ZTogVUlSZXNwb25kZXIsIFVJQXBwbGljYXRpb25EZWxlZ2F0ZSB7CiAgICB2YXIgd2luZG93OiBVSVdpbmRvdz8KICAgIGxhenkgdmFyIHBlcnNpc3RlbnRDb250YWluZXI6IE5TUGVyc2lzdGVudENvbnRhaW5lciA9IHsKICAgICAgICBsZXQgY29udGFpbmVyID0gTlNQZXJzaXN0ZW50Q29udGFpbmVyKG5hbWU6ICJNb2RlbE5hbWUiKQogICAgICAgIGNvbnRhaW5lci5sb2FkUGVyc2lzdGVudFN0b3JlcyB7IChzdG9yZURlc2NyaXB0aW9uLCBlcnJvcikgaW4KICAgICAgICAgICAgaWYgbGV0IGVycm9yID0gZXJyb3IgYXMgTlNFcnJvcj8gewogICAgICAgICAgICAgICAgZmF0YWxFcnJvcigiVW5yZXNvbHZlZCBlcnJvciBcKGVycm9yKSwgXChlcnJvci51c2VySW5mbykiKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb250YWluZXIKICAgIH0oKQogICAgCiAgICBmdW5jIHNhdmVDb250ZXh0KCkgewogICAgICAgIGxldCBjb250ZXh0ID0gcGVyc2lzdGVudENvbnRhaW5lci52aWV3Q29udGV4dAogICAgICAgIGlmIGNvbnRleHQuaGFzQ2hhbmdlcyB7CiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIHRyeSBjb250ZXh0LnNhdmUoKQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgIGxldCBuc2Vycm9yID0gZXJyb3IgYXMgTlNFcnJvcgogICAgICAgICAgICAgICAgZmF0YWxFcnJvcigiVW5yZXNvbHZlZCBlcnJvciBcKG5zZXJyb3IpLCBcKG5zZXJyb3IudXNlckluZm8pIikKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import CoreData

class AppDelegate: UIResponder, UIApplicationDelegate {
    var window: UIWindow?
    lazy var persistentContainer: NSPersistentContainer = {
        let container = NSPersistentContainer(name: &quot;ModelName&quot;)
        container.loadPersistentStores { (storeDescription, error) in
            if let error = error as NSError? {
                fatalError(&quot;Unresolved error \(error), \(error.userInfo)&quot;)
            }
        }
        return container
    }()
    
    func saveContext() {
        let context = persistentContainer.viewContext
        if context.hasChanges {
            do {
                try context.save()
            } catch {
                let nserror = error as NSError
                fatalError(&quot;Unresolved error \(nserror), \(nserror.userInfo)&quot;)
            }
        }
    }
}</pre></div><div class='content'></div><h1>Creant Models de Dades</h1>
<div class='content'></div><h2>Definint Entitats i Atributs</h2>
<div class='content'><ul>
<li><strong>Entitat:</strong> Representa una classe d'objectes en el model de dades.</li>
<li><strong>Atribut:</strong> Representa una propietat d'una entitat.</li>
</ul>
</div><h2>Exemple de Creació d'Entitat</h2>
<div class='content'><ol>
<li>Obre el fitxer <code>.xcdatamodeld</code> en Xcode.</li>
<li>Afegeix una nova entitat, per exemple, &quot;Person&quot;.</li>
<li>Afegeix atributs a l'entitat, com ara &quot;name&quot; (String) i &quot;age&quot; (Integer).</li>
</ol>
</div><h1>Guardar, Recuperar i Eliminar Dades</h1>
<div class='content'></div><h2>Guardar Dades</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuYyBzYXZlUGVyc29uKG5hbWU6IFN0cmluZywgYWdlOiBJbnQxNikgewogICAgbGV0IGNvbnRleHQgPSBwZXJzaXN0ZW50Q29udGFpbmVyLnZpZXdDb250ZXh0CiAgICBsZXQgcGVyc29uID0gUGVyc29uKGNvbnRleHQ6IGNvbnRleHQpCiAgICBwZXJzb24ubmFtZSA9IG5hbWUKICAgIHBlcnNvbi5hZ2UgPSBhZ2UKICAgIAogICAgZG8gewogICAgICAgIHRyeSBjb250ZXh0LnNhdmUoKQogICAgfSBjYXRjaCB7CiAgICAgICAgcHJpbnQoIkZhaWxlZCB0byBzYXZlIHBlcnNvbjogXChlcnJvcikiKQogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>func savePerson(name: String, age: Int16) {
    let context = persistentContainer.viewContext
    let person = Person(context: context)
    person.name = name
    person.age = age
    
    do {
        try context.save()
    } catch {
        print(&quot;Failed to save person: \(error)&quot;)
    }
}</pre></div><div class='content'></div><h2>Recuperar Dades</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuYyBmZXRjaFBlb3BsZSgpIC0+IFtQZXJzb25dIHsKICAgIGxldCBjb250ZXh0ID0gcGVyc2lzdGVudENvbnRhaW5lci52aWV3Q29udGV4dAogICAgbGV0IGZldGNoUmVxdWVzdDogTlNGZXRjaFJlcXVlc3Q8UGVyc29uPiA9IFBlcnNvbi5mZXRjaFJlcXVlc3QoKQogICAgCiAgICBkbyB7CiAgICAgICAgbGV0IHBlb3BsZSA9IHRyeSBjb250ZXh0LmZldGNoKGZldGNoUmVxdWVzdCkKICAgICAgICByZXR1cm4gcGVvcGxlCiAgICB9IGNhdGNoIHsKICAgICAgICBwcmludCgiRmFpbGVkIHRvIGZldGNoIHBlb3BsZTogXChlcnJvcikiKQogICAgICAgIHJldHVybiBbXQogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>func fetchPeople() -&gt; [Person] {
    let context = persistentContainer.viewContext
    let fetchRequest: NSFetchRequest&lt;Person&gt; = Person.fetchRequest()
    
    do {
        let people = try context.fetch(fetchRequest)
        return people
    } catch {
        print(&quot;Failed to fetch people: \(error)&quot;)
        return []
    }
}</pre></div><div class='content'></div><h2>Eliminar Dades</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuYyBkZWxldGVQZXJzb24ocGVyc29uOiBQZXJzb24pIHsKICAgIGxldCBjb250ZXh0ID0gcGVyc2lzdGVudENvbnRhaW5lci52aWV3Q29udGV4dAogICAgY29udGV4dC5kZWxldGUocGVyc29uKQogICAgCiAgICBkbyB7CiAgICAgICAgdHJ5IGNvbnRleHQuc2F2ZSgpCiAgICB9IGNhdGNoIHsKICAgICAgICBwcmludCgiRmFpbGVkIHRvIGRlbGV0ZSBwZXJzb246IFwoZXJyb3IpIikKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>func deletePerson(person: Person) {
    let context = persistentContainer.viewContext
    context.delete(person)
    
    do {
        try context.save()
    } catch {
        print(&quot;Failed to delete person: \(error)&quot;)
    }
}</pre></div><div class='content'></div><h1>Exercicis Pràctics</h1>
<div class='content'></div><h2>Exercici 1: Crear i Guardar una Entitat</h2>
<div class='content'><ol>
<li>Crea una nova entitat anomenada &quot;Book&quot; amb els atributs &quot;title&quot; (String) i &quot;author&quot; (String).</li>
<li>Escriu una funció per guardar un llibre en Core Data.</li>
</ol>
</div><h2>Exercici 2: Recuperar i Mostrar Dades</h2>
<div class='content'><ol>
<li>Escriu una funció per recuperar tots els llibres guardats.</li>
<li>Mostra els llibres en una taula.</li>
</ol>
</div><h2>Exercici 3: Eliminar una Entitat</h2>
<div class='content'><ol>
<li>Escriu una funció per eliminar un llibre específic.</li>
<li>Actualitza la taula després d'eliminar el llibre.</li>
</ol>
</div><h1>Solucions als Exercicis</h1>
<div class='content'></div><h2>Solució Exercici 1</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuYyBzYXZlQm9vayh0aXRsZTogU3RyaW5nLCBhdXRob3I6IFN0cmluZykgewogICAgbGV0IGNvbnRleHQgPSBwZXJzaXN0ZW50Q29udGFpbmVyLnZpZXdDb250ZXh0CiAgICBsZXQgYm9vayA9IEJvb2soY29udGV4dDogY29udGV4dCkKICAgIGJvb2sudGl0bGUgPSB0aXRsZQogICAgYm9vay5hdXRob3IgPSBhdXRob3IKICAgIAogICAgZG8gewogICAgICAgIHRyeSBjb250ZXh0LnNhdmUoKQogICAgfSBjYXRjaCB7CiAgICAgICAgcHJpbnQoIkZhaWxlZCB0byBzYXZlIGJvb2s6IFwoZXJyb3IpIikKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>func saveBook(title: String, author: String) {
    let context = persistentContainer.viewContext
    let book = Book(context: context)
    book.title = title
    book.author = author
    
    do {
        try context.save()
    } catch {
        print(&quot;Failed to save book: \(error)&quot;)
    }
}</pre></div><div class='content'></div><h2>Solució Exercici 2</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuYyBmZXRjaEJvb2tzKCkgLT4gW0Jvb2tdIHsKICAgIGxldCBjb250ZXh0ID0gcGVyc2lzdGVudENvbnRhaW5lci52aWV3Q29udGV4dAogICAgbGV0IGZldGNoUmVxdWVzdDogTlNGZXRjaFJlcXVlc3Q8Qm9vaz4gPSBCb29rLmZldGNoUmVxdWVzdCgpCiAgICAKICAgIGRvIHsKICAgICAgICBsZXQgYm9va3MgPSB0cnkgY29udGV4dC5mZXRjaChmZXRjaFJlcXVlc3QpCiAgICAgICAgcmV0dXJuIGJvb2tzCiAgICB9IGNhdGNoIHsKICAgICAgICBwcmludCgiRmFpbGVkIHRvIGZldGNoIGJvb2tzOiBcKGVycm9yKSIpCiAgICAgICAgcmV0dXJuIFtdCiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>func fetchBooks() -&gt; [Book] {
    let context = persistentContainer.viewContext
    let fetchRequest: NSFetchRequest&lt;Book&gt; = Book.fetchRequest()
    
    do {
        let books = try context.fetch(fetchRequest)
        return books
    } catch {
        print(&quot;Failed to fetch books: \(error)&quot;)
        return []
    }
}</pre></div><div class='content'></div><h2>Solució Exercici 3</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuYyBkZWxldGVCb29rKGJvb2s6IEJvb2spIHsKICAgIGxldCBjb250ZXh0ID0gcGVyc2lzdGVudENvbnRhaW5lci52aWV3Q29udGV4dAogICAgY29udGV4dC5kZWxldGUoYm9vaykKICAgIAogICAgZG8gewogICAgICAgIHRyeSBjb250ZXh0LnNhdmUoKQogICAgfSBjYXRjaCB7CiAgICAgICAgcHJpbnQoIkZhaWxlZCB0byBkZWxldGUgYm9vazogXChlcnJvcikiKQogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>func deleteBook(book: Book) {
    let context = persistentContainer.viewContext
    context.delete(book)
    
    do {
        try context.save()
    } catch {
        print(&quot;Failed to delete book: \(error)&quot;)
    }
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>En aquest tema, hem après com configurar Core Data en un projecte Xcode, crear models de dades, i gestionar la persistència de dades mitjançant la creació, recuperació i eliminació d'entitats. La persistència de dades és una habilitat essencial per a qualsevol desenvolupador d'aplicacions, i Core Data proporciona una eina poderosa i flexible per gestionar-la. En el proper tema, explorarem com treballar amb xarxes i APIs per recuperar dades externes i integrar-les en les nostres aplicacions.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-02-fetching-displaying-data' title="Recuperant i Mostrant Dades">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-04-networking-apis' title="Xarxes i APIs">
				<span class="d-none d-md-inline">Següent &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
				<!-- 
	<h1>Publicitat</h1>
	<p>Aquest espai està destinat a publicitat.</p>
	<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
	<p>Gràcies per col·laborar!</p>
	 -->
			









		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Projecte</a> | 
<a href="/about">Sobre nosaltres</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donacions</a> | 
<a href="/licence">Llicència</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir cookies per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Acceptar</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
